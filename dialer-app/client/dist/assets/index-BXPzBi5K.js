var H2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{j as s,I as lt,s as oe,u as Et,M as Ar,a as Rr,b as Or,c as Zr,d as wn,e as en,V as he,T as L,D as zt,G as co,f as pt,F as pe,g as fe,h as ke,S as gn,i as mn,k as ko,B as ne,H as de,l as Er,m as le,n as mt,o as je,p as U,q as Pr,r as po,A as Qr,L as eu,t as He,v as zi,C as js,w as Me,P as ex,x as $t,y as G2,z as U2,E as Xe,J as W2,K as Y2,N as Ls,O as V2,Q as Fs,R as K2,U as Sa,W as Yt,X as as,Y as ls,Z as Q2,_ as J2,$ as X2,a0 as Z2,a1 as ev,a2 as hs,a3 as Ku,a4 as gi,a5 as tv,a6 as rv,a7 as jp,a8 as Mn,a9 as nv,aa as Dn,ab as tu,ac as ov,ad as sv,ae as iv,af as kp,ag as Ep,ah as av,ai as lv,aj as tx,ak as rx,al as nx,am as cs,an as cv,ao as dv,ap as uv,aq as hv,ar as pv,as as fv,at as gv,au as mv,av as _p,aw as xv,ax as bv,ay as yv,az as vv}from"./ui-Cl7ZBdRp.js";import{d as wv,g as Eo,a as h,u as Qt,c as v,e as Qu,f as ks,b as Cv,r as $i,L as Tp,B as Sv,h as jv,i as wt,N as ox}from"./vendor-DAo353KX.js";var qO=H2((Bt,qt)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var zs={},Ap;function kv(){if(Ap)return zs;Ap=1;var e=wv();return zs.createRoot=e.createRoot,zs.hydrateRoot=e.hydrateRoot,zs}var Ev=kv();const _v=Eo(Ev);var _o=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xn=typeof window>"u"||"Deno"in globalThis;function Rt(){}function Tv(e,t){return typeof e=="function"?e(t):e}function ru(e){return typeof e=="number"&&e>=0&&e!==1/0}function sx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Vr(e,t){return typeof e=="function"?e(t):e}function Wt(e,t){return typeof e=="function"?e(t):e}function Rp(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:i,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==Ju(a,t.options))return!1}else if(!ps(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||o&&o!==t.state.fetchStatus||i&&!i(t))}function Op(e,t){const{exact:r,status:n,predicate:o,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(bn(t.options.mutationKey)!==bn(i))return!1}else if(!ps(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Ju(e,t){return(t?.queryKeyHashFn||bn)(e)}function bn(e){return JSON.stringify(e,(t,r)=>nu(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function ps(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ps(e[r],t[r])):!1}function ix(e,t){if(e===t)return e;const r=Pp(e)&&Pp(t);if(r||nu(e)&&nu(t)){const n=r?e:Object.keys(e),o=n.length,i=r?t:Object.keys(t),a=i.length,l=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<a;u++){const p=r?u:i[u];(!r&&c.has(p)||r)&&e[p]===void 0&&t[p]===void 0?(l[p]=void 0,d++):(l[p]=ix(e[p],t[p]),l[p]===e[p]&&e[p]!==void 0&&d++)}return o===a&&d===o?e:l}return t}function mi(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Pp(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function nu(e){if(!Mp(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Mp(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Mp(e){return Object.prototype.toString.call(e)==="[object Object]"}function Av(e){return new Promise(t=>{setTimeout(t,e)})}function ou(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ix(e,t):t}function Rv(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Ov(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Xu=Symbol();function ax(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Xu?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function lx(e,t){return typeof e=="function"?e(...t):!!e}var Pv=class extends _o{#t;#e;#r;constructor(){super(),this.#r=e=>{if(!xn&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Zu=new Pv,Mv=class extends _o{#t=!0;#e;#r;constructor(){super(),this.#r=e=>{if(!xn&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#t}},xi=new Mv;function su(){let e,t;const r=new Promise((o,i)=>{e=o,t=i});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}function Dv(e){return Math.min(1e3*2**e,3e4)}function cx(e){return(e??"online")==="online"?xi.isOnline():!0}var dx=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function ja(e){return e instanceof dx}function ux(e){let t=!1,r=0,n=!1,o;const i=su(),a=m=>{n||(f(new dx(m)),e.abort?.())},l=()=>{t=!0},c=()=>{t=!1},d=()=>Zu.isFocused()&&(e.networkMode==="always"||xi.isOnline())&&e.canRun(),u=()=>cx(e.networkMode)&&e.canRun(),p=m=>{n||(n=!0,e.onSuccess?.(m),o?.(),i.resolve(m))},f=m=>{n||(n=!0,e.onError?.(m),o?.(),i.reject(m))},b=()=>new Promise(m=>{o=x=>{(n||d())&&m(x)},e.onPause?.()}).then(()=>{o=void 0,n||e.onContinue?.()}),g=()=>{if(n)return;let m;const x=r===0?e.initialPromise:void 0;try{m=x??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(p).catch(y=>{if(n)return;const E=e.retry??(xn?0:3),A=e.retryDelay??Dv,M=typeof A=="function"?A(r,y):A,k=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,y);if(t||!k){f(y);return}r++,e.onFail?.(r,y),Av(M).then(()=>d()?void 0:b()).then(()=>{t?f(y):g()})})};return{promise:i,cancel:a,continue:()=>(o?.(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():b().then(g),i)}}var Iv=e=>setTimeout(e,0);function Nv(){let e=[],t=0,r=l=>{l()},n=l=>{l()},o=Iv;const i=l=>{t?e.push(l):o(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&o(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{o=l}}}var ct=Nv(),hx=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ru(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(xn?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Lv=class extends hx{#t;#e;#r;#n;#o;#i;#a;constructor(e){super(),this.#a=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=Fv(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#o?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=ou(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#o?.promise;return this.#o?.cancel(e),t?t.then(Rt).catch(Rt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Wt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Vr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!sx(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#o?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#o?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#o&&(this.#a?this.#o.cancel({revert:!0}):this.#o.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#o)return this.#o.continueRetry(),this.#o.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{const c=ax(this.options,t),u=(()=>{const p={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(p),p})();return this.#a=!1,this.options.persister?this.options.persister(c,u,this):c(u)},a=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:o};return n(c),c})();this.options.behavior?.onFetch(a,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const l=c=>{ja(c)&&c.silent||this.#s({type:"error",error:c}),ja(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#o=ux({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(d){l(d);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:l,onFail:(c,d)=>{this.#s({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#o.start()}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...px(r.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return ja(n)&&n.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ct.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function px(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cx(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Fv(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zv=class extends _o{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,r){const n=t.queryKey,o=t.queryHash??Ju(n,t);let i=this.get(o);return i||(i=new Lv({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ct.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Rp(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Rp(e,r)):t}notify(e){ct.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ct.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ct.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$v=class extends hx{#t;#e;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||fx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})};this.#r=ux({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(o,i)=>{this.#n({type:"failed",failureCount:o,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)t();else{this.#n({type:"pending",variables:e,isPaused:n}),await this.#e.config.onMutate?.(e,this);const i=await this.options.onMutate?.(e);i!==this.state.context&&this.#n({type:"pending",context:i,variables:e,isPaused:n})}const o=await this.#r.start();return await this.#e.config.onSuccess?.(o,e,this.state.context,this),await this.options.onSuccess?.(o,e,this.state.context),await this.#e.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,e,this.state.context),this.#n({type:"success",data:o}),o}catch(o){try{throw await this.#e.config.onError?.(o,e,this.state.context,this),await this.options.onError?.(o,e,this.state.context),await this.#e.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,e,this.state.context),o}finally{this.#n({type:"error",error:o})}}finally{this.#e.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ct.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function fx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bv=class extends _o{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(e,t,r){const n=new $v({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=$s(e);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=$s(e);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$s(e);if(typeof t=="string"){const n=this.#e.get(t)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=$s(e);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ct.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Op(t,r))}findAll(e={}){return this.getAll().filter(t=>Op(e,t))}notify(e){ct.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ct.batch(()=>Promise.all(e.map(t=>t.continue().catch(Rt))))}};function $s(e){return e.options.scope?.id}function Dp(e){return{onFetch:(t,r)=>{const n=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const p=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=ax(t.options,t.fetchOptions),b=async(g,m,x)=>{if(u)return Promise.reject();if(m==null&&g.pages.length)return Promise.resolve(g);const E=(()=>{const w={client:t.client,queryKey:t.queryKey,pageParam:m,direction:x?"backward":"forward",meta:t.options.meta};return p(w),w})(),A=await f(E),{maxPages:M}=t.options,k=x?Ov:Rv;return{pages:k(g.pages,A,M),pageParams:k(g.pageParams,m,M)}};if(o&&i.length){const g=o==="backward",m=g?qv:Ip,x={pages:i,pageParams:a},y=m(n,x);l=await b(x,y,g)}else{const g=e??i.length;do{const m=c===0?a[0]??n.initialPageParam:Ip(n,l);if(c>0&&m==null)break;l=await b(l,m),c++}while(c<g)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function Ip(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function qv(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var gx=class{#t;#e;#r;#n;#o;#i;#a;#s;constructor(e={}){this.#t=e.queryCache||new zv,this.#e=e.mutationCache||new Bv,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=Zu.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#s=xi.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#t.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Vr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#t.get(n.queryHash)?.state.data,a=Tv(t,i);if(a!==void 0)return this.#t.build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return ct.batch(()=>this.#t.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;ct.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#t;return ct.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ct.batch(()=>this.#t.findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(Rt).catch(Rt)}invalidateQueries(e,t={}){return ct.batch(()=>(this.#t.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ct.batch(()=>this.#t.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let i=o.fetch(void 0,r);return r.throwOnError||(i=i.catch(Rt)),o.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Rt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Vr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rt).catch(Rt)}fetchInfiniteQuery(e){return e.behavior=Dp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rt).catch(Rt)}ensureInfiniteQueryData(e){return e.behavior=Dp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xi.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(bn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{ps(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#o.set(bn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()],r={};return t.forEach(n=>{ps(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ju(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xu&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Hv=class extends _o{constructor(e,t){super(),this.options=t,this.#t=e,this.#s=null,this.#a=su(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#r=void 0;#n=void 0;#o;#i;#a;#s;#g;#h;#p;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Np(this.#e,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iu(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iu(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wt(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#e.setOptions(this.options),t._defaulted&&!mi(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Lp(this.#e,r,this.options,t)&&this.#u(),this.updateResult(),n&&(this.#e!==r||Wt(this.options.enabled,this.#e)!==Wt(t.enabled,this.#e)||Vr(this.options.staleTime,this.#e)!==Vr(t.staleTime,this.#e))&&this.#m();const o=this.#x();n&&(this.#e!==r||Wt(this.options.enabled,this.#e)!==Wt(t.enabled,this.#e)||o!==this.#l)&&this.#b(o)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),r=this.createResult(t,e);return Uv(this,r)&&(this.#n=r,this.#i=this.options,this.#o=this.#e.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),Reflect.get(r,n))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(e){this.#C();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Rt)),t}#m(){this.#v();const e=Vr(this.options.staleTime,this.#e);if(xn||this.#n.isStale||!ru(e))return;const r=sx(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#l=e,!(xn||Wt(this.options.enabled,this.#e)===!1||!ru(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Zu.isFocused())&&this.#u()},this.#l))}#y(){this.#m(),this.#b(this.#x())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#e,n=this.options,o=this.#n,i=this.#o,a=this.#i,c=e!==r?e.state:this.#r,{state:d}=e;let u={...d},p=!1,f;if(t._optimisticResults){const _=this.hasListeners(),z=!_&&Np(e,t),D=_&&Lp(e,r,t,n);(z||D)&&(u={...u,...px(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:m}=u;f=u.data;let x=!1;if(t.placeholderData!==void 0&&f===void 0&&m==="pending"){let _;o?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(_=o.data,x=!0):_=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,_!==void 0&&(m="success",f=ou(o?.data,_,t),p=!0)}if(t.select&&f!==void 0&&!x)if(o&&f===i?.data&&t.select===this.#g)f=this.#h;else try{this.#g=t.select,f=t.select(f),f=ou(o?.data,f,t),this.#h=f,this.#s=null}catch(_){this.#s=_}this.#s&&(b=this.#s,f=this.#h,g=Date.now(),m="error");const y=u.fetchStatus==="fetching",E=m==="pending",A=m==="error",M=E&&y,k=f!==void 0,C={status:m,fetchStatus:u.fetchStatus,isPending:E,isSuccess:m==="success",isError:A,isInitialLoading:M,isLoading:M,data:f,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!E,isLoadingError:A&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:A&&k,isStale:eh(e,t),refetch:this.refetch,promise:this.#a,isEnabled:Wt(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const _=S=>{C.status==="error"?S.reject(C.error):C.data!==void 0&&S.resolve(C.data)},z=()=>{const S=this.#a=C.promise=su();_(S)},D=this.#a;switch(D.status){case"pending":e.queryHash===r.queryHash&&_(D);break;case"fulfilled":(C.status==="error"||C.data!==D.value)&&z();break;case"rejected":(C.status!=="error"||C.error!==D.reason)&&z();break}}return C}updateResult(){const e=this.#n,t=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#i=this.options,this.#o.data!==void 0&&(this.#p=this.#e),mi(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!this.#f.size)return!0;const i=new Set(o??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(a=>{const l=a;return this.#n[l]!==e[l]&&i.has(l)})};this.#S({listeners:r()})}#C(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){ct.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Gv(e,t){return Wt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Np(e,t){return Gv(e,t)||e.state.data!==void 0&&iu(e,t,t.refetchOnMount)}function iu(e,t,r){if(Wt(t.enabled,e)!==!1&&Vr(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&eh(e,t)}return!1}function Lp(e,t,r,n){return(e!==t||Wt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&eh(e,r)}function eh(e,t){return Wt(t.enabled,e)!==!1&&e.isStaleByTime(Vr(t.staleTime,e))}function Uv(e,t){return!mi(e.getCurrentResult(),t)}var Wv=class extends _o{#t;#e=void 0;#r;#n;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),mi(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&bn(r.mutationKey)!==bn(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#i()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#o(){const t=this.#r?.state??fx();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){ct.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,r,n),this.#n.onSettled?.(t.data,null,r,n)):t?.type==="error"&&(this.#n.onError?.(t.error,r,n),this.#n.onSettled?.(void 0,t.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},mx=h.createContext(void 0),Mr=e=>{const t=h.useContext(mx);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xx=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(mx.Provider,{value:e,children:t})),bx=h.createContext(!1),Yv=()=>h.useContext(bx);bx.Provider;function Vv(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Kv=h.createContext(Vv()),Qv=()=>h.useContext(Kv),Jv=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Xv=e=>{h.useEffect(()=>{e.clearReset()},[e])},Zv=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||lx(r,[e.error,n])),ew=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},tw=(e,t)=>e.isLoading&&e.isFetching&&!t,rw=(e,t)=>e?.suspense&&t.isPending,Fp=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function nw(e,t,r){const n=Yv(),o=Qv(),i=Mr(),a=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=n?"isRestoring":"optimistic",ew(a),Jv(a,o),Xv(o);const l=!i.getQueryCache().get(a.queryHash),[c]=h.useState(()=>new t(i,a)),d=c.getOptimisticResult(a),u=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(p=>{const f=u?c.subscribe(ct.batchCalls(p)):Rt;return c.updateResult(),f},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(a)},[a,c]),rw(a,d))throw Fp(a,c,o);if(Zv({result:d,errorResetBoundary:o,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!xn&&tw(d,n)&&(l?Fp(a,c,o):i.getQueryCache().get(a.queryHash)?.promise)?.catch(Rt).finally(()=>{c.updateResult()}),a.notifyOnChangeProps?d:c.trackResult(d)}function Es(e,t){return nw(e,Hv)}function Zo(e,t){const r=Mr(),[n]=h.useState(()=>new Wv(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const o=h.useSyncExternalStore(h.useCallback(a=>n.subscribe(ct.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((a,l)=>{n.mutate(a,l).catch(Rt)},[n]);if(o.error&&lx(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:i,mutateAsync:o.mutate}}const ow="modulepreload",sw=function(e){return"/"+e},zp={},bi=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");o=c(r.map(d=>{if(d=sw(d),d in zp)return;zp[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ow,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((b,g)=>{f.addEventListener("load",b),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function yx(e,t){return function(){return e.apply(t,arguments)}}const{toString:iw}=Object.prototype,{getPrototypeOf:th}=Object,{iterator:Bi,toStringTag:vx}=Symbol,qi=(e=>t=>{const r=iw.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),cr=e=>(e=e.toLowerCase(),t=>qi(t)===e),Hi=e=>t=>typeof t===e,{isArray:To}=Array,fs=Hi("undefined");function aw(e){return e!==null&&!fs(e)&&e.constructor!==null&&!fs(e.constructor)&&Pt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wx=cr("ArrayBuffer");function lw(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wx(e.buffer),t}const cw=Hi("string"),Pt=Hi("function"),Cx=Hi("number"),Gi=e=>e!==null&&typeof e=="object",dw=e=>e===!0||e===!1,ti=e=>{if(qi(e)!=="object")return!1;const t=th(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(vx in e)&&!(Bi in e)},uw=cr("Date"),hw=cr("File"),pw=cr("Blob"),fw=cr("FileList"),gw=e=>Gi(e)&&Pt(e.pipe),mw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pt(e.append)&&((t=qi(e))==="formdata"||t==="object"&&Pt(e.toString)&&e.toString()==="[object FormData]"))},xw=cr("URLSearchParams"),[bw,yw,vw,ww]=["ReadableStream","Request","Response","Headers"].map(cr),Cw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _s(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),To(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(n=0;n<a;n++)l=i[n],t.call(null,e[l],l,e)}}function Sx(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,o;for(;n-- >0;)if(o=r[n],t===o.toLowerCase())return o;return null}const un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,jx=e=>!fs(e)&&e!==un;function au(){const{caseless:e}=jx(this)&&this||{},t={},r=(n,o)=>{const i=e&&Sx(t,o)||o;ti(t[i])&&ti(n)?t[i]=au(t[i],n):ti(n)?t[i]=au({},n):To(n)?t[i]=n.slice():t[i]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&_s(arguments[n],r);return t}const Sw=(e,t,r,{allOwnKeys:n}={})=>(_s(t,(o,i)=>{r&&Pt(o)?e[i]=yx(o,r):e[i]=o},{allOwnKeys:n}),e),jw=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),kw=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Ew=(e,t,r,n)=>{let o,i,a;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=r!==!1&&th(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},_w=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Tw=e=>{if(!e)return null;if(To(e))return e;let t=e.length;if(!Cx(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Aw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&th(Uint8Array)),Rw=(e,t)=>{const n=(e&&e[Bi]).call(e);let o;for(;(o=n.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},Ow=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Pw=cr("HTMLFormElement"),Mw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),$p=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Dw=cr("RegExp"),kx=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};_s(r,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(n[i]=a||o)}),Object.defineProperties(e,n)},Iw=e=>{kx(e,(t,r)=>{if(Pt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Pt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Nw=(e,t)=>{const r={},n=o=>{o.forEach(i=>{r[i]=!0})};return To(e)?n(e):n(String(e).split(t)),r},Lw=()=>{},Fw=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function zw(e){return!!(e&&Pt(e.append)&&e[vx]==="FormData"&&e[Bi])}const $w=e=>{const t=new Array(10),r=(n,o)=>{if(Gi(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[o]=n;const i=To(n)?[]:{};return _s(n,(a,l)=>{const c=r(a,o+1);!fs(c)&&(i[l]=c)}),t[o]=void 0,i}}return n};return r(e,0)},Bw=cr("AsyncFunction"),qw=e=>e&&(Gi(e)||Pt(e))&&Pt(e.then)&&Pt(e.catch),Ex=((e,t)=>e?setImmediate:t?((r,n)=>(un.addEventListener("message",({source:o,data:i})=>{o===un&&i===r&&n.length&&n.shift()()},!1),o=>{n.push(o),un.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Pt(un.postMessage)),Hw=typeof queueMicrotask<"u"?queueMicrotask.bind(un):typeof process<"u"&&process.nextTick||Ex,Gw=e=>e!=null&&Pt(e[Bi]),$={isArray:To,isArrayBuffer:wx,isBuffer:aw,isFormData:mw,isArrayBufferView:lw,isString:cw,isNumber:Cx,isBoolean:dw,isObject:Gi,isPlainObject:ti,isReadableStream:bw,isRequest:yw,isResponse:vw,isHeaders:ww,isUndefined:fs,isDate:uw,isFile:hw,isBlob:pw,isRegExp:Dw,isFunction:Pt,isStream:gw,isURLSearchParams:xw,isTypedArray:Aw,isFileList:fw,forEach:_s,merge:au,extend:Sw,trim:Cw,stripBOM:jw,inherits:kw,toFlatObject:Ew,kindOf:qi,kindOfTest:cr,endsWith:_w,toArray:Tw,forEachEntry:Rw,matchAll:Ow,isHTMLForm:Pw,hasOwnProperty:$p,hasOwnProp:$p,reduceDescriptors:kx,freezeMethods:Iw,toObjectSet:Nw,toCamelCase:Mw,noop:Lw,toFiniteNumber:Fw,findKey:Sx,global:un,isContextDefined:jx,isSpecCompliantForm:zw,toJSONObject:$w,isAsyncFn:Bw,isThenable:qw,setImmediate:Ex,asap:Hw,isIterable:Gw};function Ee(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}$.inherits(Ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const _x=Ee.prototype,Tx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tx[e]={value:e}});Object.defineProperties(Ee,Tx);Object.defineProperty(_x,"isAxiosError",{value:!0});Ee.from=(e,t,r,n,o,i)=>{const a=Object.create(_x);return $.toFlatObject(e,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ee.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Uw=null;function lu(e){return $.isPlainObject(e)||$.isArray(e)}function Ax(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function Bp(e,t,r){return e?e.concat(t).map(function(o,i){return o=Ax(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function Ww(e){return $.isArray(e)&&!e.some(lu)}const Yw=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function Ui(e,t,r){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=$.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,x){return!$.isUndefined(x[m])});const n=r.metaTokens,o=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if($.isDate(g))return g.toISOString();if($.isBoolean(g))return g.toString();if(!c&&$.isBlob(g))throw new Ee("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(g)||$.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,x){let y=g;if(g&&!x&&typeof g=="object"){if($.endsWith(m,"{}"))m=n?m:m.slice(0,-2),g=JSON.stringify(g);else if($.isArray(g)&&Ww(g)||($.isFileList(g)||$.endsWith(m,"[]"))&&(y=$.toArray(g)))return m=Ax(m),y.forEach(function(A,M){!($.isUndefined(A)||A===null)&&t.append(a===!0?Bp([m],M,i):a===null?m:m+"[]",d(A))}),!1}return lu(g)?!0:(t.append(Bp(x,m,i),d(g)),!1)}const p=[],f=Object.assign(Yw,{defaultVisitor:u,convertValue:d,isVisitable:lu});function b(g,m){if(!$.isUndefined(g)){if(p.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));p.push(g),$.forEach(g,function(y,E){(!($.isUndefined(y)||y===null)&&o.call(t,y,$.isString(E)?E.trim():E,m,f))===!0&&b(y,m?m.concat(E):[E])}),p.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return b(e),t}function qp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function rh(e,t){this._pairs=[],e&&Ui(e,this,t)}const Rx=rh.prototype;Rx.append=function(t,r){this._pairs.push([t,r])};Rx.toString=function(t){const r=t?function(n){return t.call(this,n,qp)}:qp;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function Vw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ox(e,t,r){if(!t)return e;const n=r&&r.encode||Vw;$.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(t,r):i=$.isURLSearchParams(t)?t.toString():new rh(t,r).toString(n),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Hp{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Px={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kw=typeof URLSearchParams<"u"?URLSearchParams:rh,Qw=typeof FormData<"u"?FormData:null,Jw=typeof Blob<"u"?Blob:null,Xw={isBrowser:!0,classes:{URLSearchParams:Kw,FormData:Qw,Blob:Jw},protocols:["http","https","file","blob","url","data"]},nh=typeof window<"u"&&typeof document<"u",cu=typeof navigator=="object"&&navigator||void 0,Zw=nh&&(!cu||["ReactNative","NativeScript","NS"].indexOf(cu.product)<0),e4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t4=nh&&window.location.href||"http://localhost",r4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nh,hasStandardBrowserEnv:Zw,hasStandardBrowserWebWorkerEnv:e4,navigator:cu,origin:t4},Symbol.toStringTag,{value:"Module"})),jt={...r4,...Xw};function n4(e,t){return Ui(e,new jt.classes.URLSearchParams,Object.assign({visitor:function(r,n,o,i){return jt.isNode&&$.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function o4(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function s4(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}function Mx(e){function t(r,n,o,i){let a=r[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=r.length;return a=!a&&$.isArray(o)?o.length:a,c?($.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!l):((!o[a]||!$.isObject(o[a]))&&(o[a]=[]),t(r,n,o[a],i)&&$.isArray(o[a])&&(o[a]=s4(o[a])),!l)}if($.isFormData(e)&&$.isFunction(e.entries)){const r={};return $.forEachEntry(e,(n,o)=>{t(o4(n),o,r,0)}),r}return null}function i4(e,t,r){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Ts={transitional:Px,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=$.isObject(t);if(i&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return o?JSON.stringify(Mx(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return n4(t,this.formSerializer).toString();if((l=$.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ui(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),i4(t)):t}],transformResponse:[function(t){const r=this.transitional||Ts.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(n&&!this.responseType||o)){const a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Ee.from(l,Ee.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{Ts.headers[e]={}});const a4=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l4=e=>{const t={};let r,n,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!r||t[r]&&a4[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Gp=Symbol("internals");function $o(e){return e&&String(e).trim().toLowerCase()}function ri(e){return e===!1||e==null?e:$.isArray(e)?e.map(ri):String(e)}function c4(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const d4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ka(e,t,r,n,o){if($.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!$.isString(t)){if($.isString(n))return t.indexOf(n)!==-1;if($.isRegExp(n))return n.test(t)}}function u4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function h4(e,t){const r=$.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,i,a){return this[n].call(this,t,o,i,a)},configurable:!0})})}let Mt=class{constructor(t){t&&this.set(t)}set(t,r,n){const o=this;function i(l,c,d){const u=$o(c);if(!u)throw new Error("header name must be a non-empty string");const p=$.findKey(o,u);(!p||o[p]===void 0||d===!0||d===void 0&&o[p]!==!1)&&(o[p||c]=ri(l))}const a=(l,c)=>$.forEach(l,(d,u)=>i(d,u,c));if($.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if($.isString(t)&&(t=t.trim())&&!d4(t))a(l4(t),r);else if($.isObject(t)&&$.isIterable(t)){let l={},c,d;for(const u of t){if(!$.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=$o(t),t){const n=$.findKey(this,t);if(n){const o=this[n];if(!r)return o;if(r===!0)return c4(o);if($.isFunction(r))return r.call(this,o,n);if($.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=$o(t),t){const n=$.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||ka(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let o=!1;function i(a){if(a=$o(a),a){const l=$.findKey(n,a);l&&(!r||ka(n,n[l],l,r))&&(delete n[l],o=!0)}}return $.isArray(t)?t.forEach(i):i(t),o}clear(t){const r=Object.keys(this);let n=r.length,o=!1;for(;n--;){const i=r[n];(!t||ka(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const r=this,n={};return $.forEach(this,(o,i)=>{const a=$.findKey(n,i);if(a){r[a]=ri(o),delete r[i];return}const l=t?u4(i):String(i).trim();l!==i&&delete r[i],r[l]=ri(o),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return $.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&$.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[Gp]=this[Gp]={accessors:{}}).accessors,o=this.prototype;function i(a){const l=$o(a);n[l]||(h4(o,a),n[l]=!0)}return $.isArray(t)?t.forEach(i):i(t),this}};Mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Mt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});$.freezeMethods(Mt);function Ea(e,t){const r=this||Ts,n=t||r,o=Mt.from(n.headers);let i=n.data;return $.forEach(e,function(l){i=l.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function Dx(e){return!!(e&&e.__CANCEL__)}function Ao(e,t,r){Ee.call(this,e??"canceled",Ee.ERR_CANCELED,t,r),this.name="CanceledError"}$.inherits(Ao,Ee,{__CANCEL__:!0});function Ix(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ee("Request failed with status code "+r.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function p4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function f4(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o=0,i=0,a;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];a||(a=d),r[o]=c,n[o]=d;let p=i,f=0;for(;p!==o;)f+=r[p++],p=p%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),d-a<t)return;const b=u&&d-u;return b?Math.round(f*1e3/b):void 0}}function g4(e,t){let r=0,n=1e3/t,o,i;const a=(d,u=Date.now())=>{r=u,o=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),p=u-r;p>=n?a(d,u):(o=d,i||(i=setTimeout(()=>{i=null,a(o)},n-p)))},()=>o&&a(o)]}const yi=(e,t,r=3)=>{let n=0;const o=f4(50,250);return g4(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-n,d=o(c),u=a<=l;n=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},r)},Up=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Wp=e=>(...t)=>$.asap(()=>e(...t)),m4=jt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,jt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,x4=jt.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const a=[e+"="+encodeURIComponent(t)];$.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),$.isString(n)&&a.push("path="+n),$.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function b4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function y4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nx(e,t,r){let n=!b4(t);return e&&(n||r==!1)?y4(e,t):t}const Yp=e=>e instanceof Mt?{...e}:e;function yn(e,t){t=t||{};const r={};function n(d,u,p,f){return $.isPlainObject(d)&&$.isPlainObject(u)?$.merge.call({caseless:f},d,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function o(d,u,p,f){if($.isUndefined(u)){if(!$.isUndefined(d))return n(void 0,d,p,f)}else return n(d,u,p,f)}function i(d,u){if(!$.isUndefined(u))return n(void 0,u)}function a(d,u){if($.isUndefined(u)){if(!$.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,p){if(p in t)return n(d,u);if(p in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,u,p)=>o(Yp(d),Yp(u),p,!0)};return $.forEach(Object.keys(Object.assign({},e,t)),function(u){const p=c[u]||o,f=p(e[u],t[u],u);$.isUndefined(f)&&p!==l||(r[u]=f)}),r}const Lx=e=>{const t=yn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=Mt.from(a),t.url=Ox(Nx(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if($.isFormData(r)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[d,...u]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([d||"multipart/form-data",...u].join("; "))}}if(jt.hasStandardBrowserEnv&&(n&&$.isFunction(n)&&(n=n(t)),n||n!==!1&&m4(t.url))){const d=o&&i&&x4.read(i);d&&a.set(o,d)}return t},v4=typeof XMLHttpRequest<"u",w4=v4&&function(e){return new Promise(function(r,n){const o=Lx(e);let i=o.data;const a=Mt.from(o.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=o,u,p,f,b,g;function m(){b&&b(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(o.method.toUpperCase(),o.url,!0),x.timeout=o.timeout;function y(){if(!x)return;const A=Mt.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:A,config:e,request:x};Ix(function(C){r(C),m()},function(C){n(C),m()},k),x=null}"onloadend"in x?x.onloadend=y:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(y)},x.onabort=function(){x&&(n(new Ee("Request aborted",Ee.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new Ee("Network Error",Ee.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let M=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const k=o.transitional||Px;o.timeoutErrorMessage&&(M=o.timeoutErrorMessage),n(new Ee(M,k.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,e,x)),x=null},i===void 0&&a.setContentType(null),"setRequestHeader"in x&&$.forEach(a.toJSON(),function(M,k){x.setRequestHeader(k,M)}),$.isUndefined(o.withCredentials)||(x.withCredentials=!!o.withCredentials),l&&l!=="json"&&(x.responseType=o.responseType),d&&([f,g]=yi(d,!0),x.addEventListener("progress",f)),c&&x.upload&&([p,b]=yi(c),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",b)),(o.cancelToken||o.signal)&&(u=A=>{x&&(n(!A||A.type?new Ao(null,e,x):A),x.abort(),x=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const E=p4(o.url);if(E&&jt.protocols.indexOf(E)===-1){n(new Ee("Unsupported protocol "+E+":",Ee.ERR_BAD_REQUEST,e));return}x.send(i||null)})},C4=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,o;const i=function(d){if(!o){o=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Ee?u:new Ao(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,i(new Ee(`timeout ${t} of ms exceeded`,Ee.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>$.asap(l),c}},S4=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,o;for(;n<r;)o=n+t,yield e.slice(n,o),n=o},j4=async function*(e,t){for await(const r of k4(e))yield*S4(r,t)},k4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Vp=(e,t,r,n)=>{const o=j4(e,t);let i=0,a,l=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await o.next();if(d){l(),c.close();return}let p=u.byteLength;if(r){let f=i+=p;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),o.return()}},{highWaterMark:2})},Wi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Fx=Wi&&typeof ReadableStream=="function",E4=Wi&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),zx=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_4=Fx&&zx(()=>{let e=!1;const t=new Request(jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Kp=64*1024,du=Fx&&zx(()=>$.isReadableStream(new Response("").body)),vi={stream:du&&(e=>e.body)};Wi&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!vi[t]&&(vi[t]=$.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Ee(`Response type '${t}' is not supported`,Ee.ERR_NOT_SUPPORT,n)})})})(new Response);const T4=async e=>{if(e==null)return 0;if($.isBlob(e))return e.size;if($.isSpecCompliantForm(e))return(await new Request(jt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($.isArrayBufferView(e)||$.isArrayBuffer(e))return e.byteLength;if($.isURLSearchParams(e)&&(e=e+""),$.isString(e))return(await E4(e)).byteLength},A4=async(e,t)=>{const r=$.toFiniteNumber(e.getContentLength());return r??T4(t)},R4=Wi&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:p="same-origin",fetchOptions:f}=Lx(e);d=d?(d+"").toLowerCase():"text";let b=C4([o,i&&i.toAbortSignal()],a),g;const m=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let x;try{if(c&&_4&&r!=="get"&&r!=="head"&&(x=await A4(u,n))!==0){let k=new Request(t,{method:"POST",body:n,duplex:"half"}),w;if($.isFormData(n)&&(w=k.headers.get("content-type"))&&u.setContentType(w),k.body){const[C,_]=Up(x,yi(Wp(c)));n=Vp(k.body,Kp,C,_)}}$.isString(p)||(p=p?"include":"omit");const y="credentials"in Request.prototype;g=new Request(t,{...f,signal:b,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?p:void 0});let E=await fetch(g,f);const A=du&&(d==="stream"||d==="response");if(du&&(l||A&&m)){const k={};["status","statusText","headers"].forEach(z=>{k[z]=E[z]});const w=$.toFiniteNumber(E.headers.get("content-length")),[C,_]=l&&Up(w,yi(Wp(l),!0))||[];E=new Response(Vp(E.body,Kp,C,()=>{_&&_(),m&&m()}),k)}d=d||"text";let M=await vi[$.findKey(vi,d)||"text"](E,e);return!A&&m&&m(),await new Promise((k,w)=>{Ix(k,w,{data:M,headers:Mt.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:g})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Ee("Network Error",Ee.ERR_NETWORK,e,g),{cause:y.cause||y}):Ee.from(y,y&&y.code,e,g)}}),uu={http:Uw,xhr:w4,fetch:R4};$.forEach(uu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qp=e=>`- ${e}`,O4=e=>$.isFunction(e)||e===null||e===!1,$x={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){r=e[i];let a;if(n=r,!O4(r)&&(n=uu[(a=String(r)).toLowerCase()],n===void 0))throw new Ee(`Unknown adapter '${a}'`);if(n)break;o[a||"#"+i]=n}if(!n){const i=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(Qp).join(`
`):" "+Qp(i[0]):"as no adapter specified";throw new Ee("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:uu};function _a(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ao(null,e)}function Jp(e){return _a(e),e.headers=Mt.from(e.headers),e.data=Ea.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$x.getAdapter(e.adapter||Ts.adapter)(e).then(function(n){return _a(e),n.data=Ea.call(e,e.transformResponse,n),n.headers=Mt.from(n.headers),n},function(n){return Dx(n)||(_a(e),n&&n.response&&(n.response.data=Ea.call(e,e.transformResponse,n.response),n.response.headers=Mt.from(n.response.headers))),Promise.reject(n)})}const Bx="1.10.0",Yi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Xp={};Yi.transitional=function(t,r,n){function o(i,a){return"[Axios v"+Bx+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(t===!1)throw new Ee(o(a," has been removed"+(r?" in "+r:"")),Ee.ERR_DEPRECATED);return r&&!Xp[a]&&(Xp[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,l):!0}};Yi.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function P4(e,t,r){if(typeof e!="object")throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const l=e[i],c=l===void 0||a(l,i,e);if(c!==!0)throw new Ee("option "+i+" must be "+c,Ee.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ee("Unknown option "+i,Ee.ERR_BAD_OPTION)}}const ni={assertOptions:P4,validators:Yi},fr=ni.validators;let pn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Hp,response:new Hp}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=yn(this.defaults,r);const{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&ni.assertOptions(n,{silentJSONParsing:fr.transitional(fr.boolean),forcedJSONParsing:fr.transitional(fr.boolean),clarifyTimeoutError:fr.transitional(fr.boolean)},!1),o!=null&&($.isFunction(o)?r.paramsSerializer={serialize:o}:ni.assertOptions(o,{encode:fr.function,serialize:fr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ni.assertOptions(r,{baseUrl:fr.spelling("baseURL"),withXsrfToken:fr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&$.merge(i.common,i[r.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Mt.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let u,p=0,f;if(!c){const g=[Jp.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,d),f=g.length,u=Promise.resolve(r);p<f;)u=u.then(g[p++],g[p++]);return u}f=l.length;let b=r;for(p=0;p<f;){const g=l[p++],m=l[p++];try{b=g(b)}catch(x){m.call(this,x);break}}try{u=Jp.call(this,b)}catch(g){return Promise.reject(g)}for(p=0,f=d.length;p<f;)u=u.then(d[p++],d[p++]);return u}getUri(t){t=yn(this.defaults,t);const r=Nx(t.baseURL,t.url,t.allowAbsoluteUrls);return Ox(r,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){pn.prototype[t]=function(r,n){return this.request(yn(n||{},{method:t,url:r,data:(n||{}).data}))}});$.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,l){return this.request(yn(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}pn.prototype[t]=r(),pn.prototype[t+"Form"]=r(!0)});let M4=class qx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(o);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,l){n.reason||(n.reason=new Ao(i,a,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new qx(function(o){t=o}),cancel:t}}};function D4(e){return function(r){return e.apply(null,r)}}function I4(e){return $.isObject(e)&&e.isAxiosError===!0}const hu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hu).forEach(([e,t])=>{hu[t]=e});function Hx(e){const t=new pn(e),r=yx(pn.prototype.request,t);return $.extend(r,pn.prototype,t,{allOwnKeys:!0}),$.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return Hx(yn(e,o))},r}const Oe=Hx(Ts);Oe.Axios=pn;Oe.CanceledError=Ao;Oe.CancelToken=M4;Oe.isCancel=Dx;Oe.VERSION=Bx;Oe.toFormData=Ui;Oe.AxiosError=Ee;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=D4;Oe.isAxiosError=I4;Oe.mergeConfig=yn;Oe.AxiosHeaders=Mt;Oe.formToJSON=e=>Mx($.isHTMLForm(e)?new FormData(e):e);Oe.getAdapter=$x.getAdapter;Oe.HttpStatusCode=hu;Oe.default=Oe;const{Axios:KO,AxiosError:QO,CanceledError:JO,isCancel:XO,CancelToken:ZO,VERSION:eP,all:tP,Cancel:rP,isAxiosError:nP,spread:oP,toFormData:sP,AxiosHeaders:iP,HttpStatusCode:aP,formToJSON:lP,getAdapter:cP,mergeConfig:dP}=Oe;let fo=localStorage.getItem("token");console.log("AuthToken service loaded, initial token status:",fo?"Present":"Not present");const Gx="auth_token_updated",Ux="auth_token_cleared",go="auth_token_restored",Wr=()=>{const e=localStorage.getItem("token");return e!==fo&&(console.log("Token changed in localStorage, updating in-memory token"),fo=e),fo},gs=e=>{if(console.log("Setting auth token"),!e||e==="undefined"||e==="null"){console.error("Invalid token provided to setToken:",e);return}fo=e,localStorage.setItem("token",e);const t=e.startsWith("Bearer ")?e:`Bearer ${e}`;Oe.defaults.headers.common.Authorization=t,typeof window<"u"&&window.axiosInstance?(window.axiosInstance.defaults.headers.common.Authorization=t,console.log("Updated axiosInstance Authorization header")):console.warn("Global axiosInstance not available when setting token"),yo(Gx,{token:e}),console.log("Auth token set and applied to axios instances")},oh=()=>{console.log("Clearing auth token"),fo=null,localStorage.removeItem("token"),delete Oe.defaults.headers.common.Authorization,typeof window<"u"&&window.axiosInstance&&delete window.axiosInstance.defaults.headers.common.Authorization,yo(Ux),console.log("Auth token cleared from axios instances")},sh=()=>{try{const t=[sessionStorage.getItem("groupme_auth_token_backup"),localStorage.getItem("auth_token_backup"),sessionStorage.getItem("auth_token_backup")].find(r=>r&&r!=="undefined"&&r!=="null");if(t)return console.log("Restoring auth token from backup - token length:",t.length),gs(t),sessionStorage.removeItem("groupme_auth_token_backup"),localStorage.removeItem("auth_token_backup"),sessionStorage.removeItem("auth_token_backup"),yo(go,{token:t}),console.log("Auth token restored successfully"),!0;{console.warn("No backup token found in any storage location");const r=localStorage.getItem("token");if(r){console.log("Using existing token in localStorage as fallback");const n=r.startsWith("Bearer ")?r:`Bearer ${r}`;return Oe.defaults.headers.common.Authorization=n,typeof window<"u"&&window.axiosInstance&&(window.axiosInstance.defaults.headers.common.Authorization=n,console.log("Updated axiosInstance with existing token")),yo(go,{token:r}),!0}return!1}}catch(e){return console.error("Error restoring auth token from backup:",e),!1}},ih=()=>{try{const e=localStorage.getItem("token");return e?(console.log("Backing up current auth token - token length:",e.length),sessionStorage.setItem("groupme_auth_token_backup",e),localStorage.setItem("auth_token_backup",e),sessionStorage.setItem("auth_token_backup",e),!0):(console.warn("No token found in localStorage to backup"),!1)}catch(e){return console.error("Error backing up auth token:",e),!1}},ah=()=>{console.log("Initializing token service");const e=localStorage.getItem("token");console.log("Token from localStorage:",e?"Present":"Not present"),e?(console.log("Setting token during initialization"),gs(e)):console.log("No token found during initialization"),window.addEventListener("storage",t=>{console.log("Storage event detected:",t.key),t.key==="token"&&(t.newValue?(console.log("Token updated in another tab, syncing"),gs(t.newValue)):(console.log("Token cleared in another tab, syncing"),oh()))}),console.log("Token service initialization complete")},yo=(e,t={})=>{if(typeof window<"u"){const r=new CustomEvent(e,{detail:t});window.dispatchEvent(r),console.log(`Token event dispatched: ${e}`)}};typeof window<"u"?(console.log("Window detected, initializing token service"),ah()):console.log("No window object, skipping token service initialization");const N4={getToken:Wr,setToken:gs,clearToken:oh,restoreTokenFromBackup:sh,backupCurrentToken:ih,initializeToken:ah},pu=Object.freeze(Object.defineProperty({__proto__:null,AUTH_TOKEN_CLEARED:Ux,AUTH_TOKEN_RESTORED:go,AUTH_TOKEN_UPDATED:Gx,backupCurrentToken:ih,clearToken:oh,default:N4,dispatchTokenEvent:yo,getToken:Wr,initializeToken:ah,restoreTokenFromBackup:sh,setToken:gs},Symbol.toStringTag,{value:"Module"})),L4="",se=Oe.create({baseURL:L4,withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:3e5});se.interceptors.request.use(e=>{const t=Wr();if(console.log(`Token from authToken service: ${t?"Present":"Not present"}`),t?(e.headers.Authorization=t.startsWith("Bearer ")?t:`Bearer ${t}`,console.log(`Authorization header set: ${e.headers.Authorization}`)):console.warn("No auth token found in authToken service"),e.url){let r=e.url.startsWith("/")?e.url.substring(1):e.url;!r.includes("://")&&!r.startsWith("api/")&&(r="api/"+r),e.url="/"+r,console.log(`Normalized URL: ${e.url}`)}return console.log("Sending Request:",e.method?.toUpperCase(),e.url),e},e=>Promise.reject(e));se.interceptors.response.use(e=>(console.log(`[API] Response from ${e.config.url}:`,e.data),e),e=>{if(console.error(`[API] Response error from ${e.config?.url}:`,typeof e.response?.data=="object"&&e.response?.data!==null?JSON.stringify(e.response.data,null,2):e.message),e.response?.status===401){console.warn("Authentication error - token may be invalid");const t=e.config?.url?.includes("/oauth/")||e.config?.url?.includes("/groupme/oauth")||e.config?.url?.includes("/groupme/token")||e.config?.url?.includes("/groupme/callback")||e.config?.url?.includes("/groupme/config"),r=window.location.pathname,n=document.referrer===window.location.href;r!=="/login"&&!t&&!n?(console.log("Clearing invalid token from localStorage and redirecting to login"),bi(()=>Promise.resolve().then(()=>pu),void 0).then(o=>{o.clearToken(),sessionStorage.setItem("redirect_after_login",window.location.pathname),setTimeout(()=>{typeof window<"u"&&(window.location.href="/login")},100)})):console.log("Not redirecting to login because:",{currentPath:r,isLoginPage:r==="/login",isOAuthEndpoint:t,isRefresh:n})}return e.message==="Network Error"&&console.error("Network error - server may be down"),e.code==="ECONNABORTED"&&console.error("Request timed out - server may be overloaded"),Promise.reject(e)});typeof window<"u"&&(window.axiosInstance=se);const Wx=h.createContext(void 0),F4=()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_data");if(!e||!t)return null;const r=JSON.parse(t);return{id:r._id,email:r.email,name:r.name,token:e,profilePicture:r.profilePicture,role:r.role}}catch(e){return console.error("Failed to parse stored user data:",e),null}};function z4({children:e}){const[t,r]=h.useState(F4()),[n,o]=h.useState(!0),i=Qt(),a=h.useRef(!1),l=m=>{try{if(!m||typeof m!="string"||!m.includes("."))return console.error("Invalid token format"),!1;const x=m.split(".");if(x.length!==3)return console.error("Invalid token parts"),!1;const y=JSON.parse(atob(x[1])),E=Date.now()/1e3;return!y.exp||y.exp<E?(console.error("Token expired"),!1):!0}catch(x){return console.error("Token validation error:",x),!1}};h.useEffect(()=>{(async()=>{if(a.current){console.log("Auth check already in progress, skipping");return}a.current=!0;const x=setTimeout(()=>{console.warn("Auth check safety timeout reached, forcing loading to false"),o(!1),a.current=!1},1e4);try{const y=localStorage.getItem("token");if(!y){console.log("No token found, user is not authenticated"),r(null),o(!1),a.current=!1,clearTimeout(x);return}try{const E=localStorage.getItem("user_data");if(E){const A=JSON.parse(E);r({id:A._id,email:A.email,name:A.name,token:y,profilePicture:A.profilePicture,role:A.role}),console.log("User restored from localStorage")}}catch(E){console.error("Failed to parse stored user data:",E)}l(y)||console.log("Invalid or expired token, will be removed after profile check"),c().catch(E=>{console.error("Background auth check failed:",E)})}catch(y){console.error("Auth check failed with error:",y),r(null)}finally{o(!1),a.current=!1,clearTimeout(x)}})()},[]),h.useEffect(()=>{t?console.log("User state updated:",{id:t.id,name:t.name,email:t.email,hasProfilePic:!!t.profilePicture,profilePicLength:t.profilePicture?t.profilePicture.length:0}):console.log("User state is null")},[t]);const c=async()=>{try{const m=localStorage.getItem("token");if(!m){console.log("No token found, skipping auth check"),o(!1);return}console.log("Checking authentication with token");const x=new AbortController,y=setTimeout(()=>{console.log("Auth check timed out"),x.abort()},5e3),E=setTimeout(()=>{console.warn("Auth check safety timeout reached, forcing completion"),o(!1)},8e3);try{const A=await se.get("/api/auth/profile",{signal:x.signal,headers:{Authorization:`Bearer ${m}`}});if(clearTimeout(y),clearTimeout(E),!A.data||!A.data._id)throw new Error("Invalid user data received");const M={id:A.data._id,email:A.data.email,name:A.data.name,profilePicture:A.data.profilePicture,token:m,role:A.data.role};localStorage.setItem("user_data",JSON.stringify(A.data)),r(M),console.log("Auth check successful, loaded user:",A.data.name)}catch(A){clearTimeout(y),clearTimeout(E),console.error("Auth request failed:",A);const M=A;(M.response&&M.response.status===401||M.message!=="Network Error"&&M.message!=="canceled")&&(localStorage.removeItem("token"),localStorage.removeItem("user_data"),r(null))}}catch(m){console.error("Auth check failed:",m),m.message!=="Network Error"&&(localStorage.removeItem("token"),localStorage.removeItem("user_data"),r(null))}finally{o(!1)}},d=h.useCallback(async()=>{try{console.log("Refreshing user data...");const m=localStorage.getItem("token");if(!m){console.log("No token found, cannot refresh user data");return}if(!l(m)){console.log("Invalid token during refresh, logging out"),localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),r(null),i("/login");return}const x=await se.get("/api/auth/profile"),y={id:x.data._id,email:x.data.email,name:x.data.name,profilePicture:x.data.profilePicture,token:m,role:x.data.role};return console.log("User data refreshed:",{name:y.name,hasProfilePic:!!y.profilePicture,profilePicLength:y.profilePicture?y.profilePicture.length:0}),localStorage.setItem("user_data",JSON.stringify(x.data)),r(y),y}catch(m){console.error("Failed to refresh user data:",m);const x=m;throw x.response&&x.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),r(null),i("/login")),m}},[i]),g={user:t,login:async(m,x)=>{try{localStorage.removeItem("token"),console.log("Attempting login with:",{email:m});const y=await se.post("/api/auth/login",{email:m,password:x});if(!y.data||!y.data.token)throw new Error("Invalid response from login API");console.log("Login API response received:",{success:!0,hasToken:!!y.data.token,userId:y.data.user._id});const{token:E,user:A}=y.data;if(!l(E))throw new Error("Server returned invalid token");localStorage.setItem("token",E),r({id:A._id,email:A.email,name:A.name,token:E,profilePicture:A.profilePicture,role:A.role}),window.__checkAuthCount!==void 0&&(window.__checkAuthCount=0);const M=sessionStorage.getItem("redirect_after_login");return M&&(console.log("Found stored redirect URL:",M),sessionStorage.removeItem("redirect_after_login"),setTimeout(()=>{i(M)},100)),{success:!0}}catch(y){throw console.error("Login failed:",y),localStorage.removeItem("token"),r(null),y}},logout:async()=>{try{await new Promise(x=>{const y=()=>{console.log("Save completed before logout"),window.removeEventListener("save-complete",y),x()};window.addEventListener("save-complete",y),console.log("Dispatching save event before logout");const E=new CustomEvent("save-pending-changes");window.dispatchEvent(E),setTimeout(()=>{console.log("Save timeout reached, proceeding with logout"),x()},2e3)}),console.log("Clearing auth data and logging out"),localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),r(null),i("/login",{replace:!0})}catch(m){console.error("Logout failed:",m),localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),r(null),i("/login",{replace:!0})}},register:async(m,x,y)=>{try{const E=await se.post("/api/auth/register",{name:m,email:x,password:y});if(!E.data||!E.data.token)throw new Error("Invalid response from register API");const{token:A,user:M}=E.data;if(!l(A))throw new Error("Server returned invalid token");localStorage.setItem("token",A);const k={id:M.id||M._id,email:M.email,name:M.name,token:A,profilePicture:M.profilePicture,role:M.role};r(k)}catch(E){throw console.error("Registration failed:",E),E}},updateProfile:async m=>{try{console.log("Starting profile update with data:",{name:m.name,email:m.email,hasPassword:!!m.password,hasProfilePicture:!!m.profilePicture,profilePictureLength:m.profilePicture?m.profilePicture.length:0});const x=await se.put("/api/auth/profile",m);if(console.log("Profile update response received:",{name:x.data.name,email:x.data.email,hasProfilePicture:!!x.data.profilePicture,profilePictureLength:x.data.profilePicture?x.data.profilePicture.length:0}),!t)throw new Error("Cannot update profile when not logged in");const y={...t,name:x.data.name,email:x.data.email,profilePicture:x.data.profilePicture,role:x.data.role};return console.log("Setting updated user in state:",{name:y.name,email:y.email,hasProfilePicture:!!y.profilePicture,profilePictureLength:y.profilePicture?y.profilePicture.length:0}),r(y),x.data}catch(x){console.error("Profile update failed:",x);const y=x;throw y.response&&y.response.status===401&&(localStorage.removeItem("token"),r(null),i("/login")),x}},isLoading:n,refreshUserData:d};return s.jsx(Wx.Provider,{value:g,children:e})}function Jt(){const e=h.useContext(Wx);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const $4=({onPasscodeValid:e,onCancel:t})=>{const[r,n]=h.useState(""),[o,i]=h.useState(!1),[a,l]=h.useState(""),[c,d]=h.useState(!1),[u,p]=h.useState(0),f=async x=>{if(x.preventDefault(),!r.trim()){l("Please enter a passcode");return}i(!0),l(""),d(!0),p(y=>y+1);try{const y=await Oe.post("/api/auth/validate-passcode",{code:r.trim()});y.data.success?(await Oe.post("/api/auth/consume-passcode",{code:r.trim()}),e(r.trim())):l(y.data.message||"Invalid passcode")}catch(y){if(console.error("Passcode validation error:",y),y.response?.status===400){const E=y.response.data.message;E.includes("expired")?l("This invite code has expired. Please contact your administrator for a new code."):E.includes("maximum usage")?l("This invite code has reached its usage limit. Please contact your administrator for a new code."):l(E||"Invalid invite code. Please check and try again.")}else y.response?.status===429?l("Too many attempts. Please wait a moment before trying again."):y.code==="NETWORK_ERROR"||y.code==="ERR_NETWORK"?l("Network error. Please check your connection and try again."):l("Unable to validate invite code. Please try again or contact support.")}finally{i(!1),d(!1)}},b=x=>{const y=x.target.value.toUpperCase();n(y),a&&l("")},g=x=>{!/[A-Z0-9\-_]/.test(x.key)&&x.key!=="Backspace"&&x.key!=="Delete"&&x.key!=="Tab"&&x.preventDefault()},m=()=>u>=3?"Having trouble? Contact your administrator for assistance.":"Don't have an invite code? Contact your administrator.";return s.jsxs("div",{className:"passcode-entry",children:[s.jsxs("div",{className:"passcode-header",children:[s.jsx("h2",{className:"passcode-title",children:"Enter Invite Code"}),s.jsx("p",{className:"passcode-subtitle",children:"This website is invite-only. Please enter your invite code to continue."})]}),s.jsxs("form",{onSubmit:f,className:"passcode-form",children:[s.jsxs("div",{className:"passcode-input-group",children:[s.jsx("label",{htmlFor:"passcode",className:"passcode-label",children:"Invite Code"}),s.jsx("input",{id:"passcode",type:"text",value:r,onChange:b,onKeyPress:g,placeholder:"e.g., ABC12345",className:`passcode-input ${a?"passcode-input-error":""}`,disabled:o,autoComplete:"off",autoFocus:!0,maxLength:20,spellCheck:"false"}),a&&s.jsxs("div",{className:"passcode-error",children:[s.jsx("span",{className:"passcode-error-icon",children:"⚠️"}),a]}),u>0&&!a&&!o&&s.jsxs("div",{className:"passcode-attempts",children:["Attempt ",u," of 5"]})]}),s.jsxs("div",{className:"passcode-actions",children:[s.jsx("button",{type:"button",onClick:t,className:"passcode-btn passcode-btn-secondary",disabled:o,children:"Cancel"}),s.jsx("button",{type:"submit",className:"passcode-btn passcode-btn-primary",disabled:o||!r.trim()||u>=5,children:o?s.jsxs("span",{className:"passcode-loading",children:[s.jsx("span",{className:"passcode-spinner"}),"Validating..."]}):"Continue"})]})]}),s.jsxs("div",{className:"passcode-footer",children:[s.jsx("p",{className:"passcode-help",children:m()}),u>=3&&s.jsxs("p",{className:"passcode-troubleshoot",children:[s.jsx("strong",{children:"Tips:"})," Check for typos, ensure caps lock is off, and verify the code hasn't expired."]})]})]})};function B4(){const[e,t]=h.useState(!1),[r,n]=h.useState(!1),[o,i]=h.useState(!1),[a,l]=h.useState(""),[c,d]=h.useState(""),[u,p]=h.useState(""),[f,b]=h.useState(""),[g,m]=h.useState(""),[x,y]=h.useState(!1),[E,A]=h.useState(!1),[M,k]=h.useState(!1),[w,C]=h.useState({length:!1,uppercase:!1,lowercase:!1,number:!1}),[_,z]=h.useState(!1),[D,S]=h.useState(""),P=Qt(),{login:I,register:F}=Jt(),G=ie=>{C({length:ie.length>=8,uppercase:/[A-Z]/.test(ie),lowercase:/[a-z]/.test(ie),number:/\d/.test(ie)})};h.useEffect(()=>{z(u&&c?c===u:!1)},[c,u]),h.useEffect(()=>{c&&G(c)},[c]),h.useEffect(()=>{localStorage.getItem("token")&&(console.log("Token found, redirecting to leads page"),P("/leads"))},[P]),h.useEffect(()=>{localStorage.getItem("token")&&(y(!0),q4().then(X=>{X?P("/leads"):(localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),y(!1))}).catch(()=>{y(!1)}))},[P]);const V=async ie=>{if(ie.preventDefault(),!x){if(m(""),S(""),e){if(!f||f.trim().length<2){m("Name must be at least 2 characters long");return}if(!a||!a.includes("@")){m("Please enter a valid email address");return}if(!Object.values(w).every(Boolean)){m("Password must be at least 8 characters with uppercase, lowercase, and number");return}if(!_){m("Passwords do not match");return}}y(!0);try{if(e)console.log("Attempting registration for:",a),S("Account created successfully! Redirecting to dashboard..."),await F(f,a,c),console.log("Registration successful - user automatically logged in"),setTimeout(()=>{P("/leads")},1500);else{console.log("Attempting login for:",a);try{if((await I(a,c)).success)console.log("Login successful"),P("/leads");else throw new Error("Login failed")}catch(X){throw console.error("Login failed:",X),X}}}catch(X){console.error("Auth error:",X),m(X.response?.data?.message||X.message||"An unexpected error occurred")}finally{y(!1)}}},B=()=>{t(!0),n(!0)},Z=()=>{t(!1),n(!1),i(!1),m(""),S("")},Q=ie=>{i(!0),n(!1)},ue=()=>{n(!1),t(!1),i(!1)};return r?s.jsx("main",{className:"login__outer",children:s.jsx($4,{onPasscodeValid:Q,onCancel:ue})}):s.jsx("main",{className:"login__outer",children:s.jsxs("section",{className:"login__card",children:[s.jsx("img",{src:"/images/HEADER LOGO.png",alt:"Crokodial header logo",className:"login__logo",style:{marginBottom:"0.5rem",width:"120px"}}),s.jsx("img",{src:"/images/CROKODIAL-TITLE-LOGO.png",alt:"Crokodial logo",className:"login__logo"}),s.jsx("h1",{className:"login__title",children:e?"Create your account":"Sign in to your account"}),e&&o&&s.jsx("div",{className:"login__passcode-success",children:s.jsx("p",{className:"login__passcode-message",children:"✅ Invite code validated successfully"})}),g&&s.jsx("div",{className:"login__error",children:s.jsx("p",{className:"login__error-message",children:g})}),D&&s.jsx("div",{className:"login__success",children:s.jsx("p",{className:"login__success-message",children:D})}),s.jsxs("form",{onSubmit:V,className:"login__form",children:[e&&s.jsxs("label",{className:"login__label",children:["Full Name",s.jsx("input",{type:"text",autoComplete:"name",required:!0,value:f,onChange:ie=>b(ie.target.value),className:"login__input",disabled:x})]}),s.jsxs("label",{className:"login__label",children:["Email",s.jsx("input",{type:"email",autoComplete:"email",required:!0,value:a,onChange:ie=>l(ie.target.value),className:"login__input",disabled:x})]}),s.jsxs("label",{className:"login__label",children:["Password",s.jsx("input",{type:"password",autoComplete:e?"new-password":"current-password",required:!0,value:c,onChange:ie=>d(ie.target.value),className:"login__input",disabled:x})]}),e&&s.jsxs("label",{className:"login__label",children:["Confirm Password",s.jsx("input",{type:"password",autoComplete:"new-password",required:!0,value:u,onChange:ie=>p(ie.target.value),className:`login__input ${u&&!_?"login__input-error":""}`,disabled:x})]}),e&&s.jsxs("div",{className:"login__password-strength",children:[s.jsxs("div",{className:`login__strength-item ${w.length?"login__strength-valid":""}`,children:[w.length?"✓":"○"," At least 8 characters"]}),s.jsxs("div",{className:`login__strength-item ${w.uppercase?"login__strength-valid":""}`,children:[w.uppercase?"✓":"○"," One uppercase letter"]}),s.jsxs("div",{className:`login__strength-item ${w.lowercase?"login__strength-valid":""}`,children:[w.lowercase?"✓":"○"," One lowercase letter"]}),s.jsxs("div",{className:`login__strength-item ${w.number?"login__strength-valid":""}`,children:[w.number?"✓":"○"," One number"]})]}),s.jsx("button",{type:"submit",className:"login__btn",disabled:x,children:x?s.jsxs("span",{className:"login__btn-loading",children:[s.jsx("span",{className:"login__spinner"}),e?"Creating Account...":"Signing in..."]}):e?"Create Account":"Sign in"})]}),s.jsx("div",{className:"login__toggle",children:s.jsxs("p",{className:"login__toggle-text",children:[e?"Already have an account?":"Don't have an account?",s.jsx("button",{type:"button",onClick:e?Z:B,className:"login__toggle-btn",disabled:x,children:e?"Sign in":"Sign up"})]})}),s.jsxs("p",{className:"login__footer",children:["© ",new Date().getFullYear()," Crokodial. All rights reserved."]})]})})}async function q4(){try{const e=localStorage.getItem("token");return e?(await fetch("/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).ok:!1}catch(e){return console.error("Token verification failed:",e),!1}}var Yx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zp=v.createContext&&v.createContext(Yx),H4=["attr","size","title"];function G4(e,t){if(e==null)return{};var r=U4(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wi.apply(this,arguments)}function ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ef(Object(r),!0).forEach(function(n){W4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ef(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W4(e,t,r){return t=Y4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y4(e){var t=V4(e,"string");return typeof t=="symbol"?t:t+""}function V4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vx(e){return e&&e.map((t,r)=>v.createElement(t.tag,Ci({key:r},t.attr),Vx(t.child)))}function te(e){return t=>v.createElement(K4,wi({attr:Ci({},e.attr)},t),Vx(e.child))}function K4(e){var t=r=>{var{attr:n,size:o,title:i}=e,a=G4(e,H4),l=o||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),v.createElement("svg",wi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:Ci(Ci({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&v.createElement("title",null,i),e.children)};return Zp!==void 0?v.createElement(Zp.Consumer,null,r=>t(r)):t(Yx)}function Kx(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(e)}function Qx(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function Q4(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(e)}function J4(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-90.62-70.05c.19-1.38.8-2.66.8-4.06.05-7.55-2.61-15.27-8.61-21.71-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84c-40.33 8.38-74.66 31.07-97.59 62.57L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.35 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.42-6.97 4.17-17.02-2.81-22.45zM157.23 251.54c-8.61 67.96-36.41 93.33-52.62 110.75-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h241.92L157.23 251.54zM320 512c35.32 0 63.97-28.65 63.97-64H256.03c0 35.35 28.65 64 63.97 64z"},child:[]}]})(e)}function Jx(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function X4(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"},child:[]}]})(e)}function Z4(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256.47 216.77l86.73 109.18s-16.6 102.36-76.57 150.12C206.66 523.85 0 510.19 0 510.19s3.8-23.14 11-55.43l94.62-112.17c3.97-4.7-.87-11.62-6.65-9.5l-60.4 22.09c14.44-41.66 32.72-80.04 54.6-97.47 59.97-47.76 163.3-40.94 163.3-40.94zM636.53 31.03l-19.86-25c-5.49-6.9-15.52-8.05-22.41-2.56l-232.48 177.8-34.14-42.97c-5.09-6.41-15.14-5.21-18.59 2.21l-25.33 54.55 86.73 109.18 58.8-12.45c8-1.69 11.42-11.2 6.34-17.6l-34.09-42.92 232.48-177.8c6.89-5.48 8.04-15.53 2.55-22.44z"},child:[]}]})(e)}function mo(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function eC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function lh(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function tC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function rC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"},child:[]}]})(e)}function nC(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"},child:[]}]})(e)}function oC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function tf(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function sC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function Si(e){return te({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Xx(e){return te({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(e)}function kr(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function iC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function aC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function lC(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function fu(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function gu(e){return te({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Zx(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function cC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function dC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(e)}function uC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm65.18 216.01H224v80c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-80H94.82c-14.28 0-21.41-17.29-11.27-27.36l96.42-95.7c6.65-6.61 17.39-6.61 24.04 0l96.42 95.7c10.15 10.07 3.03 27.36-11.25 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function hC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"},child:[]}]})(e)}function rf(e){return te({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M567.938 243.908L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L8.062 243.908A47.994 47.994 0 0 0 0 270.533V400c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V270.533a47.994 47.994 0 0 0-8.062-26.625zM162.252 128h251.497l85.333 128H376l-32 64H232l-32-64H76.918l85.334-128z"},child:[]}]})(e)}function pC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}function nf(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function mu(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function oi(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(e)}function fC(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"},child:[]}]})(e)}function gC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm-16 328c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160zm112 0c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160z"},child:[]}]})(e)}function mC(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(e)}function si(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function xC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"},child:[]}]})(e)}function bC(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"},child:[]}]})(e)}function yC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(e)}function ms(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function vC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"},child:[]}]})(e)}function wC(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function xu(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function eb(e){return te({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5 22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z"},child:[]}]})(e)}function tb(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7 1.3 3 4.1 4.8 7.3 4.8 66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128.2 304H116c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h12.3c6 0 10.4-3.5 10.4-6.6 0-1.3-.8-2.7-2.1-3.8l-21.9-18.8c-8.5-7.2-13.3-17.5-13.3-28.1 0-21.3 19-38.6 42.4-38.6H156c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-12.3c-6 0-10.4 3.5-10.4 6.6 0 1.3.8 2.7 2.1 3.8l21.9 18.8c8.5 7.2 13.3 17.5 13.3 28.1.1 21.3-19 38.6-42.4 38.6zm191.8-8c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8v-68.2l-24.8 55.8c-2.9 5.9-11.4 5.9-14.3 0L224 227.8V296c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V192c0-8.8 7.2-16 16-16h16c6.1 0 11.6 3.4 14.3 8.8l17.7 35.4 17.7-35.4c2.7-5.4 8.3-8.8 14.3-8.8h16c8.8 0 16 7.2 16 16v104zm48.3 8H356c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h12.3c6 0 10.4-3.5 10.4-6.6 0-1.3-.8-2.7-2.1-3.8l-21.9-18.8c-8.5-7.2-13.3-17.5-13.3-28.1 0-21.3 19-38.6 42.4-38.6H396c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-12.3c-6 0-10.4 3.5-10.4 6.6 0 1.3.8 2.7 2.1 3.8l21.9 18.8c8.5 7.2 13.3 17.5 13.3 28.1.1 21.3-18.9 38.6-42.3 38.6z"},child:[]}]})(e)}function CC(e){return te({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function SC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(e)}function of(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(e)}function jC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function kC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(e)}function bu(e){return te({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},child:[]}]})(e)}function uo(e){return te({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function mr(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function EC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function _C(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"},child:[]}]})(e)}function TC(e){return te({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}function yu(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function vu(e){return te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function rb(e){return te({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function AC(e){return te({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function RC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function OC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function PC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function MC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function DC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function IC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function NC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(e)}function sf(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function LC(e){return te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}var kt=function(){return kt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},kt.apply(this,arguments)};function xs(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var qe="-ms-",ds="-moz-",De="-webkit-",nb="comm",Vi="rule",ch="decl",FC="@import",ob="@keyframes",zC="@layer",sb=Math.abs,dh=String.fromCharCode,wu=Object.assign;function $C(e,t){return ft(e,0)^45?(((t<<2^ft(e,0))<<2^ft(e,1))<<2^ft(e,2))<<2^ft(e,3):0}function ib(e){return e.trim()}function jr(e,t){return(e=t.exec(e))?e[0]:e}function Te(e,t,r){return e.replace(t,r)}function ii(e,t,r){return e.indexOf(t,r)}function ft(e,t){return e.charCodeAt(t)|0}function vo(e,t,r){return e.slice(t,r)}function xr(e){return e.length}function ab(e){return e.length}function es(e,t){return t.push(e),e}function BC(e,t){return e.map(t).join("")}function af(e,t){return e.filter(function(r){return!jr(r,t)})}var Ki=1,wo=1,lb=0,Vt=0,at=0,Ro="";function Qi(e,t,r,n,o,i,a,l){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:Ki,column:wo,length:a,return:"",siblings:l}}function qr(e,t){return wu(Qi("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function In(e){for(;e.root;)e=qr(e.root,{children:[e]});es(e,e.siblings)}function qC(){return at}function HC(){return at=Vt>0?ft(Ro,--Vt):0,wo--,at===10&&(wo=1,Ki--),at}function lr(){return at=Vt<lb?ft(Ro,Vt++):0,wo++,at===10&&(wo=1,Ki++),at}function fn(){return ft(Ro,Vt)}function ai(){return Vt}function Ji(e,t){return vo(Ro,e,t)}function Cu(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function GC(e){return Ki=wo=1,lb=xr(Ro=e),Vt=0,[]}function UC(e){return Ro="",e}function Ta(e){return ib(Ji(Vt-1,Su(e===91?e+2:e===40?e+1:e)))}function WC(e){for(;(at=fn())&&at<33;)lr();return Cu(e)>2||Cu(at)>3?"":" "}function YC(e,t){for(;--t&&lr()&&!(at<48||at>102||at>57&&at<65||at>70&&at<97););return Ji(e,ai()+(t<6&&fn()==32&&lr()==32))}function Su(e){for(;lr();)switch(at){case e:return Vt;case 34:case 39:e!==34&&e!==39&&Su(at);break;case 40:e===41&&Su(e);break;case 92:lr();break}return Vt}function VC(e,t){for(;lr()&&e+at!==57;)if(e+at===84&&fn()===47)break;return"/*"+Ji(t,Vt-1)+"*"+dh(e===47?e:lr())}function KC(e){for(;!Cu(fn());)lr();return Ji(e,Vt)}function QC(e){return UC(li("",null,null,null,[""],e=GC(e),0,[0],e))}function li(e,t,r,n,o,i,a,l,c){for(var d=0,u=0,p=a,f=0,b=0,g=0,m=1,x=1,y=1,E=0,A="",M=o,k=i,w=n,C=A;x;)switch(g=E,E=lr()){case 40:if(g!=108&&ft(C,p-1)==58){ii(C+=Te(Ta(E),"&","&\f"),"&\f",sb(d?l[d-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:C+=Ta(E);break;case 9:case 10:case 13:case 32:C+=WC(g);break;case 92:C+=YC(ai()-1,7);continue;case 47:switch(fn()){case 42:case 47:es(JC(VC(lr(),ai()),t,r,c),c);break;default:C+="/"}break;case 123*m:l[d++]=xr(C)*y;case 125*m:case 59:case 0:switch(E){case 0:case 125:x=0;case 59+u:y==-1&&(C=Te(C,/\f/g,"")),b>0&&xr(C)-p&&es(b>32?cf(C+";",n,r,p-1,c):cf(Te(C," ","")+";",n,r,p-2,c),c);break;case 59:C+=";";default:if(es(w=lf(C,t,r,d,u,o,l,A,M=[],k=[],p,i),i),E===123)if(u===0)li(C,t,w,w,M,i,p,l,k);else switch(f===99&&ft(C,3)===110?100:f){case 100:case 108:case 109:case 115:li(e,w,w,n&&es(lf(e,w,w,0,0,o,l,A,o,M=[],p,k),k),o,k,p,l,n?M:k);break;default:li(C,w,w,w,[""],k,0,l,k)}}d=u=b=0,m=y=1,A=C="",p=a;break;case 58:p=1+xr(C),b=g;default:if(m<1){if(E==123)--m;else if(E==125&&m++==0&&HC()==125)continue}switch(C+=dh(E),E*m){case 38:y=u>0?1:(C+="\f",-1);break;case 44:l[d++]=(xr(C)-1)*y,y=1;break;case 64:fn()===45&&(C+=Ta(lr())),f=fn(),u=p=xr(A=C+=KC(ai())),E++;break;case 45:g===45&&xr(C)==2&&(m=0)}}return i}function lf(e,t,r,n,o,i,a,l,c,d,u,p){for(var f=o-1,b=o===0?i:[""],g=ab(b),m=0,x=0,y=0;m<n;++m)for(var E=0,A=vo(e,f+1,f=sb(x=a[m])),M=e;E<g;++E)(M=ib(x>0?b[E]+" "+A:Te(A,/&\f/g,b[E])))&&(c[y++]=M);return Qi(e,t,r,o===0?Vi:l,c,d,u,p)}function JC(e,t,r,n){return Qi(e,t,r,nb,dh(qC()),vo(e,2,-2),0,n)}function cf(e,t,r,n,o){return Qi(e,t,r,ch,vo(e,0,n),vo(e,n+1,-1),n,o)}function cb(e,t,r){switch($C(e,t)){case 5103:return De+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return De+e+e;case 4789:return ds+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return De+e+ds+e+qe+e+e;case 5936:switch(ft(e,t+11)){case 114:return De+e+qe+Te(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return De+e+qe+Te(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return De+e+qe+Te(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return De+e+qe+e+e;case 6165:return De+e+qe+"flex-"+e+e;case 5187:return De+e+Te(e,/(\w+).+(:[^]+)/,De+"box-$1$2"+qe+"flex-$1$2")+e;case 5443:return De+e+qe+"flex-item-"+Te(e,/flex-|-self/g,"")+(jr(e,/flex-|baseline/)?"":qe+"grid-row-"+Te(e,/flex-|-self/g,""))+e;case 4675:return De+e+qe+"flex-line-pack"+Te(e,/align-content|flex-|-self/g,"")+e;case 5548:return De+e+qe+Te(e,"shrink","negative")+e;case 5292:return De+e+qe+Te(e,"basis","preferred-size")+e;case 6060:return De+"box-"+Te(e,"-grow","")+De+e+qe+Te(e,"grow","positive")+e;case 4554:return De+Te(e,/([^-])(transform)/g,"$1"+De+"$2")+e;case 6187:return Te(Te(Te(e,/(zoom-|grab)/,De+"$1"),/(image-set)/,De+"$1"),e,"")+e;case 5495:case 3959:return Te(e,/(image-set\([^]*)/,De+"$1$`$1");case 4968:return Te(Te(e,/(.+:)(flex-)?(.*)/,De+"box-pack:$3"+qe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+De+e+e;case 4200:if(!jr(e,/flex-|baseline/))return qe+"grid-column-align"+vo(e,t)+e;break;case 2592:case 3360:return qe+Te(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(n,o){return t=o,jr(n.props,/grid-\w+-end/)})?~ii(e+(r=r[t].value),"span",0)?e:qe+Te(e,"-start","")+e+qe+"grid-row-span:"+(~ii(r,"span",0)?jr(r,/\d+/):+jr(r,/\d+/)-+jr(e,/\d+/))+";":qe+Te(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(n){return jr(n.props,/grid-\w+-start/)})?e:qe+Te(Te(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Te(e,/(.+)-inline(.+)/,De+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(e)-1-t>6)switch(ft(e,t+1)){case 109:if(ft(e,t+4)!==45)break;case 102:return Te(e,/(.+:)(.+)-([^]+)/,"$1"+De+"$2-$3$1"+ds+(ft(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~ii(e,"stretch",0)?cb(Te(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return Te(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,o,i,a,l,c,d){return qe+o+":"+i+d+(a?qe+o+"-span:"+(l?c:+c-+i)+d:"")+e});case 4949:if(ft(e,t+6)===121)return Te(e,":",":"+De)+e;break;case 6444:switch(ft(e,ft(e,14)===45?18:11)){case 120:return Te(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+De+(ft(e,14)===45?"inline-":"")+"box$3$1"+De+"$2$3$1"+qe+"$2box$3")+e;case 100:return Te(e,":",":"+qe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Te(e,"scroll-","scroll-snap-")+e}return e}function ji(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function XC(e,t,r,n){switch(e.type){case zC:if(e.children.length)break;case FC:case ch:return e.return=e.return||e.value;case nb:return"";case ob:return e.return=e.value+"{"+ji(e.children,n)+"}";case Vi:if(!xr(e.value=e.props.join(",")))return""}return xr(r=ji(e.children,n))?e.return=e.value+"{"+r+"}":""}function ZC(e){var t=ab(e);return function(r,n,o,i){for(var a="",l=0;l<t;l++)a+=e[l](r,n,o,i)||"";return a}}function e5(e){return function(t){t.root||(t=t.return)&&e(t)}}function t5(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case ch:e.return=cb(e.value,e.length,r);return;case ob:return ji([qr(e,{value:Te(e.value,"@","@"+De)})],n);case Vi:if(e.length)return BC(r=e.props,function(o){switch(jr(o,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":In(qr(e,{props:[Te(o,/:(read-\w+)/,":"+ds+"$1")]})),In(qr(e,{props:[o]})),wu(e,{props:af(r,n)});break;case"::placeholder":In(qr(e,{props:[Te(o,/:(plac\w+)/,":"+De+"input-$1")]})),In(qr(e,{props:[Te(o,/:(plac\w+)/,":"+ds+"$1")]})),In(qr(e,{props:[Te(o,/:(plac\w+)/,qe+"input-$1")]})),In(qr(e,{props:[o]})),wu(e,{props:af(r,n)});break}return""})}}var r5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ft={},Co=typeof process<"u"&&Ft!==void 0&&(Ft.REACT_APP_SC_ATTR||Ft.SC_ATTR)||"data-styled",db="active",ub="data-styled-version",Xi="6.1.19",uh=`/*!sc*/
`,ki=typeof window<"u"&&typeof document<"u",n5=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ft!==void 0&&Ft.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ft.REACT_APP_SC_DISABLE_SPEEDY!==""?Ft.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ft.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ft!==void 0&&Ft.SC_DISABLE_SPEEDY!==void 0&&Ft.SC_DISABLE_SPEEDY!==""&&Ft.SC_DISABLE_SPEEDY!=="false"&&Ft.SC_DISABLE_SPEEDY),o5={},Zi=Object.freeze([]),So=Object.freeze({});function hb(e,t,r){return r===void 0&&(r=So),e.theme!==r.theme&&e.theme||t||r.theme}var pb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),s5=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,i5=/(^-|-$)/g;function df(e){return e.replace(s5,"-").replace(i5,"")}var a5=/(a)(d)/gi,Bs=52,uf=function(e){return String.fromCharCode(e+(e>25?39:97))};function ju(e){var t,r="";for(t=Math.abs(e);t>Bs;t=t/Bs|0)r=uf(t%Bs)+r;return(uf(t%Bs)+r).replace(a5,"$1-$2")}var Aa,fb=5381,ho=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},gb=function(e){return ho(fb,e)};function mb(e){return ju(gb(e)>>>0)}function l5(e){return e.displayName||e.name||"Component"}function Ra(e){return typeof e=="string"&&!0}var xb=typeof Symbol=="function"&&Symbol.for,bb=xb?Symbol.for("react.memo"):60115,c5=xb?Symbol.for("react.forward_ref"):60112,d5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},u5={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h5=((Aa={})[c5]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Aa[bb]=yb,Aa);function hf(e){return("type"in(t=e)&&t.type.$$typeof)===bb?yb:"$$typeof"in e?h5[e.$$typeof]:d5;var t}var p5=Object.defineProperty,f5=Object.getOwnPropertyNames,pf=Object.getOwnPropertySymbols,g5=Object.getOwnPropertyDescriptor,m5=Object.getPrototypeOf,ff=Object.prototype;function vb(e,t,r){if(typeof t!="string"){if(ff){var n=m5(t);n&&n!==ff&&vb(e,n,r)}var o=f5(t);pf&&(o=o.concat(pf(t)));for(var i=hf(e),a=hf(t),l=0;l<o.length;++l){var c=o[l];if(!(c in u5||r&&r[c]||a&&c in a||i&&c in i)){var d=g5(t,c);try{p5(e,c,d)}catch{}}}}return e}function jo(e){return typeof e=="function"}function hh(e){return typeof e=="object"&&"styledComponentId"in e}function hn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function ku(e,t){if(e.length===0)return"";for(var r=e[0],n=1;n<e.length;n++)r+=e[n];return r}function bs(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Eu(e,t,r){if(r===void 0&&(r=!1),!r&&!bs(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=Eu(e[n],t[n]);else if(bs(t))for(var n in t)e[n]=Eu(e[n],t[n]);return e}function ph(e,t){Object.defineProperty(e,"toString",{value:t})}function As(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var x5=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var r=0,n=0;n<t;n++)r+=this.groupSizes[n];return r},e.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var n=this.groupSizes,o=n.length,i=o;t>=i;)if((i<<=1)<0)throw As(16,"".concat(t));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=o;a<i;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),c=(a=0,r.length);a<c;a++)this.tag.insertRule(l,r[a])&&(this.groupSizes[t]++,l++)},e.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],n=this.indexOfGroup(t),o=n+r;this.groupSizes[t]=0;for(var i=n;i<o;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var n=this.groupSizes[t],o=this.indexOfGroup(t),i=o+n,a=o;a<i;a++)r+="".concat(this.tag.getRule(a)).concat(uh);return r},e}(),ci=new Map,Ei=new Map,di=1,qs=function(e){if(ci.has(e))return ci.get(e);for(;Ei.has(di);)di++;var t=di++;return ci.set(e,t),Ei.set(t,e),t},b5=function(e,t){di=t+1,ci.set(e,t),Ei.set(t,e)},y5="style[".concat(Co,"][").concat(ub,'="').concat(Xi,'"]'),v5=new RegExp("^".concat(Co,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),w5=function(e,t,r){for(var n,o=r.split(","),i=0,a=o.length;i<a;i++)(n=o[i])&&e.registerName(t,n)},C5=function(e,t){for(var r,n=((r=t.textContent)!==null&&r!==void 0?r:"").split(uh),o=[],i=0,a=n.length;i<a;i++){var l=n[i].trim();if(l){var c=l.match(v5);if(c){var d=0|parseInt(c[1],10),u=c[2];d!==0&&(b5(u,d),w5(e,u,c[3]),e.getTag().insertRules(d,o)),o.length=0}else o.push(l)}}},gf=function(e){for(var t=document.querySelectorAll(y5),r=0,n=t.length;r<n;r++){var o=t[r];o&&o.getAttribute(Co)!==db&&(C5(e,o),o.parentNode&&o.parentNode.removeChild(o))}};function S5(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var wb=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(l){var c=Array.from(l.querySelectorAll("style[".concat(Co,"]")));return c[c.length-1]}(r),i=o!==void 0?o.nextSibling:null;n.setAttribute(Co,db),n.setAttribute(ub,Xi);var a=S5();return a&&n.setAttribute("nonce",a),r.insertBefore(n,i),n},j5=function(){function e(t){this.element=wb(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var n=document.styleSheets,o=0,i=n.length;o<i;o++){var a=n[o];if(a.ownerNode===r)return a}throw As(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},e}(),k5=function(){function e(t){this.element=wb(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var n=document.createTextNode(r);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),E5=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),mf=ki,_5={isServer:!ki,useCSSOMInjection:!n5},_i=function(){function e(t,r,n){t===void 0&&(t=So),r===void 0&&(r={});var o=this;this.options=kt(kt({},_5),t),this.gs=r,this.names=new Map(n),this.server=!!t.isServer,!this.server&&ki&&mf&&(mf=!1,gf(this)),ph(this,function(){return function(i){for(var a=i.getTag(),l=a.length,c="",d=function(p){var f=function(y){return Ei.get(y)}(p);if(f===void 0)return"continue";var b=i.names.get(f),g=a.getGroup(p);if(b===void 0||!b.size||g.length===0)return"continue";var m="".concat(Co,".g").concat(p,'[id="').concat(f,'"]'),x="";b!==void 0&&b.forEach(function(y){y.length>0&&(x+="".concat(y,","))}),c+="".concat(g).concat(m,'{content:"').concat(x,'"}').concat(uh)},u=0;u<l;u++)d(u);return c}(o)})}return e.registerId=function(t){return qs(t)},e.prototype.rehydrate=function(){!this.server&&ki&&gf(this)},e.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new e(kt(kt({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var n=r.useCSSOMInjection,o=r.target;return r.isServer?new E5(o):n?new j5(o):new k5(o)}(this.options),new x5(t)));var t},e.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},e.prototype.registerName=function(t,r){if(qs(t),this.names.has(t))this.names.get(t).add(r);else{var n=new Set;n.add(r),this.names.set(t,n)}},e.prototype.insertRules=function(t,r,n){this.registerName(t,r),this.getTag().insertRules(qs(t),n)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(qs(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),T5=/&/g,A5=/^\s*\/\/.*$/gm;function Cb(e,t){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Cb(r.children,t)),r})}function R5(e){var t,r,n,o=So,i=o.options,a=i===void 0?So:i,l=o.plugins,c=l===void 0?Zi:l,d=function(f,b,g){return g.startsWith(r)&&g.endsWith(r)&&g.replaceAll(r,"").length>0?".".concat(t):f},u=c.slice();u.push(function(f){f.type===Vi&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(T5,r).replace(n,d))}),a.prefix&&u.push(t5),u.push(XC);var p=function(f,b,g,m){b===void 0&&(b=""),g===void 0&&(g=""),m===void 0&&(m="&"),t=m,r=b,n=new RegExp("\\".concat(r,"\\b"),"g");var x=f.replace(A5,""),y=QC(g||b?"".concat(g," ").concat(b," { ").concat(x," }"):x);a.namespace&&(y=Cb(y,a.namespace));var E=[];return ji(y,ZC(u.concat(e5(function(A){return E.push(A)})))),E};return p.hash=c.length?c.reduce(function(f,b){return b.name||As(15),ho(f,b.name)},fb).toString():"",p}var O5=new _i,_u=R5(),Sb=v.createContext({shouldForwardProp:void 0,styleSheet:O5,stylis:_u});Sb.Consumer;v.createContext(void 0);function Tu(){return h.useContext(Sb)}var P5=function(){function e(t,r){var n=this;this.inject=function(o,i){i===void 0&&(i=_u);var a=n.name+i.hash;o.hasNameForId(n.id,a)||o.insertRules(n.id,a,i(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,ph(this,function(){throw As(12,String(n.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=_u),this.name+t.hash},e}(),M5=function(e){return e>="A"&&e<="Z"};function xf(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(r===1&&n==="-"&&e[0]==="-")return e;M5(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var jb=function(e){return e==null||e===!1||e===""},kb=function(e){var t,r,n=[];for(var o in e){var i=e[o];e.hasOwnProperty(o)&&!jb(i)&&(Array.isArray(i)&&i.isCss||jo(i)?n.push("".concat(xf(o),":"),i,";"):bs(i)?n.push.apply(n,xs(xs(["".concat(o," {")],kb(i),!1),["}"],!1)):n.push("".concat(xf(o),": ").concat((t=o,(r=i)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in r5||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return n};function Kr(e,t,r,n){if(jb(e))return[];if(hh(e))return[".".concat(e.styledComponentId)];if(jo(e)){if(!jo(i=e)||i.prototype&&i.prototype.isReactComponent||!t)return[e];var o=e(t);return Kr(o,t,r,n)}var i;return e instanceof P5?r?(e.inject(r,n),[e.getName(n)]):[e]:bs(e)?kb(e):Array.isArray(e)?Array.prototype.concat.apply(Zi,e.map(function(a){return Kr(a,t,r,n)})):[e.toString()]}function Eb(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(jo(r)&&!hh(r))return!1}return!0}var D5=gb(Xi),I5=function(){function e(t,r,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&Eb(t),this.componentId=r,this.baseHash=ho(D5,r),this.baseStyle=n,_i.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,n){var o=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))o=hn(o,this.staticRulesId);else{var i=ku(Kr(this.rules,t,r,n)),a=ju(ho(this.baseHash,i)>>>0);if(!r.hasNameForId(this.componentId,a)){var l=n(i,".".concat(a),void 0,this.componentId);r.insertRules(this.componentId,a,l)}o=hn(o,a),this.staticRulesId=a}else{for(var c=ho(this.baseHash,n.hash),d="",u=0;u<this.rules.length;u++){var p=this.rules[u];if(typeof p=="string")d+=p;else if(p){var f=ku(Kr(p,t,r,n));c=ho(c,f+u),d+=f}}if(d){var b=ju(c>>>0);r.hasNameForId(this.componentId,b)||r.insertRules(this.componentId,b,n(d,".".concat(b),void 0,this.componentId)),o=hn(o,b)}}return o},e}(),fh=v.createContext(void 0);fh.Consumer;var Oa={};function N5(e,t,r){var n=hh(e),o=e,i=!Ra(e),a=t.attrs,l=a===void 0?Zi:a,c=t.componentId,d=c===void 0?function(M,k){var w=typeof M!="string"?"sc":df(M);Oa[w]=(Oa[w]||0)+1;var C="".concat(w,"-").concat(mb(Xi+w+Oa[w]));return k?"".concat(k,"-").concat(C):C}(t.displayName,t.parentComponentId):c,u=t.displayName,p=u===void 0?function(M){return Ra(M)?"styled.".concat(M):"Styled(".concat(l5(M),")")}(e):u,f=t.displayName&&t.componentId?"".concat(df(t.displayName),"-").concat(t.componentId):t.componentId||d,b=n&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(n&&o.shouldForwardProp){var m=o.shouldForwardProp;if(t.shouldForwardProp){var x=t.shouldForwardProp;g=function(M,k){return m(M,k)&&x(M,k)}}else g=m}var y=new I5(r,f,n?o.componentStyle:void 0);function E(M,k){return function(w,C,_){var z=w.attrs,D=w.componentStyle,S=w.defaultProps,P=w.foldedComponentIds,I=w.styledComponentId,F=w.target,G=v.useContext(fh),V=Tu(),B=w.shouldForwardProp||V.shouldForwardProp,Z=hb(C,G,S)||So,Q=function(Se,ze,nt){for(var ot,Pe=kt(kt({},ze),{className:void 0,theme:nt}),Fe=0;Fe<Se.length;Fe+=1){var Re=jo(ot=Se[Fe])?ot(Pe):ot;for(var xe in Re)Pe[xe]=xe==="className"?hn(Pe[xe],Re[xe]):xe==="style"?kt(kt({},Pe[xe]),Re[xe]):Re[xe]}return ze.className&&(Pe.className=hn(Pe.className,ze.className)),Pe}(z,C,Z),ue=Q.as||F,ie={};for(var X in Q)Q[X]===void 0||X[0]==="$"||X==="as"||X==="theme"&&Q.theme===Z||(X==="forwardedAs"?ie.as=Q.forwardedAs:B&&!B(X,ue)||(ie[X]=Q[X]));var J=function(Se,ze){var nt=Tu(),ot=Se.generateAndInjectStyles(ze,nt.styleSheet,nt.stylis);return ot}(D,Q),Ce=hn(P,I);return J&&(Ce+=" "+J),Q.className&&(Ce+=" "+Q.className),ie[Ra(ue)&&!pb.has(ue)?"class":"className"]=Ce,_&&(ie.ref=_),h.createElement(ue,ie)}(A,M,k)}E.displayName=p;var A=v.forwardRef(E);return A.attrs=b,A.componentStyle=y,A.displayName=p,A.shouldForwardProp=g,A.foldedComponentIds=n?hn(o.foldedComponentIds,o.styledComponentId):"",A.styledComponentId=f,A.target=n?o.target:e,Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(M){this._foldedDefaultProps=n?function(k){for(var w=[],C=1;C<arguments.length;C++)w[C-1]=arguments[C];for(var _=0,z=w;_<z.length;_++)Eu(k,z[_],!0);return k}({},o.defaultProps,M):M}}),ph(A,function(){return".".concat(A.styledComponentId)}),i&&vb(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),A}function bf(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r}var yf=function(e){return Object.assign(e,{isCss:!0})};function _b(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(jo(e)||bs(e))return yf(Kr(bf(Zi,xs([e],t,!0))));var n=e;return t.length===0&&n.length===1&&typeof n[0]=="string"?Kr(n):yf(Kr(bf(n,t)))}function Au(e,t,r){if(r===void 0&&(r=So),!t)throw As(1,t);var n=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return e(t,r,_b.apply(void 0,xs([o],i,!1)))};return n.attrs=function(o){return Au(e,t,kt(kt({},r),{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},n.withConfig=function(o){return Au(e,t,kt(kt({},r),o))},n}var Tb=function(e){return Au(N5,e)},et=Tb;pb.forEach(function(e){et[e]=Tb(e)});var L5=function(){function e(t,r){this.rules=t,this.componentId=r,this.isStatic=Eb(t),_i.registerId(this.componentId+1)}return e.prototype.createStyles=function(t,r,n,o){var i=o(ku(Kr(this.rules,r,n,o)),""),a=this.componentId+t;n.insertRules(a,a,i)},e.prototype.removeStyles=function(t,r){r.clearRules(this.componentId+t)},e.prototype.renderStyles=function(t,r,n,o){t>2&&_i.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,r,n,o)},e}();function F5(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=_b.apply(void 0,xs([e],t,!1)),o="sc-global-".concat(mb(JSON.stringify(n))),i=new L5(n,o),a=function(c){var d=Tu(),u=v.useContext(fh),p=v.useRef(d.styleSheet.allocateGSInstance(o)).current;return d.styleSheet.server&&l(p,c,d.styleSheet,u,d.stylis),v.useLayoutEffect(function(){if(!d.styleSheet.server)return l(p,c,d.styleSheet,u,d.stylis),function(){return i.removeStyles(p,d.styleSheet)}},[p,c,d.styleSheet,u,d.stylis]),null};function l(c,d,u,p,f){if(i.isStatic)i.renderStyles(c,o5,u,f);else{var b=kt(kt({},d),{theme:hb(d,p,a.defaultProps)});i.renderStyles(c,b,u,f)}}return v.memo(a)}const Ru=({direction:e="right",...t})=>{const n=e==="right"?"M2 4 L6 8 L2 12 M6 4 L10 8 L6 12 M10 4 L14 8 L10 12":"M14 4 L10 8 L14 12 M10 4 L6 8 L10 12 M6 4 L2 8 L6 12";return s.jsx(lt,{viewBox:"0 0 16 16",sx:{filter:"drop-shadow(0 0 6px rgba(255,140,0,0.85))"},...t,children:s.jsx("path",{d:n,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},Hs={"Positive Contact":"#38A169","Negative Contact":"#E53E3E",SOLD:"#84CC16","Employer Coverage":"#2196F3",Brokie:"#FF9800","Buy Or Die":"#9C27B0","Unhealthy/Referred":"#795548",Foreign:"#607D8B",Quoted:"#00BCD4",Appointment:"#FFC107","No Contact":"#805AD5","No Disposition":"#9CA3AF","Invalid/Disconnected":"#E91E63","Hung Up":"#9E9E9E",Ghosted:"#E6F0F5",default:"#FFFFFF"},Ab=h.createContext(null),z5=({children:e})=>{const{data:t,isLoading:r,error:n}=Es({queryKey:["dispositions"],queryFn:async()=>{try{const x=await se.get("/api/dispositions");return x.data&&Array.isArray(x.data.dispositions)?x.data.dispositions:x.data&&x.data.success&&Array.isArray(x.data.data?.dispositions)?x.data.data.dispositions:(console.warn("Fetched dispositions is not in the expected format (response.data.dispositions is not an array). Using empty array.",x.data),[])}catch(x){return console.error("Error fetching dispositions:",x),[]}},staleTime:6e4,refetchOnMount:!0,refetchOnWindowFocus:!0}),o=t||[],[i,a]=h.useState(()=>{const x=localStorage.getItem("notesMap");return x?JSON.parse(x):{}}),[l,c]=h.useState(()=>{const x=localStorage.getItem("dispositionsMap");return x?JSON.parse(x):{}}),[d,u]=h.useState(()=>{const x=localStorage.getItem("colorMap");return x?JSON.parse(x):{}}),p=h.useCallback(x=>{if(!x||x.trim()==="")return Hs.default;if(!Array.isArray(o))return console.warn("customDispositions is not an array in getColorForDisposition, returning default color.",o),Hs.default;const y=o.find(E=>E.name===x);return y&&y.color?y.color:Hs[x]||Hs.default},[o]);h.useEffect(()=>{localStorage.setItem("notesMap",JSON.stringify(i))},[i]),h.useEffect(()=>{localStorage.setItem("dispositionsMap",JSON.stringify(l))},[l]),h.useEffect(()=>{localStorage.setItem("colorMap",JSON.stringify(d))},[d]);const f=h.useCallback((x,y)=>{a(E=>({...E,[x]:y}))},[]),b=h.useCallback((x,y)=>{c(A=>({...A,[x]:y}));const E=p(y);u(A=>({...A,[x]:E}))},[p]),g=h.useCallback((x,y)=>{u(E=>({...E,[x]:y}))},[]);h.useEffect(()=>{const x={...d};let y=!1;Object.entries(l).forEach(([E,A])=>{const M=p(A);(!d[E]||d[E]!==M)&&(x[E]=M,y=!0)}),y&&u(x)},[l,o,p,d]);const m={notesMap:i,dispositionsMap:l,colorMap:d,updateNotes:f,updateDisposition:b,updateColor:g,getColorForDisposition:p};return s.jsx(Ab.Provider,{value:m,children:e})};function gh(){const e=h.useContext(Ab);if(!e)throw new Error("useLeads must be used within a LeadProvider");return e}const Ou=({size:e=48})=>{const[t,r]=h.useState(!1),[n,o]=h.useState(!1),[i,a]=h.useState(!1);h.useEffect(()=>{const d=setTimeout(()=>{a(!0)},3e3);return()=>clearTimeout(d)},[]);const l=()=>{console.warn("CROC LOADING.gif failed to load, trying video fallback"),r(!0)},c=()=>{console.warn("CROC LOADING.mp4 failed to load, using emoji fallback"),o(!0)};return i||t&&n?s.jsx("div",{style:{width:e,height:e,display:"flex",alignItems:"center",justifyContent:"center",fontSize:e*.6,animation:"pulse 1.5s ease-in-out infinite"},children:"🐊"}):t?s.jsx("video",{src:"/ANIMATION/(NEW) CROC LOADING.mp4",width:e,height:e,style:{display:"block",margin:"0 auto",objectFit:"contain",pointerEvents:"none"},muted:!0,loop:!0,playsInline:!0,onError:c,onLoadStart:()=>console.log("Loading video animation..."),onCanPlay:()=>console.log("Video animation ready")}):s.jsx("img",{src:"/ANIMATION/CROCLOAD.gif",width:e,height:e,style:{display:"block",margin:"0 auto",objectFit:"contain",pointerEvents:"none"},alt:"Loading...",onError:l,onLoad:()=>console.log("GIF animation loaded successfully")})},$5=()=>{const[e,t]=h.useState(!1);return h.useEffect(()=>{const r=requestAnimationFrame(()=>t(!0));return()=>cancelAnimationFrame(r)},[]),h.useEffect(()=>{const r=setTimeout(()=>{},300);return()=>clearTimeout(r)},[]),s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 0.3s ease",opacity:e?1:0,zIndex:9999},children:s.jsx(Ou,{size:96})})},B5=oe.div`
  position: relative;
  min-width: 120px;
  z-index: 9999;
`,q5=oe.button`
  min-width: 120px;
  width: auto;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  color: white;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-weight: 600;
  font-size: 0.875rem;
  line-height: 1.2;
  height: 36px;
  letter-spacing: 0.01em;
  padding: 0 10px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  border: 1px solid transparent;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;

  &:focus {
    outline: none;
    border-color: #f97316;
  }

  &.active {
    background-color: rgba(180, 83, 9, 0.8);
    color: #fbbf24;
    border-width: 2px;
    border-color: #f97316;
  }
`,H5=oe.div`
  position: absolute;
  top: 38px;
  left: 0;
  width: 100%;
  max-height: 280px;
  overflow-y: auto;
  background-color: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  z-index: 9999;
  padding: 4px 0;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.55);
  opacity: 1;
  transform: translateY(0);
  transition: opacity 0.15s ease, transform 0.15s ease;

  &.closing {
    opacity: 0;
    transform: translateY(-6px);
  }
`,vf=oe.div`
  padding: 4px 8px;
  cursor: pointer;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-size: 0.85rem;
  color: white;
  display: flex;
  align-items: center;
  gap: 8px;

  &:hover {
    background-color: rgba(255, 255, 255, 0.08);
  }

  &.selected {
    background-color: rgba(249, 115, 22, 0.35);
    font-weight: 600;
  }
`,wf=oe.input`
  margin-right: 6px;
`,G5=()=>s.jsx("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 1L6 5L11 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),U5=({selectedStates:e,availableStates:t,onChange:r,className:n})=>{const[o,i]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef(null),d=h.useRef(null),[u,p]=h.useState({top:0,left:0,width:0});h.useEffect(()=>{if(o&&d.current){const g=d.current.getBoundingClientRect();p({top:g.bottom+window.scrollY,left:g.left+window.scrollX,width:g.width})}},[o]),h.useEffect(()=>{const g=m=>{c.current&&!c.current.contains(m.target)&&d.current&&!d.current.contains(m.target)&&i(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const f=g=>{let m;g===""?m=[]:e.includes(g)?m=e.filter(x=>x!==g):m=[...e,g],r(m)},b=()=>e.length===0?"All States":e.length===1?e[0]:`${e.length} States`;return s.jsxs(B5,{className:n,children:[s.jsxs(q5,{ref:d,className:e.length>0?"active":"",onClick:()=>i(!o),children:[b(),s.jsx(G5,{})]}),(o||a)&&Qu.createPortal(s.jsxs(H5,{ref:c,style:{position:"fixed",top:`${u.top}px`,left:`${u.left}px`,width:`${u.width}px`,margin:0},onMouseLeave:()=>{a||(l(!0),setTimeout(()=>{l(!1),i(!1)},150))},className:a?"closing":"",children:[s.jsxs(vf,{className:e.length===0?"selected":"",onClick:()=>f(""),children:[s.jsx(wf,{type:"checkbox",checked:e.length===0,onChange:()=>f("")}),"All States"]}),t.map(g=>s.jsxs(vf,{className:e.includes(g)?"selected":"",onClick:()=>f(g),children:[s.jsx(wf,{type:"checkbox",checked:e.includes(g),onChange:()=>f(g)}),g]},g))]}),document.body)]})},W5=oe.div`
  position: relative;
  min-width: 150px;
  z-index: 9999;
`,Y5=oe.button`
  min-width: 150px;
  width: auto;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  color: white;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-weight: 600;
  font-size: 0.875rem;
  line-height: 1.2;
  height: 36px;
  letter-spacing: 0.01em;
  padding: 0 10px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  border: 1px solid transparent;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;

  &:focus {
    outline: none;
    border-color: #f97316;
  }

  &.active {
    background-color: rgba(180, 83, 9, 0.8);
    color: #fbbf24;
    border-width: 2px;
    border-color: #f97316;
  }
`,V5=oe.div`
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  max-height: 300px;
  overflow-y: auto;
  background-color: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  z-index: 9999;
  margin-top: 4px;
  padding: 5px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  opacity: 1;
  transform: translateY(0);
  transition: opacity 0.15s ease, transform 0.15s ease;

  &.closing {
    opacity: 0;
    transform: translateY(-6px);
  }
`,K5=oe.div`
  padding: 6px 10px;
  cursor: pointer;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-size: 0.875rem;
  color: black;
  display: flex;
  align-items: center;
  background-color: ${e=>e.$backgroundColor||"transparent"};
  margin: 2px 5px;
  border-radius: 4px;

  &:hover {
    filter: brightness(1.1);
  }

  &.selected {
    border: 2px solid black;
    font-weight: 600;
  }
`,Q5=oe.div`
  padding: 6px 10px;
  cursor: pointer;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-size: 0.875rem;
  color: white;
  display: flex;
  align-items: center;
  margin: 2px 5px;

  &:hover {
    background-color: rgba(249, 115, 22, 0.2);
  }

  &.selected {
    background-color: rgba(249, 115, 22, 0.4);
    font-weight: 600;
  }
`,Cf=oe.input`
  margin-right: 8px;
`,J5=()=>s.jsx("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 1L6 5L11 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),X5=({selectedDispositions:e,availableDispositions:t,getColorForDisposition:r,onChange:n,className:o})=>{const[i,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(null),u=h.useRef(null),[p,f]=h.useState({top:0,left:0,width:0});h.useEffect(()=>{if(i&&u.current){const m=u.current.getBoundingClientRect();f({top:m.bottom+window.scrollY,left:m.left+window.scrollX,width:m.width})}},[i]),h.useEffect(()=>{const m=x=>{d.current&&!d.current.contains(x.target)&&u.current&&!u.current.contains(x.target)&&a(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const b=m=>{let x;m===""?x=[]:e.includes(m)?x=e.filter(y=>y!==m):x=[...e,m],n(x)},g=()=>e.length===0?"All Dispositions":e.length===1?e[0]:`${e.length} Dispositions`;return s.jsxs(W5,{className:o,children:[s.jsxs(Y5,{ref:u,className:e.length>0?"active":"",onClick:()=>a(!i),children:[g(),s.jsx(J5,{})]}),(i||l)&&Qu.createPortal(s.jsxs(V5,{ref:d,style:{position:"fixed",top:`${p.top}px`,left:`${p.left}px`,width:`${p.width}px`,margin:0},onMouseLeave:()=>{l||(c(!0),setTimeout(()=>{c(!1),a(!1)},150))},className:l?"closing":"",children:[s.jsxs(Q5,{className:e.length===0?"selected":"",onClick:()=>b(""),children:[s.jsx(Cf,{type:"checkbox",checked:e.length===0,onChange:()=>b("")}),"All Dispositions"]}),t.map(m=>s.jsxs(K5,{className:e.includes(m)?"selected":"",onClick:()=>b(m),$backgroundColor:r(m),children:[s.jsx(Cf,{type:"checkbox",checked:e.includes(m),onChange:()=>b(m)}),m==="Ghosted"?"Ghosted 👻":m]},m))]}),document.body)]})},Z5=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],e3=["Positive Contact","Negative Contact","Employer Coverage","Brokie","Buy Or Die","Unhealthy/Referred","Foreign","Quoted","SOLD","Appointment","No Contact","Invalid/Disconnected","Hung Up","Ghosted","New Lead"],t3={all:"all",nextgen:"nextgen",marketplace:"marketplace",selfgen:"selfgen",manual:"manual"},Ze={PAGINATION:{defaultPage:1,defaultLimit:50,minLimit:10,maxLimit:500},SECURITY:{maxSearchLength:100,maxFilterValues:50},PERFORMANCE:{cacheTime:5*60*1e3,slowQueryThreshold:1e3},DEBOUNCE:{searchDelay:300}};function Pa(){return{page:Ze.PAGINATION.defaultPage,limit:Ze.PAGINATION.defaultLimit,sortBy:"createdAt",sortDirection:"desc",filters:{pipelineSource:"all"}}}function r3(e){const t=[];if(!e||typeof e!="object")return{valid:!1,errors:[{field:"root",message:"Invalid query state object"}]};const r=e;if((typeof r.page!="number"||r.page<1)&&t.push({field:"page",message:"Page must be a positive number",value:r.page}),(typeof r.limit!="number"||r.limit<Ze.PAGINATION.minLimit||r.limit>Ze.PAGINATION.maxLimit)&&t.push({field:"limit",message:`Limit must be between ${Ze.PAGINATION.minLimit} and ${Ze.PAGINATION.maxLimit}`,value:r.limit}),r.search!==void 0&&(typeof r.search!="string"?t.push({field:"search",message:"Search must be a string",value:r.search}):r.search.length>Ze.SECURITY.maxSearchLength&&t.push({field:"search",message:`Search must be less than ${Ze.SECURITY.maxSearchLength} characters`,value:r.search})),r.sortBy!=="createdAt"&&t.push({field:"sortBy",message:"Invalid sort field",value:r.sortBy}),r.sortDirection!=="asc"&&r.sortDirection!=="desc"&&t.push({field:"sortDirection",message:'Sort direction must be "asc" or "desc"',value:r.sortDirection}),r.filters&&(r.filters.states&&(!Array.isArray(r.filters.states)||r.filters.states.length>Ze.SECURITY.maxFilterValues)&&t.push({field:"filters.states",message:`States must be an array with max ${Ze.SECURITY.maxFilterValues} items`,value:r.filters.states}),r.filters.dispositions&&(!Array.isArray(r.filters.dispositions)||r.filters.dispositions.length>Ze.SECURITY.maxFilterValues)&&t.push({field:"filters.dispositions",message:`Dispositions must be an array with max ${Ze.SECURITY.maxFilterValues} items`,value:r.filters.dispositions}),r.filters.pipelineSource&&!["all","nextgen","marketplace","selfgen","csv","manual","usha"].includes(r.filters.pipelineSource)&&t.push({field:"filters.pipelineSource",message:"Invalid pipeline source",value:r.filters.pipelineSource})),t.length>0)return{valid:!1,errors:t};const n={page:r.page,limit:r.limit,sortBy:r.sortBy,sortDirection:r.sortDirection,filters:{states:r.filters?.states?.filter(o=>o.length>0),dispositions:r.filters?.dispositions?.filter(o=>o.length>0),pipelineSource:r.filters?.pipelineSource||"all"},getAllResults:r.getAllResults,requestId:r.requestId};return typeof r.search=="string"&&(n.search=r.search),{valid:!0,data:n}}function Ti(e){const t=new URLSearchParams;return t.set("page",e.page.toString()),t.set("limit",e.limit.toString()),t.set("sortBy",e.sortBy),t.set("sortDirection",e.sortDirection),e.search&&t.set("search",e.search),e.filters?.states&&e.filters.states.length>0&&t.set("states",e.filters.states.join(",")),e.filters?.dispositions&&e.filters.dispositions.length>0&&t.set("dispositions",e.filters.dispositions.join(",")),e.filters?.pipelineSource&&e.filters.pipelineSource!=="all"&&t.set("pipelineSource",e.filters.pipelineSource),e.getAllResults&&t.set("getAllResults","true"),e.requestId&&t.set("requestId",e.requestId),t}function Sf(e){const t={};if(e.has("page")){const r=parseInt(e.get("page"),10);!isNaN(r)&&r>0&&(t.page=r)}if(e.has("limit")){const r=parseInt(e.get("limit"),10);!isNaN(r)&&r>=Ze.PAGINATION.minLimit&&r<=Ze.PAGINATION.maxLimit&&(t.limit=r)}if(e.has("sortBy")&&e.get("sortBy")==="createdAt"&&(t.sortBy="createdAt"),e.has("sortDirection")){const r=e.get("sortDirection");(r==="asc"||r==="desc")&&(t.sortDirection=r)}if(e.has("search")){const r=e.get("search");r.length<=Ze.SECURITY.maxSearchLength&&(t.search=r)}if(t.filters={},e.has("states")){const r=e.get("states").split(",").filter(n=>n);r.length<=Ze.SECURITY.maxFilterValues&&(t.filters.states=r)}if(e.has("dispositions")){const r=e.get("dispositions").split(",").filter(n=>n);r.length<=Ze.SECURITY.maxFilterValues&&(t.filters.dispositions=r)}if(e.has("pipelineSource")){const r=e.get("pipelineSource");["all","nextgen","marketplace","selfgen","csv","manual","usha"].includes(r)&&(t.filters.pipelineSource=r)}return e.has("getAllResults")&&(t.getAllResults=!0),e.has("requestId")&&(t.requestId=e.get("requestId")),t}const n3=300;function o3(){const e=Qt(),t=ks(),[r,n]=h.useState(0),[o,i]=h.useState(()=>{const g=new URLSearchParams(t.search),m=Sf(g),x=Pa();return{...x,...m,filters:{...x.filters,...m.filters}}}),[a,l]=h.useState(!1),[c,d]=h.useState([]),u=h.useRef(null),p=h.useCallback(g=>{const m=Ti(g);e(`?${m.toString()}`,{replace:!0})},[e]),f=h.useCallback(g=>{i(m=>{const x={...m,...g,filters:g.filters?{...m.filters,...g.filters}:m.filters};console.log("updateQueryState called with:",g),console.log("New state will be:",x),console.log("Serialized params:",Ti(x).toString());const y=r3(x);if(!y.valid)return d(y.errors||[]),m;d([]),u.current&&clearTimeout(u.current),(g.search!==void 0||g.filters)&&(x.page=1);const E=g.filters&&Object.keys(g.filters).length===1&&"pipelineSource"in g.filters;return(g.search!==void 0||g.filters)&&!E?(l(!0),u.current=setTimeout(()=>{p(x),l(!1)},n3)):p(x),n(A=>A+1),y.data||x})},[p]),b=h.useCallback(()=>{const g=Pa();i(g),p(g),d([]),n(m=>m+1)},[p]);return h.useEffect(()=>{const g=()=>{const m=new URLSearchParams(window.location.search),x=Sf(m),y=Pa();i({...y,...x,filters:{...y.filters,...x.filters}})};return window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[]),h.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]),{queryState:o,updateQueryState:f,resetFilters:b,isDebouncing:a,errors:c,queryVersion:r}}const Fr=new Map;function ui(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function s3(e){return e&&Array.isArray(e.leads)&&typeof e.pagination=="object"&&typeof e.pagination.total=="number"&&typeof e.pagination.page=="number"&&typeof e.pagination.pages=="number"&&typeof e.pagination.limit=="number"}function i3(e){const t=ui();if(e.response?.data&&typeof e.response.data=="object"){const r=e.response.data;return{error:r.error||"An error occurred",details:r.details,requestId:r.requestId||t,code:r.code||e.code}}return e.code==="ECONNABORTED"?{error:"Request timeout",requestId:t,code:"TIMEOUT"}:e.message==="canceled"?{error:"Request was cancelled",requestId:t,code:"CANCELLED"}:{error:e.message||"Network error",requestId:t,code:e.code}}const hi={async queryLeads(e){const t="leads-query",r=ui();Fr.has(t)&&(Fr.get(t).cancel("New request initiated"),Fr.delete(t));const n=Oe.CancelToken.source();Fr.set(t,n);try{const o=Date.now(),i=Ti(e);i.set("requestId",r);const a=await se.get("/leads",{params:i,cancelToken:n.token,headers:{"X-Request-ID":r}}),l=Date.now()-o;if(!s3(a.data))throw new Error("Invalid response format");const c={...a.data,meta:{...a.data.meta,queryTime:l,requestId:r,cached:a.headers["x-cache-hit"]==="true"}};return l>Ze.PERFORMANCE.slowQueryThreshold&&console.warn(`Slow query detected: ${l}ms`,{requestId:r,queryState:e}),c}catch(o){throw Oe.isAxiosError(o)?i3(o):{error:"Unexpected error",requestId:r,code:"UNKNOWN"}}finally{Fr.get(t)?.token===n.token&&Fr.delete(t)}},async getFilterOptions(){try{return(await se.get("/leads/filters",{headers:{"X-Request-ID":ui()}})).data}catch(e){return console.error("Failed to fetch filter options, using defaults",e),{states:Array.from(Z5),dispositions:Array.from(e3),sources:Object.keys(t3)}}},async exportLeads(e,t="csv"){const r=Ti(e);return r.set("format",t),r.delete("page"),r.delete("limit"),(await se.get("/leads/export",{params:r,responseType:"blob",headers:{"X-Request-ID":ui()}})).data},cancelAllRequests(){Fr.forEach((e,t)=>{e.cancel("All requests cancelled"),Fr.delete(t)})},async updateNotes(e,t){return(await se.patch(`/api/leads/${e}/notes`,{notes:t})).data}};function Ma(e,t){return["leads",e,t]}function a3({queryState:e,queryVersion:t,enabled:r=!0}){const n=Mr(),o=Es({queryKey:Ma(e,t),queryFn:()=>hi.queryLeads(e),enabled:r,placeholderData:l=>l,staleTime:Ze.PERFORMANCE.cacheTime,gcTime:Ze.PERFORMANCE.cacheTime*2,refetchInterval:6e4,refetchIntervalInBackground:!0,retry:(l,c)=>c?.code?.startsWith("4")?!1:l<2,retryDelay:l=>Math.min(1e3*2**l,3e4)}),i=()=>{const l=o.data;if(l&&e.page<l.pagination.pages){const c={...e,page:e.page+1};n.prefetchQuery({queryKey:Ma(c,t),queryFn:()=>hi.queryLeads(c),staleTime:Ze.PERFORMANCE.cacheTime})}},a=()=>{if(o.data&&e.page>1){const c={...e,page:e.page-1};n.prefetchQuery({queryKey:Ma(c,t),queryFn:()=>hi.queryLeads(c),staleTime:Ze.PERFORMANCE.cacheTime})}};return o.isSuccess&&!o.isFetching&&o.data&&setTimeout(()=>{i(),a()},100),o.isSuccess&&o.data?.meta.queryTime&&o.data.meta.queryTime>Ze.PERFORMANCE.slowQueryThreshold&&console.warn("Slow query detected:",{time:o.data.meta.queryTime,queryState:e}),{leads:o.data?.leads||[],pagination:o.data?.pagination||{total:0,page:e.page,pages:0,limit:e.limit},isLoading:o.isLoading,isInitialLoading:o.isInitialLoading,isError:o.isError,error:o.error,isFetching:o.isFetching,refetch:o.refetch,queryTime:o.data?.meta?.queryTime,isCached:o.data?.meta?.cached}}const Pu=e=>{try{if(!e||typeof e!="string"||e.length<3)return"America/New_York";const t=e.substring(0,3),r=parseInt(t,10);return r>=900&&r<=961||r>=970&&r<=986||r>=889&&r<=898?"America/Los_Angeles":r>=800&&r<=816||r>=820&&r<=831||r>=832&&r<=838||r>=840&&r<=847||r>=850&&r<=865||r>=875&&r<=884?"America/Denver":r>=500&&r<=599||r>=600&&r<=658||r>=660&&r<=693||r>=700&&r<=799||r>=716&&r<=729?"America/Chicago":"America/New_York"}catch(t){return console.error("Error determining timezone from zip code:",t),"America/New_York"}},l3={"America/New_York":"EST","America/Chicago":"CST","America/Denver":"MST","America/Los_Angeles":"PST","America/Phoenix":"MST","America/Anchorage":"AKST","Pacific/Honolulu":"HST"},pi=e=>{try{const r=Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"short"}).formatToParts(new Date).find(n=>n.type==="timeZoneName");if(r?.value)return r.value.replace(/\s/g,"")}catch{}return l3[e]||"UNK"},jf=e=>{try{const t={hour:"numeric",minute:"2-digit",hour12:!0,timeZone:e},r=new Intl.DateTimeFormat("en-US",t).format(new Date),n=pi(e);return`${r} ${n}`}catch(t){return console.error("Error formatting time:",t),new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}},c3=e=>{const[t,r]=h.useState(""),n=h.useRef(!1),o=h.useRef(!0);return h.useEffect(()=>{try{const i=Pu(e);r(jf(i));const a=setInterval(()=>{if(o.current)try{r(jf(i)),n.current&&(n.current=!1)}catch(l){n.current||(console.error("Error updating time in useLocalTime:",l),n.current=!0)}},6e4);return()=>{clearInterval(a)}}catch(i){console.error("Error in useLocalTime hook:",i),r(new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))}return()=>{o.current=!1}},[e]),t},d3=oe.div`
  font-size: 0.85rem;
  font-weight: 700;
  color: #222;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 4px 8px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  position: relative;
  z-index: 2;
  user-select: none;
  white-space: nowrap;
  height: 28px;
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  letter-spacing: 0.01em;

  /* Style for the timezone abbreviation */
  span.timezone {
    font-weight: 800;
    margin-left: 4px;
    color: #0056b3;
  }
`,u3=({zipCode:e,className:t,style:r})=>{const n=c3(e);return n?s.jsx(d3,{className:t,style:r,children:n}):null},h3=h.memo(u3);let xo=0,Rb="";const Ob=()=>{typeof document>"u"||(xo===0&&(Rb=document.body.style.overflow,document.body.classList.add("scroll-locked"),document.body.style.overflow="hidden"),xo+=1)},Mu=()=>{typeof document>"u"||xo>0&&(xo-=1,xo===0&&(document.body.style.overflow=Rb,document.body.classList.remove("scroll-locked")))},p3=()=>xo>0,f3=et.button`
  background: transparent;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  padding: 8px;
  cursor: pointer;
  color: #4a5568;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 100;

  &:hover {
    background: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.2);
    color: #2d3748;
  }

  &:active {
    transform: translateY(1px);
  }

  &:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  svg {
    width: 18px;
    height: 18px;
    pointer-events: none;
  }
`,g3=et.div`
  position: fixed;
  z-index: 99999;
  display: ${e=>e.$isOpen?"block":"none"};
  pointer-events: ${e=>e.$isOpen?"auto":"none"};
`,m3=et.div`
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 8px 0;
  min-width: 220px;
  transform-origin: top right;
  animation: menuSlideIn 0.15s ease-out;
  opacity: 1;
  transition: opacity 0.15s ease, transform 0.15s ease;

  @keyframes menuSlideIn {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(-5px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  &.closing {
    opacity: 0;
    transform: scale(0.97) translateY(-4px);
  }
`,Nn=et.button`
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 10px 16px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  color: ${e=>e.$danger?"#e53e3e":"#4a5568"};
  transition: all 0.15s ease;
  white-space: nowrap;

  &:hover {
    background: ${e=>e.$danger?"rgba(229, 62, 62, 0.1)":"rgba(74, 85, 104, 0.08)"};
    color: ${e=>e.$danger?"#c53030":"#2d3748"};
  }

  &:active {
    background: ${e=>e.$danger?"rgba(229, 62, 62, 0.15)":"rgba(74, 85, 104, 0.12)"};
  }

  svg {
    width: 16px;
    height: 16px;
  }
`,x3=et.div`
  height: 1px;
  background: rgba(0, 0, 0, 0.08);
  margin: 8px 0;
`,b3=({lead:e,onEdit:t,onSendToSpreadsheet:r,onBookAppointment:n,onAddToCampaign:o,onQuickDrip:i,onReferralPartner:a,onAddToReminders:l,onPopoutNotes:c,className:d,style:u})=>{const[p,f]=h.useState(!1),[b,g]=h.useState(!1),[m,x]=h.useState(!1),y=h.useRef(null),E=h.useRef(null),[A,M]=h.useState({top:0,left:0});h.useEffect(()=>(f(!0),()=>f(!1)),[]),h.useEffect(()=>{if(b&&y.current){const C=y.current.getBoundingClientRect(),_=320,z=220;let D=C.bottom+8,S=C.right-z;D+_>window.innerHeight&&(D=C.top-_-8),S<8&&(S=8),S+z>window.innerWidth-8&&(S=window.innerWidth-z-8),M({top:D,left:S})}},[b]),h.useEffect(()=>{const C=_=>{E.current&&!E.current.contains(_.target)&&y.current&&!y.current.contains(_.target)&&g(!1)};if(b)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[b]),h.useEffect(()=>{const C=_=>{_.key==="Escape"&&g(!1)};if(b)return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[b]),h.useEffect(()=>{if(b)return Ob(),()=>Mu()},[b]);const k=C=>{C(),g(!1),x(!1)},w=C=>{C.stopPropagation(),C.preventDefault(),g(_=>!_)};return s.jsxs(s.Fragment,{children:[s.jsx(f3,{ref:y,onClick:w,className:d,style:u,"aria-label":"Lead actions menu","aria-expanded":b,"aria-haspopup":"true",type:"button",children:s.jsx(NC,{})}),p&&(b||m)&&Cv.createPortal(s.jsx(g3,{$isOpen:!0,children:s.jsxs(m3,{ref:E,style:{position:"fixed",top:`${A.top}px`,left:`${A.left}px`},role:"menu","aria-label":"Lead actions",onClick:C=>C.stopPropagation(),onMouseLeave:()=>{m||(x(!0),setTimeout(()=>{x(!1),g(!1)},150))},className:m?"closing":"",children:[s.jsxs(Nn,{onClick:()=>k(()=>t(e)),role:"menuitem",children:[s.jsx(DC,{}),"Edit Lead"]}),s.jsxs(Nn,{onClick:()=>k(()=>r(e)),role:"menuitem",children:[s.jsx(sf,{}),"Send to Spreadsheet"]}),s.jsxs(Nn,{onClick:()=>k(()=>n(e)),role:"menuitem",children:[s.jsx(RC,{}),"Book Appointment"]}),s.jsxs(Nn,{onClick:()=>k(()=>o(e)),role:"menuitem",children:[s.jsx(sf,{}),"Add to Drip Campaign"]}),s.jsxs(Nn,{onClick:()=>k(()=>i(e)),role:"menuitem",children:[s.jsx(IC,{}),"Quick Drip Message"]}),s.jsxs(Nn,{onClick:()=>k(()=>a(e)),role:"menuitem",children:[s.jsx(LC,{}),"Referral Partner"]}),s.jsx(x3,{})]})}),document.body)]})},y3=v.memo(b3),v3=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],w3=({isOpen:e,onClose:t,lead:r,onSuccess:n})=>{const o=Et(),[i,a]=h.useState(!1),[l,c]=h.useState({name:"",firstName:"",lastName:"",email:"",phone:"",city:"",state:"",zipcode:"",dob:"",height:"",weight:"",gender:"",notes:"",disposition:"",source:"",company:""});h.useEffect(()=>{r&&c({name:r.name||"",firstName:r.firstName||"",lastName:r.lastName||"",email:r.email||"",phone:r.phone||"",city:r.city||"",state:r.state||"",zipcode:r.zipcode||"",dob:r.dob||"",height:r.height||"",weight:r.weight||"",gender:r.gender||"",notes:r.notes||"",disposition:r.disposition||"",source:r.source||"",company:r.company||""})},[r]);const d=p=>{const{name:f,value:b}=p.target;c(g=>({...g,[f]:b}))},u=async()=>{if(r){a(!0);try{const p=l.name||`${l.firstName} ${l.lastName}`.trim(),f={...l,name:p};await se.put(`/api/leads/${r._id}`,f),o({title:"Lead updated successfully",status:"success",duration:3e3,isClosable:!0}),n(),t()}catch(p){console.error("Error updating lead:",p),o({title:"Failed to update lead",description:"Please try again later",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}}};return r?s.jsxs(Ar,{isOpen:e,onClose:t,size:"xl",scrollBehavior:"inside",children:[s.jsx(Rr,{}),s.jsxs(Or,{maxWidth:"800px",children:[s.jsx(Zr,{children:"Edit Lead"}),s.jsx(wn,{}),s.jsx(en,{children:s.jsxs(he,{spacing:6,align:"stretch",children:[s.jsxs(he,{align:"stretch",spacing:4,children:[s.jsx(L,{fontWeight:"bold",fontSize:"lg",children:"Personal Information"}),s.jsx(zt,{}),s.jsxs(co,{templateColumns:"repeat(2, 1fr)",gap:4,children:[s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"First Name"}),s.jsx(ke,{name:"firstName",value:l.firstName,onChange:d,placeholder:"First Name"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Last Name"}),s.jsx(ke,{name:"lastName",value:l.lastName,onChange:d,placeholder:"Last Name"})]})}),s.jsx(pt,{colSpan:2,children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Full Name"}),s.jsx(ke,{name:"name",value:l.name,onChange:d,placeholder:"Full Name (overrides first/last)"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Email"}),s.jsx(ke,{type:"email",name:"email",value:l.email,onChange:d,placeholder:"email@example.com"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Phone"}),s.jsx(ke,{name:"phone",value:l.phone,onChange:d,placeholder:"(555) 123-4567"})]})})]})]}),s.jsxs(he,{align:"stretch",spacing:4,children:[s.jsx(L,{fontWeight:"bold",fontSize:"lg",children:"Address"}),s.jsx(zt,{}),s.jsxs(co,{templateColumns:"repeat(2, 1fr)",gap:4,children:[s.jsx(pt,{colSpan:2,children:s.jsxs(pe,{children:[s.jsx(fe,{children:"City"}),s.jsx(ke,{name:"city",value:l.city,onChange:d,placeholder:"City"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"State"}),s.jsx(gn,{name:"state",value:l.state,onChange:d,placeholder:"Select state",children:v3.map(p=>s.jsx("option",{value:p,children:p},p))})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"ZIP Code"}),s.jsx(ke,{name:"zipcode",value:l.zipcode,onChange:d,placeholder:"12345"})]})})]})]}),s.jsxs(he,{align:"stretch",spacing:4,children:[s.jsx(L,{fontWeight:"bold",fontSize:"lg",children:"Health Information"}),s.jsx(zt,{}),s.jsxs(co,{templateColumns:"repeat(2, 1fr)",gap:4,children:[s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Date of Birth"}),s.jsx(ke,{type:"date",name:"dob",value:l.dob,onChange:d})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Gender"}),s.jsxs(gn,{name:"gender",value:l.gender,onChange:d,placeholder:"Select gender",children:[s.jsx("option",{value:"M",children:"Male"}),s.jsx("option",{value:"F",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Height"}),s.jsx(ke,{name:"height",value:l.height,onChange:d,placeholder:"5 ft 10 in"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Weight"}),s.jsx(ke,{name:"weight",value:l.weight,onChange:d,placeholder:"180"})]})})]})]}),s.jsxs(he,{align:"stretch",spacing:4,children:[s.jsx(L,{fontWeight:"bold",fontSize:"lg",children:"Lead Information"}),s.jsx(zt,{}),s.jsxs(co,{templateColumns:"repeat(2, 1fr)",gap:4,children:[s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Source"}),s.jsx(ke,{name:"source",value:l.source,onChange:d,placeholder:"Lead source"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Company"}),s.jsx(ke,{name:"company",value:l.company,onChange:d,placeholder:"Company name"})]})}),s.jsx(pt,{children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Disposition"}),s.jsx(ke,{name:"disposition",value:l.disposition,onChange:d,placeholder:"Disposition"})]})}),s.jsx(pt,{colSpan:2,children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Notes"}),s.jsx(mn,{name:"notes",value:l.notes,onChange:d,placeholder:"Additional notes...",rows:4})]})})]})]})]})}),s.jsxs(ko,{children:[s.jsx(ne,{variant:"ghost",mr:3,onClick:t,isDisabled:i,children:"Cancel"}),s.jsx(ne,{colorScheme:"blue",onClick:u,isLoading:i,children:"Save Changes"})]})]})]}):null},C3=({isOpen:e,onClose:t,lead:r})=>{const n=Et(),[o,i]=h.useState(""),[a,l]=h.useState(""),[c,d]=h.useState("phone"),[u,p]=h.useState(""),f=()=>{if(!r)return;if(!o||!a){n({title:"Missing Information",description:"Please select both date and time for the appointment",status:"error",duration:3e3});return}const g=`${c==="phone"?"📞":"👤"} ${o} at ${a}`;if(window.appendDailyGoal){const m=`Appointment: ${r.name} - ${g}${u?` (${u})`:""}`;window.appendDailyGoal(m)}n({title:"Appointment Booked!",description:`${c==="phone"?"Phone":"In-person"} appointment scheduled for ${r.name}`,status:"success",duration:3e3}),i(""),l(""),d("phone"),p(""),t()};if(!r)return null;const b=new Date().toISOString().split("T")[0];return s.jsxs(Ar,{isOpen:e,onClose:t,size:"md",children:[s.jsx(Rr,{}),s.jsxs(Or,{children:[s.jsxs(Zr,{children:["Book Appointment - ",r.name]}),s.jsx(wn,{}),s.jsx(en,{children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{children:"Appointment Date"}),s.jsx(ke,{type:"date",value:o,onChange:g=>i(g.target.value),min:b})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{children:"Appointment Time"}),s.jsx(ke,{type:"time",value:a,onChange:g=>l(g.target.value)})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Appointment Type"}),s.jsxs(gn,{value:c,onChange:g=>d(g.target.value),children:[s.jsx("option",{value:"phone",children:"Phone Call"}),s.jsx("option",{value:"inperson",children:"In Person"})]})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Notes"}),s.jsx(mn,{value:u,onChange:g=>p(g.target.value),placeholder:"Any additional notes for this appointment...",rows:3})]}),s.jsxs(de,{spacing:2,p:2,bg:"gray.50",borderRadius:"md",children:[s.jsxs("span",{children:["📧 ",r.email]}),s.jsxs("span",{children:["📞 ",r.phone]})]})]})}),s.jsxs(ko,{children:[s.jsx(ne,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),s.jsx(ne,{colorScheme:"blue",onClick:f,children:"Book Appointment"})]})]})]})},S3=e=>s.jsx(Er,{src:"/images/textdrip.svg",alt:"Textdrip",...e}),j3=async()=>{const{data:e}=await se.get("/api/textdrip/campaigns");return e||[]},kf="purple.600",k3=({isOpen:e,onClose:t,leadId:r,onSuccess:n})=>{const o=Et(),i=Mr(),[a,l]=h.useState(""),{data:c=[],isLoading:d}=Es({queryKey:["campaigns"],queryFn:j3,enabled:e}),u=Zo({mutationFn:async()=>{if(!r||!a)throw new Error("Missing selections");await se.post("/api/textdrip/campaign",{leadId:r,campaignId:a})},onSuccess:()=>{o({title:"Lead added to campaign",status:"success"}),i.invalidateQueries({queryKey:["campaigns"]}),n?.(),t()},onError:f=>{o({title:"Failed to add to campaign",description:f?.response?.data?.message||f.message,status:"error"})}}),p=()=>{u.mutate()};return s.jsxs(Ar,{isOpen:e,onClose:t,isCentered:!0,size:"md",motionPreset:"slideInBottom",children:[s.jsx(Rr,{bg:"blackAlpha.300",backdropFilter:"blur(6px)"}),s.jsxs(Or,{borderRadius:"lg",overflow:"hidden",children:[s.jsxs(le,{align:"center",bg:kf,color:"white",px:4,py:3,children:[s.jsx(Er,{src:"/images/logo_final.png",alt:"TextDrip",h:"32px",w:"auto",mr:3}),s.jsx(Zr,{m:0,p:0,fontSize:"lg",fontWeight:"bold",flex:"1",children:"Select Campaign"})]}),s.jsx(wn,{color:"white",top:"12px",right:"12px"}),s.jsx(en,{bg:"gray.50",children:d?s.jsxs(he,{py:6,children:[s.jsx(mt,{}),s.jsx(L,{children:"Loading campaigns…"})]}):s.jsx(gn,{placeholder:"Select campaign",value:a,onChange:f=>l(f.target.value),children:c.length===0?s.jsx("option",{disabled:!0,children:"No campaigns found"}):c.map(f=>s.jsx("option",{value:f.id,children:f.title},f.id))})}),s.jsxs(ko,{bg:"gray.100",children:[s.jsx(ne,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),s.jsx(ne,{bg:kf,_hover:{bg:"purple.700"},color:"white",onClick:p,isLoading:u.isPending,isDisabled:!a,children:"Add"})]})]})]})},E3=({lead:e,onClose:t})=>{const[r,n]=h.useState(""),[o,i]=h.useState(!1),a=Et(),l="purple.600",c=async()=>{if(!r.trim()){a({title:"Message is empty",status:"error",duration:3e3,isClosable:!0});return}i(!0);try{await se.post("/textdrip/quick-drip",{leadId:e._id,message:r}),a({title:"Message sent successfully",status:"success",duration:3e3,isClosable:!0}),t()}catch(d){a({title:"Failed to send message",description:d.response?.data?.message||d.message,status:"error",duration:5e3,isClosable:!0})}finally{i(!1)}};return s.jsxs(Ar,{isOpen:!0,onClose:t,isCentered:!0,motionPreset:"slideInBottom",children:[s.jsx(Rr,{bg:"blackAlpha.300",backdropFilter:"blur(6px)"}),s.jsxs(Or,{borderRadius:"lg",overflow:"hidden",children:[s.jsxs(le,{align:"center",bg:l,color:"white",px:4,py:3,children:[s.jsx(Er,{src:"/images/logo_final.png",alt:"TextDrip",h:"32px",w:"auto",mr:3}),s.jsxs(Zr,{m:0,p:0,fontSize:"lg",fontWeight:"bold",flex:"1",children:["Quick Drip to ",e.name]})]}),s.jsx(wn,{color:"white",top:"12px",right:"12px"}),s.jsx(en,{bg:"gray.50",children:s.jsxs(pe,{children:[s.jsx(fe,{children:"Message"}),s.jsx(mn,{placeholder:"Enter your message here...",value:r,onChange:d=>n(d.target.value),rows:5})]})}),s.jsxs(ko,{bg:"gray.100",children:[s.jsx(ne,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),s.jsx(ne,{bg:l,_hover:{bg:"purple.700"},color:"white",onClick:c,isLoading:o,children:"Send Message"})]})]})]})},Gs="lead_notes_",Bo="leads_notes_backup",Ef="leads_notes_backup_secondary",_f="session_leads_notes_backup",Tf=1500,_3=3e4,T3=3,Af=Math.random().toString(36).slice(2,10),Pb=h.createContext({getNotes:()=>"",updateNotes:async()=>{},saveStatus:{},getLastSaved:()=>null}),mh=()=>h.useContext(Pb),A3=({children:e})=>{const[t,r]=h.useState({}),n=h.useRef(t);h.useEffect(()=>{n.current=t},[t]);const[o,i]=h.useState({}),[a,l]=h.useState({}),[c,d]=h.useState({}),[u,p]=h.useState({}),f=h.useRef({}),b=h.useRef(!1),g=h.useRef(Date.now()),m=h.useRef({}),x=h.useCallback((k,w)=>{try{localStorage.setItem(`${Gs}${k}`,w);const C={...t,[k]:w};localStorage.setItem(Bo,JSON.stringify(C));const _=parseInt(localStorage.getItem("notes_save_count")||"0",10);return _%3===0&&localStorage.setItem(Ef,JSON.stringify(C)),localStorage.setItem("notes_save_count",(_+1).toString()),sessionStorage.setItem(_f,JSON.stringify(C)),!0}catch(C){return console.error("Error saving notes to storage:",C),!1}},[t]);h.useEffect(()=>{console.log("Loading notes from storage with fallbacks...");const k={};let w="none";try{const C=localStorage.getItem(Bo);if(C){const _=JSON.parse(C);_&&typeof _=="object"&&Object.keys(_).length>0&&(Object.assign(k,_),w="master backup")}}catch(C){console.error("Error loading master backup notes:",C)}try{if(Object.keys(k).length===0){const C=localStorage.getItem(Ef);if(C){const _=JSON.parse(C);_&&typeof _=="object"&&Object.keys(_).length>0&&(Object.assign(k,_),w="secondary backup")}}}catch(C){console.error("Error loading secondary backup notes:",C)}try{if(Object.keys(k).length===0){const C=sessionStorage.getItem(_f);if(C){const _=JSON.parse(C);_&&typeof _=="object"&&Object.keys(_).length>0&&(Object.assign(k,_),w="session storage")}}}catch(C){console.error("Error loading session storage notes:",C)}try{const C=[];for(let _=0;_<localStorage.length;_++){const z=localStorage.key(_);z&&z.startsWith(Gs)&&C.push(z)}if(C.length>0){let _=0;C.forEach(z=>{const D=z.replace(Gs,""),S=localStorage.getItem(z);S&&S.trim()!==""&&(k[D]=S,_++)}),_>0&&(w+=" + individual notes")}}catch(C){console.error("Error loading individual notes:",C)}Object.keys(k).length>0?(console.log(`Loaded ${Object.keys(k).length} notes from ${w}`),r(C=>({...k,...C}))):console.warn("No notes found in any storage location")},[]);const y=h.useCallback(k=>{if(!k)return"";if(n.current[k])return n.current[k];if(f.current[k])return f.current[k];try{const w=localStorage.getItem(`${Gs}${k}`);if(w)return r(C=>({...C,[k]:w})),w}catch(w){console.error("Error retrieving notes from localStorage:",w)}try{const w=localStorage.getItem(Bo);if(w){const C=JSON.parse(w);if(C&&C[k])return r(_=>({..._,[k]:C[k]})),C[k]}}catch(w){console.error("Error checking master backup for notes:",w)}return""},[]),E=h.useCallback(async(k,w)=>{if(!k||(n.current[k]??"")===w)return;f.current[k]=w,r(z=>({...z,[k]:w})),x(k,w),c[k]&&clearTimeout(c[k]),i(z=>({...z,[k]:"saving"}));const _=setTimeout(async()=>{try{if(x(k,w),(await se.put(`/api/leads/${k}`,{notes:w})).status===200){i(I=>({...I,[k]:"saved"})),l(I=>({...I,[k]:Date.now()})),p(I=>({...I,[k]:0})),g.current=Date.now();const{[k]:D,...S}=f.current;f.current=S;const P=new CustomEvent("notesUpdated",{detail:{leadId:k,notes:w,origin:Af,updatedAt:Date.now()}});window.dispatchEvent(P)}}catch(z){console.error("Error saving notes to server:",z);const D=(u[k]||0)+1;if(p(S=>({...S,[k]:D})),i(S=>({...S,[k]:"error"})),D<T3){const S=Tf*Math.pow(2,D-1);setTimeout(()=>{E(k,w)},S)}}},Tf);d(z=>({...z,[k]:_})),m.current[k]=Date.now()},[t,c,u,x]),A=h.useCallback(k=>{const w=a[k];return w?new Date(w):null},[a]);h.useEffect(()=>{const k=setInterval(()=>{if(b.current||Object.keys(f.current).length===0)return;b.current=!0;const w=Object.keys(f.current);console.log(`Checking ${w.length} pending note updates...`),Promise.all(w.map(async C=>{const _=f.current[C];if(_)try{if((await se.put(`/api/leads/${C}`,{notes:_})).status===200){console.log(`Successfully synced notes for lead ${C}`),i(P=>({...P,[C]:"saved"})),l(P=>({...P,[C]:Date.now()}));const{[C]:D,...S}=f.current;f.current=S,p(P=>({...P,[C]:0}))}}catch(z){console.error(`Error syncing notes for lead ${C}:`,z)}})).finally(()=>{b.current=!1})},_3);return()=>clearInterval(k)},[]),h.useEffect(()=>()=>{Object.values(c).forEach(k=>{clearTimeout(k)})},[c]),h.useEffect(()=>{const k=w=>{const{leadId:C,notes:_,origin:z,updatedAt:D}=w.detail||{};if(z!==Af&&!(D!==void 0&&m.current[C]!==void 0&&D<=m.current[C]+100)&&C&&_!==void 0){const S=t[C]||"";_!==S&&(console.log(`Received notes update event for lead ${C}`),r(P=>({...P,[C]:_})),x(C,_))}};return window.addEventListener("notesUpdated",k),()=>{window.removeEventListener("notesUpdated",k)}},[t,x]),h.useEffect(()=>{const k=()=>{try{const w=localStorage.getItem(Bo);if(w){const C=JSON.parse(w);if(C&&typeof C=="object"){let _=0;Object.entries(C).forEach(([z,D])=>{const S=t[z]||"";D&&typeof D=="string"&&D.trim()!==""&&S.trim()===""&&(r(P=>({...P,[z]:D})),_++)}),_>0&&console.log(`Restored ${_} missing notes on window focus`)}}}catch(w){console.error("Error checking notes on window focus:",w)}};return window.addEventListener("focus",k),()=>{window.removeEventListener("focus",k)}},[t]),h.useEffect(()=>{const k=setInterval(()=>{try{Object.keys(t).length>0&&(localStorage.setItem(Bo,JSON.stringify(t)),console.log(`Backup sync complete: ${Object.keys(t).length} notes synchronized`))}catch(w){console.error("Error during backup sync:",w)}},6e4);return()=>clearInterval(k)},[t]);const M={getNotes:y,updateNotes:E,saveStatus:o,getLastSaved:A};return s.jsx(Pb.Provider,{value:M,children:e})},R3=et.div`
  position: relative;
  width: 100%;
`,O3=et.div`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 8px;
  cursor: ns-resize;
  /* transparent by default; could add background-image for grip icon */
`,Mb=({leadId:e,initialNotes:t,className:r,style:n,onSaveSuccess:o})=>{const{user:i}=Jt(),{updateNotes:a}=mh(),l=Mr(),c=h.useRef(Math.random().toString(36).substring(2,9)),d=`notesDraft_${i?.id||"anon"}_${e}`,[u,p]=h.useState(()=>{const w=localStorage.getItem(d);return w!==null?w:t}),f=h.useRef(null),b=h.useRef(0),g=h.useRef(null),[m,x]=h.useState(!1);h.useEffect(()=>{m||localStorage.setItem(d,u)},[u,d,m]),h.useEffect(()=>{const w=C=>{let _;try{_=typeof C.data=="string"?JSON.parse(C.data):C.data}catch{return}if(_?.type==="LEAD_NOTES_UPDATED"&&_.leadId===e&&_.editorId!==c.current&&typeof _.notes=="string"){if(m)return;const z=_.updatedAt?new Date(_.updatedAt).getTime():0;z>=b.current&&(b.current=z,p(_.notes),a(e,_.notes),localStorage.removeItem(d))}};return window.addEventListener("message",w),()=>window.removeEventListener("message",w)},[e,d,a,m]);const y=h.useCallback(async()=>{g.current&&(clearTimeout(g.current),g.current=null);try{await a(e,u),localStorage.removeItem(d),o&&o()}catch(w){console.error("Failed to save notes:",w)}},[e,u,d,o,a]),E=w=>{g.current&&clearTimeout(g.current);const C=async()=>{try{const _=Date.now();b.current=_,await a(e,w),l.setQueriesData({predicate:z=>Array.isArray(z.queryKey)&&z.queryKey[0]==="leads"},z=>!z||typeof z!="object"||!z.leads?z:{...z,leads:z.leads.map(D=>D._id===e?{...D,notes:w}:D)}),localStorage.removeItem(d),o&&setTimeout(o,300)}catch(_){console.error("Failed to save notes",_)}};g.current=setTimeout(C,700)},A=()=>{x(!1),g.current&&(clearTimeout(g.current),g.current=null),y()},M=()=>{x(!0)},k=h.useCallback(w=>{w.preventDefault();const C=w.clientY,_=f.current;if(!_)return;const z=_.offsetHeight,D=P=>{const I=Math.max(60,z+(P.clientY-C));_.style.height=`${I}px`},S=()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",S)};window.addEventListener("mousemove",D),window.addEventListener("mouseup",S)},[]);return s.jsxs(R3,{children:[s.jsx("textarea",{"data-cy":"notes-editor",className:r||"notes-textarea",style:{resize:"none",width:"100%",minHeight:"80px",maxHeight:"500px",...n},value:u,placeholder:"Add notes...",ref:f,onChange:w=>{p(w.target.value);const C=Date.now();b.current=C,E(w.target.value)},onKeyDownCapture:w=>w.stopPropagation(),onBlur:A,onFocus:M}),s.jsx(O3,{onMouseDown:k})]})};function xh(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`leadCallCounts_${t}${r}${n}`}function Rf(){try{const e=localStorage.getItem(xh());return e?JSON.parse(e):{}}catch{return{}}}function Of(e){localStorage.setItem(xh(),JSON.stringify(e))}const Db=h.createContext(void 0),P3=({children:e})=>{const[t,r]=h.useState(()=>Rf()),n=h.useCallback(a=>{r(l=>{const c={...l,[a]:(l[a]||0)+1};return Of(c),c})},[]),o=h.useCallback(a=>{r(l=>{if(!(a in l))return l;const{[a]:c,...d}=l;return Of(d),d})},[]),i=Object.keys(t).length;return h.useEffect(()=>{const a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1).getTime()-a.getTime(),c=setTimeout(()=>{r(Rf())},l+1e3);return()=>clearTimeout(c)},[]),h.useEffect(()=>{function a(l){if(l.key===xh())try{const c=l.newValue?JSON.parse(l.newValue):{};r(c)}catch{}}return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]),s.jsx(Db.Provider,{value:{callCounts:t,uniqueCount:i,increment:n,remove:o},children:e})},bh=()=>{const e=h.useContext(Db);if(!e)throw new Error("useCallCountsContext must be used within CallCountsProvider");return e},ys=e=>e?e.replace(/\D+/g,""):"",Ai="lifetimeDialCounts",Du=new Set,Iu=typeof window<"u"&&"BroadcastChannel"in window?new BroadcastChannel("lifetimeDialCounts"):void 0;function Ib(e){Du.forEach(t=>t(e)),Iu?.postMessage({type:"lifetimeCounts",payload:e})}function M3(e){const t={};for(const[r,n]of Object.entries(e)){const o=ys(r);o&&(t[o]=(t[o]||0)+n)}return t}function bo(){try{const e=localStorage.getItem(Ai),t=e?JSON.parse(e):{},r=M3(t);return JSON.stringify(t)!==JSON.stringify(r)&&(localStorage.setItem(Ai,JSON.stringify(r)),Ib({...r})),r}catch{return{}}}function Nb(e){try{localStorage.setItem(Ai,JSON.stringify(e)),Ib({...e})}catch{}}function D3(e){console.debug("[LifetimeCounts] incrementLifetimeCount called with",e);const t=ys(e);if(!t)return 0;const r=bo();r[t]=(r[t]||0)+1,Nb(r);try{const n=localStorage.getItem("token");n&&fetch("/api/dial-counts/increment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({phone:e})}).then(o=>{o.ok||console.error("Failed to sync call count with server:",o.status,o.statusText)}).catch(o=>{console.error("Error syncing call count with server:",o)})}catch(n){console.error("An unexpected error occurred while preparing to sync call count:",n)}return r[t]}function I3(e){Du.add(e);const t=n=>{n.key===Ai&&e(bo())};window.addEventListener("storage",t);const r=n=>{n.data?.type==="lifetimeCounts"&&e(bo())};return Iu?.addEventListener("message",r),e(bo()),()=>{Du.delete(e),window.removeEventListener("storage",t),Iu?.removeEventListener("message",r)}}async function N3(e){try{if(!e.length)return;const t=localStorage.getItem("token");if(!t)return;const r=encodeURIComponent(e.join(",")),n=await fetch(`/api/dial-counts?phones=${r}`,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)return;const o=await n.json(),i=bo();let a=!1;for(const[l,c]of Object.entries(o.counts)){const d=i[l]??0,u=Math.max(d,c);u!==d&&(i[l]=u,a=!0)}a&&Nb(i)}catch{}}const Lb=h.createContext({counts:{},incrementCount:()=>0}),L3=()=>h.useContext(Lb),F3=({children:e})=>{const[t,r]=h.useState(()=>bo()),n=v.useCallback(o=>{const i=D3(o),a=ys(o);return r(l=>({...l,[a]:i})),i},[]);return h.useEffect(()=>I3(i=>r({...i})),[]),s.jsx(Lb.Provider,{value:{counts:t,incrementCount:n},children:e})};function Nu(e){const t=e.replace(/[^\d+]/g,"");if(!t)return;const r=document.createElement("a");r.href=`tel:${t}`,r.rel="noopener noreferrer",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}const Fb=h.createContext(void 0),Pf="followUps",z3=e=>{const t=e.match(/\(?([0-9]{3})\)?/);if(!t)return;const r=t[1];return{205:"AL",907:"AK",480:"AZ",479:"AR",209:"CA",303:"CO",203:"CT",302:"DE",305:"FL",404:"GA",808:"HI",208:"ID",217:"IL",317:"IN",319:"IA",316:"KS",502:"KY",225:"LA",207:"ME",301:"MD",617:"MA",313:"MI",612:"MN",601:"MS",636:"MO",406:"MT",308:"NE",702:"NV",603:"NH",201:"NJ",505:"NM",212:"NY",919:"NC",701:"ND",216:"OH",405:"OK",503:"OR",215:"PA",401:"RI",803:"SC",605:"SD",615:"TN",214:"TX",801:"UT",802:"VT",804:"VA",206:"WA",304:"WV",262:"WI",307:"WY"}[r]},$3=({children:e})=>{const[t,r]=h.useState(()=>{try{const l=localStorage.getItem(Pf);return l?JSON.parse(l):[]}catch{return[]}});h.useEffect(()=>{localStorage.setItem(Pf,JSON.stringify(t))},[t]);const n=()=>Math.random().toString(36).substring(2,10),o=(l,c,d)=>{if(!l&&!c)return;const u={id:n(),name:l.trim()||"Unknown",phone:c.trim(),state:(d||z3(c))?.trim()};r(p=>[...p,u])},i=l=>{r(c=>c.filter(d=>d.id!==l))},a=(l,c)=>{r(d=>d.map(u=>u.id===l?{...u,state:c}:u))};return s.jsx(Fb.Provider,{value:{followUps:t,addFollowUp:o,deleteFollowUp:i,updateFollowUpState:a},children:e})},zb=()=>{const e=h.useContext(Fb);if(!e)throw new Error("useFollowUps must be used within FollowUpProvider");return e},$b=h.createContext(void 0),B3=({children:e})=>{const[t,r]=h.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem("followup_strip_visible");if(o!==null)return o==="true"}return!1}),n=()=>{r(o=>{const i=!o;try{typeof window<"u"&&localStorage.setItem("followup_strip_visible",String(i))}catch{}return i})};return s.jsx($b.Provider,{value:{isVisible:t,toggleVisibility:n},children:e})},Bb=()=>{const e=h.useContext($b);if(!e)throw new Error("useFollowUpUI must be used within a FollowUpUIProvider");return e},qb=({state:e,className:t=""})=>{if(!e)return s.jsx("span",{children:"-"});const r=e.toUpperCase();return s.jsx("img",{src:`/states/${r}.png`,alt:`${r} state icon`,className:`w-9 h-9 object-contain ${t}`,style:{maxWidth:"36px",maxHeight:"36px",display:"block",margin:"0 auto"},onError:n=>{const o=n.target;o.style.display="none",o.parentElement.textContent=r}})},q3={AL:"America/Chicago",AR:"America/Chicago",IA:"America/Chicago",IL:"America/Chicago",KS:"America/Chicago",LA:"America/Chicago",MN:"America/Chicago",MO:"America/Chicago",MS:"America/Chicago",OK:"America/Chicago",WI:"America/Chicago",TX:"America/Chicago",SD:"America/Chicago",ND:"America/Chicago",GA:"America/New_York",FL:"America/New_York",SC:"America/New_York",NC:"America/New_York",VA:"America/New_York",WV:"America/New_York",KY:"America/New_York",OH:"America/New_York",MI:"America/New_York",IN:"America/Indiana/Indianapolis",NY:"America/New_York",NJ:"America/New_York",PA:"America/New_York",MD:"America/New_York",DE:"America/New_York",ME:"America/New_York",VT:"America/New_York",NH:"America/New_York",MA:"America/New_York",CT:"America/New_York",RI:"America/New_York",CO:"America/Denver",MT:"America/Denver",NM:"America/Denver",UT:"America/Denver",WY:"America/Denver",AZ:"America/Phoenix",NV:"America/Los_Angeles",CA:"America/Los_Angeles",OR:"America/Los_Angeles",WA:"America/Los_Angeles",ID:"America/Boise",AK:"America/Anchorage",HI:"Pacific/Honolulu"},H3=e=>{const t=e&&q3[e.toUpperCase()];try{const r="en-US",n={hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short",timeZone:t||Intl.DateTimeFormat().resolvedOptions().timeZone};return new Intl.DateTimeFormat(r,n).format(new Date)}catch{return""}},G3=!1,U3=()=>{const{followUps:e,deleteFollowUp:t,updateFollowUpState:r}=zb(),{isVisible:n,toggleVisibility:o}=Bb(),i=u=>{try{navigator.clipboard.writeText(u),alert("Phone number copied to clipboard")}catch{window.prompt("Copy phone number:",u)}},a=v.useRef(null),l=v.useRef(!1),c=v.useRef(0),d=v.useRef(0);return v.useEffect(()=>{const u=f=>{if(!l.current||!a.current)return;f.preventDefault();const b=f.pageX-c.current;a.current.scrollLeft=d.current-b},p=()=>{l.current&&(l.current=!1,document.body.style.cursor="default")};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",p)}},[]),e.length?s.jsxs("div",{className:"followStrip",style:{background:"transparent",padding:"8px 20px 8px 60px",paddingTop:n?"8px":"0",transition:"padding-top 0.2s ease-out",width:"100%",boxSizing:"border-box",position:"relative",zIndex:90,margin:0},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsxs("h4",{style:{margin:0,color:"#ffffff",fontSize:"0.85rem",fontWeight:600,marginRight:"15px",whiteSpace:"nowrap"},children:["Pinned Leads (",e.length,")"]}),s.jsx("button",{onClick:o,style:{background:"none",border:"none",color:"#fff",cursor:"pointer",fontSize:"1.2rem",padding:0},children:n?s.jsx(fu,{}):s.jsx(gu,{})})]})}),n&&s.jsx("div",{style:{display:"flex",flexWrap:"nowrap",gap:"12px",overflowX:"auto",overflowY:"visible",marginTop:"4px",paddingBottom:"4px",overscrollBehaviorX:"contain",overscrollBehaviorY:"none",cursor:l.current?"grabbing":"grab"},onWheel:u=>{u.deltaY!==0&&(u.preventDefault(),u.stopPropagation(),u.currentTarget.scrollLeft+=u.deltaY)},onMouseDown:u=>{u.button!==0||u.target.closest("button, a")||(l.current=!0,c.current=u.pageX,d.current=u.currentTarget.scrollLeft,document.body.style.cursor="grabbing")},ref:a,children:e.map(u=>s.jsxs("div",{style:{position:"relative",border:"2px solid #333",borderRadius:"6px",width:"260px",display:"flex",flexDirection:"column",boxShadow:"0 3px 8px rgba(0,0,0,0.35)",background:"#444",scrollSnapAlign:"start",flexShrink:0},children:[G3,s.jsx("button",{onClick:()=>t(u.id),style:{position:"absolute",top:"6px",right:"6px",width:"24px",height:"24px",background:"#fff",color:"#c00",border:"1px solid #c00",borderRadius:"4px",fontWeight:700,cursor:"pointer",lineHeight:1},"aria-label":"Remove lead",children:"×"}),s.jsx("div",{style:{background:"#ffffff",padding:"3px 6px",fontWeight:700,fontSize:"0.9rem",color:"#000"},children:u.name}),s.jsx("div",{style:{background:"#fffde9",minHeight:"14px",padding:"2px 6px",display:"flex",alignItems:"center",fontSize:"0.8rem",fontWeight:700,color:"#000",cursor:"pointer",userSelect:"none"},title:"Click to copy phone number",onClick:()=>i(u.phone),children:u.phone}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 0.8fr 1fr",padding:"4px",gap:"6px",background:"#f5f5f5"},children:[s.jsx("a",{href:`tel:${u.phone.replace(/\D/g,"")}`,style:{background:"#4caf50",color:"#fff",borderRadius:"4px",fontSize:"0.875rem",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,padding:"8px 16px",height:"36px",minWidth:"100px",border:"2px solid #000",boxShadow:"0 4px 6px rgba(0,0,0,0.2), inset 0 -4px 4px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.2s ease"},children:"📞 Call"}),s.jsx("div",{style:{background:"#ffffff",border:"1px solid #ccc",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",padding:"1px"},title:"Click to set state",onClick:()=>{const p=window.prompt("Enter 2-letter state abbreviation (e.g., FL):");p&&r(u.id,p.toUpperCase().slice(0,2))},children:u.state?s.jsx(qb,{state:u.state}):s.jsx("span",{style:{fontSize:"0.85rem",fontWeight:700},children:"--"})}),s.jsx("div",{style:{background:"#fff",border:"1px solid #ccc",borderRadius:"4px",fontSize:"0.72rem",fontWeight:700,color:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:H3(u.state)})]})]},u.id))})]}):null};function W3(e){if(!e)return null;const t=e.replace(/<[^>]+>/g,"").trim(),r=/^Follow up with\s+(.+)\s+\(\(?([^)]+)\)?\)\s*(?:-\s*([A-Za-z]{2}))?$/i,n=t.match(r);if(!n)return null;const[,o,i,a]=n;return{name:o.trim(),phone:i.trim(),state:a?.trim().toUpperCase()}}const Da="daily_goals_state_2024",Ia=()=>new Date().toISOString().split("T")[0],Y3=e=>{if(!e)return"";try{const[t,r]=e.split(":").map(i=>parseInt(i,10)),n=t>=12?"PM":"AM";return`${t%12||12}:${r.toString().padStart(2,"0")} ${n}`}catch{return e}};try{localStorage.removeItem("crokodial_daily_goals"),localStorage.removeItem("crokodial_reminders_v2")}catch{}const sr=()=>{const[e,t]=h.useState(null),[r,n]=h.useState(""),[o,i]=h.useState(""),a=h.useRef(null),l=h.useRef(null),[c,d]=h.useState(!1);h.useRef(null);const[u,p]=h.useState(()=>{try{const w=localStorage.getItem(Da);if(w){const C=JSON.parse(w),_=C.notes.map(z=>({...z,completed:z.completed!==void 0?z.completed:!1}));return{...C,notes:_}}return{notes:[],createdAt:Ia()}}catch{return{notes:[],createdAt:Ia()}}});h.useEffect(()=>{const w=Ia();u.createdAt!==w&&p({notes:[],createdAt:w})},[]),h.useEffect(()=>{try{localStorage.setItem(Da,JSON.stringify(u))}catch{}},[u]),h.useEffect(()=>{if(e&&a.current){a.current.focus();const w=r.length;a.current.setSelectionRange(w,w)}},[e,r]);const f=(w="",C)=>{p(_=>({..._,notes:[..._.notes,{id:Date.now().toString(),text:w.trim()||"",timestamp:Date.now(),completed:!1,time:C}]})),w.trim()||setTimeout(()=>{const _=Date.now().toString();g(_,"","")},100)},b=w=>{p(C=>({...C,notes:C.notes.map(_=>_.id===w?{..._,completed:!_.completed}:_)}))},g=(w,C,_)=>{t(w),n(C),i(_||"")},m=()=>{e&&(p(w=>({...w,notes:w.notes.map(C=>C.id===e?{...C,text:r.trim()||"",time:o||void 0}:C)})),t(null))},x=w=>{l.current&&l.current.contains(w.relatedTarget)||m()},y=()=>{t(null)},E=w=>{w.key==="Escape"?y():w.key==="Enter"&&w.ctrlKey&&m()},A=w=>{w&&p(C=>{const _={...C,notes:C.notes.filter(z=>z.id!==w)};try{localStorage.setItem(Da,JSON.stringify(_))}catch{}return _})},{addFollowUp:M}=zb(),k=(w,C)=>{f(`Booked: ${w} - ${C}`)};return h.useEffect(()=>(window.appendDailyGoal=w=>{const C=W3(w);C?M(C.name,C.phone,C.state):f(w)},window.addBookingGoal=(w,C)=>{k(w,C)},window.addFollowUpLead=(w,C,_)=>{M(w,C,_)},()=>{delete window.appendDailyGoal,delete window.addBookingGoal,delete window.addFollowUpLead}),[M]),s.jsx("div",{style:{position:"relative",width:"100%",color:"white",padding:"12px 20px 12px 60px",boxShadow:"0 3px 12px rgba(0, 0, 0, 0.15)",fontSize:"0.8rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(to right, #000000, #111111)",marginBottom:"0px",marginTop:"0",textAlign:"left"},children:s.jsxs("div",{style:{maxWidth:"600px",margin:"0",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[s.jsxs("h3",{style:{margin:"4px 0 12px 0",fontSize:"0.85rem",fontWeight:"600",display:"flex",alignItems:"center",color:"#FFA500",justifyContent:"space-between",letterSpacing:"0.3px",cursor:"pointer"},onClick:()=>d(!c),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{marginRight:"6px",fontSize:"0.8rem"},children:c?"▸":"▾"}),s.jsx("span",{style:{marginRight:"10px",fontSize:"0.9rem",opacity:.9},children:"📋"}),"Goals (",u.notes.length,")"]}),s.jsx("button",{onClick:()=>f(),style:{marginLeft:"10px",padding:"0",background:"linear-gradient(45deg, #FFA500, #FF8C00)",border:"none",borderRadius:"50%",color:"#FFF",fontSize:"16px",cursor:"pointer",fontWeight:"normal",transition:"all 0.25s ease",boxShadow:"0 2px 5px rgba(255, 165, 0, 0.3)",width:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,transform:"translateY(-1px)"},onMouseOver:w=>{w.currentTarget.style.transform="translateY(-1px) scale(1.05)",w.currentTarget.style.boxShadow="0 3px 7px rgba(255, 165, 0, 0.4)"},onMouseOut:w=>{w.currentTarget.style.transform="translateY(-1px)",w.currentTarget.style.boxShadow="0 2px 5px rgba(255, 165, 0, 0.3)"},"aria-label":"Add new reminder",children:"+"})]}),!c&&u.notes.length>0?s.jsx("div",{style:{display:"flex",flexWrap:"nowrap",gap:"12px",margin:"0",overflowX:"auto",padding:"0 0 8px 0",scrollbarWidth:"thin",scrollbarColor:"#444 #222",justifyContent:"flex-start",alignItems:"flex-start"},children:u.notes.map(w=>s.jsxs("div",{style:{padding:"8px 12px 8px 36px",backgroundColor:w.completed?"rgba(245, 245, 220, 0.92)":"rgba(255, 250, 230, 0.95)",border:w.completed?"1px solid rgba(210, 210, 180, 0.6)":"1px solid rgba(230, 220, 190, 0.6)",borderLeft:`3px solid ${w.completed?"#BDB76B":"#FFA500"}`,borderRadius:"5px",fontSize:"0.88rem",minWidth:"240px",maxWidth:"320px",height:"auto",minHeight:"56px",display:"flex",flexDirection:"column",boxShadow:w.completed?"0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 6px rgba(0, 0, 0, 0.12)",color:w.completed?"#555":"#333",transition:"all 0.25s ease",position:"relative",opacity:w.completed?.85:1,backdropFilter:"blur(5px)",overflow:"hidden",fontWeight:"600"},onMouseOver:C=>{C.currentTarget.style.boxShadow=w.completed?"0 2px 5px rgba(0, 0, 0, 0.15)":"0 3px 8px rgba(0, 0, 0, 0.18)",C.currentTarget.style.backgroundColor=w.completed?"rgba(245, 245, 220, 0.96)":"rgba(255, 250, 230, 0.98)"},onMouseOut:C=>{C.currentTarget.style.boxShadow=w.completed?"0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 6px rgba(0, 0, 0, 0.12)",C.currentTarget.style.backgroundColor=w.completed?"rgba(245, 245, 220, 0.92)":"rgba(255, 250, 230, 0.95)"},children:[s.jsx("button",{onClick:C=>{C.stopPropagation(),C.preventDefault(),A(w.id)},style:{position:"absolute",top:"4px",left:"5px",width:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,background:"transparent",color:"#888",border:"none",fontSize:"18px",fontWeight:"normal",cursor:"pointer",transition:"all 0.2s ease",lineHeight:1,opacity:.5,zIndex:10,borderRadius:"3px"},onMouseOver:C=>{C.stopPropagation(),C.currentTarget.style.color="#ff3333",C.currentTarget.style.opacity="0.8"},onMouseOut:C=>{C.stopPropagation(),C.currentTarget.style.color="#888",C.currentTarget.style.opacity="0.5"},"aria-label":"Delete reminder",children:"×"}),s.jsx("div",{style:{position:"absolute",bottom:"8px",right:"10px",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},onClick:C=>{C.stopPropagation(),b(w.id)},children:s.jsx("div",{style:{width:"18px",height:"18px",border:w.completed?"2px solid #BDB76B":"2px solid #FFA500",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:w.completed?"#BDB76B":"transparent",transition:"all 0.2s ease",cursor:"pointer"},children:w.completed&&s.jsx("span",{style:{color:"white",fontSize:"12px",fontWeight:"bold",transform:"translateY(-1px)"},children:"✓"})})}),w.time&&!e&&s.jsxs("div",{style:{position:"absolute",top:"8px",right:"10px",fontSize:"0.8rem",color:"#333",fontWeight:"600",display:"flex",alignItems:"center",background:w.completed?"linear-gradient(135deg, #f0efe9, #e9e7de)":"linear-gradient(135deg, #fff5e0, #ffe9c0)",padding:"4px 8px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.06)",border:"none",cursor:"pointer"},onClick:C=>{C.stopPropagation(),g(w.id,w.text,w.time)},children:[s.jsx("span",{style:{marginRight:"4px",fontSize:"0.85rem",color:w.completed?"#9e9b7a":"#e67e22"},children:"⏰"}),Y3(w.time)]}),e===w.id?s.jsxs("div",{ref:l,style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[s.jsx("textarea",{ref:a,value:r,onChange:C=>n(C.target.value),onBlur:x,onKeyDown:E,onClick:C=>C.stopPropagation(),style:{width:"100%",height:"100%",minHeight:"60px",background:"white",border:"1px solid #ddd",borderRadius:"3px",padding:"6px 10px",paddingLeft:"22px",paddingRight:"100px",fontSize:"0.88rem",color:"#333",resize:"none",fontFamily:"inherit",lineHeight:"1.4",boxShadow:"inset 0 1px 3px rgba(0, 0, 0, 0.05)",marginBottom:"6px"},autoFocus:!0,placeholder:""}),s.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"4px",background:"white",borderRadius:"8px",padding:"6px 8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)",border:"1px solid #e0e0e0"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:"0.85rem",color:"#555",marginRight:"8px"},onClick:C=>C.stopPropagation(),children:[s.jsx("span",{style:{marginRight:"4px",fontSize:"0.9rem",color:"#e67e22"},children:"⏰"}),"Time:"]}),s.jsx("input",{type:"time",value:o,onChange:C=>i(C.target.value),style:{fontSize:"0.85rem",padding:"4px 8px",borderRadius:"6px",border:"1px solid #e0e0e0",color:"#333",flex:1,cursor:"pointer",outline:"none"},onClick:C=>{C.stopPropagation()},tabIndex:1})]})]}):s.jsx("div",{style:{padding:"2px 4px",paddingLeft:"22px",paddingRight:"100px",paddingBottom:"18px",cursor:"text",width:"100%",height:"100%",textDecoration:w.completed?"line-through":"none",wordBreak:"break-word",lineHeight:"1.4",color:w.completed?"#777":"inherit",fontWeight:"600"},onClick:()=>{e!==w.id&&g(w.id,w.text,w.time)},children:w.text})]},w.id))}):null]})})},V3=()=>{const{isVisible:e}=Bb();return e?s.jsx("div",{style:{width:"100%",marginBottom:"0",position:"relative",zIndex:100},children:s.jsx(sr,{})}):null};var vs;(function(e){e[e.UP=-1]="UP",e[e.DOWN=1]="DOWN"})(vs||(vs={}));function K3(e){var t=getComputedStyle(e).overflowY;return e===document.scrollingElement&&t==="visible"?!0:!(t!=="scroll"&&t!=="auto")}function Q3(e,t){if(!K3(e))return!1;if(t===vs.DOWN){var r=e.scrollTop+e.clientHeight;return r<e.scrollHeight}if(t===vs.UP)return e.scrollTop>0;throw new Error("unsupported direction")}function Hb(e,t){return Q3(e,t)?!0:e.parentElement==null?!1:Hb(e.parentElement,t)}function Gb(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var J3=`.lds-ellipsis {
  display: inline-block;
  position: relative;
  width: 64px;
  height: 64px; }

.lds-ellipsis div {
  position: absolute;
  top: 27px;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #363636;
  animation-timing-function: cubic-bezier(0, 1, 1, 0); }

.lds-ellipsis div:nth-child(1) {
  left: 6px;
  animation: lds-ellipsis1 0.6s infinite; }

.lds-ellipsis div:nth-child(2) {
  left: 6px;
  animation: lds-ellipsis2 0.6s infinite; }

.lds-ellipsis div:nth-child(3) {
  left: 26px;
  animation: lds-ellipsis2 0.6s infinite; }

.lds-ellipsis div:nth-child(4) {
  left: 45px;
  animation: lds-ellipsis3 0.6s infinite; }

@keyframes lds-ellipsis1 {
  0% {
    transform: scale(0); }
  100% {
    transform: scale(1); } }

@keyframes lds-ellipsis3 {
  0% {
    transform: scale(1); }
  100% {
    transform: scale(0); } }

@keyframes lds-ellipsis2 {
  0% {
    transform: translate(0, 0); }
  100% {
    transform: translate(19px, 0); } }
`;Gb(J3);var X3=function(){return v.createElement("div",{className:"lds-ellipsis"},v.createElement("div",null),v.createElement("div",null),v.createElement("div",null),v.createElement("div",null))},Z3=function(){return v.createElement("div",null,v.createElement("p",null,"↧  pull to refresh  ↧"))},eS=`.ptr,
.ptr__children {
  height: 100%;
  width: 100%;
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
  position: relative; }

.ptr.ptr--fetch-more-treshold-breached .ptr__fetch-more {
  display: block; }

.ptr__fetch-more {
  display: none; }

/**
  * Pull down transition 
  */
.ptr__children,
.ptr__pull-down {
  transition: transform 0.2s cubic-bezier(0, 0, 0.31, 1); }

.ptr__pull-down {
  position: absolute;
  overflow: hidden;
  left: 0;
  right: 0;
  top: 0;
  visibility: hidden; }
  .ptr__pull-down > div {
    display: none; }

.ptr--dragging {
  /**
    * Hide PullMore content is treshold breached
    */
  /**
    * Otherwize, display content
    */ }
  .ptr--dragging.ptr--pull-down-treshold-breached .ptr__pull-down--pull-more {
    display: none; }
  .ptr--dragging .ptr__pull-down--pull-more {
    display: block; }

.ptr--pull-down-treshold-breached {
  /**
    * Force opacity to 1 is pull down trashold breached
    */
  /**
    * And display loader
    */ }
  .ptr--pull-down-treshold-breached .ptr__pull-down {
    opacity: 1 !important; }
  .ptr--pull-down-treshold-breached .ptr__pull-down--loading {
    display: block; }

.ptr__loader {
  margin: 0 auto;
  text-align: center; }
`;Gb(eS);var tS=function(e){var t=e.isPullable,r=t===void 0?!0:t,n=e.canFetchMore,o=n===void 0?!1:n,i=e.onRefresh,a=e.onFetchMore,l=e.refreshingContent,c=l===void 0?v.createElement(X3,null):l,d=e.pullingContent,u=d===void 0?v.createElement(Z3,null):d,p=e.children,f=e.pullDownThreshold,b=f===void 0?67:f,g=e.fetchMoreThreshold,m=g===void 0?100:g,x=e.maxPullDownDistance,y=x===void 0?95:x,E=e.resistance,A=E===void 0?1:E,M=e.backgroundColor,k=e.className,w=k===void 0?"":k,C=h.useRef(null),_=h.useRef(null),z=h.useRef(null),D=h.useRef(null),S=!1,P=!1,I=!1,F=0,G=0;h.useEffect(function(){if(!(!r||!_||!_.current)){var X=_.current;return X.addEventListener("touchstart",Z,{passive:!0}),X.addEventListener("mousedown",Z),X.addEventListener("touchmove",Q,{passive:!1}),X.addEventListener("mousemove",Q),window.addEventListener("scroll",ue),X.addEventListener("touchend",ie),X.addEventListener("mouseup",ie),document.body.addEventListener("mouseleave",ie),function(){X.removeEventListener("touchstart",Z),X.removeEventListener("mousedown",Z),X.removeEventListener("touchmove",Q),X.removeEventListener("mousemove",Q),window.removeEventListener("scroll",ue),X.removeEventListener("touchend",ie),X.removeEventListener("mouseup",ie),document.body.removeEventListener("mouseleave",ie)}}},[p,r,i,b,y,o,m]),h.useEffect(function(){var X;if(!((X=C)===null||X===void 0)&&X.current){var J=C.current.classList.contains("ptr--fetch-more-treshold-breached");J||o&&V()<m&&a&&(C.current.classList.add("ptr--fetch-more-treshold-breached"),P=!0,a().then(B).catch(B))}},[o,p]);var V=function(){if(!_||!_.current)return-1;var X=window.scrollY,J=_.current.scrollHeight;return J-X-window.innerHeight},B=function(){requestAnimationFrame(function(){_.current&&(_.current.style.overflowX="hidden",_.current.style.overflowY="auto",_.current.style.transform="unset"),z.current&&(z.current.style.opacity="0"),C.current&&(C.current.classList.remove("ptr--pull-down-treshold-breached"),C.current.classList.remove("ptr--dragging"),C.current.classList.remove("ptr--fetch-more-treshold-breached")),S&&(S=!1),P&&(P=!1)})},Z=function(X){I=!1,X instanceof MouseEvent&&(F=X.pageY),window.TouchEvent&&X instanceof TouchEvent&&(F=X.touches[0].pageY),G=F,!(X.type==="touchstart"&&Hb(X.target,vs.UP))&&(_.current.getBoundingClientRect().top<0||(I=!0))},Q=function(X){if(I){if(window.TouchEvent&&X instanceof TouchEvent?G=X.touches[0].pageY:G=X.pageY,C.current.classList.add("ptr--dragging"),G<F){I=!1;return}X.cancelable&&X.preventDefault();var J=Math.min((G-F)/A,y);J>=b&&(I=!0,S=!0,C.current.classList.remove("ptr--dragging"),C.current.classList.add("ptr--pull-down-treshold-breached")),!(J>=y)&&(z.current.style.opacity=(J/65).toString(),_.current.style.overflow="visible",_.current.style.transform="translate(0px, "+J+"px)",z.current.style.visibility="visible")}},ue=function(X){P||o&&V()<m&&a&&(P=!0,C.current.classList.add("ptr--fetch-more-treshold-breached"),a().then(B).catch(B))},ie=function(){if(I=!1,F=0,G=0,!S){z.current&&(z.current.style.visibility="hidden"),B();return}_.current&&(_.current.style.overflow="visible",_.current.style.transform="translate(0px, "+b+"px)"),i().then(B).catch(B)};return v.createElement("div",{className:"ptr "+w,style:{backgroundColor:M},ref:C},v.createElement("div",{className:"ptr__pull-down",ref:z},v.createElement("div",{className:"ptr__loader ptr__pull-down--loading"},c),v.createElement("div",{className:"ptr__pull-down--pull-more"},u)),v.createElement("div",{className:"ptr__children",ref:_},p,v.createElement("div",{className:"ptr__fetch-more",ref:D},v.createElement("div",{className:"ptr__loader ptr__fetch-more--loading"},c))))};const ve=(e,t="")=>e==null?t:typeof e=="string"?e:String(e),rS={"Positive Contact":"#38A169","Negative Contact":"#E53E3E","Employer Coverage":"#2196F3",Brokie:"#FF9800","Buy Or Die":"#9C27B0","Unhealthy/Referred":"#795548",Foreign:"#607D8B",Quoted:"#00BCD4",SOLD:"#84CC16",Appointment:"#FFC107","No Contact":"#805AD5","Invalid/Disconnected":"#E91E63","Hung Up":"#9E9E9E",Ghosted:"#E6F0F5",default:"#FFFFFF"},Mf=e=>{if(!e)return console.warn("[Leads.tsx] formatPhoneNumber received null or undefined phone value."),"";const r=(e??"").replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return r?"("+r[1]+") "+r[2]+"-"+r[3]:e},Df=e=>{if(!e)return"";if(ve(e).includes("'"))return e;const t=parseInt(ve(e)),r=Math.floor(t/12),n=t%12;return`${r}'${n}"`},Na=e=>{if(!e)return"";try{if(ve(e).includes("/"))return e;const[t,r,n]=ve(e).split("-");if(t&&r&&n)return`${r}/${n}/${t}`;const o=new Date(e);if(!isNaN(o.getTime()))return`${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getDate().toString().padStart(2,"0")}/${o.getFullYear()}`}catch{}return e},nS=e=>{if(!e)return"";if(ve(e).length>25){const t=e.indexOf("@");if(t!==-1){const r=e.substring(0,t),n=e.substring(t);return`${r}
${n}`}}return e},wr=async(e,t,r)=>{if(e)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const n=document.createElement("textarea");n.value=e,n.style.position="absolute",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Copy failed")}finally{n.remove()}}t({title:r?`${r} copied!`:"Copied to clipboard!",status:"success",duration:1500,isClosable:!1,position:"top"})}catch{t({title:"Failed to copy",description:"Please try selecting and copying manually",status:"error",duration:2e3,isClosable:!0})}},oS=F5`
  /* Misc global tweaks */
  html, body, .leads-page-container {
    /* Reserve space for the vertical scrollbar so its appearance doesn't shift content */
    scrollbar-gutter: stable;
  }
  body.disable-ptr {
    overscroll-behavior-y: contain; /* Prevents rubber-band refresh on mobile */
  }
`,sS=et.div`
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow-y: visible;
  overflow-x: hidden;
  padding: 10px 60px 10px 60px;
  margin-bottom: 140px;
  position: relative;
  transform: translateY(${e=>Math.min(e.$pullDistance,350)}px);
  transition: ${e=>e.$isRefreshing?"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)":e.$pullDistance>0?"none":"transform 0.8s cubic-bezier(0.16, 1, 0.3, 1)"};
`,iS=et.div`
  position: relative;
  overflow-y: auto;
  padding-right: 17px; /* permanent gutter equal to typical scrollbar */
  box-sizing: border-box;
  flex: 1 1 auto;
`;et.div`
  position: relative;
  display: inline-block;
`;const aS=et.input`
  width: 180px;
  min-width: 120px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  font-size: 0.875rem;
  height: 36px;
  border: none;
  border-radius: 4px;
  padding: 0 10px;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-weight: 600;
  &::placeholder {
    color: #b3b0a7;
  }
  &:focus {
    outline: none;
    border: 1px solid #EFBF04;
    box-shadow: 0 0 0 1px #EFBF04;
  }
`;et.button`
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;

  &:hover {
    color: white;
  }
`;const lS=et.div`
  position: fixed;
  background: white;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  overflow: hidden;
`,cS=et.div`
  padding: 8px 0 0 0;
  margin: 0;
  background: ${e=>e.$backgroundColor};
  border-radius: 0;
  position: relative;
  transition:
    transform 0.3s ease,
    opacity 0.2s ease,
    margin 0.3s ease,
    box-shadow 0.3s ease,
    outline 0.2s ease;
  transform-origin: center center;
  transform: ${e=>e.$isDragging?"scale(0.98)":e.$moveUp?"translateY(-100%)":e.$moveDown?"translateY(100%)":e.$isClicked?"translateY(-2px)":"none"};
  box-shadow: ${e=>e.$isDragging?"0 10px 15px -3px rgba(0, 0, 0, 0.1)":e.$isClicked?"0 6px 15px rgba(0, 0, 0, 0.35), 0 0 0 3px #B8860B":"0 1px 3px rgba(0, 0, 0, 0.1)"};
  outline: ${e=>e.$isSelected?"2px solid #FF8C00":"none"};
  outline-offset: -2px;
  user-select: none;
  margin: ${e=>e.$isOver?"1rem 0":e.$isClicked?"0.75rem 0":"0"};
  opacity: ${e=>e.$isDragging?"0.8":"1"};
  z-index: ${e=>e.$isDragging?1e3:e.$isClicked?2e3:1};
  width: 100%;
  min-width: 100%;
  box-sizing: border-box;
  border-radius: 0;
  margin-right: 0;
  margin-bottom: 10px; /* space between cards */

  &:hover:not(:active):not(:has(select:focus)):not(:has(select:hover)):not(:has(select:active)) {
    transform: scale(1.01);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    z-index: 500;
    transform-origin: center center;
  }

  &:has(.disposition-section select:active),
  &:has(.disposition-section select:focus),
  &:has(.disposition-section select:hover) {
    transform: none !important;
    box-shadow: ${e=>e.$isClicked?"0 6px 15px rgba(0, 0, 0, 0.35), 0 0 0 3px #B8860B":"0 1px 3px rgba(0, 0, 0, 0.1)"} !important;
  }

  .drag-handle {
    width: 100%;
    height: 20px;
    background: ${e=>e.$backgroundColor};
    cursor: grab;
    position: relative;
    margin-top: -1px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    z-index: 3;

    &:active {
      cursor: grabbing;
    }

    &:after {
      content: '';
      display: block;
      width: 40px;
      height: 4px;
      background: rgba(0, 0, 0, 0.15);
      border-radius: 2px;
      transition: width 0.2s ease;
    }

    &:hover:after {
      width: 50px;
    }
  }

  .grid-container {
    display: grid !important;
    grid-template-columns: 2.025fr 2.025fr 1.525fr 1.025fr 1.025fr 1.025fr 1.025fr 1.025fr 1.025fr 1.25fr !important;
    grid-auto-flow: row !important;
    grid-template-rows: auto auto !important;
    column-gap: 8px !important;
    row-gap: 0 !important;
    align-items: center !important;
    padding: 0 !important;
    width: 100% !important;
    box-sizing: border-box !important;
    min-height: 60px !important;
  }

  .grid-header {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 24px !important;
    box-sizing: border-box !important;
    width: 100% !important;
    border: 1px solid #000 !important;
    font-size: 0.75rem !important;
    font-weight: bold !important;
    color: white !important;
    background-color: black !important;
    text-align: center !important;
    margin-bottom: 4px !important;
    border-radius: 2px !important;
  }

  .grid-item {
    min-width: 0 !important;
    overflow: hidden !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    text-align: center !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 36px !important;
    width: 100% !important;
    position: relative !important;
  }

  .text-content {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.4;
    font-size: 0.95em;
    padding: 4px;
    width: 100%;
    min-height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .text-content.value {
    font-size: 0.95em;
    font-weight: 700;
    cursor: pointer;
    padding: 4px;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.5);
    min-height: 32px;
    height: 32px;
    border: 1px solid black;

    &:hover {
      color: #EFBF04;
      background: rgba(255, 255, 255, 0.8);
    }
  }

  .notes-textarea {
    width: 100%;
    min-height: 350px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 0.9em;
    resize: vertical;
    background: white;
    margin-top: 8px;

    &:focus {
      outline: none;
      border-color: #EFBF04;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
    }
  }

  /* macOS window buttons */
  .mac-buttons {
    display: flex;
    gap: 6px;
    align-items: center;
    margin: 6px 0 4px 6px;
  }
  .mac-buttons .btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    cursor: pointer;
    flex-shrink: 0;
  }
  .mac-buttons .red {
    background: #ff5f57;
  }
  .mac-buttons .green {
    background: #28c840;
  }
  .mac-buttons .btn:hover {
    filter: brightness(0.9);
  }
  .mac-buttons .tack {
    background: transparent;
    border: none;
    width: auto;
    height: auto;
    padding: 0;
  }
`,dS=et.button`
  background-color: #4caf50;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  height: 36px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.2),
    inset 0 -4px 4px rgba(0, 0, 0, 0.1);
  border: 2px solid #000;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
  white-space: nowrap;
  min-width: 100px;

  &:hover {
    background-color: #45a049;
    transform: translateY(-2px);
    box-shadow:
      0 6px 8px rgba(0, 0, 0, 0.3),
      inset 0 -4px 4px rgba(0, 0, 0, 0.1);
  }

  &:active {
    transform: translateY(1px);
    box-shadow:
      0 2px 3px rgba(0, 0, 0, 0.2),
      inset 0 -2px 2px rgba(0, 0, 0, 0.1);
  }
`,uS=et.button`
  background-color: #dc3545;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  height: 36px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.2),
    inset 0 -4px 4px rgba(0, 0, 0, 0.1);
  border: 2px solid #000;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
  white-space: nowrap;
  min-width: 120px;

  &:hover {
    background-color: #c82333;
    transform: translateY(-2px);
    box-shadow:
      0 6px 8px rgba(0, 0, 0, 0.3),
      inset 0 -4px 4px rgba(0, 0, 0, 0.1);
  }

  &:active {
    transform: translateY(1px);
    box-shadow:
      0 2px 3px rgba(0, 0, 0, 0.2),
      inset 0 -2px 2px rgba(0, 0, 0, 0.1);
  }
`,hS=et.select`
  width: 100%;
  padding: 4px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background-color: white;
  font-size: 0.9em;
  cursor: pointer !important;
  position: relative;
  z-index: 10;
  isolation: isolate;
  pointer-events: auto;
  user-select: auto;

  &:focus {
    outline: none;
    border-color: #EFBF04;
    box-shadow: 0 0 0 1px #EFBF04;
  }

  option {
    background-color: #ffffff;
    color: #000;
  }

  option:checked,
  option:hover {
    background-color: #EFBF04;
    color: #000;
  }
`,pS=cS,fS=et.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, max-content));
  gap: 4px; /* thin space */
  align-items: center;
  padding: 0.5rem 60px;
  background: rgba(0, 0, 0, 0.5);
  overflow-x: auto;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-size: 0.875rem;
  grid-auto-flow: row;
`,Us=et.button`
  width: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  color: white;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  font-weight: 600;
  font-size: 0.875rem;
  line-height: 1.2;
  height: 36px;
  letter-spacing: 0.01em;
  padding: 0 10px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  border: 1px solid transparent;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  &:focus {
    outline: none;
    border-color: #EFBF04;
  }
  &.active {
    background-color: rgba(239, 191, 4, 0.25);
    color: #000;
    border-width: 2px;
    border-color: #EFBF04;
  }
`,gS=et.div`
  position: fixed;
  min-width: 120px;
  background-color: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  z-index: 9999;
  padding: 5px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  pointer-events: auto;
  opacity: 1;
  transform: translateY(0);
  transition: opacity 0.15s ease, transform 0.15s ease;

  &.closing {
    opacity: 0;
    transform: translateY(-6px);
  }
`,er=et.div`
  padding: 8px 16px;
  color: white;
  cursor: pointer;
  font-size: 1rem;
  pointer-events: auto;
  white-space: nowrap; /* prevent mid-word wraps like "Marketplace" */
  overflow: hidden;
  text-overflow: ellipsis;
  &:hover {
    background: #EFBF04;
    color: #000;
  }
`,Ws=()=>s.jsx("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 1L6 5L11 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),mS=et.button`
  border-radius: 4px;
  width: 40px;
  height: 36px;
  font-size: 1.5rem;
  background: #fb923c;
  color: white;
  border: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  margin-left: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
`,Ys=({isOpen:e,buttonRef:t,onClose:r,children:n})=>{const[o,i]=h.useState({top:0,left:0,width:0}),[a,l]=h.useState(!1);return h.useEffect(()=>{if(e?Ob():Mu(),e&&t.current){const c=t.current.getBoundingClientRect();i({top:c.bottom+window.scrollY,left:c.left+window.scrollX,width:c.width})}return()=>{e&&Mu()}},[e,t]),!e&&!a?null:Qu.createPortal(s.jsx(gS,{style:{top:`${o.top}px`,left:`${o.left}px`,width:`${o.width}px`},"data-dropdown-portal":!0,onClick:c=>{console.log("[DEBUG] DropdownContainer clicked",c.target)},onMouseLeave:()=>{a||(l(!0),setTimeout(()=>{l(!1),r&&r()},150))},className:a?"closing":"",children:n}),document.body)};function xS(){const e=Et(),{getColorForDisposition:t}=gh(),{queryState:r,updateQueryState:n,queryVersion:o}=o3(),i=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],{data:a}=Es({queryKey:["dispositions"],queryFn:async()=>{try{const j=await se.get("/api/dispositions");return Array.isArray(j.data)?j.data:Array.isArray(j.data?.dispositions)?j.data.dispositions:[]}catch{return[]}},staleTime:60*1e3}),l=v.useMemo(()=>{a||console.warn("[Leads.tsx] dispositionsList is null or undefined. Using empty array for dropdown.");const j=Array.isArray(a)?a.map(K=>K.name):[];return j.includes("No Disposition")||j.unshift("No Disposition"),j},[a]),{leads:c,isInitialLoading:d,error:u,pagination:p,refetch:f}=a3({queryState:r,queryVersion:o,enabled:!0}),[b,g]=h.useState([]),[m,x]=h.useState(null),[y,E]=h.useState("none"),[A,M]=h.useState([]),[k,w]=h.useState(!1),[C,_]=h.useState(null),[z,D]=h.useState(!1),[S,P]=h.useState(null),[I,F]=h.useState(null),[G,V]=h.useState(!1),[B,Z]=h.useState(null),{incrementCount:Q,counts:ue}=L3(),{increment:ie}=bh(),[X,J]=h.useState(!1),[Ce,Se]=h.useState(null),[ze,nt]=h.useState("loading"),[ot,Pe]=h.useState(!1),Fe=h.useRef(null),Re=h.useRef(null),xe=h.useRef(null),tt=h.useRef(null),Ie=h.useRef(null),[_e,rt]=h.useState(!1),[ce,Be]=h.useState(!1),[Qe,bt]=h.useState(!1),[Je,Ue]=h.useState(!1),[We,_t]=h.useState(!1),[dt,Xt]=h.useState("asc"),[st,it]=h.useState(null);h.useEffect(()=>{const j=K=>{if(K.origin!==window.location.origin)return;const{type:Y}=K.data;(Y==="LEAD_NOTES_UPDATED"||Y==="LEAD_DISPOSITION_UPDATED")&&(console.log(`[Leads.tsx] Received ${Y}, refetching data...`),f())};return window.addEventListener("message",j),()=>{window.removeEventListener("message",j)}},[f]),v.useEffect(()=>{if(c&&Array.isArray(c)&&c.length){const j=c.map(K=>K.phone).filter(Boolean);N3(j)}},[c]),h.useEffect(()=>{const j=K=>{const Y=K.target,ge=document.querySelectorAll("[data-dropdown-portal]");Array.from(ge).some(Ne=>Ne.contains(Y))||(Re.current&&!Re.current.contains(Y)&&rt(!1),xe.current&&!xe.current.contains(Y)&&Be(!1),tt.current&&!tt.current.contains(Y)&&bt(!1),Ie.current&&!Ie.current.contains(Y)&&Ue(!1))};return document.addEventListener("click",j),()=>{document.removeEventListener("click",j)}},[]);const yt=h.useCallback(j=>{n({search:j,page:1})},[n]),T=h.useCallback(j=>{n({filters:{...r.filters,states:j},page:1})},[n,r.filters]),W=h.useCallback(j=>{n({filters:{...r.filters,dispositions:j},page:1})},[n,r.filters]),R=h.useCallback(j=>{n({page:j}),Fe.current&&(Fe.current.scrollTop=0)},[n]),q=h.useCallback(j=>{if(console.log("[DEBUG] Pipeline filter change:",j),console.log("[DEBUG] Current queryState before update:",r),!ba(j)){console.error("[ERROR] Invalid pipeline source:",j);return}const K={...r.filters,pipelineSource:j};console.log("[DEBUG] New filters to be applied:",K),n({filters:K,page:1}),console.log("[DEBUG] Pipeline filter update complete")},[n,r.filters]),re=h.useCallback((j,K)=>{console.log("[DEBUG] Sort change:",{sortBy:j,sortDirection:K}),j==="timeZoneCustom"?(_t(!0),Xt(K)):(_t(!1),n({sortBy:"createdAt",sortDirection:K,page:1}))},[n]),ye=h.useCallback(j=>{_(j),w(!0)},[]),$e=h.useCallback(async j=>{if(window.confirm("Are you sure you want to delete this lead?"))try{await se.delete(`/api/leads/${j}`),e({title:"Lead deleted successfully",status:"success"}),f()}catch{e({title:"Failed to delete lead",status:"error"})}},[f,e]),ut=h.useCallback(j=>{const K=t(j.disposition||""),Y={status:j.disposition||"",name:j.name||"",email:j.email||"",state:j.state||"",zipcode:j.zipcode||"",dob:j.dob||"",leadType:j.source||"",number:j.phone||"",apptDate:"",notes:j.notes||"",color:K};window.location.pathname==="/spreadsheet"&&window.addToSpreadsheet?window.addToSpreadsheet(Y):(sessionStorage.setItem("pendingLeadData",JSON.stringify(Y)),window.location.href="/spreadsheet"),e({title:"Lead sent to spreadsheet!",status:"success",duration:2e3})},[t,e]),vt=h.useCallback(j=>{if(!j)return;const K="https://calendly.com/linkpellowinsurance",Y=new URLSearchParams;j.name&&Y.append("name",j.name),j.email&&Y.append("email",j.email);const ge=ys(j.phone||"");ge&&(Y.append("phone_number",ge),Y.append("a9",ge),Y.append("location",ge)),j.state&&Y.append("a2",j.state),j.zipcode&&Y.append("a3",j.zipcode);const Ye=`${K}?${Y.toString()}`;try{const Ne=window.Calendly;if(Ne&&typeof Ne.initPopupWidget=="function"){const At=document.body.style.overflow;document.body.style.overflow="hidden";const Nt=Zt=>{typeof Zt.data=="object"&&Zt.data?.event&&(Zt.data.event==="calendly.event_scheduled"||Zt.data.event==="calendly.modal_closed")&&(document.body.style.overflow=At,window.removeEventListener("message",Nt))};window.addEventListener("message",Nt),Ne.initPopupWidget({url:K,prefill:{name:j.name||void 0,email:j.email||void 0,phone_number:ge||void 0,customAnswers:{a9:ge||void 0,a2:j.state||void 0,a3:j.zipcode||void 0}}})}else window.open(Ye,"_blank","noopener")}catch(Ne){console.error("Failed to open Calendly widget:",Ne),window.open(Ye,"_blank","noopener")}},[]),Ct=h.useCallback(j=>{const K=window;if(typeof K.addFollowUpLead=="function")K.addFollowUpLead(j.name,j.phone,j.state);else if(typeof K.appendDailyGoal=="function"){const ge=`(${ve(j.phone).replace(/[^\d]/g,"").trim()})`,Ye=`Follow up with ${j.name} ${ge}${j.state?` - ${j.state}`:""}`;K.appendDailyGoal(Ye)}else{e({title:"Unable to add reminder",description:"Reminders component not loaded",status:"error",duration:3e3});return}e({title:"Added to reminders!",description:`Follow up reminder created for ${j.name}`,status:"success",duration:2e3})},[e]),yr=h.useCallback(j=>{const K=window.open("",`lead-details-${j._id}`,"width=1200,height=660,top=180,left=100,toolbar=no,menubar=no,location=no,resizable=yes");if(K){const Y=t(j.disposition||""),ge=Mf(j.phone||""),Ye=Na(j.dob||""),Ne=Df(j.height||""),At=Pu(j.zipcode||"")||"America/New_York",Nt=pi(At),Zt=localStorage.getItem("token")||"",ln=window.location.origin,Rn=K.document;Rn.open(),l||console.error("[Leads.tsx] CRITICAL: availableDispositions is undefined during handlePopoutNotes. Cannot render disposition options.");const ya=(l||[]).map(On=>`<option value="${On}" ${On===j.disposition?"selected":""}>${On}</option>`).join(""),va=`<!DOCTYPE html><html><head>
        <meta charset='utf-8' />
        <title>Lead Details: ${j.name}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Tektur:wght@400;500;600;700&display=swap" rel="stylesheet">
        <style>
        :root{--card-purple:${Y};--header-gradient:linear-gradient(135deg,#1a1240,#2c1e6d);}
        *{margin:0;padding:0;box-sizing:border-box}
        /* Hide scrollbars */
        ::-webkit-scrollbar{width:0;height:0}
        body, .content{scrollbar-width:none}
        html,body{height:100%;display:flex;flex-direction:column;background:var(--card-purple);}
        body{font-family:'Tektur','Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;min-width:920px;min-height:400px}
        .frame{box-shadow:0 0 0 6px var(--card-purple);flex:1;display:flex;flex-direction:column;background:var(--card-purple)}
        .header{background:#000;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #444;border-bottom-left-radius:8px;border-bottom-right-radius:8px;color:#fff}
        .header h1{font-size:18px;font-weight:600;margin:0;letter-spacing:1.2px}
        .history-button{background:#ff9800;color:#fff;border:0;padding:8px 16px;border-radius:4px;font-size:14px;cursor:pointer;font-weight:500}
        .content{flex:1;overflow:visible;display:flex;flex-direction:column;height:100%}
        .details-grid{display:grid;grid-template-columns:2fr 2fr 1.5fr 1fr 1fr 1fr 1fr 1fr 1fr 1.5fr;column-gap:8px;row-gap:6px;width:100%;padding:12px 12px 0 12px}
        .header-cell{background:#000;color:#fff;padding:2px 6px;font-size:10px;font-weight:400;text-transform:uppercase;border-radius:2px;display:flex;align-items:center;justify-content:center}
        .value-cell{background:#fff;color:#000;border:1px solid #000;padding:0;font-size:14px;font-weight:600;cursor:pointer;border-radius:6px;transition:background .15s ease,color .15s ease;line-height:1.3;display:flex;align-items:center;justify-content:center}
        .grid-item{height:14px !important}
        .value-cell:hover{background:#f3f3f3;color:#f97316}
        .disposition-bar,.notes-bar{background:var(--card-purple);color:#fff;font-weight:600;padding:6px 10px;font-size:16px}
        .notes-section{grid-column:1/-1;width:100%;display:flex;flex-direction:column;flex:1 1 auto;overflow:visible;padding:0 0 20px 0}
        .save-status{font-size:12px;color:#888;opacity:0;transition:opacity .3s}
        .save-status.visible{opacity:1}.save-status.success{color:#4CAF50}.save-status.error{color:#f44336}
        .notes-textarea{flex:1 1 auto;background:#ffffff;border:1px solid #444;border-radius:4px;padding:15px;color:#000;font-size:14px;line-height:1.6;resize:none;min-height:0;font-family:inherit;margin:0;width:100%;position:relative;z-index:2;height:auto;box-sizing:border-box;overflow:hidden}
        .notes-textarea:focus{outline:none;border-color:#ff9800;box-shadow:0 0 0 2px rgba(255,152,0,.1)}
        .footer{background:var(--card-purple);padding:10px 20px;text-align:center;font-size:12px;color:#fff;position:relative;z-index:3}
   .actions {
     z-index: 1; /* below notes to avoid blocking resize handle */
          pointer-events: none; /* allow clicks to pass through to textarea */
   }
   .actions * {
     pointer-events: auto; /* re-enable clicks on actual action buttons */
        }
        .notes-bar{padding:0 10px}
        .call-btn, .hangup-btn {
          color: white; border: none; padding: 8px 16px; border-radius: 4px; display: flex;
          align-items: center; gap: 8px; font-size: 14px; font-weight: 700; cursor: pointer;
          transition: all 0.2s ease; height: 36px; box-shadow: 0 4px 6px rgba(0,0,0,0.2), inset 0 -4px 4px rgba(0,0,0,0.1);
          border: 2px solid #000; text-shadow: 1px 1px 1px rgba(0,0,0,0.3); white-space: nowrap;
        }
        .call-btn { background-color: #4CAF50; min-width: 100px; }
        .call-btn:hover { background-color: #45a049; transform: translateY(-2px); box-shadow: 0 6px 8px rgba(0,0,0,0.3), inset 0 -4px 4px rgba(0,0,0,0.1); }
        .hangup-btn { background-color: #dc3545; min-width: 120px; }
        .hangup-btn:hover { background-color: #c82333; transform: translateY(-2px); box-shadow: 0 6px 8px rgba(0,0,0,0.3), inset 0 -4px 4px rgba(0,0,0,0.1); }
        /* Quick Drip btn */
        .quick-btn { background:none; border: none; cursor: pointer; display: flex; align-items: center; padding: 4px; border-radius:4px; transition: transform .2s ease; }
        .quick-btn:hover { transform: translateY(-2px); }
        /* Actions Dropdown */
        .actions-menu-container { position: relative; display: inline-block; }
        .actions-dropdown {
            display: none;
            position: absolute;
            right: 0;
            bottom: calc(100% + 5px); /* Position above the button */
            background-color: white;
            min-width: 220px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 8px 0;
            font-family: 'Inter', sans-serif;
            transform-origin: bottom right;
            animation: menu-fade-in .1s ease-out;
        }
        @keyframes menu-fade-in {
            from { opacity: 0; transform: scale(0.95) translateY(5px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .actions-dropdown.visible {
            display: block;
        }
        .actions-dropdown-item {
            color: #4a5568; /* gray-700 */
            padding: 10px 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }
        .actions-dropdown-item:hover {
            background-color: rgba(74, 85, 104, 0.08);
            color: #2d3748; /* gray-800 */
        }
        .actions-dropdown-item.danger {
            color: #e53e3e; /* red-500 */
        }
        .actions-dropdown-item.danger:hover {
            background-color: rgba(229, 62, 62, 0.1);
            color: #c53030; /* red-600 */
        }
        .actions-dropdown-item svg {
            width: 16px; height: 16px;
            stroke-width: 2;
        }
        .menu-divider {
            height: 1px;
            background: rgba(0,0,0,0.08);
            margin: 8px 0;
        }
        /* Disposition select styling (no outer cell) */
        .disposition-select{background:#fff;color:#000;width:100%;padding:4px;border:1px solid #000;border-radius:4px;font-size:14px;cursor:pointer;}
        /* Add CSS rule after .disposition-select */
        .disposition-wrapper{background:transparent;border:none;padding:0;}
        </style>
        </head><body><div class='frame'><div class='header'><h1><img id="source-icon" src="" alt="Source" style="height: 20px; margin-right: 8px; vertical-align: middle; display: none;" />${j.name}</h1><button class='history-button' onclick="alert('History feature not implemented in popup')">History</button></div><div class='content'><div class='details-grid'><div class='header-cell'>Name</div><div class='header-cell'>Email</div><div class='header-cell'>Phone</div><div class='header-cell'>Zipcode</div><div class='header-cell'>DOB</div><div class='header-cell'>Height</div><div class='header-cell'>Weight</div><div class='header-cell'>Gender</div><div class='header-cell'>State</div><div class='header-cell'>Disposition</div>
          <div class='value-cell' onclick="copyToClipboard('${j.name||""}','Name')" title='Click to copy'>${j.name||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.email||""}','Email')" title='Click to copy'>${j.email||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.phone||""}','Phone')" title='Click to copy'>${ge||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.zipcode||""}','Zipcode')" title='Click to copy'>${j.zipcode||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.dob||""}','DOB')" title='Click to copy'>${Ye||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.height||""}','Height')" title='Click to copy'>${Ne||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.weight||""}','Weight')" title='Click to copy'>${j.weight||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.gender||""}','Gender')" title='Click to copy'>${j.gender||"-"}</div><div class='value-cell' onclick="copyToClipboard('${j.state||""}','State')" title='Click to copy'><img src='/states/${j.state}.png' alt='${j.state||""}' style='height: 24px; max-width: 100%;' onerror='this.style.display="none"'/><span style='display:none'>${j.state||"-"}</span></div><div class='value-cell disposition-wrapper'><select id='disposition-select' class='disposition-select'>${ya}</select></div></div><div class='notes-bar'>Notes:</div><div class='notes-section'><span id='save-status' class='save-status'></span><textarea id='notes-textarea' class='notes-textarea' placeholder='Add notes...'>${j.notes||""}</textarea></div><div class='footer'>
          <div style="position: absolute; left: 12px; bottom: 8px; display: flex; gap: 10px;">
            <button id="call-btn" class="call-btn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"></path></svg> Call</button>
            <button id="hangup-btn" class="hangup-btn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"></path></svg> Hang Up</button>
          </div>
          <div style="position:absolute; right:12px; bottom:8px; display:flex; align-items:center; gap:10px;">
            <div id="local-time-display" style="font-weight:bold; font-size:14px; color:#000;"></div>
            <button id="quick-drip-btn" class="quick-btn" title="Quick Drip"><img src="/images/textdrip.svg" alt="Quick Drip" style="width:20px;height:20px"/></button>
            <div class="actions-menu-container">
                <button id="actions-menu-btn" class="quick-btn" title="More Actions">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                </button>
                <div id="actions-dropdown" class="actions-dropdown">
                    <button id="edit-lead-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        Edit Lead
                    </button>
                    <button id="send-to-sheet-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        Send to Spreadsheet
                    </button>
                    <button id="book-appt-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        Book Appointment
                    </button>
                    <button id="add-to-reminders-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                        Add to Reminders
                    </button>
                    <button id="add-to-campaign-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        Add to Drip Campaign
                    </button>
                    <button id="quick-drip-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        Quick Drip Message
                    </button>
                    <button id="referral-partner-action" class="actions-dropdown-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="17" y1="11" x2="23" y2="11"></line></svg>
                        Referral Partner
                    </button>
                    <div class="menu-divider"></div>
                    <button id="delete-lead-action" class="actions-dropdown-item danger">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        Delete Lead
                    </button>
                </div>
            </div>
          </div>
          Generated on ${new Date().toLocaleString()}
        </div></div>
        <script>
          const leadData = { _id: '${j._id}', notes: ${JSON.stringify(j.notes||"")}, source: '${j.source}' };
          const authToken = '${Zt}';
          const apiBaseUrl = '${ln}';
          const dispositionColorMap = ${JSON.stringify(rS)};

          function copyToClipboard(text, field) {
            if (!text) return;
            navigator.clipboard.writeText(text).then(() => {
              const toast = document.createElement('div');
              toast.textContent = field ? (field + ' copied!') : 'Copied!';
              Object.assign(toast.style, {
                position: 'fixed', bottom: '20px', left: '50%', transform: 'translateX(-50%)',
                background: '#38A169', color: 'white', padding: '10px 20px',
                borderRadius: '5px', zIndex: '9999', transition: 'opacity 0.5s', fontFamily: 'Tektur, Inter, sans-serif'
              });
              document.body.appendChild(toast);
              setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 500);
              }, 1500);
            });
          }

          // Set source icon
          const sourceIcon = document.getElementById('source-icon');
          if (sourceIcon) {
            if (leadData.source === 'NextGen') {
              sourceIcon.src = '/images/nextgen.png';
              sourceIcon.style.display = 'inline-block';
            } else if (leadData.source === 'Marketplace') {
              sourceIcon.src = '/images/marketplace.png';
              sourceIcon.style.display = 'inline-block';
            }
          }

          const dispSel = document.getElementById('disposition-select');
          if (dispSel) {
            dispSel.addEventListener('change', (e) => {
              const newDisp = e.target.value;
              const newColor = dispositionColorMap[newDisp] || dispositionColorMap.default;
              
              // Update popout color in real-time
              document.documentElement.style.setProperty('--card-purple', newColor);
              const isLight = newColor === '#FFFFFF' || newColor === '#E6F0F5';
              const textColor = isLight ? '#000' : '#fff';
              document.querySelectorAll('.disposition-bar, .notes-bar, .footer').forEach(el => el.style.color = textColor);

              // Update database and notify main window
              fetch(\`\${apiBaseUrl}/api/leads/\${leadData._id}\`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json', Authorization: 'Bearer ' + authToken },
                body: JSON.stringify({ disposition: newDisp })
              }).then((r) => {
                if (r.ok && window.opener && !window.opener.closed) {
                  window.opener.postMessage({ type: 'LEAD_DISPOSITION_UPDATED', leadId: leadData._id, disposition: newDisp }, '*');
                }
              });
            });
          }

          const notesTa = document.getElementById('notes-textarea');
          const saveStatus = document.getElementById('save-status');
          let originalNotes = leadData.notes;
          let timeoutId;
          const updateStatus = (msg) => { if (saveStatus) saveStatus.textContent = msg; };
          const saveNotes = () => {
            const n = notesTa.value;
            if (n === originalNotes) return;
            updateStatus('Saving…');
            fetch(\`\${apiBaseUrl}/api/leads/\${leadData._id}\`, {
              method: 'PUT',
              headers: { 'Content-Type': 'application/json', Authorization: 'Bearer ' + authToken },
              body: JSON.stringify({ notes: n })
            }).then((r) => {
              if (!r.ok) throw new Error();
              return r.json();
            }).then(() => {
              originalNotes = n;
              updateStatus('Saved');
              if (window.opener && !window.opener.closed) {
                window.opener.postMessage({ type: 'LEAD_NOTES_UPDATED', leadId: leadData._id, notes: n }, '*');
              }
            }).catch(() => updateStatus('Error'));
          };
          notesTa.addEventListener('input', () => { clearTimeout(timeoutId); timeoutId = setTimeout(saveNotes, 800); });
          notesTa.addEventListener('blur', saveNotes);

          // Removed ResizeObserver-driven window.resizeBy to prevent height snap-back.

          // === Bi-directional window ↔ textarea resize sync ===
          (function() {
            const MIN_W = 920;
            const headerEl = document.querySelector('.header');
            const footerEl = document.querySelector('.footer');
            const EXTRA_PAD = 40; // bars & padding
            if (!headerEl || !footerEl || !notesTa) return;

            let isSyncing = false;

            // Removed syncTextareaToWindow and its listener; flex-box handles resizing.
          })();

          const ianaTimeZone = '${At}';
          const tzAbbreviation = '${Nt}';
          const timeDisplay = document.getElementById('local-time-display');

          if (ianaTimeZone && timeDisplay) {
            const updateTime = () => {
              const timeString = new Date().toLocaleTimeString('en-us', {
                timeZone: ianaTimeZone,
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
              });
              const formattedTime = safeString(timeString).replace(' AM', 'AM').replace(' PM', 'PM');
              timeDisplay.textContent = formattedTime + ' ' + tzAbbreviation;
            };
            setInterval(updateTime, 1000);
            updateTime(); // Initial call
          }

          document.getElementById('call-btn').addEventListener('click', () => {
            if (window.opener && typeof window.opener.dialPhone === 'function') {
              window.opener.dialPhone('${ve(j.phone)}');
            }
          });
          document.getElementById('hangup-btn').addEventListener('click', () => {
            // Placeholder for hangup functionality
            alert('Hang up feature requires telephony integration.');
          });
          const qdbtn = document.getElementById('quick-drip-btn');
          if (qdbtn) {
            qdbtn.addEventListener('click', () => {
              if (window.opener && typeof window.opener.handleQuickDrip === 'function') {
                const leadObject = { _id: '${j._id}', name: '${ve(j.name)}', phone: '${ve(j.phone)}', email: '${ve(j.email)}', disposition: '${ve(j.disposition)}' };
                window.opener.handleQuickDrip(leadObject);
              }
            });
          }

          const menuBtn = document.getElementById('actions-menu-btn');
          const dropdown = document.getElementById('actions-dropdown');
          if (menuBtn && dropdown) {
            menuBtn.addEventListener('click', (event) => {
              event.stopPropagation();
              const isOpen = dropdown.classList.toggle('visible');
              document.body.style.overflow = isOpen ? 'hidden' : '';
            });

            document.addEventListener('click', (event) => {
              if (!menuBtn.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.remove('visible');
                document.body.style.overflow = '';
              }
            });

            const leadObject = { _id: '${j._id}', name: '${ve(j.name)}', phone: '${ve(j.phone)}', email: '${ve(j.email)}', disposition: '${ve(j.disposition)}', source: '${ve(j.source)}', dob: '${ve(j.dob)}', height: '${ve(j.height)}', weight: '${ve(j.weight)}', gender: '${ve(j.gender)}', state: '${ve(j.state)}', zipcode: '${ve(j.zipcode)}', notes: ${JSON.stringify(ve(j.notes))} };

            const actionHandlers = {
                'edit-lead-action': () => window.opener.handleEditLead(leadObject),
                'delete-lead-action': () => window.opener.handleDeleteLead(leadObject._id),
                'send-to-sheet-action': () => window.opener.handleSendToSpreadsheet(leadObject),
                'book-appt-action': () => { window.opener.handleBookAppointment(leadObject); setTimeout(() => window.close(), 50); },
                'add-to-reminders-action': () => window.opener.handleAddToReminders(leadObject),
                'add-to-campaign-action': () => { window.opener.handleAddToCampaign(leadObject); setTimeout(() => window.close(), 50); },
                'quick-drip-action': () => { window.opener.handleQuickDrip(leadObject); setTimeout(() => window.close(), 50); },
                'referral-partner-action': () => { window.opener.handleReferralPartner(leadObject); setTimeout(() => window.close(), 50); },
            };

            for (const [id, handler] of Object.entries(actionHandlers)) {
                const button = document.getElementById(id);
                if (button && window.opener && typeof handler === 'function') {
                    button.addEventListener('click', () => {
                        handler();
                        dropdown.classList.remove('visible');
                    });
                }
            }
          }
        <\/script>
        </body></html>`;Rn.write(va),Rn.close()}},[t,l,e]),vr=h.useCallback(j=>{P(j._id),D(!0)},[]),pr=h.useCallback(j=>{F(j)},[]),Do=["all","nextgen","marketplace","selfgen","manual"];function ba(j){return Do.includes(j)}function dp(j){return!j||!ba(j)?"all":j}const up=()=>{const j=[["EST","EDT"],["CST","CDT"],["MST","MDT"],["PST","PDT"],["AKST","AKDT"],["HAST","HADT"]],K=pi("America/New_York").endsWith("DT");return j.map(([Y,ge])=>K?ge:Y)},Io=v.useMemo(()=>up(),[]);function Gt(j){const K=j.timeZone;let Y=Lr(K||Pu(j.zipcode));return Y==="HST"&&(Y="HAST"),Io.includes(Y)?Y:"UNK"}const Lr=pi,on=v.useMemo(()=>{let j=c;if(st&&(j=j.filter(K=>Gt(K)===st)),We){const K=dt==="asc"?1:-1;j=[...j].sort((Y,ge)=>{const Ye=Io.indexOf(Gt(Y)),Ne=Io.indexOf(Gt(ge));return K*(Ye-Ne)})}return[...j]},[c,st,We,dt,ue]);h.useEffect(()=>(window.focusLead=j=>{const K=document.querySelector(`[data-phone='${j}']`);K&&(K.scrollIntoView({behavior:"smooth",block:"center"}),K.style.boxShadow="0 0 10px 2px #f97316",setTimeout(()=>{K.style.boxShadow=""},2e3))},()=>{delete window.focusLead}),[on]);const An=j=>{Se(j),J(!0)},No=[{name:"Trusted Consultants",url:"https://thetrustedconsultants.co/new-referral?referral_partner_full_name:=Link+Pellow&referral_partner_mobile_phone:=+12694621403"},{name:"Sydnee Alberts",url:"https://calendly.com/healthwithsydnee/30min?back=1"}];h.useEffect(()=>{if(X){nt("loading");const j=setTimeout(()=>{nt(K=>K==="loading"?"blocked":K)},4e3);return()=>clearTimeout(j)}},[X]),h.useEffect(()=>{if(!c||c.length===0)return;const j=c.filter(ge=>{if(ge.disposition!=="SOLD"||!ge.dob)return!1;const Ye=ge.dob.includes("/")?ge.dob.split("/"):ge.dob.split("-");if(Ye.length<3)return!1;const[Ne,At]=ge.dob.includes("/")?Ye:[Ye[1],Ye[2]],Nt=parseInt(Ne,10),Zt=parseInt(At,10),ln=new Date;return ln.getMonth()+1===Nt&&ln.getDate()===Zt});if(j.length===0)return;const K=[9,14,17],Y=[];return K.forEach(ge=>{const Ye=new Date,Ne=new Date;if(Ne.setHours(ge,0,0,0),Ne.getTime()<Ye.getTime())return;const At=Ne.getTime()-Ye.getTime();Y.push(setTimeout(()=>{j.forEach(Nt=>{e({title:`It's ${Nt.name}'s Birthday! 🎂`,status:"info",duration:8e3,isClosable:!0,position:"top-right"})})},At))}),()=>{Y.forEach(clearTimeout)}},[c,e]);const Lo=async()=>{try{Pe(!0);const j=await hi.exportLeads({...r,getAllResults:!0},"csv"),K=window.URL.createObjectURL(j),Y="CrokodialCSV.csv",ge=document.createElement("a");ge.href=K,ge.download=Y,document.body.appendChild(ge),ge.click(),ge.remove(),window.URL.revokeObjectURL(K)}catch{e({title:"CSV export failed",status:"error"})}finally{Pe(!1)}},Tt=j=>{if(!j.phone){e({title:"No phone number",description:"This lead has no phone number to dial",status:"error",duration:2e3});return}ie(j._id),Q(j.phone||""),Nu(j.phone||"")},sn=j=>{console.log("Lead Source for "+j.name+":",j.source);const K=ue[ys(j.phone)]??0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mac-buttons",children:[s.jsx("span",{className:"btn red",title:"Delete Lead",onClick:Y=>{Y.stopPropagation(),$e(j._id)}}),s.jsx("span",{className:"btn green",title:"Pop-out Notes",onClick:Y=>{Y.stopPropagation(),yr(j)}}),s.jsx("span",{className:"btn tack",title:"Pin Lead (Follow-Up)",onClick:Y=>{Y.stopPropagation(),Ct(j)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"auto",height:"auto"},children:s.jsx(bu,{color:"#000000",size:12,style:{transform:"rotate(20deg)"}})})]}),s.jsxs("div",{className:"grid-container",children:[s.jsx("div",{className:"grid-header",children:"Name"}),s.jsx("div",{className:"grid-header",children:"Email"}),s.jsx("div",{className:"grid-header",children:"Phone"}),s.jsx("div",{className:"grid-header",children:"Zipcode"}),s.jsx("div",{className:"grid-header",children:"DOB"}),s.jsx("div",{className:"grid-header",children:"Height"}),s.jsx("div",{className:"grid-header",children:"Weight"}),s.jsx("div",{className:"grid-header",children:"Gender"}),s.jsx("div",{className:"grid-header",children:"State"}),s.jsx("div",{className:"grid-header",children:"Disposition"}),s.jsx("div",{className:"grid-item",children:s.jsxs("div",{className:"text-content value name",onClick:Y=>{Y.stopPropagation(),wr(j.name,e,"Name")},title:"Click to copy",style:{display:"flex",alignItems:"center",gap:"8px"},children:[j.source==="NextGen"&&s.jsx("img",{src:"/images/nextgen.png",alt:"NextGen",style:{width:"20px",height:"20px",objectFit:"contain",flexShrink:0},title:"NextGen Lead"}),j.source==="Marketplace"&&s.jsx("img",{src:"/images/marketplace.png",alt:"Marketplace",style:{width:"20px",height:"20px",objectFit:"contain",flexShrink:0},title:"Marketplace Lead"}),(()=>{if(!j.dob)return null;const Y=j.dob.includes("/")?j.dob.split("/"):j.dob.split("-");if(Y.length<3)return null;const[ge,Ye]=j.dob.includes("/")?Y:[Y[1],Y[2]],Ne=parseInt(ge,10),At=parseInt(Ye,10),Nt=new Date;return Nt.getMonth()+1===Ne&&Nt.getDate()===At?s.jsx(X4,{color:"#ff69b4",title:"Birthday Today"},"cake"):null})(),s.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:j.name})]})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value email",title:"Click to copy",onClick:Y=>{Y.stopPropagation(),wr(ve(j.email),e,"Email")},children:nS(ve(j.email))})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value phone","data-phone":ve(j.phone).replace(/\D/g,""),onClick:Y=>{Y.stopPropagation(),wr(ve(j.phone),e,"Phone")},title:"Click to copy",children:Mf(ve(j.phone))})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation(),wr(ve(j.zipcode),e,"Zipcode")},title:"Click to copy",children:ve(j.zipcode)})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation();const ge=Na(ve(j.dob));wr(ge,e,"DOB")},title:"Click to copy",children:Na(ve(j.dob))})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation(),wr(ve(j.height),e,"Height")},title:"Click to copy",children:Df(ve(j.height))})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation(),wr(ve(j.weight),e,"Weight")},title:"Click to copy",children:ve(j.weight)})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation(),wr(ve(j.gender),e,"Gender")},title:"Click to copy",children:ve(j.gender)})}),s.jsx("div",{className:"grid-item",children:s.jsxs("div",{className:"text-content value",onClick:Y=>{Y.stopPropagation(),wr(ve(j.state),e,"State")},title:"Click to copy",children:[s.jsx("img",{src:`/states/${ve(j.state)}.png`,alt:ve(j.state),style:{height:"24px",maxWidth:"100%"},onError:Y=>Y.currentTarget.style.display="none"}),s.jsx("span",{style:{display:"none"},children:ve(j.state)})]})}),s.jsx("div",{className:"grid-item",children:s.jsx("div",{className:"disposition-section",children:s.jsxs(hS,{value:j.disposition||"",onChange:async Y=>{Y.stopPropagation();const ge=Y.target.value;try{await se.put(`/api/leads/${j._id}`,{disposition:ge}),e({title:"Disposition updated",status:"success"}),f()}catch{e({title:"Failed to update disposition",status:"error"})}},onClick:Y=>Y.stopPropagation(),children:[s.jsx("option",{value:"",children:"Disposition"}),(l||[]).map(Y=>s.jsx("option",{value:Y,children:Y},Y))]})})})]}),s.jsx("div",{className:"notes-section",children:s.jsx(Mb,{leadId:j._id,initialNotes:ve(j.notes),className:"notes-textarea",style:{resize:"vertical",minHeight:"140px"},onSaveSuccess:f})}),s.jsx("div",{className:"actions",children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",position:"relative",height:"80px"},children:[s.jsxs("div",{style:{display:"flex",gap:"10px",position:"absolute",bottom:"10px",left:"10px"},children:[s.jsxs(dS,{onClick:Y=>{Y.stopPropagation(),Tt(j)},children:[s.jsx(si,{}),` Call (${K})`]}),s.jsxs(uS,{onClick:Y=>{Y.stopPropagation(),e({title:"Hang up feature",description:"Telephony integration required",status:"info",duration:2e3})},children:[s.jsx(mC,{})," Hang Up"]})]}),s.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",display:"flex",alignItems:"center",gap:"15px"},children:[s.jsx(h3,{zipCode:j.zipcode,style:{position:"static",marginRight:"10px",backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.2)",padding:"4px 10px",borderRadius:"4px",minWidth:"110px",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}),s.jsx(je,{"aria-label":"Add to Textdrip Campaign",icon:s.jsx(S3,{boxSize:"28px"}),variant:"ghost",size:"sm",onClick:Y=>{Y.stopPropagation(),vr(j)},title:"Add to Textdrip Campaign"}),s.jsx(y3,{lead:j,onEdit:ye,onSendToSpreadsheet:ut,onBookAppointment:vt,onAddToReminders:Ct,onPopoutNotes:yr,onAddToCampaign:vr,onQuickDrip:pr,onReferralPartner:An,style:{position:"static"}})]})]})}),y!=="none"&&s.jsx("input",{type:"checkbox",checked:A.includes(j._id),onChange:Y=>{Y.target.checked?M([...A,j._id]):M(A.filter(ge=>ge!==j._id))},onClick:Y=>Y.stopPropagation()})]})};h.useEffect(()=>{const j=window;return j.handleEditLead=K=>ye(K),j.handleDeleteLead=K=>$e(K),j.handleSendToSpreadsheet=K=>ut(K),j.handleBookAppointment=K=>vt(K),j.handleAddToReminders=K=>Ct(K),j.handleAddToCampaign=K=>vr(K),j.handleQuickDrip=K=>pr(K),j.handleReferralPartner=K=>An(K),j.dialPhone=K=>Nu(K),()=>{delete j.handleEditLead,delete j.handleDeleteLead,delete j.handleSendToSpreadsheet,delete j.handleBookAppointment,delete j.handleAddToReminders,delete j.handleAddToCampaign,delete j.handleQuickDrip,delete j.handleReferralPartner,delete j.dialPhone}},[ye,$e,ut,vt,Ct,vr,pr,An]),v.useMemo(()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,[]);const St=()=>new Promise(j=>{const K=Date.now();Promise.resolve(f()).finally(()=>{const Y=Date.now()-K,ge=Math.max(0,500-Y);setTimeout(()=>j(),ge)})}),an=tS,Fo=d;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"leads-page-container",style:{position:"relative",height:"calc(100vh - 65px)"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsx(oS,{}),s.jsx(V3,{}),s.jsx(U3,{}),b.map(j=>s.jsx(lS,{},j.id)),s.jsxs(fS,{children:[s.jsxs("div",{style:{position:"relative"},children:[s.jsxs(Us,{ref:tt,onClick:j=>{j.stopPropagation(),bt(K=>!K)},children:[st||"Time-Zone"," ",s.jsx(Ws,{})]}),s.jsxs(Ys,{isOpen:Qe,buttonRef:tt,onClose:()=>bt(!1),children:[s.jsx(er,{onClick:()=>{bt(!1),it(null)},children:"All Time-Zones"}),Io.map(j=>s.jsx(er,{onClick:()=>{bt(!1),it(j)},children:j},j))]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs(Us,{ref:Re,onClick:j=>{j.stopPropagation(),rt(K=>!K)},children:[r.sortDirection==="asc"?"Aged":"New"," ",s.jsx(Ws,{})]}),s.jsxs(Ys,{isOpen:_e,buttonRef:Re,onClose:()=>rt(!1),children:[s.jsx(er,{onClick:()=>{rt(!1),re("createdAt","desc")},children:"New"}),s.jsx(er,{onClick:()=>{rt(!1),re("createdAt","asc")},children:"Aged"})]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs(Us,{ref:xe,onClick:j=>{j.stopPropagation(),Be(K=>!K)},children:[(()=>{const j=dp(r.filters?.pipelineSource);return j==="all"?"All Sources":j==="nextgen"?"NextGen":j==="marketplace"?"Marketplace":j==="selfgen"?"Self Generated":j==="manual"?"Manual Entry":"All Sources"})()," ",s.jsx(Ws,{})]}),s.jsxs(Ys,{isOpen:ce,buttonRef:xe,onClose:()=>Be(!1),children:[s.jsx(er,{onClick:()=>{console.log("[DEBUG] Pipeline option clicked: all"),Be(!1),q("all")},children:"All Sources"},"all"),s.jsx(er,{onClick:()=>{console.log("[DEBUG] Pipeline option clicked: nextgen"),Be(!1),q("nextgen")},children:"NextGen"},"nextgen"),s.jsx(er,{onClick:()=>{console.log("[DEBUG] Pipeline option clicked: marketplace"),Be(!1),q("marketplace")},children:"Marketplace"},"marketplace"),s.jsx(er,{onClick:()=>{console.log("[DEBUG] Pipeline option clicked: selfgen"),Be(!1),q("selfgen")},children:"Self Generated"},"selfgen"),s.jsx(er,{onClick:()=>{console.log("[DEBUG] Pipeline option clicked: manual"),Be(!1),q("manual")},children:"Manual Entry"},"manual")]})]}),s.jsx(U5,{selectedStates:r.filters?.states||[],availableStates:i,onChange:T}),s.jsx(X5,{selectedDispositions:r.filters?.dispositions||[],availableDispositions:l,getColorForDisposition:t,onChange:W}),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs(Us,{ref:Ie,onClick:()=>Ue(j=>!j),children:["Edit All ",s.jsx(Ws,{})]}),s.jsxs(Ys,{isOpen:Je,buttonRef:Ie,onClose:()=>Ue(!1),children:[s.jsx(er,{onClick:()=>{Ue(!1),e({title:"Bulk edit coming soon",description:"This feature will be available in a future update",status:"info",duration:3e3,isClosable:!0})},children:"Bulk Edit"}),s.jsx(er,{onClick:()=>{Ue(!1),e({title:"Bulk delete coming soon",description:"This feature will be available in a future update",status:"info",duration:3e3,isClosable:!0})},children:"Delete Selected"})]})]}),s.jsx(aS,{placeholder:"Search leads...",value:r.search,onChange:j=>yt(j.target.value)}),s.jsx(mS,{onClick:async()=>{try{const j=await se.post("/api/leads",{name:"Blank Lead",status:"New"});j.data&&Array.isArray(c)&&c.unshift(j.data),e({title:"Lead added!",status:"success"}),f()}catch{e({title:"Failed to add lead",status:"error"})}},"aria-label":"Add Lead",children:"+"}),s.jsxs("div",{style:{color:"#EFBF04",fontWeight:700,fontSize:"0.9rem",whiteSpace:"nowrap",marginLeft:"8px"},children:["Leads: ",p?.total||c.length," Total",s.jsx(je,{"aria-label":"Download CSV",icon:ot?s.jsx(mt,{size:"xs",color:"white"}):s.jsx(MC,{color:"white"}),variant:"ghost",size:"sm",ml:2,p:0,bg:"transparent",_hover:{opacity:.8},_active:{opacity:.6},onClick:Lo,isDisabled:ot,title:"Download CSV"})]})]}),(()=>{const j=s.jsx(iS,{children:s.jsx(sS,{ref:Fe,$pullDistance:1,$isRefreshing:!0,children:u?s.jsxs("div",{className:"error-message",style:{textAlign:"center",padding:"2rem"},children:["Error loading leads: ",u.message]}):Fo?s.jsx($5,{}):c.length===0?s.jsx("div",{className:"no-leads",style:{textAlign:"center",padding:"2rem"},children:r.search?"No leads found matching your search.":"No leads available."}):s.jsx("div",{className:"leads-list",children:on.map(K=>s.jsx(pS,{$isActive:m===K._id,$isSelected:A.includes(K._id),$isDeleteMode:y==="delete",$isClicked:!1,$backgroundColor:t(K.disposition||""),onClick:()=>x(K._id),className:"lead-card",children:sn(K)},K._id))})})});return s.jsx(an,{onRefresh:St,pullingContent:s.jsx(Ou,{size:48}),refreshingContent:s.jsx(Ou,{size:48}),pullDownThreshold:150,children:j})})(),s.jsxs(le,{justify:"center",align:"center",gap:2,p:3,bg:"blackAlpha.900",color:"white",position:"sticky",top:"148px",zIndex:8,children:[s.jsx(je,{"aria-label":"First page",icon:s.jsx(Ru,{direction:"left",boxSize:4,color:"orange.400"}),onClick:()=>R(1),isDisabled:r.page<=1,size:"sm",variant:"ghost",_hover:{bg:"orange.50"},_disabled:{opacity:.3,cursor:"not-allowed"}}),s.jsx(je,{"aria-label":"Previous page",icon:s.jsx(OC,{color:"#F97316"}),onClick:()=>R(r.page-1),isDisabled:r.page<=1,size:"sm",variant:"ghost",_hover:{bg:"orange.50"},_disabled:{opacity:.3,cursor:"not-allowed"}}),s.jsxs(de,{spacing:3,whiteSpace:"nowrap",children:[s.jsx(L,{fontWeight:"bold",color:"orange.400",children:"Page"}),s.jsx(L,{fontWeight:"bold",color:"white",children:r.page}),s.jsx(L,{fontWeight:"bold",color:"orange.400",children:"of"}),s.jsx(L,{fontWeight:"bold",color:"white",children:p?.pages||1})]}),s.jsx(je,{"aria-label":"Next page",icon:s.jsx(PC,{color:"#F97316"}),onClick:()=>R(r.page+1),isDisabled:!p||r.page>=(p?.pages||1),size:"sm",variant:"ghost",_hover:{bg:"orange.50"},_disabled:{opacity:.3,cursor:"not-allowed"}}),s.jsx(je,{"aria-label":"Last page",icon:s.jsx(Ru,{direction:"right",boxSize:4,color:"orange.400"}),onClick:()=>R(p?.pages||1),isDisabled:!p||r.page>=(p?.pages||1),size:"sm",variant:"ghost",_hover:{bg:"orange.50"},_disabled:{opacity:.3,cursor:"not-allowed"}})]}),s.jsx(w3,{isOpen:k,onClose:()=>{w(!1),_(null)},lead:C,onSuccess:()=>{f()}}),s.jsx(C3,{lead:B,isOpen:G,onClose:()=>V(!1)}),s.jsx(k3,{leadId:S,isOpen:z,onClose:()=>D(!1),onSuccess:f}),I&&s.jsx(E3,{lead:I,onClose:()=>F(null)}),s.jsxs(Ar,{isOpen:X,onClose:()=>J(!1),size:"sm",isCentered:!0,children:[s.jsx(Rr,{}),s.jsxs(Or,{p:6,bg:"white",children:[s.jsx(L,{fontSize:"lg",fontWeight:"bold",mb:4,textAlign:"center",children:"Choose Referral Destination"}),No.map(j=>s.jsx(ne,{width:"100%",mb:3,colorScheme:"orange",onClick:()=>{window.open(j.url,"_blank","noopener"),J(!1)},children:j.name},j.name))]})]})]})})})}const Ub="#f5f2e9",Wb=h.createContext({backgroundColor:Ub,setBackgroundColor:()=>{}}),bS=({children:e})=>{const[t,r]=h.useState(()=>localStorage.getItem("crokodial_bg_color")||Ub);h.useEffect(()=>{n(t)},[]),h.useEffect(()=>{t&&(document.documentElement.style.setProperty("--app-background-color",t,"important"),document.body.style.setProperty("background-color",t,"important"),document.querySelectorAll(".app-container, .settings-container, .main-content, .clients-container").forEach(a=>{a.style.setProperty("background-color",t,"important")}))},[t]);const n=i=>{if(!i||window.location.pathname==="/login")return;document.documentElement.style.setProperty("--app-background-color",i,"important"),document.body.style.cssText+=`background-color: ${i} !important;`,document.documentElement.style.cssText+=`background-color: ${i} !important;`,document.querySelectorAll(".clients-container").forEach(d=>{d.style.cssText+=`background-color: ${i} !important;`}),document.querySelectorAll(".main-content, .app-container, .clients-container").forEach(d=>{d.style.cssText+=`background-color: ${i} !important;`}),localStorage.setItem("crokodial_bg_color",i)},o=i=>{i&&(r(i),n(i))};return s.jsx(Wb.Provider,{value:{backgroundColor:t,setBackgroundColor:o},children:e})},Yb=()=>h.useContext(Wb);var Ot={},Ln={},La,If;function Vb(){if(If)return La;If=1;var e=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;return La=e,La}var Fa,Nf;function dr(){if(Nf)return Fa;Nf=1;var e=Vb(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Fa=r,Fa}var za,Lf;function Rs(){if(Lf)return za;Lf=1;var e=dr(),t=e.Symbol;return za=t,za}var $a,Ff;function yS(){if(Ff)return $a;Ff=1;var e=Rs(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,o=e?e.toStringTag:void 0;function i(a){var l=r.call(a,o),c=a[o];try{a[o]=void 0;var d=!0}catch{}var u=n.call(a);return d&&(l?a[o]=c:delete a[o]),u}return $a=i,$a}var Ba,zf;function vS(){if(zf)return Ba;zf=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Ba=r,Ba}var qa,$f;function Cn(){if($f)return qa;$f=1;var e=Rs(),t=yS(),r=vS(),n="[object Null]",o="[object Undefined]",i=e?e.toStringTag:void 0;function a(l){return l==null?l===void 0?o:n:i&&i in Object(l)?t(l):r(l)}return qa=a,qa}var Ha,Bf;function ur(){if(Bf)return Ha;Bf=1;var e=Array.isArray;return Ha=e,Ha}var Ga,qf;function Dr(){if(qf)return Ga;qf=1;function e(t){return t!=null&&typeof t=="object"}return Ga=e,Ga}var Ua,Hf;function wS(){if(Hf)return Ua;Hf=1;var e=Cn(),t=ur(),r=Dr(),n="[object String]";function o(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Ua=o,Ua}var Wa,Gf;function CS(){if(Gf)return Wa;Gf=1;function e(t){return function(r,n,o){for(var i=-1,a=Object(r),l=o(r),c=l.length;c--;){var d=l[t?c:++i];if(n(a[d],d,a)===!1)break}return r}}return Wa=e,Wa}var Ya,Uf;function SS(){if(Uf)return Ya;Uf=1;var e=CS(),t=e();return Ya=t,Ya}var Va,Wf;function jS(){if(Wf)return Va;Wf=1;function e(t,r){for(var n=-1,o=Array(t);++n<t;)o[n]=r(n);return o}return Va=e,Va}var Ka,Yf;function kS(){if(Yf)return Ka;Yf=1;var e=Cn(),t=Dr(),r="[object Arguments]";function n(o){return t(o)&&e(o)==r}return Ka=n,Ka}var Qa,Vf;function Kb(){if(Vf)return Qa;Vf=1;var e=kS(),t=Dr(),r=Object.prototype,n=r.hasOwnProperty,o=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(a){return t(a)&&n.call(a,"callee")&&!o.call(a,"callee")};return Qa=i,Qa}var ts={exports:{}},Ja,Kf;function ES(){if(Kf)return Ja;Kf=1;function e(){return!1}return Ja=e,Ja}ts.exports;var Qf;function yh(){return Qf||(Qf=1,function(e,t){var r=dr(),n=ES(),o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,l=a?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d}(ts,ts.exports)),ts.exports}var Xa,Jf;function Qb(){if(Jf)return Xa;Jf=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,o){var i=typeof n;return o=o??e,!!o&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<o}return Xa=r,Xa}var Za,Xf;function vh(){if(Xf)return Za;Xf=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Za=t,Za}var el,Zf;function _S(){if(Zf)return el;Zf=1;var e=Cn(),t=vh(),r=Dr(),n="[object Arguments]",o="[object Array]",i="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",p="[object Object]",f="[object RegExp]",b="[object Set]",g="[object String]",m="[object WeakMap]",x="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",M="[object Int8Array]",k="[object Int16Array]",w="[object Int32Array]",C="[object Uint8Array]",_="[object Uint8ClampedArray]",z="[object Uint16Array]",D="[object Uint32Array]",S={};S[E]=S[A]=S[M]=S[k]=S[w]=S[C]=S[_]=S[z]=S[D]=!0,S[n]=S[o]=S[x]=S[i]=S[y]=S[a]=S[l]=S[c]=S[d]=S[u]=S[p]=S[f]=S[b]=S[g]=S[m]=!1;function P(I){return r(I)&&t(I.length)&&!!S[e(I)]}return el=P,el}var tl,eg;function wh(){if(eg)return tl;eg=1;function e(t){return function(r){return t(r)}}return tl=e,tl}var rs={exports:{}};rs.exports;var tg;function Ch(){return tg||(tg=1,function(e,t){var r=Vb(),n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i&&r.process,l=function(){try{var c=o&&o.require&&o.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=l}(rs,rs.exports)),rs.exports}var rl,rg;function Jb(){if(rg)return rl;rg=1;var e=_S(),t=wh(),r=Ch(),n=r&&r.isTypedArray,o=n?t(n):e;return rl=o,rl}var nl,ng;function Xb(){if(ng)return nl;ng=1;var e=jS(),t=Kb(),r=ur(),n=yh(),o=Qb(),i=Jb(),a=Object.prototype,l=a.hasOwnProperty;function c(d,u){var p=r(d),f=!p&&t(d),b=!p&&!f&&n(d),g=!p&&!f&&!b&&i(d),m=p||f||b||g,x=m?e(d.length,String):[],y=x.length;for(var E in d)(u||l.call(d,E))&&!(m&&(E=="length"||b&&(E=="offset"||E=="parent")||g&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||o(E,y)))&&x.push(E);return x}return nl=c,nl}var ol,og;function Sh(){if(og)return ol;og=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,o=typeof n=="function"&&n.prototype||e;return r===o}return ol=t,ol}var sl,sg;function Zb(){if(sg)return sl;sg=1;function e(t,r){return function(n){return t(r(n))}}return sl=e,sl}var il,ig;function TS(){if(ig)return il;ig=1;var e=Zb(),t=e(Object.keys,Object);return il=t,il}var al,ag;function AS(){if(ag)return al;ag=1;var e=Sh(),t=TS(),r=Object.prototype,n=r.hasOwnProperty;function o(i){if(!e(i))return t(i);var a=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&a.push(l);return a}return al=o,al}var ll,lg;function tn(){if(lg)return ll;lg=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ll=e,ll}var cl,cg;function ey(){if(cg)return cl;cg=1;var e=Cn(),t=tn(),r="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]";function a(l){if(!t(l))return!1;var c=e(l);return c==n||c==o||c==r||c==i}return cl=a,cl}var dl,dg;function ea(){if(dg)return dl;dg=1;var e=ey(),t=vh();function r(n){return n!=null&&t(n.length)&&!e(n)}return dl=r,dl}var ul,ug;function Os(){if(ug)return ul;ug=1;var e=Xb(),t=AS(),r=ea();function n(o){return r(o)?e(o):t(o)}return ul=n,ul}var hl,hg;function ty(){if(hg)return hl;hg=1;var e=SS(),t=Os();function r(n,o){return n&&e(n,o,t)}return hl=r,hl}var pl,pg;function ry(){if(pg)return pl;pg=1;function e(t){return t}return pl=e,pl}var fl,fg;function RS(){if(fg)return fl;fg=1;var e=ry();function t(r){return typeof r=="function"?r:e}return fl=t,fl}var gl,gg;function jh(){if(gg)return gl;gg=1;var e=ty(),t=RS();function r(n,o){return n&&e(n,t(o))}return gl=r,gl}var ml,mg;function kh(){if(mg)return ml;mg=1;var e=Zb(),t=e(Object.getPrototypeOf,Object);return ml=t,ml}var xl,xg;function OS(){if(xg)return xl;xg=1;var e=Cn(),t=kh(),r=Dr(),n="[object Object]",o=Function.prototype,i=Object.prototype,a=o.toString,l=i.hasOwnProperty,c=a.call(Object);function d(u){if(!r(u)||e(u)!=n)return!1;var p=t(u);if(p===null)return!0;var f=l.call(p,"constructor")&&p.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==c}return xl=d,xl}var bl,bg;function ny(){if(bg)return bl;bg=1;function e(t,r){for(var n=-1,o=t==null?0:t.length,i=Array(o);++n<o;)i[n]=r(t[n],n,t);return i}return bl=e,bl}var yl,yg;function PS(){if(yg)return yl;yg=1;function e(){this.__data__=[],this.size=0}return yl=e,yl}var vl,vg;function Eh(){if(vg)return vl;vg=1;function e(t,r){return t===r||t!==t&&r!==r}return vl=e,vl}var wl,wg;function ta(){if(wg)return wl;wg=1;var e=Eh();function t(r,n){for(var o=r.length;o--;)if(e(r[o][0],n))return o;return-1}return wl=t,wl}var Cl,Cg;function MS(){if(Cg)return Cl;Cg=1;var e=ta(),t=Array.prototype,r=t.splice;function n(o){var i=this.__data__,a=e(i,o);if(a<0)return!1;var l=i.length-1;return a==l?i.pop():r.call(i,a,1),--this.size,!0}return Cl=n,Cl}var Sl,Sg;function DS(){if(Sg)return Sl;Sg=1;var e=ta();function t(r){var n=this.__data__,o=e(n,r);return o<0?void 0:n[o][1]}return Sl=t,Sl}var jl,jg;function IS(){if(jg)return jl;jg=1;var e=ta();function t(r){return e(this.__data__,r)>-1}return jl=t,jl}var kl,kg;function NS(){if(kg)return kl;kg=1;var e=ta();function t(r,n){var o=this.__data__,i=e(o,r);return i<0?(++this.size,o.push([r,n])):o[i][1]=n,this}return kl=t,kl}var El,Eg;function ra(){if(Eg)return El;Eg=1;var e=PS(),t=MS(),r=DS(),n=IS(),o=NS();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=o,El=i,El}var _l,_g;function LS(){if(_g)return _l;_g=1;var e=ra();function t(){this.__data__=new e,this.size=0}return _l=t,_l}var Tl,Tg;function FS(){if(Tg)return Tl;Tg=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Tl=e,Tl}var Al,Ag;function zS(){if(Ag)return Al;Ag=1;function e(t){return this.__data__.get(t)}return Al=e,Al}var Rl,Rg;function $S(){if(Rg)return Rl;Rg=1;function e(t){return this.__data__.has(t)}return Rl=e,Rl}var Ol,Og;function BS(){if(Og)return Ol;Og=1;var e=dr(),t=e["__core-js_shared__"];return Ol=t,Ol}var Pl,Pg;function qS(){if(Pg)return Pl;Pg=1;var e=BS(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return Pl=r,Pl}var Ml,Mg;function oy(){if(Mg)return Ml;Mg=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Ml=r,Ml}var Dl,Dg;function HS(){if(Dg)return Dl;Dg=1;var e=ey(),t=qS(),r=tn(),n=oy(),o=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,c=a.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(f){if(!r(f)||t(f))return!1;var b=e(f)?u:i;return b.test(n(f))}return Dl=p,Dl}var Il,Ig;function GS(){if(Ig)return Il;Ig=1;function e(t,r){return t?.[r]}return Il=e,Il}var Nl,Ng;function Sn(){if(Ng)return Nl;Ng=1;var e=HS(),t=GS();function r(n,o){var i=t(n,o);return e(i)?i:void 0}return Nl=r,Nl}var Ll,Lg;function _h(){if(Lg)return Ll;Lg=1;var e=Sn(),t=dr(),r=e(t,"Map");return Ll=r,Ll}var Fl,Fg;function na(){if(Fg)return Fl;Fg=1;var e=Sn(),t=e(Object,"create");return Fl=t,Fl}var zl,zg;function US(){if(zg)return zl;zg=1;var e=na();function t(){this.__data__=e?e(null):{},this.size=0}return zl=t,zl}var $l,$g;function WS(){if($g)return $l;$g=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return $l=e,$l}var Bl,Bg;function YS(){if(Bg)return Bl;Bg=1;var e=na(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function o(i){var a=this.__data__;if(e){var l=a[i];return l===t?void 0:l}return n.call(a,i)?a[i]:void 0}return Bl=o,Bl}var ql,qg;function VS(){if(qg)return ql;qg=1;var e=na(),t=Object.prototype,r=t.hasOwnProperty;function n(o){var i=this.__data__;return e?i[o]!==void 0:r.call(i,o)}return ql=n,ql}var Hl,Hg;function KS(){if(Hg)return Hl;Hg=1;var e=na(),t="__lodash_hash_undefined__";function r(n,o){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&o===void 0?t:o,this}return Hl=r,Hl}var Gl,Gg;function QS(){if(Gg)return Gl;Gg=1;var e=US(),t=WS(),r=YS(),n=VS(),o=KS();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=o,Gl=i,Gl}var Ul,Ug;function JS(){if(Ug)return Ul;Ug=1;var e=QS(),t=ra(),r=_h();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Ul=n,Ul}var Wl,Wg;function XS(){if(Wg)return Wl;Wg=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Wl=e,Wl}var Yl,Yg;function oa(){if(Yg)return Yl;Yg=1;var e=XS();function t(r,n){var o=r.__data__;return e(n)?o[typeof n=="string"?"string":"hash"]:o.map}return Yl=t,Yl}var Vl,Vg;function ZS(){if(Vg)return Vl;Vg=1;var e=oa();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Vl=t,Vl}var Kl,Kg;function e6(){if(Kg)return Kl;Kg=1;var e=oa();function t(r){return e(this,r).get(r)}return Kl=t,Kl}var Ql,Qg;function t6(){if(Qg)return Ql;Qg=1;var e=oa();function t(r){return e(this,r).has(r)}return Ql=t,Ql}var Jl,Jg;function r6(){if(Jg)return Jl;Jg=1;var e=oa();function t(r,n){var o=e(this,r),i=o.size;return o.set(r,n),this.size+=o.size==i?0:1,this}return Jl=t,Jl}var Xl,Xg;function Th(){if(Xg)return Xl;Xg=1;var e=JS(),t=ZS(),r=e6(),n=t6(),o=r6();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=o,Xl=i,Xl}var Zl,Zg;function n6(){if(Zg)return Zl;Zg=1;var e=ra(),t=_h(),r=Th(),n=200;function o(i,a){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<n-1)return c.push([i,a]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,a),this.size=l.size,this}return Zl=o,Zl}var ec,e0;function Ah(){if(e0)return ec;e0=1;var e=ra(),t=LS(),r=FS(),n=zS(),o=$S(),i=n6();function a(l){var c=this.__data__=new e(l);this.size=c.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=o,a.prototype.set=i,ec=a,ec}var tc,t0;function o6(){if(t0)return tc;t0=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return tc=t,tc}var rc,r0;function s6(){if(r0)return rc;r0=1;function e(t){return this.__data__.has(t)}return rc=e,rc}var nc,n0;function i6(){if(n0)return nc;n0=1;var e=Th(),t=o6(),r=s6();function n(o){var i=-1,a=o==null?0:o.length;for(this.__data__=new e;++i<a;)this.add(o[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,nc=n,nc}var oc,o0;function a6(){if(o0)return oc;o0=1;function e(t,r){for(var n=-1,o=t==null?0:t.length;++n<o;)if(r(t[n],n,t))return!0;return!1}return oc=e,oc}var sc,s0;function l6(){if(s0)return sc;s0=1;function e(t,r){return t.has(r)}return sc=e,sc}var ic,i0;function sy(){if(i0)return ic;i0=1;var e=i6(),t=a6(),r=l6(),n=1,o=2;function i(a,l,c,d,u,p){var f=c&n,b=a.length,g=l.length;if(b!=g&&!(f&&g>b))return!1;var m=p.get(a),x=p.get(l);if(m&&x)return m==l&&x==a;var y=-1,E=!0,A=c&o?new e:void 0;for(p.set(a,l),p.set(l,a);++y<b;){var M=a[y],k=l[y];if(d)var w=f?d(k,M,y,l,a,p):d(M,k,y,a,l,p);if(w!==void 0){if(w)continue;E=!1;break}if(A){if(!t(l,function(C,_){if(!r(A,_)&&(M===C||u(M,C,c,d,p)))return A.push(_)})){E=!1;break}}else if(!(M===k||u(M,k,c,d,p))){E=!1;break}}return p.delete(a),p.delete(l),E}return ic=i,ic}var ac,a0;function iy(){if(a0)return ac;a0=1;var e=dr(),t=e.Uint8Array;return ac=t,ac}var lc,l0;function c6(){if(l0)return lc;l0=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(o,i){n[++r]=[i,o]}),n}return lc=e,lc}var cc,c0;function d6(){if(c0)return cc;c0=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(o){n[++r]=o}),n}return cc=e,cc}var dc,d0;function u6(){if(d0)return dc;d0=1;var e=Rs(),t=iy(),r=Eh(),n=sy(),o=c6(),i=d6(),a=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",p="[object Map]",f="[object Number]",b="[object RegExp]",g="[object Set]",m="[object String]",x="[object Symbol]",y="[object ArrayBuffer]",E="[object DataView]",A=e?e.prototype:void 0,M=A?A.valueOf:void 0;function k(w,C,_,z,D,S,P){switch(_){case E:if(w.byteLength!=C.byteLength||w.byteOffset!=C.byteOffset)return!1;w=w.buffer,C=C.buffer;case y:return!(w.byteLength!=C.byteLength||!S(new t(w),new t(C)));case c:case d:case f:return r(+w,+C);case u:return w.name==C.name&&w.message==C.message;case b:case m:return w==C+"";case p:var I=o;case g:var F=z&a;if(I||(I=i),w.size!=C.size&&!F)return!1;var G=P.get(w);if(G)return G==C;z|=l,P.set(w,C);var V=n(I(w),I(C),z,D,S,P);return P.delete(w),V;case x:if(M)return M.call(w)==M.call(C)}return!1}return dc=k,dc}var uc,u0;function ay(){if(u0)return uc;u0=1;function e(t,r){for(var n=-1,o=r.length,i=t.length;++n<o;)t[i+n]=r[n];return t}return uc=e,uc}var hc,h0;function ly(){if(h0)return hc;h0=1;var e=ay(),t=ur();function r(n,o,i){var a=o(n);return t(n)?a:e(a,i(n))}return hc=r,hc}var pc,p0;function h6(){if(p0)return pc;p0=1;function e(t,r){for(var n=-1,o=t==null?0:t.length,i=0,a=[];++n<o;){var l=t[n];r(l,n,t)&&(a[i++]=l)}return a}return pc=e,pc}var fc,f0;function cy(){if(f0)return fc;f0=1;function e(){return[]}return fc=e,fc}var gc,g0;function Rh(){if(g0)return gc;g0=1;var e=h6(),t=cy(),r=Object.prototype,n=r.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(a){return a==null?[]:(a=Object(a),e(o(a),function(l){return n.call(a,l)}))}:t;return gc=i,gc}var mc,m0;function dy(){if(m0)return mc;m0=1;var e=ly(),t=Rh(),r=Os();function n(o){return e(o,r,t)}return mc=n,mc}var xc,x0;function p6(){if(x0)return xc;x0=1;var e=dy(),t=1,r=Object.prototype,n=r.hasOwnProperty;function o(i,a,l,c,d,u){var p=l&t,f=e(i),b=f.length,g=e(a),m=g.length;if(b!=m&&!p)return!1;for(var x=b;x--;){var y=f[x];if(!(p?y in a:n.call(a,y)))return!1}var E=u.get(i),A=u.get(a);if(E&&A)return E==a&&A==i;var M=!0;u.set(i,a),u.set(a,i);for(var k=p;++x<b;){y=f[x];var w=i[y],C=a[y];if(c)var _=p?c(C,w,y,a,i,u):c(w,C,y,i,a,u);if(!(_===void 0?w===C||d(w,C,l,c,u):_)){M=!1;break}k||(k=y=="constructor")}if(M&&!k){var z=i.constructor,D=a.constructor;z!=D&&"constructor"in i&&"constructor"in a&&!(typeof z=="function"&&z instanceof z&&typeof D=="function"&&D instanceof D)&&(M=!1)}return u.delete(i),u.delete(a),M}return xc=o,xc}var bc,b0;function f6(){if(b0)return bc;b0=1;var e=Sn(),t=dr(),r=e(t,"DataView");return bc=r,bc}var yc,y0;function g6(){if(y0)return yc;y0=1;var e=Sn(),t=dr(),r=e(t,"Promise");return yc=r,yc}var vc,v0;function m6(){if(v0)return vc;v0=1;var e=Sn(),t=dr(),r=e(t,"Set");return vc=r,vc}var wc,w0;function x6(){if(w0)return wc;w0=1;var e=Sn(),t=dr(),r=e(t,"WeakMap");return wc=r,wc}var Cc,C0;function sa(){if(C0)return Cc;C0=1;var e=f6(),t=_h(),r=g6(),n=m6(),o=x6(),i=Cn(),a=oy(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",p="[object WeakMap]",f="[object DataView]",b=a(e),g=a(t),m=a(r),x=a(n),y=a(o),E=i;return(e&&E(new e(new ArrayBuffer(1)))!=f||t&&E(new t)!=l||r&&E(r.resolve())!=d||n&&E(new n)!=u||o&&E(new o)!=p)&&(E=function(A){var M=i(A),k=M==c?A.constructor:void 0,w=k?a(k):"";if(w)switch(w){case b:return f;case g:return l;case m:return d;case x:return u;case y:return p}return M}),Cc=E,Cc}var Sc,S0;function b6(){if(S0)return Sc;S0=1;var e=Ah(),t=sy(),r=u6(),n=p6(),o=sa(),i=ur(),a=yh(),l=Jb(),c=1,d="[object Arguments]",u="[object Array]",p="[object Object]",f=Object.prototype,b=f.hasOwnProperty;function g(m,x,y,E,A,M){var k=i(m),w=i(x),C=k?u:o(m),_=w?u:o(x);C=C==d?p:C,_=_==d?p:_;var z=C==p,D=_==p,S=C==_;if(S&&a(m)){if(!a(x))return!1;k=!0,z=!1}if(S&&!z)return M||(M=new e),k||l(m)?t(m,x,y,E,A,M):r(m,x,C,y,E,A,M);if(!(y&c)){var P=z&&b.call(m,"__wrapped__"),I=D&&b.call(x,"__wrapped__");if(P||I){var F=P?m.value():m,G=I?x.value():x;return M||(M=new e),A(F,G,y,E,M)}}return S?(M||(M=new e),n(m,x,y,E,A,M)):!1}return Sc=g,Sc}var jc,j0;function uy(){if(j0)return jc;j0=1;var e=b6(),t=Dr();function r(n,o,i,a,l){return n===o?!0:n==null||o==null||!t(n)&&!t(o)?n!==n&&o!==o:e(n,o,i,a,r,l)}return jc=r,jc}var kc,k0;function y6(){if(k0)return kc;k0=1;var e=Ah(),t=uy(),r=1,n=2;function o(i,a,l,c){var d=l.length,u=d,p=!c;if(i==null)return!u;for(i=Object(i);d--;){var f=l[d];if(p&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++d<u;){f=l[d];var b=f[0],g=i[b],m=f[1];if(p&&f[2]){if(g===void 0&&!(b in i))return!1}else{var x=new e;if(c)var y=c(g,m,b,i,a,x);if(!(y===void 0?t(m,g,r|n,c,x):y))return!1}}return!0}return kc=o,kc}var Ec,E0;function hy(){if(E0)return Ec;E0=1;var e=tn();function t(r){return r===r&&!e(r)}return Ec=t,Ec}var _c,_0;function v6(){if(_0)return _c;_0=1;var e=hy(),t=Os();function r(n){for(var o=t(n),i=o.length;i--;){var a=o[i],l=n[a];o[i]=[a,l,e(l)]}return o}return _c=r,_c}var Tc,T0;function py(){if(T0)return Tc;T0=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Tc=e,Tc}var Ac,A0;function w6(){if(A0)return Ac;A0=1;var e=y6(),t=v6(),r=py();function n(o){var i=t(o);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(a){return a===o||e(a,o,i)}}return Ac=n,Ac}var Rc,R0;function ia(){if(R0)return Rc;R0=1;var e=Cn(),t=Dr(),r="[object Symbol]";function n(o){return typeof o=="symbol"||t(o)&&e(o)==r}return Rc=n,Rc}var Oc,O0;function Oh(){if(O0)return Oc;O0=1;var e=ur(),t=ia(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function o(i,a){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||a!=null&&i in Object(a)}return Oc=o,Oc}var Pc,P0;function C6(){if(P0)return Pc;P0=1;var e=Th(),t="Expected a function";function r(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var i=function(){var a=arguments,l=o?o.apply(this,a):a[0],c=i.cache;if(c.has(l))return c.get(l);var d=n.apply(this,a);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,Pc=r,Pc}var Mc,M0;function S6(){if(M0)return Mc;M0=1;var e=C6(),t=500;function r(n){var o=e(n,function(a){return i.size===t&&i.clear(),a}),i=o.cache;return o}return Mc=r,Mc}var Dc,D0;function j6(){if(D0)return Dc;D0=1;var e=S6(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(t,function(a,l,c,d){i.push(c?d.replace(r,"$1"):l||a)}),i});return Dc=n,Dc}var Ic,I0;function k6(){if(I0)return Ic;I0=1;var e=Rs(),t=ny(),r=ur(),n=ia(),o=e?e.prototype:void 0,i=o?o.toString:void 0;function a(l){if(typeof l=="string")return l;if(r(l))return t(l,a)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Ic=a,Ic}var Nc,N0;function E6(){if(N0)return Nc;N0=1;var e=k6();function t(r){return r==null?"":e(r)}return Nc=t,Nc}var Lc,L0;function fy(){if(L0)return Lc;L0=1;var e=ur(),t=Oh(),r=j6(),n=E6();function o(i,a){return e(i)?i:t(i,a)?[i]:r(n(i))}return Lc=o,Lc}var Fc,F0;function aa(){if(F0)return Fc;F0=1;var e=ia();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Fc=t,Fc}var zc,z0;function gy(){if(z0)return zc;z0=1;var e=fy(),t=aa();function r(n,o){o=e(o,n);for(var i=0,a=o.length;n!=null&&i<a;)n=n[t(o[i++])];return i&&i==a?n:void 0}return zc=r,zc}var $c,$0;function _6(){if($0)return $c;$0=1;var e=gy();function t(r,n,o){var i=r==null?void 0:e(r,n);return i===void 0?o:i}return $c=t,$c}var Bc,B0;function T6(){if(B0)return Bc;B0=1;function e(t,r){return t!=null&&r in Object(t)}return Bc=e,Bc}var qc,q0;function A6(){if(q0)return qc;q0=1;var e=fy(),t=Kb(),r=ur(),n=Qb(),o=vh(),i=aa();function a(l,c,d){c=e(c,l);for(var u=-1,p=c.length,f=!1;++u<p;){var b=i(c[u]);if(!(f=l!=null&&d(l,b)))break;l=l[b]}return f||++u!=p?f:(p=l==null?0:l.length,!!p&&o(p)&&n(b,p)&&(r(l)||t(l)))}return qc=a,qc}var Hc,H0;function R6(){if(H0)return Hc;H0=1;var e=T6(),t=A6();function r(n,o){return n!=null&&t(n,o,e)}return Hc=r,Hc}var Gc,G0;function O6(){if(G0)return Gc;G0=1;var e=uy(),t=_6(),r=R6(),n=Oh(),o=hy(),i=py(),a=aa(),l=1,c=2;function d(u,p){return n(u)&&o(p)?i(a(u),p):function(f){var b=t(f,u);return b===void 0&&b===p?r(f,u):e(p,b,l|c)}}return Gc=d,Gc}var Uc,U0;function P6(){if(U0)return Uc;U0=1;function e(t){return function(r){return r?.[t]}}return Uc=e,Uc}var Wc,W0;function M6(){if(W0)return Wc;W0=1;var e=gy();function t(r){return function(n){return e(n,r)}}return Wc=t,Wc}var Yc,Y0;function D6(){if(Y0)return Yc;Y0=1;var e=P6(),t=M6(),r=Oh(),n=aa();function o(i){return r(i)?e(n(i)):t(i)}return Yc=o,Yc}var Vc,V0;function I6(){if(V0)return Vc;V0=1;var e=w6(),t=O6(),r=ry(),n=ur(),o=D6();function i(a){return typeof a=="function"?a:a==null?r:typeof a=="object"?n(a)?t(a[0],a[1]):e(a):o(a)}return Vc=i,Vc}var Kc,K0;function N6(){if(K0)return Kc;K0=1;var e=ea();function t(r,n){return function(o,i){if(o==null)return o;if(!e(o))return r(o,i);for(var a=o.length,l=n?a:-1,c=Object(o);(n?l--:++l<a)&&i(c[l],l,c)!==!1;);return o}}return Kc=t,Kc}var Qc,Q0;function L6(){if(Q0)return Qc;Q0=1;var e=ty(),t=N6(),r=t(e);return Qc=r,Qc}var Jc,J0;function F6(){if(J0)return Jc;J0=1;var e=L6(),t=ea();function r(n,o){var i=-1,a=t(n)?Array(n.length):[];return e(n,function(l,c,d){a[++i]=o(l,c,d)}),a}return Jc=r,Jc}var Xc,X0;function z6(){if(X0)return Xc;X0=1;var e=ny(),t=I6(),r=F6(),n=ur();function o(i,a){var l=n(i)?e:r;return l(i,t(a,3))}return Xc=o,Xc}var Z0;function $6(){if(Z0)return Ln;Z0=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.flattenNames=void 0;var e=wS(),t=c(e),r=jh(),n=c(r),o=OS(),i=c(o),a=z6(),l=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d=Ln.flattenNames=function u(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=[];return(0,l.default)(p,function(b){Array.isArray(b)?u(b).map(function(g){return f.push(g)}):(0,i.default)(b)?(0,n.default)(b,function(g,m){g===!0&&f.push(m),f.push(m+"-"+g)}):(0,t.default)(b)&&f.push(b)}),f};return Ln.default=d,Ln}var Fn={},Zc,em;function B6(){if(em)return Zc;em=1;function e(t,r){for(var n=-1,o=t==null?0:t.length;++n<o&&r(t[n],n,t)!==!1;);return t}return Zc=e,Zc}var ed,tm;function q6(){if(tm)return ed;tm=1;var e=Sn(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return ed=t,ed}var td,rm;function my(){if(rm)return td;rm=1;var e=q6();function t(r,n,o){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[n]=o}return td=t,td}var rd,nm;function xy(){if(nm)return rd;nm=1;var e=my(),t=Eh(),r=Object.prototype,n=r.hasOwnProperty;function o(i,a,l){var c=i[a];(!(n.call(i,a)&&t(c,l))||l===void 0&&!(a in i))&&e(i,a,l)}return rd=o,rd}var nd,om;function la(){if(om)return nd;om=1;var e=xy(),t=my();function r(n,o,i,a){var l=!i;i||(i={});for(var c=-1,d=o.length;++c<d;){var u=o[c],p=a?a(i[u],n[u],u,i,n):void 0;p===void 0&&(p=n[u]),l?t(i,u,p):e(i,u,p)}return i}return nd=r,nd}var od,sm;function H6(){if(sm)return od;sm=1;var e=la(),t=Os();function r(n,o){return n&&e(o,t(o),n)}return od=r,od}var sd,im;function G6(){if(im)return sd;im=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return sd=e,sd}var id,am;function U6(){if(am)return id;am=1;var e=tn(),t=Sh(),r=G6(),n=Object.prototype,o=n.hasOwnProperty;function i(a){if(!e(a))return r(a);var l=t(a),c=[];for(var d in a)d=="constructor"&&(l||!o.call(a,d))||c.push(d);return c}return id=i,id}var ad,lm;function Ph(){if(lm)return ad;lm=1;var e=Xb(),t=U6(),r=ea();function n(o){return r(o)?e(o,!0):t(o)}return ad=n,ad}var ld,cm;function W6(){if(cm)return ld;cm=1;var e=la(),t=Ph();function r(n,o){return n&&e(o,t(o),n)}return ld=r,ld}var ns={exports:{}};ns.exports;var dm;function Y6(){return dm||(dm=1,function(e,t){var r=dr(),n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i?r.Buffer:void 0,l=a?a.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var p=d.length,f=l?l(p):new d.constructor(p);return d.copy(f),f}e.exports=c}(ns,ns.exports)),ns.exports}var cd,um;function V6(){if(um)return cd;um=1;function e(t,r){var n=-1,o=t.length;for(r||(r=Array(o));++n<o;)r[n]=t[n];return r}return cd=e,cd}var dd,hm;function K6(){if(hm)return dd;hm=1;var e=la(),t=Rh();function r(n,o){return e(n,t(n),o)}return dd=r,dd}var ud,pm;function by(){if(pm)return ud;pm=1;var e=ay(),t=kh(),r=Rh(),n=cy(),o=Object.getOwnPropertySymbols,i=o?function(a){for(var l=[];a;)e(l,r(a)),a=t(a);return l}:n;return ud=i,ud}var hd,fm;function Q6(){if(fm)return hd;fm=1;var e=la(),t=by();function r(n,o){return e(n,t(n),o)}return hd=r,hd}var pd,gm;function J6(){if(gm)return pd;gm=1;var e=ly(),t=by(),r=Ph();function n(o){return e(o,r,t)}return pd=n,pd}var fd,mm;function X6(){if(mm)return fd;mm=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var o=n.length,i=new n.constructor(o);return o&&typeof n[0]=="string"&&t.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return fd=r,fd}var gd,xm;function Mh(){if(xm)return gd;xm=1;var e=iy();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return gd=t,gd}var md,bm;function Z6(){if(bm)return md;bm=1;var e=Mh();function t(r,n){var o=n?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}return md=t,md}var xd,ym;function ej(){if(ym)return xd;ym=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return xd=t,xd}var bd,vm;function tj(){if(vm)return bd;vm=1;var e=Rs(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(o){return r?Object(r.call(o)):{}}return bd=n,bd}var yd,wm;function rj(){if(wm)return yd;wm=1;var e=Mh();function t(r,n){var o=n?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}return yd=t,yd}var vd,Cm;function nj(){if(Cm)return vd;Cm=1;var e=Mh(),t=Z6(),r=ej(),n=tj(),o=rj(),i="[object Boolean]",a="[object Date]",l="[object Map]",c="[object Number]",d="[object RegExp]",u="[object Set]",p="[object String]",f="[object Symbol]",b="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",x="[object Float64Array]",y="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",M="[object Uint8Array]",k="[object Uint8ClampedArray]",w="[object Uint16Array]",C="[object Uint32Array]";function _(z,D,S){var P=z.constructor;switch(D){case b:return e(z);case i:case a:return new P(+z);case g:return t(z,S);case m:case x:case y:case E:case A:case M:case k:case w:case C:return o(z,S);case l:return new P;case c:case p:return new P(z);case d:return r(z);case u:return new P;case f:return n(z)}}return vd=_,vd}var wd,Sm;function oj(){if(Sm)return wd;Sm=1;var e=tn(),t=Object.create,r=function(){function n(){}return function(o){if(!e(o))return{};if(t)return t(o);n.prototype=o;var i=new n;return n.prototype=void 0,i}}();return wd=r,wd}var Cd,jm;function sj(){if(jm)return Cd;jm=1;var e=oj(),t=kh(),r=Sh();function n(o){return typeof o.constructor=="function"&&!r(o)?e(t(o)):{}}return Cd=n,Cd}var Sd,km;function ij(){if(km)return Sd;km=1;var e=sa(),t=Dr(),r="[object Map]";function n(o){return t(o)&&e(o)==r}return Sd=n,Sd}var jd,Em;function aj(){if(Em)return jd;Em=1;var e=ij(),t=wh(),r=Ch(),n=r&&r.isMap,o=n?t(n):e;return jd=o,jd}var kd,_m;function lj(){if(_m)return kd;_m=1;var e=sa(),t=Dr(),r="[object Set]";function n(o){return t(o)&&e(o)==r}return kd=n,kd}var Ed,Tm;function cj(){if(Tm)return Ed;Tm=1;var e=lj(),t=wh(),r=Ch(),n=r&&r.isSet,o=n?t(n):e;return Ed=o,Ed}var _d,Am;function dj(){if(Am)return _d;Am=1;var e=Ah(),t=B6(),r=xy(),n=H6(),o=W6(),i=Y6(),a=V6(),l=K6(),c=Q6(),d=dy(),u=J6(),p=sa(),f=X6(),b=nj(),g=sj(),m=ur(),x=yh(),y=aj(),E=tn(),A=cj(),M=Os(),k=Ph(),w=1,C=2,_=4,z="[object Arguments]",D="[object Array]",S="[object Boolean]",P="[object Date]",I="[object Error]",F="[object Function]",G="[object GeneratorFunction]",V="[object Map]",B="[object Number]",Z="[object Object]",Q="[object RegExp]",ue="[object Set]",ie="[object String]",X="[object Symbol]",J="[object WeakMap]",Ce="[object ArrayBuffer]",Se="[object DataView]",ze="[object Float32Array]",nt="[object Float64Array]",ot="[object Int8Array]",Pe="[object Int16Array]",Fe="[object Int32Array]",Re="[object Uint8Array]",xe="[object Uint8ClampedArray]",tt="[object Uint16Array]",Ie="[object Uint32Array]",_e={};_e[z]=_e[D]=_e[Ce]=_e[Se]=_e[S]=_e[P]=_e[ze]=_e[nt]=_e[ot]=_e[Pe]=_e[Fe]=_e[V]=_e[B]=_e[Z]=_e[Q]=_e[ue]=_e[ie]=_e[X]=_e[Re]=_e[xe]=_e[tt]=_e[Ie]=!0,_e[I]=_e[F]=_e[J]=!1;function rt(ce,Be,Qe,bt,Je,Ue){var We,_t=Be&w,dt=Be&C,Xt=Be&_;if(Qe&&(We=Je?Qe(ce,bt,Je,Ue):Qe(ce)),We!==void 0)return We;if(!E(ce))return ce;var st=m(ce);if(st){if(We=f(ce),!_t)return a(ce,We)}else{var it=p(ce),yt=it==F||it==G;if(x(ce))return i(ce,_t);if(it==Z||it==z||yt&&!Je){if(We=dt||yt?{}:g(ce),!_t)return dt?c(ce,o(We,ce)):l(ce,n(We,ce))}else{if(!_e[it])return Je?ce:{};We=b(ce,it,_t)}}Ue||(Ue=new e);var T=Ue.get(ce);if(T)return T;Ue.set(ce,We),A(ce)?ce.forEach(function(q){We.add(rt(q,Be,Qe,q,ce,Ue))}):y(ce)&&ce.forEach(function(q,re){We.set(re,rt(q,Be,Qe,re,ce,Ue))});var W=Xt?dt?u:d:dt?k:M,R=st?void 0:W(ce);return t(R||ce,function(q,re){R&&(re=q,q=ce[re]),r(We,re,rt(q,Be,Qe,re,ce,Ue))}),We}return _d=rt,_d}var Td,Rm;function uj(){if(Rm)return Td;Rm=1;var e=dj(),t=1,r=4;function n(o){return e(o,t|r)}return Td=n,Td}var Om;function hj(){if(Om)return Fn;Om=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.mergeClasses=void 0;var e=jh(),t=i(e),r=uj(),n=i(r),o=Object.assign||function(l){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(l[u]=d[u])}return l};function i(l){return l&&l.__esModule?l:{default:l}}var a=Fn.mergeClasses=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=c.default&&(0,n.default)(c.default)||{};return d.map(function(p){var f=c[p];return f&&(0,t.default)(f,function(b,g){u[g]||(u[g]={}),u[g]=o({},u[g],f[g])}),p}),u};return Fn.default=a,Fn}var zn={},Pm;function pj(){if(Pm)return zn;Pm=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.autoprefix=void 0;var e=jh(),t=n(e),r=Object.assign||function(a){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};function n(a){return a&&a.__esModule?a:{default:a}}var o={borderRadius:function(l){return{msBorderRadius:l,MozBorderRadius:l,OBorderRadius:l,WebkitBorderRadius:l,borderRadius:l}},boxShadow:function(l){return{msBoxShadow:l,MozBoxShadow:l,OBoxShadow:l,WebkitBoxShadow:l,boxShadow:l}},userSelect:function(l){return{WebkitTouchCallout:l,KhtmlUserSelect:l,MozUserSelect:l,msUserSelect:l,WebkitUserSelect:l,userSelect:l}},flex:function(l){return{WebkitBoxFlex:l,MozBoxFlex:l,WebkitFlex:l,msFlex:l,flex:l}},flexBasis:function(l){return{WebkitFlexBasis:l,flexBasis:l}},justifyContent:function(l){return{WebkitJustifyContent:l,justifyContent:l}},transition:function(l){return{msTransition:l,MozTransition:l,OTransition:l,WebkitTransition:l,transition:l}},transform:function(l){return{msTransform:l,MozTransform:l,OTransform:l,WebkitTransform:l,transform:l}},absolute:function(l){var c=l&&l.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(l,c){var d=c[l];return d||{extend:l}}},i=zn.autoprefix=function(l){var c={};return(0,t.default)(l,function(d,u){var p={};(0,t.default)(d,function(f,b){var g=o[b];g?p=r({},p,g(f)):p[b]=f}),c[u]=p}),c};return zn.default=i,zn}var $n={},Mm;function fj(){if(Mm)return $n;Mm=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.hover=void 0;var e=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])}return c},t=$i(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function i(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var l=$n.hover=function(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(p){a(f,p);function f(){var b,g,m,x;o(this,f);for(var y=arguments.length,E=Array(y),A=0;A<y;A++)E[A]=arguments[A];return x=(g=(m=i(this,(b=f.__proto__||Object.getPrototypeOf(f)).call.apply(b,[this].concat(E))),m),m.state={hover:!1},m.handleMouseOver=function(){return m.setState({hover:!0})},m.handleMouseOut=function(){return m.setState({hover:!1})},m.render=function(){return r.default.createElement(u,{onMouseOver:m.handleMouseOver,onMouseOut:m.handleMouseOut},r.default.createElement(d,e({},m.props,m.state)))},g),i(m,x)}return f}(r.default.Component)};return $n.default=l,$n}var Bn={},Dm;function gj(){if(Dm)return Bn;Dm=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.active=void 0;var e=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])}return c},t=$i(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function i(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var l=Bn.active=function(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(p){a(f,p);function f(){var b,g,m,x;o(this,f);for(var y=arguments.length,E=Array(y),A=0;A<y;A++)E[A]=arguments[A];return x=(g=(m=i(this,(b=f.__proto__||Object.getPrototypeOf(f)).call.apply(b,[this].concat(E))),m),m.state={active:!1},m.handleMouseDown=function(){return m.setState({active:!0})},m.handleMouseUp=function(){return m.setState({active:!1})},m.render=function(){return r.default.createElement(u,{onMouseDown:m.handleMouseDown,onMouseUp:m.handleMouseUp},r.default.createElement(d,e({},m.props,m.state)))},g),i(m,x)}return f}(r.default.Component)};return Bn.default=l,Bn}var Vs={},Im;function mj(){if(Im)return Vs;Im=1,Object.defineProperty(Vs,"__esModule",{value:!0});var e=function(r,n){var o={},i=function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;o[l]=c};return r===0&&i("first-child"),r===n-1&&i("last-child"),(r===0||r%2===0)&&i("even"),Math.abs(r%2)===1&&i("odd"),i("nth-child",r),o};return Vs.default=e,Vs}var Nm;function xj(){if(Nm)return Ot;Nm=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.ReactCSS=Ot.loop=Ot.handleActive=Ot.handleHover=Ot.hover=void 0;var e=$6(),t=f(e),r=hj(),n=f(r),o=pj(),i=f(o),a=fj(),l=f(a),c=gj(),d=f(c),u=mj(),p=f(u);function f(g){return g&&g.__esModule?g:{default:g}}Ot.hover=l.default,Ot.handleHover=l.default,Ot.handleActive=d.default,Ot.loop=p.default;var b=Ot.ReactCSS=function(m){for(var x=arguments.length,y=Array(x>1?x-1:0),E=1;E<x;E++)y[E-1]=arguments[E];var A=(0,t.default)(y),M=(0,n.default)(m,A);return(0,i.default)(M)};return Ot.default=b,Ot}var Dh=xj();const be=Eo(Dh);var bj=function(t,r,n,o,i){var a=i.clientWidth,l=i.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,u=c-(i.getBoundingClientRect().left+window.pageXOffset),p=d-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var f=void 0;if(p<0?f=0:p>l?f=1:f=Math.round(p*100/l)/100,r.a!==f)return{h:r.h,s:r.s,l:r.l,a:f,source:"rgb"}}else{var b=void 0;if(u<0?b=0:u>a?b=1:b=Math.round(u*100/a)/100,o!==b)return{h:r.h,s:r.s,l:r.l,a:b,source:"rgb"}}return null},Ad={},yj=function(t,r,n,o){if(typeof document>"u"&&!o)return null;var i=o?new o:document.createElement("canvas");i.width=n*2,i.height=n*2;var a=i.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,i.width,i.height),a.fillStyle=r,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null},vj=function(t,r,n,o){var i=t+"-"+r+"-"+n+(o?"-server":"");if(Ad[i])return Ad[i];var a=yj(t,r,n,o);return Ad[i]=a,a},Lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo=function(t){var r=t.white,n=t.grey,o=t.size,i=t.renderers,a=t.borderRadius,l=t.boxShadow,c=t.children,d=be({default:{grid:{borderRadius:a,boxShadow:l,absolute:"0px 0px 0px 0px",background:"url("+vj(r,n,o,i.canvas)+") center left"}}});return h.isValidElement(c)?v.cloneElement(c,Lm({},c.props,{style:Lm({},c.props.style,d.grid)})):v.createElement("div",{style:d.grid})};Oo.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var wj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cj=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Sj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fm(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jj(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ih=function(e){jj(t,e);function t(){var r,n,o,i;Sj(this,t);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return i=(n=(o=Fm(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(l))),o),o.handleChange=function(d){var u=bj(d,o.props.hsl,o.props.direction,o.props.a,o.container);u&&typeof o.props.onChange=="function"&&o.props.onChange(u,d)},o.handleMouseDown=function(d){o.handleChange(d),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},o.unbindEventListeners=function(){window.removeEventListener("mousemove",o.handleChange),window.removeEventListener("mouseup",o.handleMouseUp)},n),Fm(o,i)}return Cj(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,o=this.props.rgb,i=be({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+o.r+","+o.g+","+o.b+`, 0) 0%,
           rgba(`+o.r+","+o.g+","+o.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:o.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+o.r+","+o.g+","+o.b+`, 0) 0%,
           rgba(`+o.r+","+o.g+","+o.b+", 1) 100%)"},pointer:{left:0,top:o.a*100+"%"}},overwrite:wj({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return v.createElement("div",{style:i.alpha},v.createElement("div",{style:i.checkboard},v.createElement(Oo,{renderers:this.props.renderers})),v.createElement("div",{style:i.gradient}),v.createElement("div",{style:i.container,ref:function(l){return n.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},v.createElement("div",{style:i.pointer},this.props.pointer?v.createElement(this.props.pointer,this.props):v.createElement("div",{style:i.slider}))))}}]),t}(h.PureComponent||h.Component),kj=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Ej(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tj(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Aj(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Rj=1,yy=38,Oj=40,Pj=[yy,Oj],Mj=function(t){return Pj.indexOf(t)>-1},Dj=function(t){return Number(String(t).replace(/%/g,""))},Ij=1,Ae=function(e){Aj(t,e);function t(r){_j(this,t);var n=Tj(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(o){n.setUpdatedValue(o.target.value,o)},n.handleKeyDown=function(o){var i=Dj(o.target.value);if(!isNaN(i)&&Mj(o.keyCode)){var a=n.getArrowOffset(),l=o.keyCode===yy?i+a:i-a;n.setUpdatedValue(l,o)}},n.handleDrag=function(o){if(n.props.dragLabel){var i=Math.round(n.props.value+o.movementX);i>=0&&i<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(i),o)}},n.handleMouseDown=function(o){n.props.dragLabel&&(o.preventDefault(),n.handleDrag(o),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+Ij++,n}return kj(t,[{key:"componentDidUpdate",value:function(n,o){this.props.value!==this.state.value&&(n.value!==this.props.value||o.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return Ej({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Rj}},{key:"setUpdatedValue",value:function(n,o){var i=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(i,o),this.setState({value:n})}},{key:"render",value:function(){var n=this,o=be({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return v.createElement("div",{style:o.wrap},v.createElement("input",{id:this.inputId,style:o.input,ref:function(a){return n.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?v.createElement("label",{htmlFor:this.inputId,style:o.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(h.PureComponent||h.Component),Nj=function(t,r,n,o){var i=o.clientWidth,a=o.clientHeight,l=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=l-(o.getBoundingClientRect().left+window.pageXOffset),u=c-(o.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var p=void 0;if(u<0)p=359;else if(u>a)p=0;else{var f=-(u*100/a)+100;p=360*f/100}if(n.h!==p)return{h:p,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var b=void 0;if(d<0)b=0;else if(d>i)b=359;else{var g=d*100/i;b=360*g/100}if(n.h!==b)return{h:b,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},Lj=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Fj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zm(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zj(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Po=function(e){zj(t,e);function t(){var r,n,o,i;Fj(this,t);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return i=(n=(o=zm(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(l))),o),o.handleChange=function(d){var u=Nj(d,o.props.direction,o.props.hsl,o.container);u&&typeof o.props.onChange=="function"&&o.props.onChange(u,d)},o.handleMouseDown=function(d){o.handleChange(d),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},n),zm(o,i)}return Lj(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,o=this.props.direction,i=o===void 0?"horizontal":o,a=be({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:i==="vertical"});return v.createElement("div",{style:a.hue},v.createElement("div",{className:"hue-"+i,style:a.container,ref:function(c){return n.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},v.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),v.createElement("div",{style:a.pointer},this.props.pointer?v.createElement(this.props.pointer,this.props):v.createElement("div",{style:a.slider}))))}}]),t}(h.PureComponent||h.Component),Rd={exports:{}},Od,$m;function $j(){if($m)return Od;$m=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Od=e,Od}var Pd,Bm;function Bj(){if(Bm)return Pd;Bm=1;var e=$j();function t(){}function r(){}return r.resetWarningCache=t,Pd=function(){function n(a,l,c,d,u,p){if(p!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function o(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Pd}var qm;function qj(){return qm||(qm=1,Rd.exports=Bj()()),Rd.exports}var Hj=qj();const ee=Eo(Hj);function Gj(){this.__data__=[],this.size=0}function Ps(e,t){return e===t||e!==e&&t!==t}function ca(e,t){for(var r=e.length;r--;)if(Ps(e[r][0],t))return r;return-1}var Uj=Array.prototype,Wj=Uj.splice;function Yj(e){var t=this.__data__,r=ca(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Wj.call(t,r,1),--this.size,!0}function Vj(e){var t=this.__data__,r=ca(t,e);return r<0?void 0:t[r][1]}function Kj(e){return ca(this.__data__,e)>-1}function Qj(e,t){var r=this.__data__,n=ca(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ir(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ir.prototype.clear=Gj;Ir.prototype.delete=Yj;Ir.prototype.get=Vj;Ir.prototype.has=Kj;Ir.prototype.set=Qj;function Jj(){this.__data__=new Ir,this.size=0}function Xj(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Zj(e){return this.__data__.get(e)}function e8(e){return this.__data__.has(e)}var vy=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,t8=typeof self=="object"&&self&&self.Object===Object&&self,hr=vy||t8||Function("return this")(),Jr=hr.Symbol,wy=Object.prototype,r8=wy.hasOwnProperty,n8=wy.toString,qo=Jr?Jr.toStringTag:void 0;function o8(e){var t=r8.call(e,qo),r=e[qo];try{e[qo]=void 0;var n=!0}catch{}var o=n8.call(e);return n&&(t?e[qo]=r:delete e[qo]),o}var s8=Object.prototype,i8=s8.toString;function a8(e){return i8.call(e)}var l8="[object Null]",c8="[object Undefined]",Hm=Jr?Jr.toStringTag:void 0;function jn(e){return e==null?e===void 0?c8:l8:Hm&&Hm in Object(e)?o8(e):a8(e)}function Kt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var d8="[object AsyncFunction]",u8="[object Function]",h8="[object GeneratorFunction]",p8="[object Proxy]";function Nh(e){if(!Kt(e))return!1;var t=jn(e);return t==u8||t==h8||t==d8||t==p8}var Md=hr["__core-js_shared__"],Gm=function(){var e=/[^.]+$/.exec(Md&&Md.keys&&Md.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function f8(e){return!!Gm&&Gm in e}var g8=Function.prototype,m8=g8.toString;function kn(e){if(e!=null){try{return m8.call(e)}catch{}try{return e+""}catch{}}return""}var x8=/[\\^$.*+?()[\]{}|]/g,b8=/^\[object .+?Constructor\]$/,y8=Function.prototype,v8=Object.prototype,w8=y8.toString,C8=v8.hasOwnProperty,S8=RegExp("^"+w8.call(C8).replace(x8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function j8(e){if(!Kt(e)||f8(e))return!1;var t=Nh(e)?S8:b8;return t.test(kn(e))}function k8(e,t){return e?.[t]}function En(e,t){var r=k8(e,t);return j8(r)?r:void 0}var ws=En(hr,"Map"),Cs=En(Object,"create");function E8(){this.__data__=Cs?Cs(null):{},this.size=0}function _8(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var T8="__lodash_hash_undefined__",A8=Object.prototype,R8=A8.hasOwnProperty;function O8(e){var t=this.__data__;if(Cs){var r=t[e];return r===T8?void 0:r}return R8.call(t,e)?t[e]:void 0}var P8=Object.prototype,M8=P8.hasOwnProperty;function D8(e){var t=this.__data__;return Cs?t[e]!==void 0:M8.call(t,e)}var I8="__lodash_hash_undefined__";function N8(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Cs&&t===void 0?I8:t,this}function vn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vn.prototype.clear=E8;vn.prototype.delete=_8;vn.prototype.get=O8;vn.prototype.has=D8;vn.prototype.set=N8;function L8(){this.size=0,this.__data__={hash:new vn,map:new(ws||Ir),string:new vn}}function F8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function da(e,t){var r=e.__data__;return F8(t)?r[typeof t=="string"?"string":"hash"]:r.map}function z8(e){var t=da(this,e).delete(e);return this.size-=t?1:0,t}function $8(e){return da(this,e).get(e)}function B8(e){return da(this,e).has(e)}function q8(e,t){var r=da(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Nr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nr.prototype.clear=L8;Nr.prototype.delete=z8;Nr.prototype.get=$8;Nr.prototype.has=B8;Nr.prototype.set=q8;var H8=200;function G8(e,t){var r=this.__data__;if(r instanceof Ir){var n=r.__data__;if(!ws||n.length<H8-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Nr(n)}return r.set(e,t),this.size=r.size,this}function br(e){var t=this.__data__=new Ir(e);this.size=t.size}br.prototype.clear=Jj;br.prototype.delete=Xj;br.prototype.get=Zj;br.prototype.has=e8;br.prototype.set=G8;var Ri=function(){try{var e=En(Object,"defineProperty");return e({},"",{}),e}catch{}}();function Lh(e,t,r){t=="__proto__"&&Ri?Ri(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Lu(e,t,r){(r!==void 0&&!Ps(e[t],r)||r===void 0&&!(t in e))&&Lh(e,t,r)}function U8(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),l=a.length;l--;){var c=a[++o];if(r(i[c],c,i)===!1)break}return t}}var Cy=U8(),Sy=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,Um=Sy&&typeof qt=="object"&&qt&&!qt.nodeType&&qt,W8=Um&&Um.exports===Sy,Wm=W8?hr.Buffer:void 0;Wm&&Wm.allocUnsafe;function Y8(e,t){return e.slice()}var Oi=hr.Uint8Array;function V8(e){var t=new e.constructor(e.byteLength);return new Oi(t).set(new Oi(e)),t}function K8(e,t){var r=V8(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function Q8(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Ym=Object.create,J8=function(){function e(){}return function(t){if(!Kt(t))return{};if(Ym)return Ym(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function jy(e,t){return function(r){return e(t(r))}}var ky=jy(Object.getPrototypeOf,Object),X8=Object.prototype;function Fh(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||X8;return e===r}function Z8(e){return typeof e.constructor=="function"&&!Fh(e)?J8(ky(e)):{}}function Xr(e){return e!=null&&typeof e=="object"}var ek="[object Arguments]";function Vm(e){return Xr(e)&&jn(e)==ek}var Ey=Object.prototype,tk=Ey.hasOwnProperty,rk=Ey.propertyIsEnumerable,Pi=Vm(function(){return arguments}())?Vm:function(e){return Xr(e)&&tk.call(e,"callee")&&!rk.call(e,"callee")},Ht=Array.isArray,nk=9007199254740991;function zh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nk}function Mo(e){return e!=null&&zh(e.length)&&!Nh(e)}function ok(e){return Xr(e)&&Mo(e)}function sk(){return!1}var _y=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,Km=_y&&typeof qt=="object"&&qt&&!qt.nodeType&&qt,ik=Km&&Km.exports===_y,Qm=ik?hr.Buffer:void 0,ak=Qm?Qm.isBuffer:void 0,Mi=ak||sk,lk="[object Object]",ck=Function.prototype,dk=Object.prototype,Ty=ck.toString,uk=dk.hasOwnProperty,hk=Ty.call(Object);function pk(e){if(!Xr(e)||jn(e)!=lk)return!1;var t=ky(e);if(t===null)return!0;var r=uk.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ty.call(r)==hk}var fk="[object Arguments]",gk="[object Array]",mk="[object Boolean]",xk="[object Date]",bk="[object Error]",yk="[object Function]",vk="[object Map]",wk="[object Number]",Ck="[object Object]",Sk="[object RegExp]",jk="[object Set]",kk="[object String]",Ek="[object WeakMap]",_k="[object ArrayBuffer]",Tk="[object DataView]",Ak="[object Float32Array]",Rk="[object Float64Array]",Ok="[object Int8Array]",Pk="[object Int16Array]",Mk="[object Int32Array]",Dk="[object Uint8Array]",Ik="[object Uint8ClampedArray]",Nk="[object Uint16Array]",Lk="[object Uint32Array]",Ge={};Ge[Ak]=Ge[Rk]=Ge[Ok]=Ge[Pk]=Ge[Mk]=Ge[Dk]=Ge[Ik]=Ge[Nk]=Ge[Lk]=!0;Ge[fk]=Ge[gk]=Ge[_k]=Ge[mk]=Ge[Tk]=Ge[xk]=Ge[bk]=Ge[yk]=Ge[vk]=Ge[wk]=Ge[Ck]=Ge[Sk]=Ge[jk]=Ge[kk]=Ge[Ek]=!1;function Fk(e){return Xr(e)&&zh(e.length)&&!!Ge[jn(e)]}function zk(e){return function(t){return e(t)}}var Ay=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,us=Ay&&typeof qt=="object"&&qt&&!qt.nodeType&&qt,$k=us&&us.exports===Ay,Dd=$k&&vy.process,Jm=function(){try{var e=us&&us.require&&us.require("util").types;return e||Dd&&Dd.binding&&Dd.binding("util")}catch{}}(),Xm=Jm&&Jm.isTypedArray,$h=Xm?zk(Xm):Fk;function Fu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Bk=Object.prototype,qk=Bk.hasOwnProperty;function Hk(e,t,r){var n=e[t];(!(qk.call(e,t)&&Ps(n,r))||r===void 0&&!(t in e))&&Lh(e,t,r)}function Gk(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var l=t[i],c=void 0;c===void 0&&(c=e[l]),o?Lh(r,l,c):Hk(r,l,c)}return r}function Uk(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Wk=9007199254740991,Yk=/^(?:0|[1-9]\d*)$/;function Bh(e,t){var r=typeof e;return t=t??Wk,!!t&&(r=="number"||r!="symbol"&&Yk.test(e))&&e>-1&&e%1==0&&e<t}var Vk=Object.prototype,Kk=Vk.hasOwnProperty;function Ry(e,t){var r=Ht(e),n=!r&&Pi(e),o=!r&&!n&&Mi(e),i=!r&&!n&&!o&&$h(e),a=r||n||o||i,l=a?Uk(e.length,String):[],c=l.length;for(var d in e)(t||Kk.call(e,d))&&!(a&&(d=="length"||o&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Bh(d,c)))&&l.push(d);return l}function Qk(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Jk=Object.prototype,Xk=Jk.hasOwnProperty;function Zk(e){if(!Kt(e))return Qk(e);var t=Fh(e),r=[];for(var n in e)n=="constructor"&&(t||!Xk.call(e,n))||r.push(n);return r}function Oy(e){return Mo(e)?Ry(e,!0):Zk(e)}function eE(e){return Gk(e,Oy(e))}function tE(e,t,r,n,o,i,a){var l=Fu(e,r),c=Fu(t,r),d=a.get(c);if(d){Lu(e,r,d);return}var u=i?i(l,c,r+"",e,t,a):void 0,p=u===void 0;if(p){var f=Ht(c),b=!f&&Mi(c),g=!f&&!b&&$h(c);u=c,f||b||g?Ht(l)?u=l:ok(l)?u=Q8(l):b?(p=!1,u=Y8(c)):g?(p=!1,u=K8(c)):u=[]:pk(c)||Pi(c)?(u=l,Pi(l)?u=eE(l):(!Kt(l)||Nh(l))&&(u=Z8(c))):p=!1}p&&(a.set(c,u),o(u,c,n,i,a),a.delete(c)),Lu(e,r,u)}function Py(e,t,r,n,o){e!==t&&Cy(t,function(i,a){if(o||(o=new br),Kt(i))tE(e,t,a,r,Py,n,o);else{var l=n?n(Fu(e,a),i,a+"",e,t,o):void 0;l===void 0&&(l=i),Lu(e,a,l)}},Oy)}function ua(e){return e}function rE(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Zm=Math.max;function nE(e,t,r){return t=Zm(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Zm(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=n[o];return l[t]=r(a),rE(e,this,l)}}function oE(e){return function(){return e}}var sE=Ri?function(e,t){return Ri(e,"toString",{configurable:!0,enumerable:!1,value:oE(t),writable:!0})}:ua,iE=800,aE=16,lE=Date.now;function cE(e){var t=0,r=0;return function(){var n=lE(),o=aE-(n-r);if(r=n,o>0){if(++t>=iE)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var dE=cE(sE);function uE(e,t){return dE(nE(e,t,ua),e+"")}function hE(e,t,r){if(!Kt(r))return!1;var n=typeof t;return(n=="number"?Mo(r)&&Bh(t,r.length):n=="string"&&t in r)?Ps(r[t],e):!1}function pE(e){return uE(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&hE(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var l=r[n];l&&e(t,l,n,i)}return t})}var Dt=pE(function(e,t,r){Py(e,t,r)}),Ms=function(t){var r=t.zDepth,n=t.radius,o=t.background,i=t.children,a=t.styles,l=a===void 0?{}:a,c=be(Dt({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},l),{"zDepth-1":r===1});return v.createElement("div",{style:c.wrap},v.createElement("div",{style:c.bg}),v.createElement("div",{style:c.content},i))};Ms.propTypes={background:ee.string,zDepth:ee.oneOf([0,1,2,3,4,5]),radius:ee.number,styles:ee.object};Ms.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Id=function(){return hr.Date.now()},fE=/\s/;function gE(e){for(var t=e.length;t--&&fE.test(e.charAt(t)););return t}var mE=/^\s+/;function xE(e){return e&&e.slice(0,gE(e)+1).replace(mE,"")}var bE="[object Symbol]";function ha(e){return typeof e=="symbol"||Xr(e)&&jn(e)==bE}var e1=NaN,yE=/^[-+]0x[0-9a-f]+$/i,vE=/^0b[01]+$/i,wE=/^0o[0-7]+$/i,CE=parseInt;function t1(e){if(typeof e=="number")return e;if(ha(e))return e1;if(Kt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Kt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=xE(e);var r=vE.test(e);return r||wE.test(e)?CE(e.slice(2),r?2:8):yE.test(e)?e1:+e}var SE="Expected a function",jE=Math.max,kE=Math.min;function My(e,t,r){var n,o,i,a,l,c,d=0,u=!1,p=!1,f=!0;if(typeof e!="function")throw new TypeError(SE);t=t1(t)||0,Kt(r)&&(u=!!r.leading,p="maxWait"in r,i=p?jE(t1(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f);function b(w){var C=n,_=o;return n=o=void 0,d=w,a=e.apply(_,C),a}function g(w){return d=w,l=setTimeout(y,t),u?b(w):a}function m(w){var C=w-c,_=w-d,z=t-C;return p?kE(z,i-_):z}function x(w){var C=w-c,_=w-d;return c===void 0||C>=t||C<0||p&&_>=i}function y(){var w=Id();if(x(w))return E(w);l=setTimeout(y,m(w))}function E(w){return l=void 0,f&&n?b(w):(n=o=void 0,a)}function A(){l!==void 0&&clearTimeout(l),d=0,n=c=o=l=void 0}function M(){return l===void 0?a:E(Id())}function k(){var w=Id(),C=x(w);if(n=arguments,o=this,c=w,C){if(l===void 0)return g(c);if(p)return clearTimeout(l),l=setTimeout(y,t),b(c)}return l===void 0&&(l=setTimeout(y,t)),a}return k.cancel=A,k.flush=M,k}var EE="Expected a function";function _E(e,t,r){var n=!0,o=!0;if(typeof e!="function")throw new TypeError(EE);return Kt(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),My(e,t,{leading:n,maxWait:t,trailing:o})}var TE=function(t,r,n){var o=n.getBoundingClientRect(),i=o.width,a=o.height,l=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=l-(n.getBoundingClientRect().left+window.pageXOffset),u=c-(n.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>i&&(d=i),u<0?u=0:u>a&&(u=a);var p=d/i,f=1-u/a;return{h:r.h,s:p,v:f,a:r.a,source:"hsv"}},AE=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function RE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function PE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pa=function(e){PE(t,e);function t(r){RE(this,t);var n=OE(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(o){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,TE(o,n.props.hsl,n.container),o)},n.handleMouseDown=function(o){n.handleChange(o);var i=n.getContainerRenderWindow();i.addEventListener("mousemove",n.handleChange),i.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=_E(function(o,i,a){o(i,a)},50),n}return AE(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,o=window;!o.document.contains(n)&&o.parent!==o;)o=o.parent;return o}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,o=this.props.style||{},i=o.color,a=o.white,l=o.black,c=o.pointer,d=o.circle,u=be({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:i,white:a,black:l,pointer:c,circle:d}},{custom:!!this.props.style});return v.createElement("div",{style:u.color,ref:function(f){return n.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},v.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),v.createElement("div",{style:u.white,className:"saturation-white"},v.createElement("div",{style:u.black,className:"saturation-black"}),v.createElement("div",{style:u.pointer},this.props.pointer?v.createElement(this.props.pointer,this.props):v.createElement("div",{style:u.circle}))))}}]),t}(h.PureComponent||h.Component);function ME(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var DE=jy(Object.keys,Object),IE=Object.prototype,NE=IE.hasOwnProperty;function LE(e){if(!Fh(e))return DE(e);var t=[];for(var r in Object(e))NE.call(e,r)&&r!="constructor"&&t.push(r);return t}function qh(e){return Mo(e)?Ry(e):LE(e)}function FE(e,t){return e&&Cy(e,t,qh)}function zE(e,t){return function(r,n){if(r==null)return r;if(!Mo(r))return e(r,n);for(var o=r.length,i=-1,a=Object(r);++i<o&&n(a[i],i,a)!==!1;);return r}}var Dy=zE(FE);function $E(e){return typeof e=="function"?e:ua}function BE(e,t){var r=Ht(e)?ME:Dy;return r(e,$E(t))}function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}var qE=/^\s+/,HE=/\s+$/;function ae(e,t){if(e=e||"",t=t||{},e instanceof ae)return e;if(!(this instanceof ae))return new ae(e,t);var r=GE(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ae.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,o,i,a,l;return r=t.r/255,n=t.g/255,o=t.b/255,r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*i+.7152*a+.0722*l},setAlpha:function(t){return this._a=Iy(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=n1(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=n1(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),o=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+o+"%)":"hsva("+r+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=r1(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=r1(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),o=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+o+"%)":"hsla("+r+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return o1(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return VE(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ke(this._r,255)*100)+"%",g:Math.round(Ke(this._g,255)*100)+"%",b:Math.round(Ke(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ke(this._r,255)*100)+"%, "+Math.round(Ke(this._g,255)*100)+"%, "+Math.round(Ke(this._b,255)*100)+"%)":"rgba("+Math.round(Ke(this._r,255)*100)+"%, "+Math.round(Ke(this._g,255)*100)+"%, "+Math.round(Ke(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:i_[o1(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+s1(this._r,this._g,this._b,this._a),n=r,o=this._gradientType?"GradientType = 1, ":"";if(t){var i=ae(t);n="#"+s1(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0,i=!r&&o&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return i?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return ae(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(XE,arguments)},brighten:function(){return this._applyModification(ZE,arguments)},darken:function(){return this._applyModification(e_,arguments)},desaturate:function(){return this._applyModification(KE,arguments)},saturate:function(){return this._applyModification(QE,arguments)},greyscale:function(){return this._applyModification(JE,arguments)},spin:function(){return this._applyModification(t_,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(o_,arguments)},complement:function(){return this._applyCombination(r_,arguments)},monochromatic:function(){return this._applyCombination(s_,arguments)},splitcomplement:function(){return this._applyCombination(n_,arguments)},triad:function(){return this._applyCombination(i1,[3])},tetrad:function(){return this._applyCombination(i1,[4])}};ae.fromRatio=function(e,t){if(Di(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=os(e[n]));e=r}return ae(e,t)};function GE(e){var t={r:0,g:0,b:0},r=1,n=null,o=null,i=null,a=!1,l=!1;return typeof e=="string"&&(e=d_(e)),Di(e)=="object"&&(Cr(e.r)&&Cr(e.g)&&Cr(e.b)?(t=UE(e.r,e.g,e.b),a=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Cr(e.h)&&Cr(e.s)&&Cr(e.v)?(n=os(e.s),o=os(e.v),t=YE(e.h,n,o),a=!0,l="hsv"):Cr(e.h)&&Cr(e.s)&&Cr(e.l)&&(n=os(e.s),i=os(e.l),t=WE(e.h,n,i),a=!0,l="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Iy(r),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function UE(e,t,r){return{r:Ke(e,255)*255,g:Ke(t,255)*255,b:Ke(r,255)*255}}function r1(e,t,r){e=Ke(e,255),t=Ke(t,255),r=Ke(r,255);var n=Math.max(e,t,r),o=Math.min(e,t,r),i,a,l=(n+o)/2;if(n==o)i=a=0;else{var c=n-o;switch(a=l>.5?c/(2-n-o):c/(n+o),n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:a,l}}function WE(e,t,r){var n,o,i;e=Ke(e,360),t=Ke(t,100),r=Ke(r,100);function a(d,u,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(u-d)*6*p:p<1/2?u:p<2/3?d+(u-d)*(2/3-p)*6:d}if(t===0)n=o=i=r;else{var l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;n=a(c,l,e+1/3),o=a(c,l,e),i=a(c,l,e-1/3)}return{r:n*255,g:o*255,b:i*255}}function n1(e,t,r){e=Ke(e,255),t=Ke(t,255),r=Ke(r,255);var n=Math.max(e,t,r),o=Math.min(e,t,r),i,a,l=n,c=n-o;if(a=n===0?0:c/n,n==o)i=0;else{switch(n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:a,v:l}}function YE(e,t,r){e=Ke(e,360)*6,t=Ke(t,100),r=Ke(r,100);var n=Math.floor(e),o=e-n,i=r*(1-t),a=r*(1-o*t),l=r*(1-(1-o)*t),c=n%6,d=[r,a,i,i,l,r][c],u=[l,r,r,a,i,i][c],p=[i,i,l,r,r,a][c];return{r:d*255,g:u*255,b:p*255}}function o1(e,t,r,n){var o=[ar(Math.round(e).toString(16)),ar(Math.round(t).toString(16)),ar(Math.round(r).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function VE(e,t,r,n,o){var i=[ar(Math.round(e).toString(16)),ar(Math.round(t).toString(16)),ar(Math.round(r).toString(16)),ar(Ny(n))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function s1(e,t,r,n){var o=[ar(Ny(n)),ar(Math.round(e).toString(16)),ar(Math.round(t).toString(16)),ar(Math.round(r).toString(16))];return o.join("")}ae.equals=function(e,t){return!e||!t?!1:ae(e).toRgbString()==ae(t).toRgbString()};ae.random=function(){return ae.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function KE(e,t){t=t===0?0:t||10;var r=ae(e).toHsl();return r.s-=t/100,r.s=fa(r.s),ae(r)}function QE(e,t){t=t===0?0:t||10;var r=ae(e).toHsl();return r.s+=t/100,r.s=fa(r.s),ae(r)}function JE(e){return ae(e).desaturate(100)}function XE(e,t){t=t===0?0:t||10;var r=ae(e).toHsl();return r.l+=t/100,r.l=fa(r.l),ae(r)}function ZE(e,t){t=t===0?0:t||10;var r=ae(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),ae(r)}function e_(e,t){t=t===0?0:t||10;var r=ae(e).toHsl();return r.l-=t/100,r.l=fa(r.l),ae(r)}function t_(e,t){var r=ae(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,ae(r)}function r_(e){var t=ae(e).toHsl();return t.h=(t.h+180)%360,ae(t)}function i1(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ae(e).toHsl(),n=[ae(e)],o=360/t,i=1;i<t;i++)n.push(ae({h:(r.h+i*o)%360,s:r.s,l:r.l}));return n}function n_(e){var t=ae(e).toHsl(),r=t.h;return[ae(e),ae({h:(r+72)%360,s:t.s,l:t.l}),ae({h:(r+216)%360,s:t.s,l:t.l})]}function o_(e,t,r){t=t||6,r=r||30;var n=ae(e).toHsl(),o=360/r,i=[ae(e)];for(n.h=(n.h-(o*t>>1)+720)%360;--t;)n.h=(n.h+o)%360,i.push(ae(n));return i}function s_(e,t){t=t||6;for(var r=ae(e).toHsv(),n=r.h,o=r.s,i=r.v,a=[],l=1/t;t--;)a.push(ae({h:n,s:o,v:i})),i=(i+l)%1;return a}ae.mix=function(e,t,r){r=r===0?0:r||50;var n=ae(e).toRgb(),o=ae(t).toRgb(),i=r/100,a={r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a};return ae(a)};ae.readability=function(e,t){var r=ae(e),n=ae(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};ae.isReadable=function(e,t,r){var n=ae.readability(e,t),o,i;switch(i=!1,o=u_(r),o.level+o.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};ae.mostReadable=function(e,t,r){var n=null,o=0,i,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var d=0;d<t.length;d++)i=ae.readability(e,t[d]),i>o&&(o=i,n=ae(t[d]));return ae.isReadable(e,n,{level:l,size:c})||!a?n:(r.includeFallbackColors=!1,ae.mostReadable(e,["#fff","#000"],r))};var zu=ae.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},i_=ae.hexNames=a_(zu);function a_(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function Iy(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ke(e,t){l_(e)&&(e="100%");var r=c_(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function fa(e){return Math.min(1,Math.max(0,e))}function Lt(e){return parseInt(e,16)}function l_(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function c_(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ar(e){return e.length==1?"0"+e:""+e}function os(e){return e<=1&&(e=e*100+"%"),e}function Ny(e){return Math.round(parseFloat(e)*255).toString(16)}function a1(e){return Lt(e)/255}var nr=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Cr(e){return!!nr.CSS_UNIT.exec(e)}function d_(e){e=e.replace(qE,"").replace(HE,"").toLowerCase();var t=!1;if(zu[e])e=zu[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=nr.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=nr.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=nr.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=nr.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=nr.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=nr.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=nr.hex8.exec(e))?{r:Lt(r[1]),g:Lt(r[2]),b:Lt(r[3]),a:a1(r[4]),format:t?"name":"hex8"}:(r=nr.hex6.exec(e))?{r:Lt(r[1]),g:Lt(r[2]),b:Lt(r[3]),format:t?"name":"hex"}:(r=nr.hex4.exec(e))?{r:Lt(r[1]+""+r[1]),g:Lt(r[2]+""+r[2]),b:Lt(r[3]+""+r[3]),a:a1(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=nr.hex3.exec(e))?{r:Lt(r[1]+""+r[1]),g:Lt(r[2]+""+r[2]),b:Lt(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function u_(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var l1=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,o=0;return BE(r,function(i){if(t[i]&&(n+=1,isNaN(t[i])||(o+=1),i==="s"||i==="l")){var a=/^\d+%$/;a.test(t[i])&&(o+=1)}}),n===o?t:!1},ss=function(t,r){var n=t.hex?ae(t.hex):ae(t),o=n.toHsl(),i=n.toHsv(),a=n.toRgb(),l=n.toHex();o.s===0&&(o.h=r||0,i.h=r||0);var c=l==="000000"&&a.a===0;return{hsl:o,hex:c?"transparent":"#"+l,rgb:a,hsv:i,oldHue:t.h||r||o.h,source:t.source}},rn=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&ae(t).isValid()},Hh=function(t){if(!t)return"#fff";var r=ss(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},Nd=function(t,r){var n=t.replace("°","");return ae(r+" ("+n+")")._ok},Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function p_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f_(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function g_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var It=function(t){var r=function(n){g_(o,n);function o(i){p_(this,o);var a=f_(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return a.handleChange=function(l,c){var d=l1(l);if(d){var u=ss(l,l.h||a.state.oldHue);a.setState(u),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,u,c),a.props.onChange&&a.props.onChange(u,c)}},a.handleSwatchHover=function(l,c){var d=l1(l);if(d){var u=ss(l,l.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(u,c)}},a.state=Ho({},ss(i.color,0)),a.debounce=My(function(l,c,d){l(c,d)},100),a}return h_(o,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),v.createElement(t,Ho({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,l){return Ho({},ss(a.color,l.oldHue))}}]),o}(h.PureComponent||h.Component);return r.propTypes=Ho({},t.propTypes),r.defaultProps=Ho({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},m_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x_=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function b_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function y_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v_=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){y_(o,n);function o(){var i,a,l,c;b_(this,o);for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];return c=(a=(l=c1(this,(i=o.__proto__||Object.getPrototypeOf(o)).call.apply(i,[this].concat(u))),l),l.state={focus:!1},l.handleFocus=function(){return l.setState({focus:!0})},l.handleBlur=function(){return l.setState({focus:!1})},a),c1(l,c)}return x_(o,[{key:"render",value:function(){return v.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},v.createElement(t,m_({},this.props,this.state)))}}]),o}(v.Component)},d1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w_=13,C_=function(t){var r=t.color,n=t.style,o=t.onClick,i=o===void 0?function(){}:o,a=t.onHover,l=t.title,c=l===void 0?r:l,d=t.children,u=t.focus,p=t.focusStyle,f=p===void 0?{}:p,b=r==="transparent",g=be({default:{swatch:d1({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?f:{})}}),m=function(M){return i(r,M)},x=function(M){return M.keyCode===w_&&i(r,M)},y=function(M){return a(r,M)},E={};return a&&(E.onMouseOver=y),v.createElement("div",d1({style:g.swatch,onClick:m,title:c,tabIndex:0,onKeyDown:x},E),d,b&&v.createElement(Oo,{borderRadius:g.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const _n=v_(C_);var S_=function(t){var r=t.direction,n=be({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return v.createElement("div",{style:n.picker})},j_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ly=function(t){var r=t.rgb,n=t.hsl,o=t.width,i=t.height,a=t.onChange,l=t.direction,c=t.style,d=t.renderers,u=t.pointer,p=t.className,f=p===void 0?"":p,b=be({default:{picker:{position:"relative",width:o,height:i},alpha:{radius:"2px",style:c}}});return v.createElement("div",{style:b.picker,className:"alpha-picker "+f},v.createElement(Ih,j_({},b.alpha,{rgb:r,hsl:n,pointer:u,renderers:d,onChange:a,direction:l})))};Ly.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:S_};It(Ly);function Fy(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var k_="__lodash_hash_undefined__";function E_(e){return this.__data__.set(e,k_),this}function __(e){return this.__data__.has(e)}function Ii(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Nr;++t<r;)this.add(e[t])}Ii.prototype.add=Ii.prototype.push=E_;Ii.prototype.has=__;function T_(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function A_(e,t){return e.has(t)}var R_=1,O_=2;function zy(e,t,r,n,o,i){var a=r&R_,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var p=-1,f=!0,b=r&O_?new Ii:void 0;for(i.set(e,t),i.set(t,e);++p<l;){var g=e[p],m=t[p];if(n)var x=a?n(m,g,p,t,e,i):n(g,m,p,e,t,i);if(x!==void 0){if(x)continue;f=!1;break}if(b){if(!T_(t,function(y,E){if(!A_(b,E)&&(g===y||o(g,y,r,n,i)))return b.push(E)})){f=!1;break}}else if(!(g===m||o(g,m,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}function P_(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function M_(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var D_=1,I_=2,N_="[object Boolean]",L_="[object Date]",F_="[object Error]",z_="[object Map]",$_="[object Number]",B_="[object RegExp]",q_="[object Set]",H_="[object String]",G_="[object Symbol]",U_="[object ArrayBuffer]",W_="[object DataView]",u1=Jr?Jr.prototype:void 0,Ld=u1?u1.valueOf:void 0;function Y_(e,t,r,n,o,i,a){switch(r){case W_:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case U_:return!(e.byteLength!=t.byteLength||!i(new Oi(e),new Oi(t)));case N_:case L_:case $_:return Ps(+e,+t);case F_:return e.name==t.name&&e.message==t.message;case B_:case H_:return e==t+"";case z_:var l=P_;case q_:var c=n&D_;if(l||(l=M_),e.size!=t.size&&!c)return!1;var d=a.get(e);if(d)return d==t;n|=I_,a.set(e,t);var u=zy(l(e),l(t),n,o,i,a);return a.delete(e),u;case G_:if(Ld)return Ld.call(e)==Ld.call(t)}return!1}function V_(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function K_(e,t,r){var n=t(e);return Ht(e)?n:V_(n,r(e))}function Q_(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function J_(){return[]}var X_=Object.prototype,Z_=X_.propertyIsEnumerable,h1=Object.getOwnPropertySymbols,e9=h1?function(e){return e==null?[]:(e=Object(e),Q_(h1(e),function(t){return Z_.call(e,t)}))}:J_;function p1(e){return K_(e,qh,e9)}var t9=1,r9=Object.prototype,n9=r9.hasOwnProperty;function o9(e,t,r,n,o,i){var a=r&t9,l=p1(e),c=l.length,d=p1(t),u=d.length;if(c!=u&&!a)return!1;for(var p=c;p--;){var f=l[p];if(!(a?f in t:n9.call(t,f)))return!1}var b=i.get(e),g=i.get(t);if(b&&g)return b==t&&g==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=a;++p<c;){f=l[p];var y=e[f],E=t[f];if(n)var A=a?n(E,y,f,t,e,i):n(y,E,f,e,t,i);if(!(A===void 0?y===E||o(y,E,r,n,i):A)){m=!1;break}x||(x=f=="constructor")}if(m&&!x){var M=e.constructor,k=t.constructor;M!=k&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var $u=En(hr,"DataView"),Bu=En(hr,"Promise"),qu=En(hr,"Set"),Hu=En(hr,"WeakMap"),f1="[object Map]",s9="[object Object]",g1="[object Promise]",m1="[object Set]",x1="[object WeakMap]",b1="[object DataView]",i9=kn($u),a9=kn(ws),l9=kn(Bu),c9=kn(qu),d9=kn(Hu),Gr=jn;($u&&Gr(new $u(new ArrayBuffer(1)))!=b1||ws&&Gr(new ws)!=f1||Bu&&Gr(Bu.resolve())!=g1||qu&&Gr(new qu)!=m1||Hu&&Gr(new Hu)!=x1)&&(Gr=function(e){var t=jn(e),r=t==s9?e.constructor:void 0,n=r?kn(r):"";if(n)switch(n){case i9:return b1;case a9:return f1;case l9:return g1;case c9:return m1;case d9:return x1}return t});var u9=1,y1="[object Arguments]",v1="[object Array]",Ks="[object Object]",h9=Object.prototype,w1=h9.hasOwnProperty;function p9(e,t,r,n,o,i){var a=Ht(e),l=Ht(t),c=a?v1:Gr(e),d=l?v1:Gr(t);c=c==y1?Ks:c,d=d==y1?Ks:d;var u=c==Ks,p=d==Ks,f=c==d;if(f&&Mi(e)){if(!Mi(t))return!1;a=!0,u=!1}if(f&&!u)return i||(i=new br),a||$h(e)?zy(e,t,r,n,o,i):Y_(e,t,c,r,n,o,i);if(!(r&u9)){var b=u&&w1.call(e,"__wrapped__"),g=p&&w1.call(t,"__wrapped__");if(b||g){var m=b?e.value():e,x=g?t.value():t;return i||(i=new br),o(m,x,r,n,i)}}return f?(i||(i=new br),o9(e,t,r,n,o,i)):!1}function Gh(e,t,r,n,o){return e===t?!0:e==null||t==null||!Xr(e)&&!Xr(t)?e!==e&&t!==t:p9(e,t,r,n,Gh,o)}var f9=1,g9=2;function m9(e,t,r,n){var o=r.length,i=o;if(e==null)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var l=a[0],c=e[l],d=a[1];if(a[2]){if(c===void 0&&!(l in e))return!1}else{var u=new br,p;if(!(p===void 0?Gh(d,c,f9|g9,n,u):p))return!1}}return!0}function $y(e){return e===e&&!Kt(e)}function x9(e){for(var t=qh(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,$y(o)]}return t}function By(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function b9(e){var t=x9(e);return t.length==1&&t[0][2]?By(t[0][0],t[0][1]):function(r){return r===e||m9(r,e,t)}}var y9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v9=/^\w*$/;function Uh(e,t){if(Ht(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ha(e)?!0:v9.test(e)||!y9.test(e)||t!=null&&e in Object(t)}var w9="Expected a function";function Wh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(w9);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Wh.Cache||Nr),r}Wh.Cache=Nr;var C9=500;function S9(e){var t=Wh(e,function(n){return r.size===C9&&r.clear(),n}),r=t.cache;return t}var j9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k9=/\\(\\)?/g,E9=S9(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(j9,function(r,n,o,i){t.push(o?i.replace(k9,"$1"):n||r)}),t}),C1=Jr?Jr.prototype:void 0,S1=C1?C1.toString:void 0;function qy(e){if(typeof e=="string")return e;if(Ht(e))return Fy(e,qy)+"";if(ha(e))return S1?S1.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function _9(e){return e==null?"":qy(e)}function Hy(e,t){return Ht(e)?e:Uh(e,t)?[e]:E9(_9(e))}function ga(e){if(typeof e=="string"||ha(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Gy(e,t){t=Hy(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ga(t[r++])];return r&&r==n?e:void 0}function T9(e,t,r){var n=e==null?void 0:Gy(e,t);return n===void 0?r:n}function A9(e,t){return e!=null&&t in Object(e)}function R9(e,t,r){t=Hy(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var a=ga(t[n]);if(!(i=e!=null&&r(e,a)))break;e=e[a]}return i||++n!=o?i:(o=e==null?0:e.length,!!o&&zh(o)&&Bh(a,o)&&(Ht(e)||Pi(e)))}function O9(e,t){return e!=null&&R9(e,t,A9)}var P9=1,M9=2;function D9(e,t){return Uh(e)&&$y(t)?By(ga(e),t):function(r){var n=T9(r,e);return n===void 0&&n===t?O9(r,e):Gh(t,n,P9|M9)}}function I9(e){return function(t){return t?.[e]}}function N9(e){return function(t){return Gy(t,e)}}function L9(e){return Uh(e)?I9(ga(e)):N9(e)}function F9(e){return typeof e=="function"?e:e==null?ua:typeof e=="object"?Ht(e)?D9(e[0],e[1]):b9(e):L9(e)}function z9(e,t){var r=-1,n=Mo(e)?Array(e.length):[];return Dy(e,function(o,i,a){n[++r]=t(o,i,a)}),n}function Tn(e,t){var r=Ht(e)?Fy:z9;return r(e,F9(t))}var $9=function(t){var r=t.colors,n=t.onClick,o=t.onSwatchHover,i=be({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return v.createElement("div",{style:i.swatches},Tn(r,function(a){return v.createElement(_n,{key:a,color:a,style:i.swatch,onClick:n,onHover:o,focusStyle:{boxShadow:"0 0 4px "+a}})}),v.createElement("div",{style:i.clear}))},Yh=function(t){var r=t.onChange,n=t.onSwatchHover,o=t.hex,i=t.colors,a=t.width,l=t.triangle,c=t.styles,d=c===void 0?{}:c,u=t.className,p=u===void 0?"":u,f=o==="transparent",b=function(x,y){rn(x)&&r({hex:x,source:"hex"},y)},g=be(Dt({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:o,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Hh(o),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+o+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},d),{"hide-triangle":l==="hide"});return v.createElement("div",{style:g.card,className:"block-picker "+p},v.createElement("div",{style:g.triangle}),v.createElement("div",{style:g.head},f&&v.createElement(Oo,{borderRadius:"6px 6px 0 0"}),v.createElement("div",{style:g.label},o)),v.createElement("div",{style:g.body},v.createElement($9,{colors:i,onClick:b,onSwatchHover:n}),v.createElement(Ae,{style:{input:g.input},value:o,onChange:b})))};Yh.propTypes={width:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.string),triangle:ee.oneOf(["top","hide"]),styles:ee.object};Yh.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};It(Yh);var Wn={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Yn={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Vn={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Kn={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Qn={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Jn={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Xn={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Zn={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},eo={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},is={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},to={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},ro={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},no={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},oo={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},so={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},io={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},ao={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},lo={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},Uy=function(t){var r=t.color,n=t.onClick,o=t.onSwatchHover,i=t.hover,a=t.active,l=t.circleSize,c=t.circleSpacing,d=be({default:{swatch:{width:l,height:l,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(l/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:i,active:a});return v.createElement("div",{style:d.swatch},v.createElement(_n,{style:d.Swatch,color:r,onClick:n,onHover:o,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+r}}))};Uy.defaultProps={circleSize:28,circleSpacing:14};const B9=Dh.handleHover(Uy);var Vh=function(t){var r=t.width,n=t.onChange,o=t.onSwatchHover,i=t.colors,a=t.hex,l=t.circleSize,c=t.styles,d=c===void 0?{}:c,u=t.circleSpacing,p=t.className,f=p===void 0?"":p,b=be(Dt({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},d)),g=function(x,y){return n({hex:x,source:"hex"},y)};return v.createElement("div",{style:b.card,className:"circle-picker "+f},Tn(i,function(m){return v.createElement(B9,{key:m,color:m,onClick:g,onSwatchHover:o,active:a===m.toLowerCase(),circleSize:l,circleSpacing:u})}))};Vh.propTypes={width:ee.oneOfType([ee.string,ee.number]),circleSize:ee.number,circleSpacing:ee.number,styles:ee.object};Vh.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Wn[500],Yn[500],Vn[500],Kn[500],Qn[500],Jn[500],Xn[500],Zn[500],eo[500],is[500],to[500],ro[500],no[500],oo[500],so[500],io[500],ao[500],lo[500]],styles:{}};It(Vh);function j1(e){return e===void 0}var Qs={},k1;function q9(){if(k1)return Qs;k1=1,Object.defineProperty(Qs,"__esModule",{value:!0});var e=Object.assign||function(a){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=$i(),r=n(t);function n(a){return a&&a.__esModule?a:{default:a}}function o(a,l){var c={};for(var d in a)l.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}var i=24;return Qs.default=function(a){var l=a.fill,c=l===void 0?"currentColor":l,d=a.width,u=d===void 0?i:d,p=a.height,f=p===void 0?i:p,b=a.style,g=b===void 0?{}:b,m=o(a,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+i+" "+i,style:e({fill:c,width:u,height:f},g)},m),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Qs}var H9=q9();const G9=Eo(H9);var U9=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function W9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y9(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function V9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Wy=function(e){V9(t,e);function t(r){W9(this,t);var n=Y9(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(o,i){o.hex?rn(o.hex)&&n.props.onChange({hex:o.hex,source:"hex"},i):o.r||o.g||o.b?n.props.onChange({r:o.r||n.props.rgb.r,g:o.g||n.props.rgb.g,b:o.b||n.props.rgb.b,source:"rgb"},i):o.a?(o.a<0?o.a=0:o.a>1&&(o.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(o.a*100)/100,source:"rgb"},i)):(o.h||o.s||o.l)&&(typeof o.s=="string"&&o.s.includes("%")&&(o.s=o.s.replace("%","")),typeof o.l=="string"&&o.l.includes("%")&&(o.l=o.l.replace("%","")),o.s==1?o.s=.01:o.l==1&&(o.l=.01),n.props.onChange({h:o.h||n.props.hsl.h,s:Number(j1(o.s)?n.props.hsl.s:o.s),l:Number(j1(o.l)?n.props.hsl.l:o.l),source:"hsl"},i))},n.showHighlight=function(o){o.currentTarget.style.background="#eee"},n.hideHighlight=function(o){o.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return U9(t,[{key:"render",value:function(){var n=this,o=be({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),i=void 0;return this.state.view==="hex"?i=v.createElement("div",{style:o.fields,className:"flexbox-fix"},v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?i=v.createElement("div",{style:o.fields,className:"flexbox-fix"},v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),v.createElement("div",{style:o.alpha},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(i=v.createElement("div",{style:o.fields,className:"flexbox-fix"},v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),v.createElement("div",{style:o.field},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),v.createElement("div",{style:o.alpha},v.createElement(Ae,{style:{input:o.input,label:o.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),v.createElement("div",{style:o.wrap,className:"flexbox-fix"},i,v.createElement("div",{style:o.toggle},v.createElement("div",{style:o.icon,onClick:this.toggleViews,ref:function(l){return n.icon=l}},v.createElement(G9,{style:o.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return n.hsl.a!==1&&o.view==="hex"?{view:"rgb"}:null}}]),t}(v.Component);Wy.defaultProps={view:"hex"};var E1=function(){var t=be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return v.createElement("div",{style:t.picker})},K9=function(){var t=be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return v.createElement("div",{style:t.picker})},Kh=function(t){var r=t.width,n=t.onChange,o=t.disableAlpha,i=t.rgb,a=t.hsl,l=t.hsv,c=t.hex,d=t.renderers,u=t.styles,p=u===void 0?{}:u,f=t.className,b=f===void 0?"":f,g=t.defaultView,m=be(Dt({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},p),{disableAlpha:o});return v.createElement("div",{style:m.picker,className:"chrome-picker "+b},v.createElement("div",{style:m.saturation},v.createElement(pa,{style:m.Saturation,hsl:a,hsv:l,pointer:K9,onChange:n})),v.createElement("div",{style:m.body},v.createElement("div",{style:m.controls,className:"flexbox-fix"},v.createElement("div",{style:m.color},v.createElement("div",{style:m.swatch},v.createElement("div",{style:m.active}),v.createElement(Oo,{renderers:d}))),v.createElement("div",{style:m.toggles},v.createElement("div",{style:m.hue},v.createElement(Po,{style:m.Hue,hsl:a,pointer:E1,onChange:n})),v.createElement("div",{style:m.alpha},v.createElement(Ih,{style:m.Alpha,rgb:i,hsl:a,pointer:E1,renderers:d,onChange:n})))),v.createElement(Wy,{rgb:i,hsl:a,hex:c,view:g,onChange:n,disableAlpha:o})))};Kh.propTypes={width:ee.oneOfType([ee.string,ee.number]),disableAlpha:ee.bool,styles:ee.object,defaultView:ee.oneOf(["hex","rgb","hsl"])};Kh.defaultProps={width:225,disableAlpha:!1,styles:{}};It(Kh);var Q9=function(t){var r=t.color,n=t.onClick,o=n===void 0?function(){}:n,i=t.onSwatchHover,a=t.active,l=be({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Hh(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return v.createElement(_n,{style:l.color,color:r,onClick:o,onHover:i,focusStyle:{boxShadow:"0 0 4px "+r}},v.createElement("div",{style:l.dot}))},J9=function(t){var r=t.hex,n=t.rgb,o=t.onChange,i=be({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(c,d){c.r||c.g||c.b?o({r:c.r||n.r,g:c.g||n.g,b:c.b||n.b,source:"rgb"},d):o({hex:c.hex,source:"hex"},d)};return v.createElement("div",{style:i.fields,className:"flexbox-fix"},v.createElement("div",{style:i.active}),v.createElement(Ae,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:r,onChange:a}),v.createElement(Ae,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),v.createElement(Ae,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),v.createElement(Ae,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}))},Qh=function(t){var r=t.onChange,n=t.onSwatchHover,o=t.colors,i=t.hex,a=t.rgb,l=t.styles,c=l===void 0?{}:l,d=t.className,u=d===void 0?"":d,p=be(Dt({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),f=function(g,m){g.hex?rn(g.hex)&&r({hex:g.hex,source:"hex"},m):r(g,m)};return v.createElement(Ms,{style:p.Compact,styles:c},v.createElement("div",{style:p.compact,className:"compact-picker "+u},v.createElement("div",null,Tn(o,function(b){return v.createElement(Q9,{key:b,color:b,active:b.toLowerCase()===i,onClick:f,onSwatchHover:n})}),v.createElement("div",{style:p.clear})),v.createElement(J9,{hex:i,rgb:a,onChange:f})))};Qh.propTypes={colors:ee.arrayOf(ee.string),styles:ee.object};Qh.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};It(Qh);var X9=function(t){var r=t.hover,n=t.color,o=t.onClick,i=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},l=be({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:r});return v.createElement("div",{style:l.swatch},v.createElement(_n,{color:n,onClick:o,onHover:i,focusStyle:a}))};const Z9=Dh.handleHover(X9);var Jh=function(t){var r=t.width,n=t.colors,o=t.onChange,i=t.onSwatchHover,a=t.triangle,l=t.styles,c=l===void 0?{}:l,d=t.className,u=d===void 0?"":d,p=be(Dt({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),f=function(g,m){return o({hex:g,source:"hex"},m)};return v.createElement("div",{style:p.card,className:"github-picker "+u},v.createElement("div",{style:p.triangleShadow}),v.createElement("div",{style:p.triangle}),Tn(n,function(b){return v.createElement(Z9,{color:b,key:b,onClick:f,onSwatchHover:i})}))};Jh.propTypes={width:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.string),triangle:ee.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:ee.object};Jh.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};It(Jh);var eT=function(t){var r=t.direction,n=be({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return v.createElement("div",{style:n.picker})},tT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xh=function(t){var r=t.width,n=t.height,o=t.onChange,i=t.hsl,a=t.direction,l=t.pointer,c=t.styles,d=c===void 0?{}:c,u=t.className,p=u===void 0?"":u,f=be(Dt({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},d)),b=function(m){return o({a:1,h:m.h,l:.5,s:1})};return v.createElement("div",{style:f.picker,className:"hue-picker "+p},v.createElement(Po,tT({},f.hue,{hsl:i,pointer:l,onChange:b,direction:a})))};Xh.propTypes={styles:ee.object};Xh.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:eT,styles:{}};It(Xh);var rT=function(t){var r=t.onChange,n=t.hex,o=t.rgb,i=t.styles,a=i===void 0?{}:i,l=t.className,c=l===void 0?"":l,d=be(Dt({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(f,b){f.hex?rn(f.hex)&&r({hex:f.hex,source:"hex"},b):(f.r||f.g||f.b)&&r({r:f.r||o.r,g:f.g||o.g,b:f.b||o.b,source:"rgb"},b)};return v.createElement(Ms,{styles:a},v.createElement("div",{style:d.material,className:"material-picker "+c},v.createElement(Ae,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:u}),v.createElement("div",{style:d.split,className:"flexbox-fix"},v.createElement("div",{style:d.third},v.createElement(Ae,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:o.r,onChange:u})),v.createElement("div",{style:d.third},v.createElement(Ae,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:o.g,onChange:u})),v.createElement("div",{style:d.third},v.createElement(Ae,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:o.b,onChange:u})))))};It(rT);var nT=function(t){var r=t.onChange,n=t.rgb,o=t.hsv,i=t.hex,a=be({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),l=function(d,u){d["#"]?rn(d["#"])&&r({hex:d["#"],source:"hex"},u):d.r||d.g||d.b?r({r:d.r||n.r,g:d.g||n.g,b:d.b||n.b,source:"rgb"},u):(d.h||d.s||d.v)&&r({h:d.h||o.h,s:d.s||o.s,v:d.v||o.v,source:"hsv"},u)};return v.createElement("div",{style:a.fields},v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(o.h),onChange:l}),v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(o.s*100),onChange:l}),v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(o.v*100),onChange:l}),v.createElement("div",{style:a.divider}),v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:l}),v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:l}),v.createElement(Ae,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:l}),v.createElement("div",{style:a.divider}),v.createElement(Ae,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:l}),v.createElement("div",{style:a.fieldSymbols},v.createElement("div",{style:a.symbol},"°"),v.createElement("div",{style:a.symbol},"%"),v.createElement("div",{style:a.symbol},"%")))},oT=function(t){var r=t.hsl,n=be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return v.createElement("div",{style:n.picker})},sT=function(){var t=be({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return v.createElement("div",{style:t.pointer},v.createElement("div",{style:t.left},v.createElement("div",{style:t.leftInside})),v.createElement("div",{style:t.right},v.createElement("div",{style:t.rightInside})))},_1=function(t){var r=t.onClick,n=t.label,o=t.children,i=t.active,a=be({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return v.createElement("div",{style:a.button,onClick:r},n||o)},iT=function(t){var r=t.rgb,n=t.currentColor,o=be({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return v.createElement("div",null,v.createElement("div",{style:o.label},"new"),v.createElement("div",{style:o.swatches},v.createElement("div",{style:o.new}),v.createElement("div",{style:o.current})),v.createElement("div",{style:o.label},"current"))},aT=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function lT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function dT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zh=function(e){dT(t,e);function t(r){lT(this,t);var n=cT(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return aT(t,[{key:"render",value:function(){var n=this.props,o=n.styles,i=o===void 0?{}:o,a=n.className,l=a===void 0?"":a,c=be(Dt({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},i));return v.createElement("div",{style:c.picker,className:"photoshop-picker "+l},v.createElement("div",{style:c.head},this.props.header),v.createElement("div",{style:c.body,className:"flexbox-fix"},v.createElement("div",{style:c.saturation},v.createElement(pa,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:oT,onChange:this.props.onChange})),v.createElement("div",{style:c.hue},v.createElement(Po,{direction:"vertical",hsl:this.props.hsl,pointer:sT,onChange:this.props.onChange})),v.createElement("div",{style:c.controls},v.createElement("div",{style:c.top,className:"flexbox-fix"},v.createElement("div",{style:c.previews},v.createElement(iT,{rgb:this.props.rgb,currentColor:this.state.currentColor})),v.createElement("div",{style:c.actions},v.createElement(_1,{label:"OK",onClick:this.props.onAccept,active:!0}),v.createElement(_1,{label:"Cancel",onClick:this.props.onCancel}),v.createElement(nT,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(v.Component);Zh.propTypes={header:ee.string,styles:ee.object};Zh.defaultProps={header:"Color Picker",styles:{}};It(Zh);var uT=function(t){var r=t.onChange,n=t.rgb,o=t.hsl,i=t.hex,a=t.disableAlpha,l=be({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),c=function(u,p){u.hex?rn(u.hex)&&r({hex:u.hex,source:"hex"},p):u.r||u.g||u.b?r({r:u.r||n.r,g:u.g||n.g,b:u.b||n.b,a:n.a,source:"rgb"},p):u.a&&(u.a<0?u.a=0:u.a>100&&(u.a=100),u.a/=100,r({h:o.h,s:o.s,l:o.l,a:u.a,source:"rgb"},p))};return v.createElement("div",{style:l.fields,className:"flexbox-fix"},v.createElement("div",{style:l.double},v.createElement(Ae,{style:{input:l.input,label:l.label},label:"hex",value:i.replace("#",""),onChange:c})),v.createElement("div",{style:l.single},v.createElement(Ae,{style:{input:l.input,label:l.label},label:"r",value:n.r,onChange:c,dragLabel:"true",dragMax:"255"})),v.createElement("div",{style:l.single},v.createElement(Ae,{style:{input:l.input,label:l.label},label:"g",value:n.g,onChange:c,dragLabel:"true",dragMax:"255"})),v.createElement("div",{style:l.single},v.createElement(Ae,{style:{input:l.input,label:l.label},label:"b",value:n.b,onChange:c,dragLabel:"true",dragMax:"255"})),v.createElement("div",{style:l.alpha},v.createElement(Ae,{style:{input:l.input,label:l.label},label:"a",value:Math.round(n.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},hT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yy=function(t){var r=t.colors,n=t.onClick,o=n===void 0?function(){}:n,i=t.onSwatchHover,a=be({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),l=function(d,u){o({hex:d,source:"hex"},u)};return v.createElement("div",{style:a.colors,className:"flexbox-fix"},r.map(function(c){var d=typeof c=="string"?{color:c}:c,u=""+d.color+(d.title||"");return v.createElement("div",{key:u,style:a.swatchWrap},v.createElement(_n,hT({},d,{style:a.swatch,onClick:l,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+d.color}})))}))};Yy.propTypes={colors:ee.arrayOf(ee.oneOfType([ee.string,ee.shape({color:ee.string,title:ee.string})])).isRequired};var pT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep=function(t){var r=t.width,n=t.rgb,o=t.hex,i=t.hsv,a=t.hsl,l=t.onChange,c=t.onSwatchHover,d=t.disableAlpha,u=t.presetColors,p=t.renderers,f=t.styles,b=f===void 0?{}:f,g=t.className,m=g===void 0?"":g,x=be(Dt({default:pT({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:d});return v.createElement("div",{style:x.picker,className:"sketch-picker "+m},v.createElement("div",{style:x.saturation},v.createElement(pa,{style:x.Saturation,hsl:a,hsv:i,onChange:l})),v.createElement("div",{style:x.controls,className:"flexbox-fix"},v.createElement("div",{style:x.sliders},v.createElement("div",{style:x.hue},v.createElement(Po,{style:x.Hue,hsl:a,onChange:l})),v.createElement("div",{style:x.alpha},v.createElement(Ih,{style:x.Alpha,rgb:n,hsl:a,renderers:p,onChange:l}))),v.createElement("div",{style:x.color},v.createElement(Oo,null),v.createElement("div",{style:x.activeColor}))),v.createElement(uT,{rgb:n,hsl:a,hex:o,onChange:l,disableAlpha:d}),v.createElement(Yy,{colors:u,onClick:l,onSwatchHover:c}))};ep.propTypes={disableAlpha:ee.bool,width:ee.oneOfType([ee.string,ee.number]),styles:ee.object};ep.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const fT=It(ep);var Go=function(t){var r=t.hsl,n=t.offset,o=t.onClick,i=o===void 0?function(){}:o,a=t.active,l=t.first,c=t.last,d=be({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:l,last:c}),u=function(f){return i({h:r.h,s:.5,l:n,source:"hsl"},f)};return v.createElement("div",{style:d.swatch,onClick:u})},gT=function(t){var r=t.onClick,n=t.hsl,o=be({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return v.createElement("div",{style:o.swatches},v.createElement("div",{style:o.swatch},v.createElement(Go,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:r,first:!0})),v.createElement("div",{style:o.swatch},v.createElement(Go,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:r})),v.createElement("div",{style:o.swatch},v.createElement(Go,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:r})),v.createElement("div",{style:o.swatch},v.createElement(Go,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:r})),v.createElement("div",{style:o.swatch},v.createElement(Go,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:r,last:!0})),v.createElement("div",{style:o.clear}))},mT=function(){var t=be({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return v.createElement("div",{style:t.picker})},tp=function(t){var r=t.hsl,n=t.onChange,o=t.pointer,i=t.styles,a=i===void 0?{}:i,l=t.className,c=l===void 0?"":l,d=be(Dt({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return v.createElement("div",{style:d.wrap||{},className:"slider-picker "+c},v.createElement("div",{style:d.hue},v.createElement(Po,{style:d.Hue,hsl:r,pointer:o,onChange:n})),v.createElement("div",{style:d.swatches},v.createElement(gT,{hsl:r,onClick:n})))};tp.propTypes={styles:ee.object};tp.defaultProps={pointer:mT,styles:{}};It(tp);var Js={},T1;function xT(){if(T1)return Js;T1=1,Object.defineProperty(Js,"__esModule",{value:!0});var e=Object.assign||function(a){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=$i(),r=n(t);function n(a){return a&&a.__esModule?a:{default:a}}function o(a,l){var c={};for(var d in a)l.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}var i=24;return Js.default=function(a){var l=a.fill,c=l===void 0?"currentColor":l,d=a.width,u=d===void 0?i:d,p=a.height,f=p===void 0?i:p,b=a.style,g=b===void 0?{}:b,m=o(a,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+i+" "+i,style:e({fill:c,width:u,height:f},g)},m),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Js}var bT=xT();const yT=Eo(bT);var vT=function(t){var r=t.color,n=t.onClick,o=n===void 0?function(){}:n,i=t.onSwatchHover,a=t.first,l=t.last,c=t.active,d=be({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:Hh(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:l,active:c,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return v.createElement(_n,{color:r,style:d.color,onClick:o,onHover:i,focusStyle:{boxShadow:"0 0 4px "+r}},v.createElement("div",{style:d.check},v.createElement(yT,null)))},wT=function(t){var r=t.onClick,n=t.onSwatchHover,o=t.group,i=t.active,a=be({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return v.createElement("div",{style:a.group},Tn(o,function(l,c){return v.createElement(vT,{key:l,color:l,active:l.toLowerCase()===i,first:c===0,last:c===o.length-1,onClick:r,onSwatchHover:n})}))},rp=function(t){var r=t.width,n=t.height,o=t.onChange,i=t.onSwatchHover,a=t.colors,l=t.hex,c=t.styles,d=c===void 0?{}:c,u=t.className,p=u===void 0?"":u,f=be(Dt({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},d)),b=function(m,x){return o({hex:m,source:"hex"},x)};return v.createElement("div",{style:f.picker,className:"swatches-picker "+p},v.createElement(Ms,null,v.createElement("div",{style:f.overflow},v.createElement("div",{style:f.body},Tn(a,function(g){return v.createElement(wT,{key:g.toString(),group:g,active:l,onClick:b,onSwatchHover:i})}),v.createElement("div",{style:f.clear})))))};rp.propTypes={width:ee.oneOfType([ee.string,ee.number]),height:ee.oneOfType([ee.string,ee.number]),colors:ee.arrayOf(ee.arrayOf(ee.string)),styles:ee.object};rp.defaultProps={width:320,height:240,colors:[[Wn[900],Wn[700],Wn[500],Wn[300],Wn[100]],[Yn[900],Yn[700],Yn[500],Yn[300],Yn[100]],[Vn[900],Vn[700],Vn[500],Vn[300],Vn[100]],[Kn[900],Kn[700],Kn[500],Kn[300],Kn[100]],[Qn[900],Qn[700],Qn[500],Qn[300],Qn[100]],[Jn[900],Jn[700],Jn[500],Jn[300],Jn[100]],[Xn[900],Xn[700],Xn[500],Xn[300],Xn[100]],[Zn[900],Zn[700],Zn[500],Zn[300],Zn[100]],[eo[900],eo[700],eo[500],eo[300],eo[100]],["#194D33",is[700],is[500],is[300],is[100]],[to[900],to[700],to[500],to[300],to[100]],[ro[900],ro[700],ro[500],ro[300],ro[100]],[no[900],no[700],no[500],no[300],no[100]],[oo[900],oo[700],oo[500],oo[300],oo[100]],[so[900],so[700],so[500],so[300],so[100]],[io[900],io[700],io[500],io[300],io[100]],[ao[900],ao[700],ao[500],ao[300],ao[100]],[lo[900],lo[700],lo[500],lo[300],lo[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};It(rp);var np=function(t){var r=t.onChange,n=t.onSwatchHover,o=t.hex,i=t.colors,a=t.width,l=t.triangle,c=t.styles,d=c===void 0?{}:c,u=t.className,p=u===void 0?"":u,f=be(Dt({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},d),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right"}),b=function(m,x){rn(m)&&r({hex:m,source:"hex"},x)};return v.createElement("div",{style:f.card,className:"twitter-picker "+p},v.createElement("div",{style:f.triangleShadow}),v.createElement("div",{style:f.triangle}),v.createElement("div",{style:f.body},Tn(i,function(g,m){return v.createElement(_n,{key:m,color:g,hex:g,style:f.swatch,onClick:b,onHover:n,focusStyle:{boxShadow:"0 0 4px "+g}})}),v.createElement("div",{style:f.hash},"#"),v.createElement(Ae,{label:null,style:{input:f.input},value:o.replace("#",""),onChange:b}),v.createElement("div",{style:f.clear})))};np.propTypes={width:ee.oneOfType([ee.string,ee.number]),triangle:ee.oneOf(["hide","top-left","top-right"]),colors:ee.arrayOf(ee.string),styles:ee.object};np.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};It(np);var op=function(t){var r=be({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return v.createElement("div",{style:r.picker})};op.propTypes={hsl:ee.shape({h:ee.number,s:ee.number,l:ee.number,a:ee.number})};op.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var sp=function(t){var r=be({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return v.createElement("div",{style:r.picker})};sp.propTypes={hsl:ee.shape({h:ee.number,s:ee.number,l:ee.number,a:ee.number})};sp.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var CT=function(t){var r=t.onChange,n=t.rgb,o=t.hsl,i=t.hex,a=t.hsv,l=function(b,g){if(b.hex)rn(b.hex)&&r({hex:b.hex,source:"hex"},g);else if(b.rgb){var m=b.rgb.split(",");Nd(b.rgb,"rgb")&&r({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},g)}else if(b.hsv){var x=b.hsv.split(",");Nd(b.hsv,"hsv")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("°",""),x[1]==1?x[1]=.01:x[2]==1&&(x[2]=.01),r({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsv"},g))}else if(b.hsl){var y=b.hsl.split(",");Nd(b.hsl,"hsl")&&(y[2]=y[2].replace("%",""),y[1]=y[1].replace("%",""),y[0]=y[0].replace("°",""),p[1]==1?p[1]=.01:p[2]==1&&(p[2]=.01),r({h:Number(y[0]),s:Number(y[1]),v:Number(y[2]),source:"hsl"},g))}},c=be({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),d=n.r+", "+n.g+", "+n.b,u=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.l*100)+"%",p=Math.round(a.h)+"°, "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return v.createElement("div",{style:c.wrap,className:"flexbox-fix"},v.createElement("div",{style:c.fields},v.createElement("div",{style:c.double},v.createElement(Ae,{style:{input:c.input,label:c.label},label:"hex",value:i,onChange:l})),v.createElement("div",{style:c.column},v.createElement("div",{style:c.single},v.createElement(Ae,{style:{input:c.input2,label:c.label2},label:"rgb",value:d,onChange:l})),v.createElement("div",{style:c.single},v.createElement(Ae,{style:{input:c.input2,label:c.label2},label:"hsv",value:p,onChange:l})),v.createElement("div",{style:c.single},v.createElement(Ae,{style:{input:c.input2,label:c.label2},label:"hsl",value:u,onChange:l})))))},ip=function(t){var r=t.width,n=t.onChange,o=t.rgb,i=t.hsl,a=t.hsv,l=t.hex,c=t.header,d=t.styles,u=d===void 0?{}:d,p=t.className,f=p===void 0?"":p,b=be(Dt({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+o.r+", "+o.g+", "+o.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return v.createElement("div",{style:b.picker,className:"google-picker "+f},v.createElement("div",{style:b.head},c),v.createElement("div",{style:b.swatch}),v.createElement("div",{style:b.saturation},v.createElement(pa,{hsl:i,hsv:a,pointer:op,onChange:n})),v.createElement("div",{style:b.body},v.createElement("div",{style:b.controls,className:"flexbox-fix"},v.createElement("div",{style:b.hue},v.createElement(Po,{style:b.Hue,hsl:i,radius:"4px",pointer:sp,onChange:n}))),v.createElement(CT,{rgb:o,hsl:i,hex:l,hsv:a,onChange:n})))};ip.propTypes={width:ee.oneOfType([ee.string,ee.number]),styles:ee.object,header:ee.string};ip.defaultProps={width:652,styles:{},header:"Color picker"};It(ip);var ST=Object.defineProperty,jT=(e,t,r)=>t in e?ST(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ve=(e,t,r)=>jT(e,typeof t!="symbol"?t+"":t,r);const Ni={x:0,y:0,width:0,height:0,unit:"px"},qn=(e,t,r)=>Math.min(Math.max(e,t),r),kT=(...e)=>e.filter(t=>t&&typeof t=="string").join(" "),A1=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function ET(e,t,r,n){const o=gr(e,r,n);return e.width&&(o.height=o.width/t),e.height&&(o.width=o.height*t),o.y+o.height>n&&(o.height=n-o.y,o.width=o.height*t),o.x+o.width>r&&(o.width=r-o.x,o.height=o.width/t),e.unit==="%"?Ur(o,r,n):o}function _T(e,t,r){const n=gr(e,t,r);return n.x=(t-n.width)/2,n.y=(r-n.height)/2,e.unit==="%"?Ur(n,t,r):n}function Ur(e,t,r){return e.unit==="%"?{...Ni,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0}}function gr(e,t,r){return e.unit?e.unit==="px"?{...Ni,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:{...Ni,...e,unit:"px"}}function R1(e,t,r,n,o,i=0,a=0,l=n,c=o){const d={...e};let u=Math.min(i,n),p=Math.min(a,o),f=Math.min(l,n),b=Math.min(c,o);t&&(t>1?(u=a?a*t:u,p=u/t,f=l*t):(p=i?i/t:p,u=p*t,b=c/t)),d.y<0&&(d.height=Math.max(d.height+d.y,p),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,u),d.x=0);const g=n-(d.x+d.width);g<0&&(d.x=Math.min(d.x,n-u),d.width+=g);const m=o-(d.y+d.height);if(m<0&&(d.y=Math.min(d.y,o-p),d.height+=m),d.width<u&&((r==="sw"||r=="nw")&&(d.x-=u-d.width),d.width=u),d.height<p&&((r==="nw"||r=="ne")&&(d.y-=p-d.height),d.height=p),d.width>f&&((r==="sw"||r=="nw")&&(d.x-=f-d.width),d.width=f),d.height>b&&((r==="nw"||r=="ne")&&(d.y-=b-d.height),d.height=b),t){const x=d.width/d.height;if(x<t){const y=Math.max(d.width/t,p);(r==="nw"||r=="ne")&&(d.y-=y-d.height),d.height=y}else if(x>t){const y=Math.max(d.height*t,u);(r==="sw"||r=="nw")&&(d.x-=y-d.width),d.width=y}}return d}function TT(e,t,r,n){const o={...e};return t==="ArrowLeft"?n==="nw"?(o.x-=r,o.y-=r,o.width+=r,o.height+=r):n==="w"?(o.x-=r,o.width+=r):n==="sw"?(o.x-=r,o.width+=r,o.height+=r):n==="ne"?(o.y+=r,o.width-=r,o.height-=r):n==="e"?o.width-=r:n==="se"&&(o.width-=r,o.height-=r):t==="ArrowRight"&&(n==="nw"?(o.x+=r,o.y+=r,o.width-=r,o.height-=r):n==="w"?(o.x+=r,o.width-=r):n==="sw"?(o.x+=r,o.width-=r,o.height-=r):n==="ne"?(o.y-=r,o.width+=r,o.height+=r):n==="e"?o.width+=r:n==="se"&&(o.width+=r,o.height+=r)),t==="ArrowUp"?n==="nw"?(o.x-=r,o.y-=r,o.width+=r,o.height+=r):n==="n"?(o.y-=r,o.height+=r):n==="ne"?(o.y-=r,o.width+=r,o.height+=r):n==="sw"?(o.x+=r,o.width-=r,o.height-=r):n==="s"?o.height-=r:n==="se"&&(o.width-=r,o.height-=r):t==="ArrowDown"&&(n==="nw"?(o.x+=r,o.y+=r,o.width-=r,o.height-=r):n==="n"?(o.y+=r,o.height-=r):n==="ne"?(o.y+=r,o.width-=r,o.height-=r):n==="sw"?(o.x-=r,o.width+=r,o.height+=r):n==="s"?o.height+=r:n==="se"&&(o.width+=r,o.height+=r)),o}const Hn={capture:!0,passive:!1};let AT=0;const Hr=class or extends h.PureComponent{constructor(){super(...arguments),Ve(this,"docMoveBound",!1),Ve(this,"mouseDownOnCrop",!1),Ve(this,"dragStarted",!1),Ve(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),Ve(this,"componentRef",h.createRef()),Ve(this,"mediaRef",h.createRef()),Ve(this,"resizeObserver"),Ve(this,"initChangeCalled",!1),Ve(this,"instanceId",`rc-${AT++}`),Ve(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),Ve(this,"onCropPointerDown",t=>{const{crop:r,disabled:n}=this.props,o=this.getBox();if(!r)return;const i=gr(r,o.width,o.height);if(n)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=t.target.dataset.ord,l=!!a;let c=t.clientX,d=t.clientY,u=i.x,p=i.y;if(a){const f=t.clientX-o.x,b=t.clientY-o.y;let g=0,m=0;a==="ne"||a=="e"?(g=f-(i.x+i.width),m=b-i.y,u=i.x,p=i.y+i.height):a==="se"||a==="s"?(g=f-(i.x+i.width),m=b-(i.y+i.height),u=i.x,p=i.y):a==="sw"||a=="w"?(g=f-i.x,m=b-(i.y+i.height),u=i.x+i.width,p=i.y):(a==="nw"||a=="n")&&(g=f-i.x,m=b-i.y,u=i.x+i.width,p=i.y+i.height),c=u+o.x+g,d=p+o.y+m}this.evData={startClientX:c,startClientY:d,startCropX:u,startCropY:p,clientX:t.clientX,clientY:t.clientY,isResize:l,ord:a},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),Ve(this,"onComponentPointerDown",t=>{const{crop:r,disabled:n,locked:o,keepSelection:i,onChange:a}=this.props,l=this.getBox();if(n||o||i&&r)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=t.clientX-l.x,d=t.clientY-l.y,u={unit:"px",x:c,y:d,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:c,startCropY:d,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,a(gr(u,l.width,l.height),Ur(u,l.width,l.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),Ve(this,"onDocPointerMove",t=>{const{crop:r,disabled:n,onChange:o,onDragStart:i}=this.props,a=this.getBox();if(n||!r||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(t));const{evData:l}=this;l.clientX=t.clientX,l.clientY=t.clientY;let c;l.isResize?c=this.resizeCrop():c=this.dragCrop(),A1(r,c)||o(gr(c,a.width,a.height),Ur(c,a.width,a.height))}),Ve(this,"onComponentKeyDown",t=>{const{crop:r,disabled:n,onChange:o,onComplete:i}=this.props;if(n)return;const a=t.key;let l=!1;if(!r)return;const c=this.getBox(),d=this.makePixelCrop(c),u=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?or.nudgeStepLarge:t.shiftKey?or.nudgeStepMedium:or.nudgeStep;if(a==="ArrowLeft"?(d.x-=u,l=!0):a==="ArrowRight"?(d.x+=u,l=!0):a==="ArrowUp"?(d.y-=u,l=!0):a==="ArrowDown"&&(d.y+=u,l=!0),l){t.cancelable&&t.preventDefault(),d.x=qn(d.x,0,c.width-d.width),d.y=qn(d.y,0,c.height-d.height);const p=gr(d,c.width,c.height),f=Ur(d,c.width,c.height);o(p,f),i&&i(p,f)}}),Ve(this,"onHandlerKeyDown",(t,r)=>{const{aspect:n=0,crop:o,disabled:i,minWidth:a=0,minHeight:l=0,maxWidth:c,maxHeight:d,onChange:u,onComplete:p}=this.props,f=this.getBox();if(i||!o)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const b=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?or.nudgeStepLarge:t.shiftKey?or.nudgeStepMedium:or.nudgeStep,g=gr(o,f.width,f.height),m=TT(g,t.key,b,r),x=R1(m,n,r,f.width,f.height,a,l,c,d);if(!A1(o,x)){const y=Ur(x,f.width,f.height);u(x,y),p&&p(x,y)}}),Ve(this,"onDocPointerDone",t=>{const{crop:r,disabled:n,onComplete:o,onDragEnd:i}=this.props,a=this.getBox();this.unbindDocMove(),!(n||!r)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(t),o&&o(gr(r,a.width,a.height),Ur(r,a.width,a.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),Ve(this,"onDragFocus",()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)})}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:r,y:n,width:o,height:i}=t.getBoundingClientRect();return{x:r,y:n,width:o,height:i}}componentDidUpdate(t){const{crop:r,onComplete:n}=this.props;if(n&&!t.crop&&r){const{width:o,height:i}=this.getBox();o&&i&&n(gr(r,o,i),Ur(r,o,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Hn),this.document.addEventListener("pointerup",this.onDocPointerDone,Hn),this.document.addEventListener("pointercancel",this.onDocPointerDone,Hn),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Hn),this.document.removeEventListener("pointerup",this.onDocPointerDone,Hn),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Hn),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,r=this.getBox(),n=this.makePixelCrop(r),o=t.clientX-t.startClientX,i=t.clientY-t.startClientY;return n.x=qn(t.startCropX+o,0,r.width-n.width),n.y=qn(t.startCropY+i,0,r.height-n.height),n}getPointRegion(t,r,n,o){const{evData:i}=this,a=i.clientX-t.x,l=i.clientY-t.y;let c;o&&r?c=r==="nw"||r==="n"||r==="ne":c=l<i.startCropY;let d;return n&&r?d=r==="nw"||r==="w"||r==="sw":d=a<i.startCropX,d?c?"nw":"sw":c?"ne":"se"}resolveMinDimensions(t,r,n=0,o=0){const i=Math.min(n,t.width),a=Math.min(o,t.height);return!r||!i&&!a?[i,a]:r>1?i?[i,i/r]:[a*r,a]:a?[a*r,a]:[i,i/r]}resizeCrop(){const{evData:t}=this,{aspect:r=0,maxWidth:n,maxHeight:o}=this.props,i=this.getBox(),[a,l]=this.resolveMinDimensions(i,r,this.props.minWidth,this.props.minHeight);let c=this.makePixelCrop(i);const d=this.getPointRegion(i,t.ord,a,l),u=t.ord||d;let p=t.clientX-t.startClientX,f=t.clientY-t.startClientY;(a&&u==="nw"||u==="w"||u==="sw")&&(p=Math.min(p,-a)),(l&&u==="nw"||u==="n"||u==="ne")&&(f=Math.min(f,-l));const b={unit:"px",x:0,y:0,width:0,height:0};d==="ne"?(b.x=t.startCropX,b.width=p,r?(b.height=b.width/r,b.y=t.startCropY-b.height):(b.height=Math.abs(f),b.y=t.startCropY-b.height)):d==="se"?(b.x=t.startCropX,b.y=t.startCropY,b.width=p,r?b.height=b.width/r:b.height=f):d==="sw"?(b.x=t.startCropX+p,b.y=t.startCropY,b.width=Math.abs(p),r?b.height=b.width/r:b.height=f):d==="nw"&&(b.x=t.startCropX+p,b.width=Math.abs(p),r?(b.height=b.width/r,b.y=t.startCropY-b.height):(b.height=Math.abs(f),b.y=t.startCropY+f));const g=R1(b,r,d,i.width,i.height,a,l,n,o);return r||or.xyOrds.indexOf(u)>-1?c=g:or.xOrds.indexOf(u)>-1?(c.x=g.x,c.width=g.width):or.yOrds.indexOf(u)>-1&&(c.y=g.y,c.height=g.height),c.x=qn(c.x,0,i.width-c.width),c.y=qn(c.y,0,i.height-c.height),c}renderCropSelection(){const{ariaLabels:t=or.defaultProps.ariaLabels,disabled:r,locked:n,renderSelectionAddon:o,ruleOfThirds:i,crop:a}=this.props,l=this.getCropStyle();if(a)return v.createElement("div",{style:l,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!r&&!n&&v.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},v.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),v.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),v.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),v.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"nw"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"n"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"ne"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"e"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"se"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"s"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"sw"),role:"button"}),v.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"w"),role:"button"})),o&&v.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:c=>c.stopPropagation()},o(this.state)),i&&v.createElement(v.Fragment,null,v.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),v.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const r={...Ni,...this.props.crop||{}};return gr(r,t.width,t.height)}render(){const{aspect:t,children:r,circularCrop:n,className:o,crop:i,disabled:a,locked:l,style:c,ruleOfThirds:d}=this.props,{cropIsActive:u,newCropIsBeingDrawn:p}=this.state,f=i?this.renderCropSelection():null,b=kT("ReactCrop",o,u&&"ReactCrop--active",a&&"ReactCrop--disabled",l&&"ReactCrop--locked",p&&"ReactCrop--new-crop",i&&t&&"ReactCrop--fixed-aspect",i&&n&&"ReactCrop--circular-crop",i&&d&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return v.createElement("div",{ref:this.componentRef,className:b,style:c},v.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},r),i?v.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},v.createElement("defs",null,v.createElement("mask",{id:`hole-${this.instanceId}`},v.createElement("rect",{width:"100%",height:"100%",fill:"white"}),n?v.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):v.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),v.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,f)}};Ve(Hr,"xOrds",["e","w"]),Ve(Hr,"yOrds",["n","s"]),Ve(Hr,"xyOrds",["nw","ne","se","sw"]),Ve(Hr,"nudgeStep",1),Ve(Hr,"nudgeStepMedium",10),Ve(Hr,"nudgeStepLarge",100),Ve(Hr,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let RT=Hr;const Uo=({title:e="Success!",message:t,onClose:r})=>s.jsxs(U,{color:"white",p:3,bg:"green.500",borderRadius:"md",display:"flex",alignItems:"center",boxShadow:"md",onClick:r,cursor:"pointer",animation:"fadeInSlideUp 0.3s ease-out",sx:{"@keyframes fadeInSlideUp":{"0%":{opacity:0,transform:"translateY(10px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:[s.jsx(U,{mr:3,fontSize:"xl",className:"success-icon",sx:{"@keyframes pulseScale":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"100%":{transform:"scale(1)"}},animation:"pulseScale 0.5s ease-in-out"},children:s.jsx(lh,{})}),s.jsxs(U,{children:[s.jsx(L,{fontWeight:"bold",children:e}),s.jsx(L,{fontSize:"sm",children:t})]})]}),OT=oe.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  color: #2d3748;
  min-height: 100vh;
  background-color: transparent;
`,PT=oe.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #e2e8f0;

  h1 {
    font-weight: 700;
    font-size: 1.8rem;
    margin: 0;
  }
`,MT=oe.div`
  display: flex;
  align-items: center;
  gap: 1rem;

  img {
    height: 80px;
    cursor: pointer;
    transition: transform 0.2s ease;

    &:hover {
      transform: scale(1.03);
    }
  }
`,Fd=oe.div`
  background-color: transparent;
  border-radius: 8px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.05),
    0 1px 3px rgba(0, 0, 0, 0.1);
  margin-bottom: 2rem;
  overflow: hidden;
  transition: box-shadow 0.2s ease;
  border: 1px solid rgba(0, 0, 0, 0.1);

  &:hover {
    box-shadow:
      0 6px 12px rgba(0, 0, 0, 0.05),
      0 3px 6px rgba(0, 0, 0, 0.08);
  }
`,zd=oe.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.25rem 1.5rem;
  background-color: transparent;
  border-bottom: 2px solid #ff8c00;
`,$d=oe.h2`
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
`,Bd=oe.div`
  padding: 1.5rem;
  background-color: transparent;
`,DT=oe.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  grid-gap: 1rem;
  margin-top: 1.25rem;
`,IT=oe.div`
  background-color: rgba(255, 255, 255, 0.5);
  border: 1px solid #e9ecef;
  border-radius: 8px;
  padding: 1rem;
  height: 90px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  position: relative;
  overflow: hidden;
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  color: #4a5568;

  ${({isDefault:e})=>e&&`
    border-left: 3px solid #4a5568;
  `}

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 8px;
    height: 100%;
    background-color: ${({color:e})=>e};
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
  }
`,NT=oe.div`
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  display: flex;
  gap: 0.5rem;
`,LT=oe.button`
  background: none;
  border: none;
  color: #4a5568;
  cursor: pointer;
  font-size: 1rem;
  padding: 0.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: all 0.2s;

  &:hover {
    color: #e53e3e;
  }
`,FT=oe.button`
  background: none;
  border: none;
  color: #4a5568;
  cursor: pointer;
  font-size: 1rem;
  padding: 0.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: all 0.2s;

  &:hover {
    color: #ff8c00;
  }
`,zT=oe.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.5rem;
  position: relative;
`,$T=oe.h3`
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  flex: 1;
  color: #2d3748;
  padding-right: 0.5rem;
  max-width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;

  /* Ensure text wraps nicely */
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.3;
`,BT=oe.span`
  background-color: #ff8c00;
  color: white;
  font-size: 0.7rem;
  padding: 0.1rem 0.4rem;
  border-radius: 4px;
  font-weight: 500;
  position: absolute;
  bottom: 0.5rem;
  right: 0.5rem;
`,qT=oe.div`
  width: 24px;
  height: 24px;
  min-width: 24px;
  border-radius: 6px;
  background-color: ${({color:e})=>e};
  border: 1px solid #e2e8f0;
  margin-right: 0.75rem;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
`,HT=oe.span`
  margin-left: 0.5rem;
  font-size: 1.2rem;
`,tr=oe.button`
  padding: 0.6rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.2s ease;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);

  ${({variant:e})=>e==="primary"?`
        background-color: #FF8C00;
        color: white;
        &:hover {
          background-color: #FF8C00;
          color: white;
          box-shadow: 0 4px 6px rgba(255, 140, 0, 0.4);
        }
        &:active {
          background-color: #CC7000;
        }
      `:e==="danger"?`
        background-color: #e53e3e;
        color: white;
        &:hover {
          background-color: #c53030;
          box-shadow: 0 4px 6px rgba(229, 62, 62, 0.2);
        }
        &:active {
          background-color: #9b2c2c;
        }
      `:`
        background-color: #FF8C00;
        color: white;
        &:hover {
          background-color: #FF8C00;
          color: white;
          box-shadow: 0 4px 6px rgba(255, 140, 0, 0.4);
        }
        &:active {
          background-color: #CC7000;
        }
      `}
`,GT=oe.div`
  display: flex;
  gap: 0.25rem;
  margin-bottom: 2rem;
  border-bottom: 1px solid #e2e8f0;
  background-color: transparent;
`,qd=oe.button`
  background: ${({active:e})=>e?"#FF8C00":"none"};
  border: none;
  padding: 0.85rem 1.5rem;
  font-weight: 500;
  cursor: pointer;
  border-bottom: 2px solid ${({active:e})=>e?"#FF8C00":"transparent"};
  color: ${({active:e})=>e?"white":"#4a5568"};
  transition: all 0.2s;
  position: relative;

  &:hover {
    color: ${({active:e})=>e?"white":"#4a5568"};
    background-color: ${({active:e})=>e?"#FF8C00":"transparent"};
    outline: ${({active:e})=>e?"none":"2px solid #000000"};
    outline-offset: -2px;
  }

  &:after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: ${({active:e})=>e?"#FF8C00":"transparent"};
    transition: transform 0.3s ease;
    transform: scaleX(${({active:e})=>e?"1":"0"});
    transform-origin: left;
  }

  &:hover:after {
    transform: scaleX(1);
    background-color: ${({active:e})=>e?"#FF8C00":"transparent"};
  }
`,Hd=oe.div`
  margin-bottom: 2rem;
  padding: 1.75rem;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 8px;
  border: 1px solid #e9ecef;
  border-left: 3px solid #ff8c00;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    margin-bottom: 1.5rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: #2d3748;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #e2e8f0;
  }
`,Xs=oe.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  background-color: transparent;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,zr=oe.div`
  flex: 1;
  min-width: 200px;
`,$r=oe.label`
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: #4a5568;
`,Wo=oe.input`
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 0.95rem;
  transition: all 0.2s ease;

  &:focus {
    outline: none;
    border-color: #4299e1;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
  }

  &::placeholder {
    color: #a0aec0;
  }
`,UT=oe.div`
  position: relative;
  width: 4rem;
`,WT=oe.button`
  width: 100%;
  padding: 0.6rem;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 1.2rem;
  text-align: center;
  background-color: white;
  cursor: pointer;
  transition: all 0.2s ease;

  &:focus,
  &:hover {
    outline: none;
    border-color: #4299e1;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
  }
`,YT=oe.div`
  display: ${({isOpen:e})=>e?"block":"none"};
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 0.5rem;
  background-color: white;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  z-index: 10;
  padding: 0.75rem;
  width: 350px;
  max-height: 320px;
  overflow-y: auto;
`,Yo=oe.div`
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  grid-gap: 0.5rem;
  margin-bottom: 1rem;
`,Vo=oe.div`
  font-size: 0.8rem;
  font-weight: 600;
  color: #718096;
  margin-bottom: 0.5rem;
  border-bottom: 1px solid #e2e8f0;
  padding-bottom: 0.25rem;
`,Ko=oe.button`
  background: none;
  border: none;
  font-size: 1.2rem;
  padding: 0.5rem;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s;

  &:hover {
    background-color: #f0f0f0;
  }
`,VT=oe.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 5;
`,KT=oe.div`
  position: relative;
`,QT=oe.div`
  width: 100%;
  height: 42px;
  border-radius: 6px;
  border: 1px solid #e2e8f0;
  background-color: ${({color:e})=>e};
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  color: ${({color:e})=>JT(e)?"#2d3748":"white"};
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;

  &:hover {
    border-color: #cbd5e0;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
  }
`,JT=e=>{const t=e.replace("#",""),r=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return(r*299+n*587+o*114)/1e3>125},XT=oe.div`
  position: absolute;
  z-index: 100;
  top: 100%;
  margin-top: 0.5rem;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.06);
  border-radius: 6px;
  overflow: hidden;
  left: 0;
`,ZT=oe.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 90;
  /* Allow clicks to pass through so the picker remains interactive */
  pointer-events: none;
`,O1=oe.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1.5rem;
`,e7=oe.div`
  text-align: center;
  padding: 3.5rem 1.5rem;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 8px;
  margin-bottom: 1.5rem;
  border: 1px dashed #ff8c00;

  p {
    color: #4a5568;
    margin-bottom: 1.5rem;
    font-size: 1.05rem;
  }
`;oe.div`
  margin-top: 0.75rem;
  display: flex;
  gap: 0.5rem;
`;const Gd=oe.p`
  color: #2d3748;
  line-height: 1.6;
  margin-bottom: 1.5rem;
  background-color: rgba(255, 255, 255, 0.5);
  padding: 1rem;
  border-radius: 6px;
  border: 1px solid rgba(0, 0, 0, 0.05);
`,t7=oe.div`
  display: flex;
  gap: 0.5rem;
`,r7=oe.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 2rem;
`,n7=oe.div`
  width: 150px;
  height: 150px;
  border-radius: 50%;
  background-color: #f1f1f1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  color: #ccc;
  position: relative;
  background-image: ${({src:e})=>e?`url(${e})`:"none"};
  background-size: cover;
  background-position: center;
  border: 3px solid #ff8c00;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 1rem;
`,o7=oe.label`
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: #ff8c00;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  transition: all 0.2s;

  &:hover {
    transform: scale(1.1);
    background-color: #ff8c00;
  }

  input {
    display: none;
  }
`,Qo=oe.div`
  color: #e53e3e;
  font-size: 0.875rem;
  margin-top: 0.5rem;
`,P1=oe.button`
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #718096;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  z-index: 2;

  &:hover {
    color: #4a5568;
  }
`,M1=oe.div`
  position: relative;
  width: 100%;
`,s7=oe.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
`,i7=oe.div`
  background-color: white;
  border-radius: 8px;
  padding: 1.5rem;
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
`,a7=oe.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;

  h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2d3748;
  }
`,l7=oe.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1.5rem;
`,c7=oe.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  margin: 0 auto;
`;function d7(e,t,r){return _T(ET({unit:"%",width:90},r,e,t),e,t)}function u7(e,t){const r=document.createElement("canvas"),n=e.naturalWidth/e.width,o=e.naturalHeight/e.height;r.width=t.width,r.height=t.height;const i=r.getContext("2d");return i?(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(e,t.x*n,t.y*o,t.width*n,t.height*o,0,0,t.width,t.height),new Promise(a=>{r.toBlob(l=>{if(!l){console.error("Canvas is empty");return}const c=new FileReader;c.onloadend=()=>{a(c.result)},c.readAsDataURL(l)},"image/jpeg",.92)})):Promise.reject(new Error("No canvas context"))}const h7=()=>{const{user:e,updateProfile:t,refreshUserData:r}=Jt(),{backgroundColor:n,setBackgroundColor:o}=Yb(),i=Qt(),a=ks(),l=Et(),c=Mr(),d=h.useRef(null),u=h.useRef(null),p=new URLSearchParams(a.search),f=p.get("tab"),[b,g]=h.useState(f==="account"?"account":f==="general"?"general":"dispositions"),[m,x]=h.useState(!1),[y,E]=h.useState(!1),[A,M]=h.useState(!1),[k,w]=h.useState(null),[C,_]=h.useState(!1),z=h.useRef(null),[D,S]=h.useState({name:"",color:"#4299e1",emoji:""}),P=["🦷","🪥","😁","😬","🩺","💊","🏥","⚕️","🧑‍⚕️","👩‍⚕️","👨‍⚕️","🔥","✅","❌","📞","💰","⏰","🤝","👋","📊","✨","🚫","💯","🆕","🔄","🔔","🔕","📌","📍","📝","📋","😊","😐","😡","🙁","🤔","👍","👎","🙂","😢","😴","😃","🤗","😎","😱","😇","🤑","🤩","😍","🥺","😤","⭐","🔴","🟢","🔵","⚠️","❓","❗","💼","📅","🏆","🎯","📱","💻","📨","🔒","🔓","🔑","🔍","💡","⚡","📈","📉","💲","💵","💳","🧾","📑","📃","🗂️","📁","📂","📊","📆","🗓️","⏳","⌛","🔄","🔃","🔁","🔂"],[I,F]=h.useState({name:e?.name||"",email:e?.email||"",password:"",confirmPassword:""}),[G,V]=h.useState(e?.profilePicture||null),[B,Z]=h.useState(!1),[Q,ue]=h.useState({}),[ie,X]=h.useState(!1),[J,Ce]=h.useState(""),[Se,ze]=h.useState(),[nt,ot]=h.useState(null),Pe=h.useRef(null),[Fe,Re]=h.useState(!1),xe=()=>{S({name:"",color:"#4299e1",emoji:""}),w(null),x(!1),E(!1),_(!1)},{data:tt,isLoading:Ie,error:_e}=Es({queryKey:["dispositions"],queryFn:async()=>{try{const T=await se.get("/api/dispositions");return T.data.length===0?(await se.post("/api/dispositions/seed-defaults")).data.dispositions:T.data}catch(T){return console.error("Error fetching dispositions:",T),[]}},staleTime:60*1e3}),rt=Zo({mutationFn:async()=>(await se.post("/api/dispositions/seed-defaults")).data,onSuccess:()=>{l({duration:3e3,isClosable:!0,position:"top",render:({onClose:T})=>s.jsx(Uo,{message:"Default dispositions created successfully",onClose:T})}),c.invalidateQueries({queryKey:["dispositions"]})},onError:()=>{l({title:"Error",description:"Failed to create default dispositions",status:"error",duration:3e3,isClosable:!0})}}),ce=Zo({mutationFn:async T=>(await se.post("/api/dispositions",T)).data,onSuccess:()=>{l({duration:3e3,isClosable:!0,position:"top",render:({onClose:T})=>s.jsx(Uo,{message:"Disposition created successfully",onClose:T})}),xe(),c.invalidateQueries({queryKey:["dispositions"]})},onError:T=>{l({title:"Error",description:T.response?.data?.message||"Failed to create disposition",status:"error",duration:3e3,isClosable:!0})}}),Be=Zo({mutationFn:async({id:T,data:W})=>(await se.put(`/api/dispositions/${T}`,W)).data,onSuccess:()=>{l({duration:3e3,isClosable:!0,position:"top",render:({onClose:T})=>s.jsx(Uo,{message:"Disposition updated successfully",onClose:T})}),xe(),c.invalidateQueries({queryKey:["dispositions"]})},onError:T=>{l({title:"Error",description:T.response?.data?.message||"Failed to update disposition",status:"error",duration:3e3,isClosable:!0})}}),Qe=Zo({mutationFn:async T=>(await se.delete(`/api/dispositions/${T}`)).data,onSuccess:()=>{l({duration:3e3,isClosable:!0,position:"top",render:({onClose:T})=>s.jsx(Uo,{message:"Disposition deleted successfully",onClose:T})}),c.invalidateQueries({queryKey:["dispositions"]})},onError:T=>{l({title:"Error",description:T.response?.data?.message||"Failed to delete disposition",status:"error",duration:3e3,isClosable:!0})}}),bt=T=>{if(T.preventDefault(),!D.name){l({title:"Error",description:"Disposition name is required",status:"error",duration:3e3,isClosable:!0});return}const W={...D,name:D.name.substring(0,20)};k?Be.mutate({id:k,data:W}):ce.mutate(W)},Je=T=>{S({name:T.name,color:T.color,emoji:T.emoji||""}),w(T._id),x(!0),window.scrollTo({top:0,behavior:"smooth"})},Ue=T=>{window.confirm("Are you sure you want to delete this disposition? This action cannot be undone.")&&Qe.mutate(T)};h.useEffect(()=>{function T(W){u.current&&!u.current.contains(W.target)&&M(!1)}return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[u]),h.useEffect(()=>{const T=W=>{d.current&&!d.current.contains(W.target)&&E(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),h.useEffect(()=>{e||i("/login")},[e,i]),h.useEffect(()=>{const T=W=>{z.current&&!z.current.contains(W.target)&&_(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const We=T=>{const W=T.target.files?.[0];if(!W){console.log("No file selected");return}if(console.log("File selected:",W.name,"Type:",W.type,"Size:",W.size/1024,"KB"),W.size>2*1024*1024){console.log("File too large:",W.size/1024,"KB"),l({title:"Error",description:"Image size should be less than 2MB",status:"error",duration:3e3,isClosable:!0});return}if(!W.type.startsWith("image/")){console.log("Invalid file type:",W.type),l({title:"Error",description:"Only image files are allowed",status:"error",duration:3e3,isClosable:!0});return}const R=new FileReader;R.onload=()=>{console.log("File read successfully, opening crop modal"),Ce(R.result),X(!0)},R.onerror=q=>{console.error("Error reading file:",q),l({title:"Error",description:"Failed to read image file",status:"error",duration:3e3,isClosable:!0})},R.readAsDataURL(W)},_t=T=>{const{width:W,height:R}=T.currentTarget;ze(d7(W,R,1))},dt=()=>{X(!1),Ce(""),ze(void 0),ot(null)},Xt=async()=>{if(nt&&Pe.current)try{const T=await u7(Pe.current,nt);console.log("Cropped image generated:",T?"Success":"Failed"),V(T),X(!1),Ce(""),ze(void 0),ot(null)}catch(T){console.error("Error cropping image:",T),l({title:"Error",description:"Failed to crop image",status:"error",duration:3e3,isClosable:!0})}},st=async T=>{T.preventDefault(),Re(!0);const W={};if(I.name.trim()||(W.name="Name is required"),I.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)||(W.email="Invalid email format"):W.email="Email is required",I.password&&I.password.length<6&&(W.password="Password must be at least 6 characters"),I.password!==I.confirmPassword&&(W.confirmPassword="Passwords do not match"),Object.keys(W).length>0){ue(W),Re(!1);return}const R={name:I.name,email:I.email};I.password&&(R.password=I.password),G&&(R.profilePicture=G,console.log("Sending profile picture in update:",G.substring(0,50)+"..."));try{await t(R),await r(),l({duration:3e3,isClosable:!0,position:"top",render:({onClose:q})=>s.jsx(Uo,{message:"Profile updated successfully",onClose:q})}),F(q=>({...q,password:"",confirmPassword:""})),ue({})}catch(q){const re=q.response?.data?.message||"Failed to update profile";l({title:"Error",description:re,status:"error",duration:3e3,isClosable:!0}),ue({general:re})}finally{Re(!1)}};h.useEffect(()=>{e&&(F(T=>({...T,name:e.name||T.name,email:e.email||T.email})),e.profilePicture&&V(e.profilePicture))},[e]);const it=T=>{g(T),i(`/settings?tab=${T}`)};if(h.useEffect(()=>{const T=p.get("tab");T==="account"?g("account"):T==="general"?g("general"):T==="dispositions"&&g("dispositions")},[a.search]),Ie)return s.jsx("div",{children:"Loading..."});if(_e)return s.jsx("div",{children:"Error loading settings"});const yt=T=>{S({...D,emoji:T}),_(!1)};return s.jsxs(OT,{className:"settings-container",children:[s.jsxs(PT,{children:[s.jsxs(MT,{children:[s.jsx("img",{src:"/images/HEADER LOGO.png",alt:"Crokodial Logo",style:{height:"60px",width:"auto"},onClick:()=>i("/")}),s.jsx("h1",{children:"Settings"})]}),s.jsxs(tr,{variant:"secondary",onClick:()=>i("/"),style:{width:"160px"},children:[s.jsx("img",{src:"/images/FORWARD.png",alt:"Back",style:{width:"24px",height:"24px",marginRight:"6px",transform:"scaleX(-1)"}}),"Back to Dashboard"]})]}),s.jsxs(GT,{className:"tab-container",children:[s.jsx(qd,{active:b==="general",onClick:()=>it("general"),children:"General"}),s.jsx(qd,{active:b==="dispositions",onClick:()=>it("dispositions"),children:"Dispositions"}),s.jsx(qd,{active:b==="account",onClick:()=>it("account"),children:"Account"})]}),b==="general"&&s.jsxs(Fd,{className:"section-container",children:[s.jsx(zd,{className:"section-header",children:s.jsx($d,{children:"Appearance Settings"})}),s.jsxs(Bd,{className:"section-content",children:[s.jsx(Gd,{children:"Customize the look and feel of your Crokodial application."}),s.jsxs(Hd,{className:"form-container",children:[s.jsx("h3",{children:"Theme Options"}),s.jsx(Xs,{children:s.jsxs(zr,{children:[s.jsx($r,{htmlFor:"colorPicker",children:"Background Color"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[s.jsx("input",{type:"color",id:"colorPicker",value:n,onChange:T=>{const W=T.target.value;document.body.style.backgroundColor=W,document.documentElement.style.setProperty("--app-background-color",W),o(W),localStorage.setItem("crokodial_bg_color",W)},style:{width:"60px",height:"60px",border:"none",boxShadow:"0 0 5px rgba(0,0,0,0.2)",cursor:"pointer"}}),s.jsx("div",{style:{padding:"0.5rem 1rem",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:"white",minWidth:"100px"},children:n}),s.jsx(tr,{type:"button",variant:"secondary",onClick:()=>{const T="#f5f2e9";document.body.style.backgroundColor=T,document.documentElement.style.setProperty("--app-background-color",T),o(T),localStorage.setItem("crokodial_bg_color",T)},style:{marginLeft:"auto"},children:"Reset to Default"})]}),s.jsx(L,{fontSize:"sm",color:"gray.600",mt:2,children:"Pick a color to change the background of the entire application."})]})})]})]})]}),b==="dispositions"&&s.jsxs(Fd,{className:"section-container",children:[s.jsxs(zd,{className:"section-header",children:[s.jsx($d,{children:"Manage Dispositions"}),s.jsxs(t7,{children:[m?s.jsxs(tr,{variant:"secondary",onClick:xe,children:[s.jsx(uo,{})," Cancel"]}):s.jsxs(tr,{variant:"primary",onClick:()=>x(!0),children:[s.jsx(ms,{})," Create New"]}),s.jsxs(tr,{variant:"secondary",onClick:()=>rt.mutate(),children:[s.jsx(Z4,{})," Restore Defaults"]})]})]}),s.jsxs(Bd,{children:[m&&s.jsxs(Hd,{children:[s.jsx("h3",{children:k?"Edit Disposition":"Create New Disposition"}),s.jsxs("form",{onSubmit:bt,children:[s.jsxs(Xs,{children:[s.jsxs(zr,{children:[s.jsx($r,{htmlFor:"name",children:"Disposition Name"}),s.jsx(Wo,{id:"name",type:"text",value:D.name,onChange:T=>S({...D,name:T.target.value}),placeholder:"e.g., Hot Lead, Call Back",maxLength:20,required:!0}),s.jsxs("div",{style:{fontSize:"0.8rem",color:"#718096",marginTop:"0.25rem"},children:[D.name.length,"/20 characters"]})]}),s.jsxs(zr,{children:[s.jsx($r,{htmlFor:"emoji",children:"Emoji (Optional)"}),s.jsxs(UT,{children:[s.jsx(WT,{type:"button",onClick:()=>_(!C),children:D.emoji||s.jsx(eb,{})}),C&&s.jsxs(s.Fragment,{children:[s.jsx(VT,{onClick:()=>_(!1)}),s.jsxs(YT,{isOpen:C,ref:z,children:[s.jsx(Vo,{children:"Dental"}),s.jsx(Yo,{children:P.slice(0,11).map(T=>s.jsx(Ko,{onClick:()=>yt(T),children:T},T))}),s.jsx(Vo,{children:"Status"}),s.jsx(Yo,{children:P.slice(11,31).map(T=>s.jsx(Ko,{onClick:()=>yt(T),children:T},T))}),s.jsx(Vo,{children:"Emotions"}),s.jsx(Yo,{children:P.slice(31,51).map(T=>s.jsx(Ko,{onClick:()=>yt(T),children:T},T))}),s.jsx(Vo,{children:"Symbols"}),s.jsx(Yo,{children:P.slice(51,71).map(T=>s.jsx(Ko,{onClick:()=>yt(T),children:T},T))}),s.jsx(Vo,{children:"Business"}),s.jsx(Yo,{children:P.slice(71).map(T=>s.jsx(Ko,{onClick:()=>yt(T),children:T},T))})]})]})]})]}),s.jsxs(zr,{children:[s.jsx($r,{htmlFor:"color",children:"Color"}),s.jsxs(KT,{children:[s.jsx(QT,{color:D.color,onClick:()=>E(!y),children:D.color}),y&&s.jsxs(XT,{ref:d,children:[s.jsx(ZT,{onClick:()=>E(!1)}),s.jsx(fT,{color:D.color,onChangeComplete:T=>S(W=>({...W,color:T.hex})),disableAlpha:!0,presetColors:["#FF8C00","#D53F8C","#E53E3E","#DD6B20","#D69E2E","#38A169","#319795","#3182CE","#4299E1","#805AD5","#6B46C1","#718096","#2D3748"]})]})]})]})]}),s.jsxs(O1,{children:[s.jsx(tr,{type:"button",variant:"secondary",onClick:xe,disabled:Ie||ce.isPending||Be.isPending||Qe.isPending,children:"Cancel"}),s.jsx(tr,{type:"submit",disabled:Ie||ce.isPending||Be.isPending||Qe.isPending,children:k?"Update":"Create"})]})]})]}),s.jsx(Gd,{children:"Customize your lead dispositions to fit your workflow. Each disposition has a unique color that will be used throughout the app. You can modify or delete any disposition, including the default ones."}),tt&&tt.length>0?s.jsx(DT,{children:tt.map(T=>s.jsxs(IT,{color:T.color,isDefault:T.isDefault,children:[s.jsxs(NT,{children:[s.jsx(FT,{onClick:()=>Je(T),title:"Edit",children:s.jsx(Si,{})}),s.jsx(LT,{onClick:()=>Ue(T._id),title:"Delete",children:s.jsx(uo,{})})]}),s.jsx(zT,{children:s.jsxs($T,{children:[s.jsx(qT,{color:T.color}),T.name.length>20?`${T.name.substring(0,20)}...`:T.name,T.emoji&&s.jsx(HT,{children:T.emoji})]})}),T.isDefault&&s.jsx(BT,{children:"Default"})]},T._id))}):s.jsxs(e7,{children:[s.jsx("p",{children:'No dispositions found. Click "Restore Defaults" to create the default set or "Create New" to add your own.'}),s.jsxs(tr,{variant:"primary",onClick:()=>x(!0),style:{marginTop:"1rem"},children:[s.jsx(ms,{})," Create New Disposition"]})]})]})]}),b==="account"&&s.jsxs(Fd,{className:"section-container",children:[s.jsx(zd,{className:"section-header",children:s.jsx($d,{children:"Account Settings"})}),s.jsxs(Bd,{className:"section-content",children:[s.jsx(Gd,{children:"Update your personal information and manage your account settings."}),s.jsxs(Hd,{className:"form-container",children:[s.jsx("h3",{children:"Personal Information"}),s.jsxs("form",{onSubmit:st,children:[s.jsxs(r7,{children:[s.jsxs(n7,{src:G||void 0,children:[!G&&(e?.name?.[0]||e?.email?.[0]||s.jsx(vu,{})),s.jsxs(o7,{htmlFor:"profile-picture",children:[s.jsx(eC,{}),s.jsx("input",{type:"file",id:"profile-picture",accept:"image/*",onChange:We})]})]}),s.jsx(L,{fontSize:"sm",color:"gray.500",children:G?"Profile picture selected":"No profile picture set"}),s.jsxs(L,{fontSize:"xs",color:"gray.400",mt:1,children:["Current user profile: ",e?.profilePicture?"Exists":"None"]}),s.jsxs(L,{fontSize:"xs",color:"gray.400",children:["Selected profile: ",G?"Selected":"None"]})]}),!1,s.jsxs(Xs,{children:[s.jsxs(zr,{children:[s.jsxs($r,{htmlFor:"name",children:[s.jsx(vu,{style:{marginRight:"0.5rem"}})," Full Name"]}),s.jsx(Wo,{id:"name",type:"text",value:I.name,onChange:T=>F({...I,name:T.target.value}),placeholder:"Enter your full name",autoComplete:"name"}),Q.name&&s.jsx(Qo,{children:Q.name})]}),s.jsxs(zr,{children:[s.jsxs($r,{htmlFor:"email",children:[s.jsx(kr,{style:{marginRight:"0.5rem"}})," Email Address"]}),s.jsx(Wo,{id:"email",type:"email",value:I.email,onChange:T=>F({...I,email:T.target.value}),placeholder:"Enter your email address",autoComplete:"email"}),Q.email&&s.jsx(Qo,{children:Q.email})]})]}),s.jsxs(Xs,{children:[s.jsxs(zr,{children:[s.jsxs($r,{htmlFor:"password",children:[s.jsx(nf,{style:{marginRight:"0.5rem"}})," New Password"]}),s.jsxs(M1,{children:[s.jsx(Wo,{id:"password",type:B?"text":"password",value:I.password,onChange:T=>F({...I,password:T.target.value}),placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),s.jsx(P1,{type:"button",onClick:()=>Z(!B),"aria-label":B?"Hide password":"Show password",title:B?"Hide password":"Show password",children:B?s.jsx(fu,{}):s.jsx(gu,{})})]}),Q.password&&s.jsx(Qo,{children:Q.password})]}),s.jsxs(zr,{children:[s.jsxs($r,{htmlFor:"confirmPassword",children:[s.jsx(nf,{style:{marginRight:"0.5rem"}})," Confirm New Password"]}),s.jsxs(M1,{children:[s.jsx(Wo,{id:"confirmPassword",type:B?"text":"password",value:I.confirmPassword,onChange:T=>F({...I,confirmPassword:T.target.value}),placeholder:"Confirm your new password",disabled:!I.password,autoComplete:"new-password"}),s.jsx(P1,{type:"button",onClick:()=>Z(!B),"aria-label":B?"Hide password":"Show password",title:B?"Hide password":"Show password",children:B?s.jsx(fu,{}):s.jsx(gu,{})})]}),Q.confirmPassword&&s.jsx(Qo,{children:Q.confirmPassword})]})]}),Q.general&&s.jsx("div",{style:{marginBottom:"1rem"},children:s.jsx(Qo,{children:Q.general})}),s.jsx(O1,{children:s.jsx(tr,{type:"submit",variant:"primary",disabled:Fe,children:Fe?"Saving...":"Save Changes"})})]})]})]})]}),ie&&s.jsx(s7,{children:s.jsxs(i7,{children:[s.jsxs(a7,{children:[s.jsx("h2",{children:"Adjust Profile Picture"}),s.jsx("button",{onClick:dt,children:s.jsx(uo,{})})]}),s.jsxs(c7,{children:[s.jsx("p",{style:{marginBottom:"1rem",color:"#4a5568",fontSize:"0.9rem"},children:"Drag the crop area to adjust how your profile picture appears."}),s.jsx(RT,{crop:Se,onChange:(T,W)=>ze(W),onComplete:T=>ot(T),aspect:1,circularCrop:!0,children:s.jsx("img",{ref:Pe,src:J,style:{maxHeight:"50vh",maxWidth:"100%"},onLoad:_t})})]}),s.jsxs(l7,{children:[s.jsxs(tr,{onClick:dt,children:[s.jsx(uo,{})," Cancel"]}),s.jsxs(tr,{variant:"primary",onClick:Xt,disabled:!nt,children:[s.jsx(lh,{})," Apply Crop"]})]})]})})]})};class p7 extends h.Component{constructor(t){super(t),this.resetErrorBoundary=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("GroupMeChat Error Boundary caught an error:",t),console.error("Error info:",r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsxs(U,{p:4,bg:"gray.800",color:"white",borderRadius:"md",textAlign:"center",children:[s.jsx(L,{mb:4,children:"Something went wrong loading the GroupMe component."}),s.jsx(ne,{colorScheme:"blue",onClick:this.resetErrorBoundary,children:"Try Again"})]}):this.props.children}}const Gu=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authToken"),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("All authentication data cleared")},f7=()=>{const e=localStorage.getItem("token");if(e)try{const r=JSON.parse(atob(e.split(".")[1])).iat;Math.floor(Date.now()/1e3)-r>86400&&(console.log("Detected old JWT token, clearing auth data..."),Gu(),window.location.reload())}catch{console.error("Invalid token format, clearing auth data..."),Gu(),window.location.reload()}},Vy=h.createContext(void 0),D1={pinned:!1,notifications:!1},g7=({children:e})=>{const[t,r]=h.useState(null),[n,o]=h.useState(!0),[i,a]=h.useState(null),[l,c]=h.useState([]),[d,u]=h.useState({}),[p,f]=h.useState(null),[b,g]=h.useState(!1),[m,x]=h.useState({}),[y,E]=h.useState(!1),A=h.useRef(null),M=h.useCallback(async()=>{console.log("🔍 GroupMeContext: refreshConfig called"),o(!0),a(null);const G=(await bi(()=>Promise.resolve().then(()=>pu),void 0)).getToken();if(!G){console.warn("❌ GroupMeContext: No auth token found, cannot fetch config"),r(null),o(!1);return}console.log("✅ GroupMeContext: Auth token found, fetching config");try{se.defaults.headers.common.Authorization=G.startsWith("Bearer ")?G:`Bearer ${G}`,console.log("🔄 GroupMeContext: Making API call to /api/groupme/config");const V=await se.get("/api/groupme/config");if(console.log("🔄 GroupMeContext: Config API response:",V.data),V.data&&V.data.accessToken)console.log("✅ GroupMeContext: accessToken found in response"),r(V.data),localStorage.setItem("groupme_config",JSON.stringify(V.data));else{console.log("⚠️ GroupMeContext: No accessToken in response data");const B=localStorage.getItem("groupme_config");B?(console.log("🔄 GroupMeContext: Loading config from localStorage"),r(JSON.parse(B))):(console.log("⚠️ GroupMeContext: No saved config in localStorage"),r(null))}}catch(V){if(V.response?.status===401)console.log("⚠️ GroupMeContext: No GroupMe config found (401) - this is normal if not connected"),r(null),localStorage.removeItem("groupme_config");else{console.error("❌ GroupMeContext: Error fetching GroupMe config:",V),console.error("❌ Response status:",V.response?.status),console.error("❌ Response data:",V.response?.data),a("Failed to load GroupMe configuration");const B=localStorage.getItem("groupme_config");r(B?JSON.parse(B):null)}}finally{o(!1)}},[]),k=h.useCallback(async()=>{const G=(await bi(()=>Promise.resolve().then(()=>pu),void 0)).getToken();if(!G){console.warn("❌ GroupMeContext: No auth token found, cannot fetch groups"),a("Authentication token not found. Please log in again."),c([]),g(!1);return}t?t.accessToken?(console.log("🔍 GroupMeContext: refreshGroups called with token:",t.accessToken?"present":"missing"),console.log("🔍 GroupMeContext: Config state:",{hasToken:!!t.accessToken,hasGroups:!!t.groups,groupsCount:t.groups?Object.keys(t.groups).length:0})):console.log("⚠️ GroupMeContext: Config exists but no accessToken, will try anyway"):console.log("⚠️ GroupMeContext: No config but we have auth token, will try anyway"),se.defaults.headers.common.Authorization=G.startsWith("Bearer ")?G:`Bearer ${G}`,console.log("✅ GroupMeContext: Auth token set on axiosInstance"),g(!0);try{console.log("🔄 GroupMeContext: Making API call to /api/groupme/groups");const V=await se.get("/api/groupme/groups");console.log("✅ GroupMeContext: Groups API response:",V.data),console.log("✅ GroupMeContext: Response status:",V.status),console.log("✅ GroupMeContext: Response headers:",V.headers);let B=[];if(V.data&&V.data.success&&V.data.data)console.log("✅ GroupMeContext: Using wrapped response format"),B=V.data.data;else if(Array.isArray(V.data))console.log("✅ GroupMeContext: Using direct array format"),B=V.data;else throw console.error("❌ GroupMeContext: Unexpected response format:",V.data),new Error("Unexpected API response format");if(console.log("🔍 GroupMeContext: Raw groups data:",B),!Array.isArray(B)||B.length===0){console.warn("⚠️ GroupMeContext: No groups found or invalid data format"),c([]);return}const Z=B.map(Q=>{console.log("🔍 GroupMeContext: Raw group data fields:",Object.keys(Q));const ue={groupId:Q.groupId||Q.id||Q.group_id,groupName:Q.groupName||Q.name,image_url:Q.image_url,last_message:Q.last_message,messages_count:Q.messages_count};return console.log("✅ GroupMeContext: Formatted group:",ue),ue});console.log("✅ GroupMeContext: All formatted groups:",Z),Z.length===0&&console.warn("⚠️ GroupMeContext: No groups after formatting"),c(Z)}catch(V){console.error("❌ GroupMeContext: Error fetching GroupMe groups:",V),V.response&&console.error("❌ GroupMeContext: Error response:",{status:V.response.status,data:V.response.data,headers:V.response.headers}),a("Failed to load GroupMe groups."),c([])}finally{g(!1)}},[t,se]),w=h.useCallback(async F=>{if(!t||!t.accessToken){console.log("GroupMeContext: fetchMessages - No token, skipping fetch for group:",F);return}console.log(`GroupMeContext: fetchMessages called for group ${F}`),g(!0);try{const G=Date.now(),V=await se.get(`/api/groupme/groups/${F}/messages`,{params:{limit:100,before_id:null,_:G},headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(V.data&&V.data.success&&Array.isArray(V.data.data.messages)){console.log(`GroupMeContext: Raw messages received for group ${F}, count:`,V.data.data.messages.length);const B=[...V.data.data.messages].sort((Z,Q)=>{const ue=J=>J.created_at?typeof J.created_at=="number"?J.created_at>9999999999?J.created_at:J.created_at*1e3:new Date(J.created_at).getTime():J.createdAt?new Date(J.createdAt).getTime():0,ie=ue(Z);return ue(Q)-ie});if(B.length>0){const Z=B[0],Q=B[B.length-1],ue=new Date(Z.created_at||Z.createdAt).toLocaleString(),ie=new Date(Q.created_at||Q.createdAt).toLocaleString();console.log(`GroupMeContext: Message range for ${F}:`,{newest:ue,oldest:ie,count:B.length})}u(Z=>{const Q=Z[F]?.length||0;return console.log(`GroupMeContext: Updating messages for ${F}: was ${Q}, now ${B.length}`),{...Z,[F]:B}})}else console.log(`GroupMeContext: No valid messages received for group ${F}`),u(B=>({...B,[F]:[]}))}catch(G){console.error(`GroupMeContext: Error fetching messages for group ${F}:`,G),a("Failed to load messages"),u(V=>({...V,[F]:[]}))}finally{g(!1)}},[t,se]),C=h.useCallback(async F=>{console.log("GroupMeContext: saveConfig called"),g(!0),a(null);try{await se.post("/api/groupme/config",F),r(F),localStorage.setItem("groupme_config",JSON.stringify(F))}catch(G){throw console.error("Error saving GroupMe config:",G),a("Failed to save GroupMe configuration"),G}finally{g(!1)}},[]),_=h.useCallback(async(F,G)=>{if(!t||!t.accessToken||!G.trim()){console.log("GroupMeContext: sendMessage - Prerequisites not met.");return}console.log(`GroupMeContext: sendMessage to group ${F} with text: "${G}"`),g(!0);try{await se.post(`/api/groupme/groups/${F}/messages`,{text:G}),console.log(`GroupMeContext: Message sent to group ${F}`),await w(F)}catch(V){console.error(`Error sending message to group ${F}:`,V),a("Failed to send message.")}finally{g(!1)}},[t,w,se]);h.useEffect(()=>{if(!localStorage.getItem("token")||A.current?.readyState===WebSocket.OPEN||A.current?.readyState===WebSocket.CONNECTING)return;const G=window.location.protocol==="https:"?"wss://":"ws://",V=window.location.hostname,B=window.location.port,Z=`${G}${V}:${B}`;console.log("GroupMeContext: Attempting to connect to WebSocket at",Z);let Q,ue=!1;const ie=()=>{if(ue||A.current?.readyState===WebSocket.OPEN)return;const X=new WebSocket(Z);A.current=X,X.onopen=()=>{console.log("GroupMeContext: WebSocket connection established."),E(!0);const J=localStorage.getItem("token");J&&X.send(JSON.stringify({type:"authenticate",token:J}))},X.onmessage=J=>{try{const Ce=JSON.parse(J.data);if(console.log("GroupMeContext: WebSocket message received:",Ce),Ce.type==="NEW_GROUPME_MESSAGE"){const Se=Ce.payload;u(ze=>{const nt=ze[Se.groupId]||[],ot=[Se,...nt.filter(Pe=>Pe.messageId!==Se.messageId)].sort((Pe,Fe)=>new Date(Fe.createdAt).getTime()-new Date(Pe.createdAt).getTime());return{...ze,[Se.groupId]:ot}})}else Ce.type==="GROUP_UPDATE"?(console.log("GroupMeContext: Received GROUP_UPDATE"),k()):Ce.type==="auth_success"?console.log("GroupMeContext: WebSocket authenticated successfully."):Ce.type==="auth_failure"&&(console.warn("GroupMeContext: WebSocket authentication failed:",Ce.message,Ce.code),(Ce.code==="TOKEN_MISMATCH"||Ce.code==="INVALID_TOKEN")&&(console.warn("JWT token mismatch detected (dev mode safeguard)"),Gu(),window.location.href="/login"),ue=!0);Ce&&Ce.type==="LEAD_NOTES_UPDATED"&&window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify(Ce)}))}catch(Ce){console.error("GroupMeContext: Error processing WebSocket message:",Ce)}},X.onclose=()=>{console.log("GroupMeContext: WebSocket connection closed."),E(!1),A.current=null,ue||(Q=setTimeout(()=>{console.log("GroupMeContext: Attempting to reconnect..."),ie()},5e3))},X.onerror=J=>{console.error("GroupMeContext: WebSocket error:",J)}};return ie(),()=>{ue=!0,clearTimeout(Q),A.current&&A.current.readyState===WebSocket.OPEN&&(console.log("GroupMeContext: Closing WebSocket connection on unmount."),A.current.close()),A.current=null}},[]),h.useEffect(()=>{M()},[M]),h.useEffect(()=>{t&&t.accessToken&&(console.log("GroupMeContext: Config updated with accessToken, calling refreshGroups."),k())},[t,k]),h.useEffect(()=>{const F=localStorage.getItem("groupme_preferences");if(F)try{x(JSON.parse(F))}catch(G){console.error("Error loading GroupMe preferences from localStorage:",G)}},[]),h.useEffect(()=>{Object.keys(m).length>0&&localStorage.setItem("groupme_preferences",JSON.stringify(m))},[m]);const z=h.useCallback(F=>{x(G=>{const V=G[F]||{...D1};return{...G,[F]:{...V,pinned:!V.pinned}}})},[]),D=h.useCallback(F=>{x(G=>{const V=G[F]||{...D1};return{...G,[F]:{...V,notifications:!V.notifications}}})},[]),S=h.useCallback(F=>!!m[F]?.pinned,[m]),P=h.useCallback(F=>!!m[F]?.notifications,[m]),I=v.useMemo(()=>({config:t,loading:n,error:i,saveConfig:C,refreshConfig:M,groups:l,activeGroupId:p,setActiveGroupId:f,messages:d,isLoading:b,sendMessage:_,fetchMessages:w,refreshGroups:k,groupPreferences:m,togglePinned:z,toggleNotifications:D,isPinned:S,hasNotifications:P,isWebSocketConnected:y}),[t,n,i,C,M,l,p,d,b,_,w,k,m,z,D,S,P,y]);return s.jsx(Vy.Provider,{value:I,children:e})},ap=()=>{const e=h.useContext(Vy);if(e===void 0)throw new Error("useGroupMeConfig must be used within a GroupMeProvider");return e},I1=Oe.create({baseURL:"",withCredentials:!0,headers:{"Content-Type":"application/json"}}),dn=Oe.create({baseURL:"/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});dn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));dn.interceptors.response.use(e=>e,async e=>{console.error("OAuth API Error Details:",{status:e.response?.status,data:e.response?.data,url:e.config?.url,method:e.config?.method,headers:e.config?.headers});const t=e.config?.url?.includes("/oauth/")||e.config?.url?.includes("/groupme/")||e.config?.url?.includes("api.groupme.com")||e.config?.url?.includes("oauth.groupme.com");console.log("Is OAuth/GroupMe endpoint:",t,"URL:",e.config?.url);const r=document.referrer===window.location.href,n=window.location.pathname;return e.response?.status===401&&!t&&!r&&n!=="/login"?(console.warn("Non-OAuth 401 error detected - logging out user"),localStorage.removeItem("token"),sessionStorage.setItem("redirect_after_login",window.location.pathname),window.location.href="/login"):e.response?.status===401&&(console.log("OAuth/GroupMe-related 401 error or refresh - NOT logging out user"),console.log("Context:",{isOAuthEndpoint:t,isRefresh:r,currentPath:n})),Promise.reject(e)});class m7{async checkConnectionStatus(){try{const t=await dn.get("/groupme/oauth/status");return{connected:t.data.connected,connectedAt:t.data.connectedAt?new Date(t.data.connectedAt):void 0,email:t.data.email}}catch(t){return console.error("Error checking GroupMe connection status:",t),{connected:!1}}}async initiateOAuth(t){console.log("=== groupMeOAuthService.initiateOAuth ==="),console.log("Input userId:",t),console.log("API endpoint:","/groupme/oauth/initiate"),console.log("Request payload:",{userId:t});try{console.log("Making POST request to /groupme/oauth/initiate");const r=await dn.post("/groupme/oauth/initiate",{userId:t});console.log("Raw API response:",r),console.log("Response status:",r.status),console.log("Response headers:",r.headers),console.log("Response data:",r.data);const n=r.data.data||r.data;return console.log("Extracted result:",n),n}catch(r){throw console.error("=== API CALL FAILED ==="),console.error("Error in initiateOAuth:",r),console.error("Error config:",r?.config),console.error("Error request:",r?.request),console.error("Error response:",r?.response),r}}async handleOAuthCallback(t,r){if(console.log("=== groupMeOAuthService.handleOAuthCallback ==="),console.log("Code received:",t?"Yes":"No"),console.log("Code length:",t?.length),console.log("State received:",r),!t)throw console.error("No code provided to handleOAuthCallback"),new Error("No authorization code provided");if(!r)throw console.error("No state parameter provided to handleOAuthCallback"),new Error("No state parameter provided");try{console.log("Making POST request to /groupme/oauth/callback"),console.log("Request payload:",{code:t?`${t.substring(0,10)}...`:null,state:r});const n=await I1.post("/api/groupme/oauth/callback",{code:t,state:r});return console.log("Callback response received:",n),console.log("Response status:",n.status),console.log("Response data:",n.data),console.log("OAuth callback successful"),n.data}catch(n){throw console.error("=== OAuth Callback Error ==="),console.error("Error object:",n),console.error("Error message:",n?.message),console.error("Error response:",n?.response),console.error("Error response data:",n?.response?.data),console.error("Error response status:",n?.response?.status),console.error("Error stack:",n?.stack),n?.response?.data?.message?.includes("token is no longer valid")?(console.error("Token validation failed - token expired or invalid"),new Error("GroupMe token expired or invalid. Please try connecting again.")):n}}async handleManualToken(t){await dn.post("/groupme/save-manual-token",{token:t})}async disconnect(){await dn.post("/groupme/oauth/disconnect")}async handleOAuthCode(t,r){if(console.log("groupMeOAuthService.handleOAuthCode",{codeLen:t?.length,state:r}),!t||!r)throw new Error("Missing code or state");await I1.post("/api/groupme/oauth/callback",{code:t,state:r})}async saveAccessToken(t){if(console.log("=== groupMeOAuthService.saveAccessToken ==="),console.log("Token received (length):",t?t.length:0),!t)throw console.error("Missing GroupMe access token"),new Error("Missing GroupMe access token");try{console.log("Sending token to server..."),await dn.post("/groupme/token",{access_token:t}),console.log("Token saved successfully")}catch(r){throw console.error("Failed to save GroupMe token:",r),console.error("Error response:",r?.response?.data),r}}async handleImplicitCallback(){console.log("=== groupMeOAuthService.handleImplicitCallback ===");const t=window.location.hash.substring(1);if(console.log("URL hash:",t?"present":"missing"),!t)return console.error("No URL hash found - implicit flow should include access_token in URL fragment"),!1;const r=new URLSearchParams(t),n=r.get("access_token"),o=r.get("state");if(console.log("Extracted from hash - access_token:",n?"present":"missing"),console.log("Extracted from hash - state:",o?"present":"missing"),!n)return console.error("No access_token found in URL hash"),!1;try{return await this.saveAccessToken(n),console.log("Access token saved successfully"),!0}catch(i){return console.error("Failed to save access token:",i),!1}}}const ir=new m7,x7=e=>{const{loading:t,config:r,refreshGroups:n}=ap(),[o,i]=h.useState(!1),[a,l]=h.useState(!1),[c,d]=h.useState(!1),{user:u}=Jt(),p=Et();h.useEffect(()=>{(async()=>{try{console.log("🔍 GroupMeChatWrapper: Checking connection status...");const m=await ir.checkConnectionStatus();console.log("✅ GroupMeChatWrapper: Connection status:",m),l(m.connected);const x=localStorage.getItem("token");if(console.log("🔑 Auth token in localStorage:",x?"Present":"Not present"),x)try{const y=JSON.parse(atob(x.split(".")[1])),E=new Date(y.exp*1e3);console.log("🕒 Token expiration:",E.toLocaleString()),console.log("🕒 Is token expired:",E<new Date?"Yes":"No")}catch(y){console.error("📛 Error parsing token:",y)}}catch(m){console.error("❌ GroupMeChatWrapper: Error checking GroupMe connection status:",m)}})()},[]),h.useEffect(()=>{console.log("🔄 GroupMeChatWrapper: Checking if should fetch groups"),console.log("🔄 isConnected:",a),console.log("🔄 config:",r?"Present":"Not present"),console.log("🔄 config?.accessToken:",r?.accessToken?"Present":"Not present"),console.log("🔄 refreshGroups function:",n?"Available":"Not available"),a&&r?.accessToken&&n?(console.log("✅ GroupMeChatWrapper: Auto-fetching groups on mount"),i(!1),n().then(()=>{console.log("✅ GroupMeChatWrapper: Groups fetched successfully"),setTimeout(()=>{i(!0)},500)}).catch(g=>{console.error("❌ GroupMeChatWrapper: Error auto-fetching groups:",g),g.response&&(console.error("❌ Response status:",g.response.status),console.error("❌ Response data:",g.response.data)),i(!0)})):(console.log("ℹ️ GroupMeChatWrapper: Not auto-fetching groups because:",a?"✅ connected":"❌ not connected",r?.accessToken?"✅ has token":"❌ no token",n?"✅ has refreshGroups":"❌ no refreshGroups"),a&&!r?.accessToken&&(console.log("🔍 Connected but no token in config - checking API directly"),Oe.get("/api/groupme/config").then(g=>{console.log("🔍 Direct API response for /api/groupme/config:",g.data),g.data&&g.data.accessToken?console.log("✅ Config API has token, but it wasn't loaded correctly in context"):console.log("❌ Config API also has no token")}).catch(g=>{console.error("❌ Error fetching config directly:",g),g.response&&(console.error("❌ Response status:",g.response.status),console.error("❌ Response data:",g.response.data))})))},[a,r,n]),h.useEffect(()=>{if(!t){const g=setTimeout(()=>{i(!0)},100);return()=>clearTimeout(g)}},[t]),h.useEffect(()=>{const g=m=>{console.log("⭐ GroupMeChatWrapper: Auth token restored event received");const x=Wr();console.log("🔑 Token after restoration:",x?"Present":"Not present"),i(!1),n?(console.log("🔄 Manually refreshing groups after token restoration"),setTimeout(()=>{n().then(()=>{console.log("✅ Groups refreshed after token restoration"),l(!0),i(!0)}).catch(y=>{console.error("❌ Error refreshing groups after token restoration:",y),i(!0)})},500)):i(!0)};return window.addEventListener(go,g),()=>{window.removeEventListener(go,g)}},[n]);const f=async()=>{if(!u?.id){console.error("No user ID found, cannot connect GroupMe"),p({title:"Login required",description:"Please log in before connecting GroupMe.",status:"error",duration:4e3,isClosable:!0});return}console.log("🔄 Backing up authentication token before OAuth flow");const g=Wr();g&&(console.log("🔑 Storing auth token for backup - token length:",g.length),localStorage.setItem("auth_token_backup",g),sessionStorage.setItem("auth_token_backup",g)),ih()||console.warn("⚠️ authTokenService.backupCurrentToken() failed - using manual backup"),sessionStorage.setItem("groupme_return_url",window.location.pathname),d(!0);try{console.log("🔄 Initiating GroupMe OAuth...");const x=await ir.initiateOAuth(u.id);console.log("✅ OAuth response received:",x);let{authUrl:y}=x;if(!y||!y.includes("oauth.groupme.com"))throw new Error("Invalid authorization URL received from server");y.includes("login_dialog")&&(console.warn("Detected outdated login_dialog endpoint, replacing with authorize endpoint"),y=y.replace("login_dialog","authorize")),console.log("Using standard GroupMe OAuth URL format");const E=new URL(y);let A=`https://oauth.groupme.com/oauth/authorize?client_id=${E.searchParams.get("client_id")}`;E.searchParams.get("state")&&(A+=`&state=${E.searchParams.get("state")}`),y=`${A}&_cb=${Date.now()}`,console.log("Final GroupMe OAuth URL:",y);try{sessionStorage.setItem("groupme_auth_in_progress","true"),sessionStorage.setItem("groupme_auth_user_id",u.id),sessionStorage.setItem("groupme_auth_timestamp",Date.now().toString())}catch(S){console.warn("Could not save OAuth state to sessionStorage:",S)}const M=S=>{if(console.log("📢 Received message from popup:",S.data),S.data&&S.data.type==="GROUPME_CONNECTED"&&S.data.success){console.log("✅ GroupMe connected successfully via popup"),window.removeEventListener("message",M);let P=Wr();if(P||(console.warn("⚠️ Auth token missing - attempting restoration from manual backup"),P=localStorage.getItem("auth_token_backup")||sessionStorage.getItem("auth_token_backup"),P&&(console.log("✅ Found manual backup token - length:",P.length),localStorage.setItem("token",P),window.axiosInstance&&(window.axiosInstance.defaults.headers.common.Authorization=P.startsWith("Bearer ")?P:`Bearer ${P}`,console.log("✅ Applied token to axios instance")))),console.log("🔄 Attempting to restore auth token from backup"),!sh())console.warn("⚠️ authTokenService.restoreTokenFromBackup() failed");else{console.log("✅ Auth token restored successfully via authTokenService");const F=Wr();F&&window.axiosInstance&&(console.log("🔄 Manually updating axiosInstance Authorization header"),window.axiosInstance.defaults.headers.common.Authorization=F.startsWith("Bearer ")?F:`Bearer ${F}`)}setTimeout(()=>{n?(console.log("🔄 Refreshing groups after successful connection"),n().then(()=>{l(!0),d(!1),yo(go,{token:Wr()}),p({title:"GroupMe Connected",description:"Your GroupMe account has been connected successfully.",status:"success",duration:4e3,isClosable:!0})}).catch(F=>{console.error("❌ Error refreshing groups after connection:",F),setTimeout(()=>{console.log("🔄 Attempting to refresh groups one more time..."),n().then(()=>{console.log("✅ Second attempt at refreshing groups succeeded"),l(!0)}).catch(G=>{console.error("❌ Second attempt at refreshing groups failed:",G)}).finally(()=>{d(!1)})},1500)})):(l(!0),d(!1))},500)}};window.addEventListener("message",M);const k=600,w=700,C=(window.innerWidth-k)/2+window.screenX,_=(window.innerHeight-w)/2+window.screenY,z=window.open(y,"groupme-oauth",`width=${k},height=${w},left=${C},top=${_},resizable=yes,scrollbars=yes`);if(!z){window.removeEventListener("message",M),console.error("Popup was blocked by the browser"),p({title:"Popup Blocked",description:"Please allow popups for this site and try again.",status:"error",duration:5e3,isClosable:!0}),d(!1);return}const D=setInterval(()=>{(!z||z.closed)&&(clearInterval(D),window.removeEventListener("message",M),d(!1),console.log("OAuth popup was closed manually"))},1e3);setTimeout(()=>{clearInterval(D),window.removeEventListener("message",M),a||(d(!1),console.warn("OAuth flow timed out after 5 minutes"))},5*60*1e3)}catch(x){console.error("Error initiating GroupMe OAuth:",x),p({title:"Connection Error",description:"Failed to connect to GroupMe. Please try again.",status:"error",duration:4e3,isClosable:!0}),d(!1)}},b=v.lazy(()=>bi(()=>Promise.resolve().then(()=>hO),void 0).then(g=>({default:g.default})));return o?!a&&!r?.accessToken?s.jsxs(U,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:4,backgroundColor:"black",color:"gray.400",children:[s.jsx(L,{mb:4,children:"Connect your GroupMe account to start chatting."}),s.jsx(ne,{colorScheme:"blue",onClick:f,isLoading:c,children:"Connect GroupMe"})]}):s.jsx(p7,{children:s.jsx(v.Suspense,{fallback:s.jsx(U,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",p:4,backgroundColor:"black",color:"gray.400",children:s.jsx(mt,{size:"md"})}),children:s.jsx(b,{...e})})}):s.jsxs(U,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:4,backgroundColor:"black",color:"gray.400",children:[s.jsx(mt,{size:"sm",mr:2}),s.jsx(L,{children:"Loading chat..."})]})},N1=Pr({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),L1=Pr({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),Uu=Pr({displayName:"DeleteIcon",path:s.jsx("g",{fill:"currentColor",children:s.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),b7=Pr({displayName:"RepeatIcon",path:s.jsxs("g",{fill:"currentColor",children:[s.jsx("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),s.jsx("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"})]})}),y7=Pr({displayName:"EditIcon",path:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),v7=Pr({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),w7=Pr({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),C7=Pr({displayName:"ExternalLinkIcon",path:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[s.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),s.jsx("path",{d:"M15 3h6v6"}),s.jsx("path",{d:"M10 14L21 3"})]})}),S7=Pr({d:"M0.913134,0.920639 C1.49851,0.331726 2.29348,0 3.12342,0 L10.8766,0 C11.7065,0 12.5015,0.331725 13.0869,0.920639 C13.6721,1.50939 14,2.30689 14,3.13746 L14,8.12943 C13.9962,8.51443 13.9059,8.97125 13.7629,9.32852 C13.6128,9.683 13.3552,10.0709 13.0869,10.3462 C12.813,10.6163 12.4265,10.8761 12.0734,11.0274 C11.7172,11.1716 11.2607,11.263 10.8766,11.2669 L10.1234,11.2669 L10.1234,12.5676 L10.1209,12.5676 C10.1204,12.793 10.0633,13.0791 9.97807,13.262 C9.8627,13.466 9.61158,13.7198 9.40818,13.8382 L9.40824,13.8383 C9.4077,13.8386 9.40716,13.8388 9.40661,13.8391 C9.40621,13.8393 9.4058,13.8396 9.40539,13.8398 L9.40535,13.8397 C9.22958,13.9254 8.94505,13.9951 8.75059,14 L8.74789,14 C8.35724,13.9963 7.98473,13.8383 7.71035,13.5617 L5.39553,11.2669 L3.12342,11.2669 C2.29348,11.2669 1.49851,10.9352 0.913134,10.3462 C0.644826,10.0709 0.387187,9.683 0.23711,9.32852 C0.0941235,8.97125 0.00379528,8.51443 0,8.12943 L0,3.13746 C0,2.30689 0.327915,1.50939 0.913134,0.920639 Z M3.12342,1.59494 C2.71959,1.59494 2.33133,1.75628 2.04431,2.04503 C1.75713,2.33395 1.59494,2.72681 1.59494,3.13746 L1.59494,8.12943 C1.59114,8.35901 1.62114,8.51076 1.71193,8.72129 C1.79563,8.9346 1.88065,9.06264 2.04431,9.22185 C2.33133,9.5106 2.71959,9.67195 3.12342,9.67195 L5.72383,9.67195 C5.93413,9.67195 6.13592,9.75502 6.28527,9.90308 L8.52848,12.1269 L8.52848,10.4694 C8.52848,10.029 8.88552,9.67195 9.32595,9.67195 L10.8766,9.67195 C11.1034,9.67583 11.2517,9.64614 11.4599,9.55518 C11.6712,9.47132 11.7976,9.38635 11.9557,9.22185 C12.1193,9.06264 12.2044,8.9346 12.2881,8.72129 C12.3789,8.51076 12.4089,8.35901 12.4051,8.12943 L12.4051,3.13746 C12.4051,2.72681 12.2429,2.33394 11.9557,2.04503 C11.6687,1.75628 11.2804,1.59494 10.8766,1.59494 L3.12342,1.59494 Z",displayName:"ChatIcon",viewBox:"0 0 14 14"}),Ky=h.createContext(void 0),j7=()=>{const e=h.useContext(Ky);if(!e)throw new Error("useSidebarToggle must be inside provider");return e},k7=({children:e})=>{const[t,r]=h.useState(()=>{const a=localStorage.getItem("sidebar_open");return a?a==="true":!1}),n=()=>r(a=>!a),o=()=>r(!0),i=()=>r(!1);return h.useEffect(()=>{localStorage.setItem("sidebar_open",String(t))},[t]),s.jsx(Ky.Provider,{value:{isOpen:t,toggle:n,open:o,close:i},children:e})};function E7(e){return te({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(e)}function _7(e){return te({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(e)}const Qy=h.createContext(void 0),T7=({children:e})=>{const[t,r]=h.useState(()=>{if(typeof window>"u")return!0;const i=localStorage.getItem("soundEnabled");return i===null?!0:i==="true"});h.useEffect(()=>{try{localStorage.setItem("soundEnabled",String(t))}catch{}},[t]);const n=h.useCallback(()=>r(i=>!i),[]),o={soundEnabled:t,toggleSound:n};return s.jsx(Qy.Provider,{value:o,children:e})},Jy=()=>{const e=h.useContext(Qy);if(!e)throw new Error("useNotificationSound must be used within NotificationSoundProvider");return e},A7=({compact:e=!1})=>{const{soundEnabled:t,toggleSound:r}=Jy(),n=()=>{t||"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),r()};return s.jsx(po,{label:t?"Mute notification sounds":"Enable notification sounds",placement:"left",children:s.jsx(je,{"aria-label":t?"Mute notification sounds":"Enable notification sounds",icon:t?s.jsx(_7,{}):s.jsx(E7,{}),size:e?"sm":"md",variant:"ghost",colorScheme:"orange",onClick:n})})},R7=()=>{const{user:e,logout:t,refreshUserData:r}=Jt(),n=Qt(),o=ks(),[i,a]=h.useState(Date.now()),[l,c]=h.useState(!1),[d,u]=h.useState(!1),{isOpen:p,toggle:f}=j7(),b=h.useRef(null),g=h.useRef(e),m=h.useRef(null),x=h.useRef(null),y=h.useRef(!1),E=h.useRef(!1),A=h.useRef(0),M=h.useRef(null),k=h.useRef(0),w=6e4,C=()=>e?.name?e.name.split(" ").map(J=>J[0]).join("").toUpperCase().substring(0,2):e?.email?.substring(0,2).toUpperCase()||"U",_=()=>{c(!0)},z=!e?.profilePicture||l||!d,D=J=>J==="/groupme"?o.pathname==="/groupme":o.pathname===J,S=()=>{E.current=!0,t(),n("/login")},P=h.useCallback(()=>{E.current||(y.current=!0,x.current&&(clearTimeout(x.current),x.current=null),A.current=Date.now())},[]),I=h.useCallback(()=>{E.current||(y.current=!1,m.current&&(clearTimeout(m.current),m.current=null),x.current=setTimeout(()=>{y.current||(A.current=Date.now())},1e3))},[]),F=h.useCallback(J=>{!p&&b.current&&!b.current.contains(J.target)&&(E.current=!0,f(),setTimeout(()=>{E.current=!1},500))},[p,f]);h.useEffect(()=>(p||document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}),[p,F]);const G=v.useMemo(()=>s.jsx(Qr,{size:"md",name:C(),src:e?.profilePicture||void 0,bg:"orange.500",color:"white",onError:_,icon:z?s.jsx(vu,{}):void 0,w:"40px",h:"40px",mr:p?0:3,loading:"eager"},i),[i,e?.profilePicture,l,d,p]);h.useEffect(()=>{e&&Object.keys(e).length>0&&(g.current=e)},[e]),h.useEffect(()=>()=>{m.current&&clearTimeout(m.current),x.current&&clearTimeout(x.current)},[]),h.useEffect(()=>{let J=!0;return(async()=>{try{const Se=Date.now();if(Se-k.current<w)return;if(!g.current||!Object.keys(g.current).length){M.current&&(clearTimeout(M.current),M.current=null),k.current=Se;try{J&&await r()}catch(ze){console.error("Failed to load profile data:",ze),k.current=0}}}catch(Se){console.error("Failed to refresh user data on mount:",Se)}})(),()=>{J=!1,M.current&&clearTimeout(M.current)}},[r]),h.useEffect(()=>{if(!(!e?.profilePicture||e.profilePicture===g.current?.profilePicture)&&(E.current=!0,a(Date.now()),c(!1),u(!1),e?.profilePicture)){const J=new window.Image;J.onload=()=>{u(!0),setTimeout(()=>{E.current=!1},300)},J.onerror=()=>{c(!0),E.current=!1},J.src=e.profilePicture}},[e?.profilePicture]);const V=[[{title:"Clients",path:"/clients",icon:yu},{title:"GMAIL",path:"/gmail",icon:kr},{title:"Spreadsheet",path:"/spreadsheet",icon:jC},{title:"CSV Upload",path:"/csv-upload",icon:uC},{title:"Integrations",path:"/integrations",icon:bC},{title:"Settings",path:"/settings",icon:oC}],[],[{title:"Page Two",path:"/page-two",icon:Zx}]],B=[{title:"Leads",path:"/leads",icon:rC}],[Z,Q]=h.useState(()=>{const J=localStorage.getItem("nav_menu_page");return J?Number(J)%V.length:0}),ue=J=>{Q(Ce=>{const Se=(Ce+J+V.length)%V.length;return localStorage.setItem("nav_menu_page",String(Se)),Se})},ie=[...B,...V[Z]],{uniqueCount:X}=bh();return s.jsxs(s.Fragment,{children:[s.jsx(U,{as:"nav",bg:"black",boxShadow:"md",position:"fixed",w:"100%",zIndex:"sticky",h:"100px",children:s.jsx(le,{w:"100%",h:"100%",maxW:"100vw",justify:"center",align:"center",children:s.jsx(le,{position:"absolute",left:"50%",transform:"translateX(-50%)",align:"center",gap:2,children:s.jsxs(eu,{as:Tp,to:"/",display:"flex",alignItems:"center",children:[s.jsx(Er,{src:"/images/HEADER LOGO.png?v=1",alt:"Crokodial Logo",h:"75px",mr:2}),s.jsx(Er,{src:"/images/CROKODIAL-TITLE-LOGO.png",alt:"Crokodial",h:"50px",style:{maxWidth:"none"}}),s.jsx(He,{colorScheme:"orange",variant:"solid",fontSize:"xs",mt:1,color:"black",children:"BETA"})]})})})}),!p&&s.jsx(U,{position:"fixed",top:"100px",left:"0",right:"360px",bottom:"0",bg:"transparent",zIndex:999,onClick:()=>{E.current=!0,f(),setTimeout(()=>{E.current=!1},500)}}),s.jsx(U,{position:"fixed",top:"100px",right:p?"60px":"360px",bottom:"0",width:"50px",zIndex:999,onMouseEnter:P,pointerEvents:"auto",bg:"transparent"}),s.jsxs(U,{ref:b,position:"fixed",right:0,top:"100px",width:p?"60px":"360px",bottom:"0",bg:"blackAlpha.900",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderLeft:"1px solid rgba(255,255,255,0.1)",overflowX:"hidden",overflowY:"hidden",transition:"width 0.25s ease-in-out",onMouseEnter:P,onMouseLeave:I,display:"flex",flexDirection:"column",children:[s.jsx(le,{justify:"center",py:2,mt:4,children:s.jsx(je,{"aria-label":p?"Expand sidebar":"Collapse sidebar",icon:s.jsx(Ru,{direction:p?"right":"left",boxSize:4,color:"orange.400"}),variant:"unstyled",_hover:{transform:"scale(1.05)"},boxSize:"24px",size:"sm",onClick:f})}),s.jsxs(le,{direction:"column",align:p?"center":"flex-start",justify:"center",p:4,borderBottomWidth:"1px",borderColor:"rgba(255,255,255,0.1)",flexShrink:0,children:[s.jsxs(le,{align:"center",mb:2,width:"100%",justifyContent:p?"center":"flex-start",onClick:()=>{E.current=!0,n("/settings?tab=account"),setTimeout(()=>{E.current=!1},1e3)},cursor:"pointer",_hover:{opacity:.8},children:[G,!p&&s.jsxs(U,{children:[s.jsx(L,{color:"white",fontSize:"sm",fontWeight:"bold",children:e?.name||e?.email?.split("@")[0]}),s.jsx(L,{color:"whiteAlpha.700",fontSize:"xs",children:e?.email})]})]}),!p&&s.jsx(ne,{onClick:S,color:"white",fontSize:"14px",fontWeight:"500",px:4,py:1,border:"1px solid white",borderRadius:"6px",bg:"transparent",_hover:{bg:"whiteAlpha.200",transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s ease",width:"100%",h:"30px",children:"Logout"})]}),s.jsx(he,{spacing:0,align:"stretch",overflowY:"auto",flexShrink:0,mb:p||!e?4:0,children:ie.map(J=>{const Ce={display:"flex",alignItems:"center",p:4,color:"white",fontWeight:D(J.path)?"700":"500",bg:D(J.path)?"rgba(239,191,4,0.25)":"transparent",borderLeft:D(J.path)?"4px solid #EFBF04":"4px solid transparent",_hover:{bg:"rgba(239,191,4,0.2)",borderLeft:"4px solid #EFBF04"},transition:"all 0.2s ease",justifyContent:p?"center":"flex-start",width:"100%"};return s.jsxs(eu,{...Ce,as:Tp,to:J.path,children:[s.jsx(lt,{as:J.icon,boxSize:5}),!p&&s.jsx(L,{ml:3,fontSize:"md",children:J.title})]},J.path)})}),s.jsxs(le,{justify:"center",align:"center",py:2,mt:"auto",mb:2,gap:2,children:[s.jsx(je,{"aria-label":"Previous menu page",icon:s.jsx(v7,{}),size:"sm",variant:"ghost",onClick:()=>ue(-1)}),s.jsxs(L,{color:"white",fontSize:"xs",children:[Z+1,"/",V.length]}),s.jsx(je,{"aria-label":"Next menu page",icon:s.jsx(w7,{}),size:"sm",variant:"ghost",onClick:()=>ue(1)})]}),!p&&e&&Z===1&&s.jsxs(s.Fragment,{children:[s.jsx(zt,{borderColor:"rgba(255,255,255,0.2)",my:2}),s.jsx(U,{flexGrow:1,w:"100%",overflowY:"auto",pl:2,pr:2,pb:2,position:"relative",children:s.jsx(x7,{setActiveTab:J=>console.log(`Tab changed to: ${J}`),inSidebar:!0})})]}),s.jsx(U,{position:"absolute",bottom:"10px",right:"10px",children:s.jsx(A7,{compact:!0})}),s.jsx(sr,{})]}),s.jsxs(He,{position:"fixed",top:"52px",right:"12px",bg:"#EFBF04",color:"black",fontSize:"sm",px:2,py:1,borderRadius:"md",zIndex:10001,children:["CRM: ",X]})]})};function rr({children:e}){Jt();const{backgroundColor:t}=Yb();h.useEffect(()=>{document.documentElement.style.setProperty("--app-background-color",t,"important"),document.body.style.cssText+=`background-color: ${t} !important`},[t]);const r={minHeight:"100vh",backgroundColor:t,position:"relative",zIndex:0,display:"flex",flexDirection:"column"};return s.jsxs("div",{style:r,className:"app-container",children:[s.jsx(R7,{}),s.jsx("div",{style:{flex:1,overflow:"visible",paddingTop:"100px",backgroundColor:t},className:"main-content",children:e})]})}const O7=h.createContext(void 0),P7=({children:e})=>{const[t,r]=h.useState([]),n=i=>{const a=Math.random().toString(36).substr(2,9),l={...i,id:a};r(d=>[...d,l]);const c=i.duration||3e3;return setTimeout(()=>{o(a)},c),a},o=i=>{r(a=>a.filter(l=>l.id!==i))};return s.jsxs(O7.Provider,{value:{toast:n,closeToast:o,toasts:t},children:[e,s.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(i=>s.jsxs("div",{className:`rounded-md shadow-md text-white p-4 flex items-start ${i.status==="success"?"bg-green-500":i.status==="error"?"bg-red-500":"bg-blue-500"}`,style:{minWidth:"300px",maxWidth:"400px"},children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold",children:i.title}),i.description&&s.jsx("div",{className:"mt-1 text-sm",children:i.description})]}),i.isClosable&&s.jsx("button",{onClick:()=>o(i.id),className:"text-white hover:text-gray-200",children:"✕"})]},i.id))})]})},Xy=6048e5,M7=864e5,Zs=43200,F1=1440,z1=Symbol.for("constructDateFrom");function _r(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&z1 in e?e[z1](t):e instanceof Date?new e.constructor(t):new Date(t)}function xt(e,t){return _r(t||e,e)}let D7={};function Ds(){return D7}function Ss(e,t){const r=Ds(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=xt(e,t?.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Li(e,t){return Ss(e,{...t,weekStartsOn:1})}function Zy(e,t){const r=xt(e,t?.in),n=r.getFullYear(),o=_r(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const i=Li(o),a=_r(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const l=Li(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Fi(e){const t=xt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ma(e,...t){const r=_r.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function $1(e,t){const r=xt(e,t?.in);return r.setHours(0,0,0,0),r}function I7(e,t,r){const[n,o]=ma(r?.in,e,t),i=$1(n),a=$1(o),l=+i-Fi(i),c=+a-Fi(a);return Math.round((l-c)/M7)}function N7(e,t){const r=Zy(e,t),n=_r(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Li(n)}function fi(e,t){const r=+xt(e)-+xt(t);return r<0?-1:r>0?1:r}function L7(e){return _r(e,Date.now())}function F7(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function z7(e){return!(!F7(e)&&typeof e!="number"||isNaN(+xt(e)))}function $7(e,t,r){const[n,o]=ma(r?.in,e,t),i=n.getFullYear()-o.getFullYear(),a=n.getMonth()-o.getMonth();return i*12+a}function B7(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function q7(e,t){return+xt(e)-+xt(t)}function H7(e,t){const r=xt(e,t?.in);return r.setHours(23,59,59,999),r}function G7(e,t){const r=xt(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function U7(e,t){const r=xt(e,t?.in);return+H7(r,t)==+G7(r,t)}function W7(e,t,r){const[n,o,i]=ma(r?.in,e,e,t),a=fi(o,i),l=Math.abs($7(o,i));if(l<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-a*l);let c=fi(o,i)===-a;U7(n)&&l===1&&fi(n,i)===1&&(c=!1);const d=a*(l-+c);return d===0?0:d}function Y7(e,t,r){const n=q7(e,t)/1e3;return B7(r?.roundingMethod)(n)}function V7(e,t){const r=xt(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const K7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Q7=(e,t,r)=>{let n;const o=K7[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ud(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const J7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},X7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Z7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eA={date:Ud({formats:J7,defaultWidth:"full"}),time:Ud({formats:X7,defaultWidth:"full"}),dateTime:Ud({formats:Z7,defaultWidth:"full"})},tA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rA=(e,t,r,n)=>tA[e];function Jo(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let o;if(n==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):a;o=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;o=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const nA={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sA={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iA={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cA=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},dA={ordinalNumber:cA,era:Jo({values:nA,defaultWidth:"wide"}),quarter:Jo({values:oA,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Jo({values:sA,defaultWidth:"wide"}),day:Jo({values:iA,defaultWidth:"wide"}),dayPeriod:Jo({values:aA,defaultWidth:"wide",formattingValues:lA,defaultFormattingWidth:"wide"})};function Xo(e){return(t,r={})=>{const n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const a=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?hA(l,p=>p.test(a)):uA(l,p=>p.test(a));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(a.length);return{value:d,rest:u}}}function uA(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function hA(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function pA(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const l=t.slice(o.length);return{value:a,rest:l}}}const fA=/^(\d+)(th|st|nd|rd)?/i,gA=/\d+/i,mA={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xA={any:[/^b/i,/^(a|c)/i]},bA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yA={any:[/1/i,/2/i,/3/i,/4/i]},vA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},CA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EA={ordinalNumber:pA({matchPattern:fA,parsePattern:gA,valueCallback:e=>parseInt(e,10)}),era:Xo({matchPatterns:mA,defaultMatchWidth:"wide",parsePatterns:xA,defaultParseWidth:"any"}),quarter:Xo({matchPatterns:bA,defaultMatchWidth:"wide",parsePatterns:yA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xo({matchPatterns:vA,defaultMatchWidth:"wide",parsePatterns:wA,defaultParseWidth:"any"}),day:Xo({matchPatterns:CA,defaultMatchWidth:"wide",parsePatterns:SA,defaultParseWidth:"any"}),dayPeriod:Xo({matchPatterns:jA,defaultMatchWidth:"any",parsePatterns:kA,defaultParseWidth:"any"})},e2={code:"en-US",formatDistance:Q7,formatLong:eA,formatRelative:rA,localize:dA,match:EA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _A(e,t){const r=xt(e,t?.in);return I7(r,V7(r))+1}function TA(e,t){const r=xt(e,t?.in),n=+Li(r)-+N7(r);return Math.round(n/Xy)+1}function t2(e,t){const r=xt(e,t?.in),n=r.getFullYear(),o=Ds(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,a=_r(t?.in||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const l=Ss(a,t),c=_r(t?.in||e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Ss(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function AA(e,t){const r=Ds(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=t2(e,t),i=_r(t?.in||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),Ss(i,t)}function RA(e,t){const r=xt(e,t?.in),n=+Ss(r,t)-+AA(r,t);return Math.round(n/Xy)+1}function Le(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Br={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Le(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Le(r+1,2)},d(e,t){return Le(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Le(e.getHours()%12||12,t.length)},H(e,t){return Le(e.getHours(),t.length)},m(e,t){return Le(e.getMinutes(),t.length)},s(e,t){return Le(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return Le(o,t.length)}},Gn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B1={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return Br.y(e,t)},Y:function(e,t,r,n){const o=t2(e,n),i=o>0?o:1-o;if(t==="YY"){const a=i%100;return Le(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Le(i,t.length)},R:function(e,t){const r=Zy(e);return Le(r,t.length)},u:function(e,t){const r=e.getFullYear();return Le(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Le(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Le(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Br.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Le(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const o=RA(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):Le(o,t.length)},I:function(e,t,r){const n=TA(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Le(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Br.d(e,t)},D:function(e,t,r){const n=_A(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Le(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Le(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Le(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Le(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let o;switch(n===12?o=Gn.noon:n===0?o=Gn.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let o;switch(n>=17?o=Gn.evening:n>=12?o=Gn.afternoon:n>=4?o=Gn.morning:o=Gn.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Br.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Br.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Le(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Le(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Br.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Br.s(e,t)},S:function(e,t){return Br.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return H1(n);case"XXXX":case"XX":return cn(n);case"XXXXX":case"XXX":default:return cn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return H1(n);case"xxxx":case"xx":return cn(n);case"xxxxx":case"xxx":default:return cn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+q1(n,":");case"OOOO":default:return"GMT"+cn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+q1(n,":");case"zzzz":default:return"GMT"+cn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return Le(n,t.length)},T:function(e,t,r){return Le(+e,t.length)}};function q1(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+Le(i,2)}function H1(e,t){return e%60===0?(e>0?"-":"+")+Le(Math.abs(e)/60,2):cn(e,t)}function cn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),o=Le(Math.trunc(n/60),2),i=Le(n%60,2);return r+o+t+i}const G1=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},r2=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},OA=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return G1(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",G1(n,t)).replace("{{time}}",r2(o,t))},PA={p:r2,P:OA},MA=/^D+$/,DA=/^Y+$/,IA=["D","DD","YY","YYYY"];function NA(e){return MA.test(e)}function LA(e){return DA.test(e)}function FA(e,t,r){const n=zA(e,t,r);if(console.warn(n),IA.includes(e))throw new RangeError(n)}function zA(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $A=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qA=/^'([^]*?)'?$/,HA=/''/g,GA=/[a-zA-Z]/;function UA(e,t,r){const n=Ds(),o=n.locale??e2,i=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=xt(e,r?.in);if(!z7(l))throw new RangeError("Invalid time value");let c=t.match(BA).map(u=>{const p=u[0];if(p==="p"||p==="P"){const f=PA[p];return f(u,o.formatLong)}return u}).join("").match($A).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const p=u[0];if(p==="'")return{isToken:!1,value:WA(u)};if(B1[p])return{isToken:!0,value:u};if(p.match(GA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:u}});o.localize.preprocessor&&(c=o.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return c.map(u=>{if(!u.isToken)return u.value;const p=u.value;(LA(p)||NA(p))&&FA(p,t,String(e));const f=B1[p[0]];return f(l,p,o.localize,d)}).join("")}function WA(e){const t=e.match(qA);return t?t[1].replace(HA,"'"):e}function YA(e,t,r){const n=Ds(),o=r?.locale??n.locale??e2,i=2520,a=fi(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:a}),[c,d]=ma(r?.in,...a>0?[t,e]:[e,t]),u=Y7(d,c),p=(Fi(d)-Fi(c))/1e3,f=Math.round((u-p)/60);let b;if(f<2)return r?.includeSeconds?u<5?o.formatDistance("lessThanXSeconds",5,l):u<10?o.formatDistance("lessThanXSeconds",10,l):u<20?o.formatDistance("lessThanXSeconds",20,l):u<40?o.formatDistance("halfAMinute",0,l):u<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):f===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",f,l);if(f<45)return o.formatDistance("xMinutes",f,l);if(f<90)return o.formatDistance("aboutXHours",1,l);if(f<F1){const g=Math.round(f/60);return o.formatDistance("aboutXHours",g,l)}else{if(f<i)return o.formatDistance("xDays",1,l);if(f<Zs){const g=Math.round(f/F1);return o.formatDistance("xDays",g,l)}else if(f<Zs*2)return b=Math.round(f/Zs),o.formatDistance("aboutXMonths",b,l)}if(b=W7(d,c),b<12){const g=Math.round(f/Zs);return o.formatDistance("xMonths",g,l)}else{const g=b%12,m=Math.trunc(b/12);return g<3?o.formatDistance("aboutXYears",m,l):g<9?o.formatDistance("overXYears",m,l):o.formatDistance("almostXYears",m+1,l)}}function U1(e,t){return YA(e,L7(e),t)}var Wd,W1;function VA(){if(W1)return Wd;W1=1;var e=dr(),t=function(){return e.Date.now()};return Wd=t,Wd}var Yd,Y1;function KA(){if(Y1)return Yd;Y1=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Yd=t,Yd}var Vd,V1;function QA(){if(V1)return Vd;V1=1;var e=KA(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Vd=r,Vd}var Kd,K1;function JA(){if(K1)return Kd;K1=1;var e=QA(),t=tn(),r=ia(),n=NaN,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return n;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=i.test(d);return p||a.test(d)?l(d.slice(2),p?2:8):o.test(d)?n:+d}return Kd=c,Kd}var Qd,Q1;function XA(){if(Q1)return Qd;Q1=1;var e=tn(),t=VA(),r=JA(),n="Expected a function",o=Math.max,i=Math.min;function a(l,c,d){var u,p,f,b,g,m,x=0,y=!1,E=!1,A=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,e(d)&&(y=!!d.leading,E="maxWait"in d,f=E?o(r(d.maxWait)||0,c):f,A="trailing"in d?!!d.trailing:A);function M(I){var F=u,G=p;return u=p=void 0,x=I,b=l.apply(G,F),b}function k(I){return x=I,g=setTimeout(_,c),y?M(I):b}function w(I){var F=I-m,G=I-x,V=c-F;return E?i(V,f-G):V}function C(I){var F=I-m,G=I-x;return m===void 0||F>=c||F<0||E&&G>=f}function _(){var I=t();if(C(I))return z(I);g=setTimeout(_,w(I))}function z(I){return g=void 0,A&&u?M(I):(u=p=void 0,b)}function D(){g!==void 0&&clearTimeout(g),x=0,u=m=p=g=void 0}function S(){return g===void 0?b:z(t())}function P(){var I=t(),F=C(I);if(u=arguments,p=this,m=I,F){if(g===void 0)return k(m);if(E)return clearTimeout(g),g=setTimeout(_,c),M(m)}return g===void 0&&(g=setTimeout(_,c)),b}return P.cancel=D,P.flush=S,P}return Qd=a,Qd}var ZA=XA();const eR=Eo(ZA),tR=()=>{const{user:e}=Jt(),t=Qt(),r=Et(),{isOpen:n,onOpen:o,onClose:i}=zi(),[a,l]=h.useState([""]),[c,d]=h.useState(""),[u,p]=h.useState(""),[f,b]=h.useState([]),[g,m]=h.useState(""),[x,y]=h.useState(!1),[E,A]=h.useState({name:"",content:""}),[M,k]=h.useState(null),w=eR(async(B,Z)=>{try{(await fetch(`/api/templates/${B}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e?.token}`},body:JSON.stringify(Z)})).ok||r({title:"Error",description:"Failed to save template changes",status:"error",duration:3e3,isClosable:!0})}catch{r({title:"Error",description:"Failed to save template changes",status:"error",duration:3e3,isClosable:!0})}},1e3);h.useEffect(()=>{if(!e){t("/login");return}C()},[e,t]);const C=async()=>{try{const B=await fetch("/api/templates",{headers:{Authorization:`Bearer ${e?.token}`}});if(B.ok){const Z=await B.json();b(Z)}}catch(B){console.error("Error fetching templates:",B)}},_=()=>{l([...a,""])},z=B=>{const Z=a.filter((Q,ue)=>ue!==B);l(Z)},D=(B,Z)=>{const Q=[...a];Q[B]=Z,l(Q)},S=B=>{const Z=f.find(Q=>Q._id===B);Z&&(d(Z.content),m(B))},P=(B,Z)=>{M?(A(Q=>({...Q,[B]:Z})),w(M._id,{[B]:Z})):A(Q=>({...Q,[B]:Z}))},I=async()=>{try{const B=M?"PUT":"POST",Z=M?`/api/templates/${M._id}`:"/api/templates";(await fetch(Z,{method:B,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e?.token}`},body:JSON.stringify({name:E.name,content:E.content})})).ok&&(r({title:"Success",description:`Template ${M?"updated":"created"} successfully`,status:"success",duration:3e3,isClosable:!0}),C(),i(),A({name:"",content:""}),k(null))}catch{r({title:"Error",description:"Failed to save template",status:"error",duration:3e3,isClosable:!0})}},F=async B=>{if(window.confirm("Are you sure you want to delete this template?"))try{(await fetch(`/api/templates/${B}`,{method:"DELETE",headers:{Authorization:`Bearer ${e?.token}`}})).ok&&(r({title:"Success",description:"Template deleted successfully",status:"success",duration:3e3,isClosable:!0}),C(),g===B&&(m(""),d("")))}catch{r({title:"Error",description:"Failed to delete template",status:"error",duration:3e3,isClosable:!0})}},G=B=>{k(B),A({name:B.name,content:B.content}),o()},V=async B=>{B.preventDefault(),y(!0);try{const Z=a.filter(J=>J.trim()!=="");if(Z.length===0){r({title:"Error",description:"Please enter at least one phone number",status:"error",duration:5e3,isClosable:!0});return}if(Z.length>50&&!window.confirm("Sending a large number of messages at once may be rate limited by Twilio. Continue?")){y(!1);return}if(c.length>1600){r({title:"Error",description:"Message exceeds maximum length of 1600 characters",status:"error",duration:5e3,isClosable:!0});return}const Q=await fetch("/api/messages/send-mass",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e?.token}`},body:JSON.stringify({phoneNumbers:Z,message:c,templateId:g||void 0,scheduledTime:u||void 0})});if(!Q.ok){const J=await Q.json();throw new Error(J.message||"Failed to send messages")}const ue=await Q.json(),ie=ue.results.filter(J=>J.success).length,X=ue.results.length-ie;ie===0?r({title:"Error",description:"All messages failed to send. Please check the phone numbers and try again.",status:"error",duration:5e3,isClosable:!0}):X>0?r({title:"Partial Success",description:`Successfully sent ${ie} messages. ${X} messages failed.`,status:"warning",duration:5e3,isClosable:!0}):r({title:"Success",description:`Successfully sent ${ie} messages`,status:"success",duration:5e3,isClosable:!0}),ie>0&&(l([""]),d(""),p(""),m(""))}catch(Z){r({title:"Error",description:Z instanceof Error?Z.message:"Failed to send messages",status:"error",duration:5e3,isClosable:!0})}finally{y(!1)}};return s.jsxs(js,{maxW:"container.md",py:8,children:[s.jsxs(he,{spacing:6,align:"stretch",children:[s.jsx(Me,{children:"Mass Text Messages"}),s.jsx("form",{onSubmit:V,children:s.jsxs(he,{spacing:6,align:"stretch",children:[s.jsxs(de,{justify:"space-between",align:"center",children:[s.jsx(L,{fontSize:"2xl",children:"Mass Text"}),s.jsx(ne,{leftIcon:s.jsx(L1,{}),colorScheme:"blue",onClick:()=>{k(null),A({name:"",content:""}),o()},children:"New Template"})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Template"}),s.jsx(gn,{value:g,onChange:B=>S(B.target.value),placeholder:"Select template",children:f.map(B=>s.jsx("option",{value:B._id,children:B.name},B._id))}),g&&s.jsxs(de,{mt:2,children:[s.jsx(je,{"aria-label":"Edit template",icon:s.jsx(y7,{}),size:"sm",onClick:()=>G(f.find(B=>B._id===g))}),s.jsx(je,{"aria-label":"Delete template",icon:s.jsx(Uu,{}),size:"sm",colorScheme:"red",onClick:()=>F(g)})]})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Message"}),s.jsx(mn,{value:c,onChange:B=>d(B.target.value),placeholder:"Enter your message",rows:4,required:!0})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Schedule Time (Optional)"}),s.jsx(ke,{type:"datetime-local",value:u,onChange:B=>p(B.target.value),min:UA(new Date,"yyyy-MM-dd'T'HH:mm")})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Phone Numbers"}),s.jsxs(he,{spacing:2,align:"stretch",children:[a.map((B,Z)=>s.jsxs(de,{children:[s.jsx(ke,{placeholder:"Enter phone number",value:B,onChange:Q=>D(Z,Q.target.value),pattern:"[0-9+()-\\s]+"}),s.jsx(po,{label:"Remove phone number",children:s.jsx(je,{"aria-label":"Remove phone number",icon:s.jsx(Uu,{}),onClick:()=>z(Z),colorScheme:"red",isDisabled:a.length===1})})]},Z)),s.jsx(ne,{leftIcon:s.jsx(L1,{}),onClick:_,colorScheme:"blue",variant:"outline",children:"Add Phone Number"})]})]}),s.jsx(ne,{type:"submit",colorScheme:"blue",size:"lg",isLoading:x,children:u?"Schedule Messages":"Send Now"})]})})]}),s.jsxs(Ar,{isOpen:n,onClose:i,children:[s.jsx(Rr,{}),s.jsxs(Or,{children:[s.jsx(Zr,{children:M?"Edit Template":"New Template"}),s.jsx(wn,{}),s.jsx(en,{pb:6,children:s.jsxs(he,{spacing:4,children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Template Name"}),s.jsx(ke,{value:E.name,onChange:B=>P("name",B.target.value),placeholder:"Enter template name"})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Template Content"}),s.jsx(mn,{value:E.content,onChange:B=>P("content",B.target.value),placeholder:"Enter template content",rows:4})]}),s.jsx(ne,{colorScheme:"blue",onClick:I,children:"Save Template"})]})})]})]})]})};let rR={data:""},nR=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||rR,oR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sR=/\/\*[^]*?\*\/|  +/g,J1=/\n+/g,Yr=(e,t)=>{let r="",n="",o="";for(let i in e){let a=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+a+";":n+=i[1]=="f"?Yr(a,i):i+"{"+Yr(a,i[1]=="k"?"":t)+"}":typeof a=="object"?n+=Yr(a,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Yr.p?Yr.p(i,a):i+":"+a+";")}return r+(t&&o?t+"{"+o+"}":o)+n},Sr={},n2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+n2(e[r]);return t}return e},iR=(e,t,r,n,o)=>{let i=n2(e),a=Sr[i]||(Sr[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Sr[a]){let c=i!==e?e:(d=>{let u,p,f=[{}];for(;u=oR.exec(d.replace(sR,""));)u[4]?f.shift():u[3]?(p=u[3].replace(J1," ").trim(),f.unshift(f[0][p]=f[0][p]||{})):f[0][u[1]]=u[2].replace(J1," ").trim();return f[0]})(e);Sr[a]=Yr(o?{["@keyframes "+a]:c}:c,r?"":"."+a)}let l=r&&Sr.g?Sr.g:null;return r&&(Sr.g=Sr[a]),((c,d,u,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Sr[a],t,n,l),a},aR=(e,t,r)=>e.reduce((n,o,i)=>{let a=t[i];if(a&&a.call){let l=a(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":Yr(l,""):l===!1?"":l}return n+o+(a??"")},"");function xa(e){let t=this||{},r=e.call?e(t.p):e;return iR(r.unshift?r.raw?aR(r,[].slice.call(arguments,1),t.p):r.reduce((n,o)=>Object.assign(n,o&&o.call?o(t.p):o),{}):r,nR(t.target),t.g,t.o,t.k)}let o2,Wu,Yu;xa.bind({g:1});let Tr=xa.bind({k:1});function lR(e,t,r,n){Yr.p=t,o2=e,Wu=r,Yu=n}function nn(e,t){let r=this||{};return function(){let n=arguments;function o(i,a){let l=Object.assign({},i),c=l.className||o.className;r.p=Object.assign({theme:Wu&&Wu()},l),r.o=/ *go\d+/.test(c),l.className=xa.apply(r,n)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),Yu&&d[0]&&Yu(l),o2(d,l)}return o}}var cR=e=>typeof e=="function",Vu=(e,t)=>cR(e)?e(t):e,dR=(()=>{let e=0;return()=>(++e).toString()})(),uR=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),hR=20,s2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,hR)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return s2(e,{type:e.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},pR=[],Jd={toasts:[],pausedAt:void 0},lp=e=>{Jd=s2(Jd,e),pR.forEach(t=>{t(Jd)})},fR=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||dR()}),Is=e=>(t,r)=>{let n=fR(t,e,r);return lp({type:2,toast:n}),n.id},gt=(e,t)=>Is("blank")(e,t);gt.error=Is("error");gt.success=Is("success");gt.loading=Is("loading");gt.custom=Is("custom");gt.dismiss=e=>{lp({type:3,toastId:e})};gt.remove=e=>lp({type:4,toastId:e});gt.promise=(e,t,r)=>{let n=gt.loading(t.loading,{...r,...r?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let i=t.success?Vu(t.success,o):void 0;return i?gt.success(i,{id:n,...r,...r?.success}):gt.dismiss(n),o}).catch(o=>{let i=t.error?Vu(t.error,o):void 0;i?gt.error(i,{id:n,...r,...r?.error}):gt.dismiss(n)}),e};var gR=Tr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mR=Tr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xR=Tr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bR=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xR} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yR=Tr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,vR=nn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${yR} 1s linear infinite;
`,wR=Tr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,CR=Tr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,SR=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${CR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,jR=nn("div")`
  position: absolute;
`,kR=nn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ER=Tr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_R=nn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ER} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,TR=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?h.createElement(_R,null,t):t:r==="blank"?null:h.createElement(kR,null,h.createElement(vR,{...n}),r!=="loading"&&h.createElement(jR,null,r==="error"?h.createElement(bR,{...n}):h.createElement(SR,{...n})))},AR=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,RR=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,OR="0%{opacity:0;} 100%{opacity:1;}",PR="0%{opacity:1;} 100%{opacity:0;}",MR=nn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,DR=nn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,IR=(e,t)=>{let r=e.includes("top")?1:-1,[n,o]=uR()?[OR,PR]:[AR(r),RR(r)];return{animation:t?`${Tr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Tr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};h.memo(({toast:e,position:t,style:r,children:n})=>{let o=e.height?IR(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(TR,{toast:e}),a=h.createElement(DR,{...e.ariaProps},Vu(e.message,e));return h.createElement(MR,{className:e.className,style:{...o,...r,...e.style}},typeof n=="function"?n({icon:i,message:a}):h.createElement(h.Fragment,null,i,a))});lR(h.createElement);xa`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;function NR(){const[e,t]=h.useState(()=>{const S=localStorage.getItem("spreadsheetCells");return S?JSON.parse(S):Array(100).fill(null).map(()=>Array(10).fill(null).map(()=>({value:"",isEditing:!1,backgroundColor:"#ffffff"})))}),[r]=h.useState(()=>{const S=localStorage.getItem("spreadsheetNextRow");return S?parseInt(S,10):0}),[n,o]=h.useState({show:!1,x:0,y:0,rowIndex:-1,colIndex:-1}),[i,a]=h.useState(null),[l,c]=h.useState([]),d=["Positive Contact","Negative Contact","Employer Coverage","Brokie","Buy Or Die","Unhealthy/Referred","Foreign","Quoted","SOLD","Appointment"],{getColorForDisposition:u}=gh(),p=S=>u(S);h.useEffect(()=>{localStorage.setItem("spreadsheetCells",JSON.stringify(e))},[e]),h.useEffect(()=>{localStorage.setItem("spreadsheetNextRow",r.toString())},[r]);const f=h.useCallback(S=>{if(!S){console.error("No data provided to addLeadToSpreadsheet");return}let P=!1;t(I=>{if(P)return I;P=!0;const F=I.findIndex(B=>B.every(Z=>!Z.value.trim()));if(F===-1)return gt.error("Spreadsheet is full!"),I;const G=[...I],V=[{value:S.status||"",isEditing:!1,backgroundColor:S.color},{value:S.name||"",isEditing:!1,backgroundColor:S.color},{value:S.email||"",isEditing:!1,backgroundColor:S.color},{value:S.state||"",isEditing:!1,backgroundColor:S.color},{value:S.zipcode||"",isEditing:!1,backgroundColor:S.color},{value:S.dob||"",isEditing:!1,backgroundColor:S.color},{value:S.leadType||"",isEditing:!1,backgroundColor:S.color},{value:S.number||"",isEditing:!1,backgroundColor:S.color},{value:S.apptDate||"",isEditing:!1,backgroundColor:S.color},{value:S.notes||"",isEditing:!1,backgroundColor:S.color}];return G[F]=V,P=!1,G}),gt.success("Lead added to spreadsheet!")},[]);h.useEffect(()=>{const S=sessionStorage.getItem("pendingLeadData");if(S)try{const P=JSON.parse(S);f(P),sessionStorage.removeItem("pendingLeadData")}catch(P){console.error("Error processing pending data:",P),gt.error("Failed to add lead to spreadsheet"),sessionStorage.removeItem("pendingLeadData")}},[f]),h.useEffect(()=>(window.addToSpreadsheet=f,()=>{window.addToSpreadsheet=()=>{console.warn("Spreadsheet component is unmounted")}}),[f]);const b=(S,P)=>{t(I=>I.map((F,G)=>F.map((V,B)=>({...V,isEditing:G===S&&B===P&&B!==0}))))},g=(S,P,I)=>{D({type:"EDIT_CELL",cells:JSON.parse(JSON.stringify(e)),rowIndex:S,colIndex:P,previousValue:e[S][P].value}),t(F=>F.map((G,V)=>G.map((B,Z)=>V===S&&Z===P?{...B,value:I}:B)))},m=()=>{t(S=>S.map(P=>P.map((I,F)=>({...I,isEditing:!1}))))};h.useEffect(()=>{const S=()=>{o(P=>({...P,show:!1}))};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[]);const x=(S,P,I)=>{S.preventDefault(),o({show:!0,x:S.clientX,y:S.clientY,rowIndex:P,colIndex:I})},y=()=>{const S=e[n.rowIndex][n.colIndex];a({value:S.value,backgroundColor:S.backgroundColor}),D({type:"CUT",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex,colIndex:n.colIndex,previousValue:S.value,previousColor:S.backgroundColor}),t(P=>P.map((I,F)=>I.map((G,V)=>F===n.rowIndex&&V===n.colIndex?{...G,value:"",backgroundColor:"#ffffff"}:G))),o(P=>({...P,show:!1}))},E=()=>{const S=e[n.rowIndex][n.colIndex];a({value:S.value,backgroundColor:S.backgroundColor}),o(P=>({...P,show:!1}))},A=()=>{i&&(D({type:"PASTE",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex,colIndex:n.colIndex}),t(S=>S.map((P,I)=>P.map((F,G)=>I===n.rowIndex&&G===n.colIndex?{...F,value:i.value,backgroundColor:i.backgroundColor}:F))),o(S=>({...S,show:!1})))},M=()=>{if(e.length>=100){gt.error("Maximum rows reached");return}D({type:"INSERT_ROW_ABOVE",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex}),t(S=>[...S.slice(0,n.rowIndex),Array(10).fill(null).map(()=>({value:"",isEditing:!1,backgroundColor:"#ffffff"})),...S.slice(n.rowIndex)].slice(0,100)),o(S=>({...S,show:!1}))},k=()=>{if(e.length>=100){gt.error("Maximum rows reached");return}D({type:"INSERT_ROW_BELOW",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex}),t(S=>[...S.slice(0,n.rowIndex+1),Array(10).fill(null).map(()=>({value:"",isEditing:!1,backgroundColor:"#ffffff"})),...S.slice(n.rowIndex+1)].slice(0,100)),o(S=>({...S,show:!1}))},w=()=>{D({type:"DELETE_ROW",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex}),t(S=>[...S.slice(0,n.rowIndex),...S.slice(n.rowIndex+1),Array(10).fill(null).map(()=>({value:"",isEditing:!1,backgroundColor:"#ffffff"}))]),o(S=>({...S,show:!1}))},C=()=>{D({type:"CLEAR_ROW",cells:JSON.parse(JSON.stringify(e)),rowIndex:n.rowIndex}),t(S=>S.map((P,I)=>I===n.rowIndex?P.map(F=>({...F,value:"",backgroundColor:"#ffffff"})):P)),o(S=>({...S,show:!1}))},_=(S,P)=>{D({type:"EDIT_CELL",cells:JSON.parse(JSON.stringify(e)),rowIndex:S,colIndex:0,previousValue:e[S][0].value});const I=p(P);t(F=>F.map((G,V)=>V===S?G.map((B,Z)=>({...B,backgroundColor:I,...Z===0?{value:P}:{}})):G))},z=["#","Status","NAME","Email","STATE","ZIPCODE","DOB","LEAD TYPE","NUMBER","APPT/FU DATE","NOTES:"];h.useEffect(()=>{const S=()=>{const I=Date.now()-864e5;c(F=>F.filter(G=>G.timestamp>I))},P=setInterval(S,36e5);return S(),()=>clearInterval(P)},[]);const D=S=>{c(P=>[...P,{...S,timestamp:Date.now()}])};return h.useEffect(()=>{try{localStorage.setItem("spreadsheetHistory",JSON.stringify(l))}catch(S){console.error("Failed to save history to localStorage:",S)}},[l]),h.useEffect(()=>{try{const S=localStorage.getItem("spreadsheetHistory");if(S){const P=JSON.parse(S),I=Date.now()-24*60*60*1e3;c(P.filter(F=>F.timestamp>I))}}catch(S){console.error("Failed to load history from localStorage:",S)}},[]),h.useEffect(()=>{const S=P=>{if((P.ctrlKey||P.metaKey)&&P.key==="z"&&(P.preventDefault(),l.length>0)){const I=l[l.length-1];t(I.cells),c(F=>F.slice(0,-1)),gt.success("Undo successful")}};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[l]),e?s.jsxs("div",{style:{width:"100%",height:"100vh",backgroundColor:"#ffffff",overflow:"auto",padding:"20px"},children:[s.jsxs("div",{style:{marginBottom:"20px",fontSize:"16px"},children:["Leads (",e.filter(S=>S.some(P=>P.value.trim()!=="")).length," total)"]}),s.jsxs("div",{style:{overflowX:"auto"},children:[s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",tableLayout:"fixed",border:"1px solid black"},children:[s.jsx("thead",{children:s.jsx("tr",{children:z.map((S,P)=>s.jsx("th",{style:{border:"1px solid black",borderBottom:"2px solid black",borderRight:P===0?"3px solid black":"1px solid black",padding:"8px",backgroundColor:"#000000",color:"#ffffff",fontWeight:"bold",fontSize:"13px",textAlign:P===0?"center":"left",width:P===0?"50px":"auto",position:P===0?"sticky":"relative",left:P===0?0:"auto",zIndex:2},children:S},P))})}),s.jsx("tbody",{children:e.map((S,P)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid black",borderRight:"3px solid black",padding:"6px 8px",backgroundColor:"#f8f9fa",height:"21px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"sticky",left:0,zIndex:1,textAlign:"center",fontWeight:"bold",width:"50px"},children:P+1}),S.map((I,F)=>s.jsx("td",{onClick:()=>b(P,F),onContextMenu:G=>x(G,P,F),style:{border:"1px solid black",padding:"6px 8px",backgroundColor:I.backgroundColor||"#ffffff",height:"21px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative"},children:F===0?s.jsxs("select",{value:I.value,onChange:G=>_(P,G.target.value),style:{width:"100%",border:"none",backgroundColor:"transparent",fontSize:"13px",height:"100%",cursor:"pointer",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",paddingRight:"20px"},children:[s.jsx("option",{value:""}),d.map(G=>s.jsx("option",{value:G,style:{backgroundColor:p(G)},children:G},G))]}):I.isEditing?s.jsx("input",{autoFocus:!0,value:I.value,onChange:G=>g(P,F,G.target.value),onBlur:m,style:{width:"100%",border:"none",padding:"0",backgroundColor:"transparent",fontSize:"13px",height:"100%"}}):s.jsx("span",{children:F===3?s.jsx(qb,{state:I.value}):I.value})},F))]},P))})]}),n.show&&s.jsx("div",{style:{position:"fixed",top:n.y,left:n.x,backgroundColor:"white",border:"1px solid #ccc",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)",zIndex:1e3,borderRadius:"4px"},children:s.jsxs("div",{className:"context-menu",children:[s.jsx("button",{onClick:y,className:"menu-item",children:"Cut"}),s.jsx("button",{onClick:E,className:"menu-item",children:"Copy"}),s.jsx("button",{onClick:A,className:"menu-item",children:"Paste"}),s.jsx("button",{onClick:A,className:"menu-item",children:"Paste special"}),s.jsx("div",{className:"menu-separator"}),s.jsx("button",{onClick:M,className:"menu-item",children:"Insert 1 row above"}),s.jsx("button",{onClick:k,className:"menu-item",children:"Insert 1 row below"}),s.jsx("button",{onClick:w,className:"menu-item",children:"Delete row"}),s.jsx("button",{onClick:C,className:"menu-item",children:"Clear row"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"Hide row"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"Resize row"}),s.jsx("div",{className:"menu-separator"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"Remove filter"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"Conditional formatting"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"Data validation"}),s.jsx("button",{onClick:()=>o(S=>({...S,show:!1})),className:"menu-item",children:"View more row actions"})]})})]})]}):s.jsx("div",{children:"Loading..."})}const LR=()=>{const[e,t]=h.useState(null),[r,n]=h.useState(!1),[o,i]=h.useState(0),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[u,p]=h.useState(!1),[f,b]=h.useState(null),[g,m]=h.useState(null),x=Et(),y=Qt(),E=Mr(),A=P=>{const I=P.target.files?.[0];I&&(I.type==="text/csv"||I.name.endsWith(".csv"))?t(I):x({title:"Invalid file type",description:"Please select a CSV file",status:"error",duration:3e3,isClosable:!0})},M=h.useCallback(P=>{P.preventDefault(),P.stopPropagation(),l(!0)},[]),k=h.useCallback(P=>{P.preventDefault(),P.stopPropagation(),l(!1)},[]),w=h.useCallback(P=>{P.preventDefault(),P.stopPropagation()},[]),C=h.useCallback(P=>{P.preventDefault(),P.stopPropagation(),l(!1);const I=P.dataTransfer.files[0];I&&(I.type==="text/csv"||I.name.endsWith(".csv"))?t(I):x({title:"Invalid file type",description:"Please drop a CSV file",status:"error",duration:3e3,isClosable:!0})},[x]),_=async()=>{if(!e)return;n(!0),i(0);const P=new FormData;P.append("file",e);try{console.log("Starting upload..."),console.log("File details:",{name:e.name,type:e.type,size:e.size});const I=await se.post("/api/csv-upload",P,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:F=>{const G=F.loaded/F.total*100;i(G)}});if(console.log("Upload response:",I.data),I.data.success&&I.data.stats)await E.invalidateQueries({queryKey:["leads"]}),await E.refetchQueries({queryKey:["leads"]}),x({title:`${I.data.vendor} Import Successful`,description:`Imported ${I.data.stats.imported} leads, updated ${I.data.stats.updated}, skipped ${I.data.stats.skipped}${I.data.stats.errors>0?`, ${I.data.stats.errors} errors`:""}`,status:"success",duration:5e3,isClosable:!0}),I.data.warnings&&I.data.warnings.length>0&&I.data.warnings.forEach(F=>{x({title:"Import Warning",description:F,status:"warning",duration:5e3,isClosable:!0})}),await new Promise(F=>setTimeout(F,1e3)),y("/leads");else throw I.data.error?new Error(I.data.error):new Error("Invalid response format from server")}catch(I){console.error("Upload error:",I);let F="Failed to upload CSV file. Please check the file format and try again.";I.response?I.response.status===401?(F="Authentication error. Please log in again.",setTimeout(()=>{y("/login")},2e3)):I.response.data&&I.response.data.message?F=I.response.data.message:I.response.data&&I.response.data.error&&(F=I.response.data.error):I.message&&(F=I.message),x({title:"Error",description:F,status:"error",duration:5e3,isClosable:!0})}finally{n(!1),i(0),t(null)}},z=async()=>{d(!0),b(null);try{const P=await se.get("/api/leads/reconcile-dispositions");console.log("Reconciliation response:",P.data),b(P.data),x({title:"Disposition Reconciliation",description:P.data.message,status:"success",duration:5e3,isClosable:!0}),await E.invalidateQueries({queryKey:["leads"]})}catch(P){console.error("Reconciliation error:",P),x({title:"Error",description:P instanceof Error?P.message:"Failed to reconcile dispositions",status:"error",duration:5e3,isClosable:!0})}finally{d(!1)}},D=async()=>{p(!0),m(null);try{const P=await se.get("/api/leads/fix-csv-duplicates");console.log("Duplicate fix response:",P.data),m(P.data),x({title:"CSV Duplicates Fixed",description:`Found ${P.data.stats.phoneDuplicates} duplicate phone numbers and ${P.data.stats.emailDuplicates} duplicate emails. Recovered ${P.data.stats.dispositionsRecovered} dispositions.`,status:"success",duration:5e3,isClosable:!0}),await E.invalidateQueries({queryKey:["leads"]})}catch(P){console.error("Fix duplicates error:",P),x({title:"Error",description:P instanceof Error?P.message:"Failed to fix CSV duplicates",status:"error",duration:5e3,isClosable:!0})}finally{p(!1)}},S=P=>typeof P=="object"&&P!==null;return s.jsx(js,{maxW:"container.md",py:8,children:s.jsxs(he,{spacing:8,align:"stretch",children:[s.jsx(Me,{textAlign:"center",children:"CSV Lead Upload"}),s.jsxs(U,{border:"2px dashed",borderColor:a?"blue.500":"gray.300",borderRadius:"lg",p:8,textAlign:"center",bg:a?"blue.50":"white",_hover:{borderColor:"blue.500"},transition:"all 0.2s",onDragEnter:M,onDragLeave:k,onDragOver:w,onDrop:C,children:[s.jsx("input",{type:"file",accept:".csv",onChange:A,style:{display:"none"},id:"csv-upload"}),s.jsx("label",{htmlFor:"csv-upload",children:s.jsxs(he,{spacing:4,cursor:"pointer",children:[s.jsx(lt,{as:nC,w:12,h:12,color:a?"blue.500":"gray.400"}),s.jsx(L,{fontSize:"lg",fontWeight:"medium",children:e?e.name:"Click to select or drag and drop CSV file"}),s.jsx(L,{fontSize:"sm",color:"gray.500",children:"Only CSV files are supported"})]})})]}),e&&s.jsxs(he,{spacing:4,children:[s.jsxs(de,{spacing:2,children:[s.jsx(lt,{as:cC,color:"green.500"}),s.jsx(L,{children:e.name})]}),s.jsxs(L,{fontSize:"sm",color:"gray.500",children:["Size: ",(e.size/1024).toFixed(2)," KB"]})]}),r&&s.jsxs(he,{spacing:2,children:[s.jsx(ex,{value:o,size:"sm",width:"100%"}),s.jsxs(L,{fontSize:"sm",color:"gray.500",children:["Uploading... ",Math.round(o),"%"]})]}),s.jsx(ne,{colorScheme:"blue",size:"lg",onClick:_,isLoading:r,loadingText:"Uploading...",isDisabled:!e||r,children:"Upload Leads"}),s.jsxs(U,{bg:"gray.50",p:4,borderRadius:"md",children:[s.jsx(L,{fontSize:"sm",fontWeight:"medium",mb:2,children:"CSV Format Support:"}),s.jsx(L,{fontSize:"sm",color:"gray.600",mb:2,children:"The system automatically detects your CSV vendor type:"}),s.jsxs(he,{align:"start",spacing:2,fontSize:"sm",color:"gray.600",ml:4,children:[s.jsxs(U,{children:[s.jsx(L,{fontWeight:"semibold",children:"NextGen CSV Files:"}),s.jsx(L,{children:"Detected by columns: purchase_id, vertical_id, vendor_id"})]}),s.jsxs(U,{children:[s.jsx(L,{fontWeight:"semibold",children:"Marketplace CSV Files:"}),s.jsx(L,{children:"Detected by columns: leadID, utm_source, primaryPhone"})]})]}),s.jsx(L,{fontSize:"sm",color:"gray.600",mt:3,children:"All fields will be automatically mapped to the correct format."})]}),s.jsx(zt,{my:6}),s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsx(Me,{size:"md",children:"Data Repair Tools"}),s.jsxs($t,{status:"warning",borderRadius:"md",children:[s.jsx(G2,{children:"Warning"}),s.jsx(U2,{children:"These tools attempt to fix data inconsistencies from previous CSV uploads. They should only be used if you're experiencing issues with leads showing up in filters but having incorrect or missing dispositions."})]}),s.jsxs(de,{spacing:4,children:[s.jsx(ne,{leftIcon:s.jsx(SC,{}),colorScheme:"orange",isLoading:c,loadingText:"Reconciling...",onClick:z,flex:1,children:"Reconcile Dispositions"}),s.jsx(ne,{leftIcon:s.jsx(AC,{}),colorScheme:"red",isLoading:u,loadingText:"Fixing...",onClick:D,flex:1,children:"Fix CSV Duplicates"})]}),S(f)&&f.message&&s.jsxs(U,{bg:"blue.50",p:4,borderRadius:"md",mt:2,children:[s.jsx(L,{fontWeight:"medium",children:"Reconciliation Results:"}),s.jsx(L,{children:f.message})]}),S(g)&&g.stats&&s.jsxs(U,{bg:"blue.50",p:4,borderRadius:"md",mt:2,children:[s.jsx(L,{fontWeight:"medium",children:"Duplicate Fix Results:"}),s.jsxs(L,{children:["Found ",g.stats.phoneDuplicates," phone duplicates and"," ",g.stats.emailDuplicates," email duplicates."]}),s.jsxs(L,{children:["Recovered ",g.stats.dispositionsRecovered," dispositions and"," ",g.stats.notesRecovered," notes."]}),s.jsx(L,{mt:2,fontStyle:"italic",children:g.action})]})]})]})})},FR=({value:e,onChange:t,leads:r,isLoading:n,colorMode:o,onSelectLead:i,toast:a})=>{const[l,c]=h.useState(e),[d,u]=h.useState(!1),[p,f]=h.useState(""),b=h.useRef(null);h.useEffect(()=>{const k=w=>{b.current&&!b.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]),h.useEffect(()=>{c(e)},[e]);const g=r.filter(k=>{const w=`${k.firstName||""} ${k.lastName||""}`.trim(),C=p.toLowerCase();return k.email.toLowerCase().includes(C)||w.toLowerCase().includes(C)||k.name&&k.name.toLowerCase().includes(C)}),m=k=>{const w=k.target.value;c(w),f(w),t(w),w&&!d&&u(!0)},x=k=>{console.log("Lead selected in component:",k.email);let w=l;w.includes(k.email)?a({title:"Already Added",description:`${k.email} is already in the recipient list`,status:"info",duration:1e3,isClosable:!0}):(w&&!w.endsWith(", ")&&(w=w.endsWith(",")?w+" ":w+", "),w=w+k.email,c(w),t(w),i&&i(k),a({title:"Lead Added",description:`Added ${k.firstName||k.name} to recipients`,status:"success",duration:1e3,isClosable:!0}))},y=()=>{if(g.length===0)return;const k=g.map(w=>w.email).join(", ");c(k),t(k),u(!1)},E=o==="dark"?"gray.800":"white",A=o==="dark"?"gray.700":"gray.200",M=o==="dark"?"gray.700":"gray.50";return s.jsxs(U,{position:"relative",ref:b,children:[s.jsxs(hs,{children:[s.jsx(Ku,{pointerEvents:"none",children:s.jsx(_C,{color:"gray.300"})}),s.jsx(ke,{placeholder:"Select a lead or type an email address",value:l,onChange:m,onClick:()=>u(!0),borderColor:A,size:"md",_focus:{borderColor:"orange.300",boxShadow:"0 0 0 1px orange.300"}}),l&&s.jsx(gi,{children:s.jsx(je,{"aria-label":"Clear input",icon:s.jsx(uo,{}),size:"sm",variant:"ghost",onClick:()=>{c(""),t(""),f(""),u(!1)}})})]}),d&&s.jsx(U,{position:"absolute",top:"100%",left:0,right:0,zIndex:10,borderWidth:1,borderColor:A,borderRadius:"md",bg:E,boxShadow:"md",maxH:"200px",overflowY:"auto",mt:1,children:n?s.jsx(le,{justify:"center",align:"center",p:4,children:s.jsx(mt,{size:"sm",color:"orange.500"})}):g.length>0?s.jsxs(iv,{spacing:0,children:[s.jsx(kp,{p:2,cursor:"pointer",_hover:{bg:M},onClick:y,fontWeight:"bold",borderBottom:"1px solid",borderColor:A,bg:o==="dark"?"gray.700":"orange.50",children:s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsx(L,{children:"Select All Leads"}),s.jsx(He,{colorScheme:"orange",borderRadius:"full",children:g.length})]})}),g.map(k=>s.jsxs(kp,{p:2,cursor:"pointer",_hover:{bg:M},onClick:()=>x(k),children:[s.jsx(L,{fontWeight:"medium",children:k.firstName&&k.lastName?`${k.firstName} ${k.lastName}`:k.name}),s.jsx(L,{fontSize:"sm",color:"gray.600",children:k.email})]},k._id))]}):s.jsx(U,{p:2,textAlign:"center",children:s.jsx(L,{color:"gray.500",children:"No matching leads found"})})})]})},zR=()=>{const{user:e}=Jt(),t=Qt(),r=ks(),n=Et(),o=Xe("white","gray.800"),i=Xe("gray.200","gray.700"),a=Xe("gray.50","gray.700"),l="orange.500",c=Xe("light","dark"),[d,u]=h.useState(0),[p,f]=h.useState(!1),[b,g]=h.useState(null),[m,x]=h.useState(!0),[y,E]=h.useState(!1),[A,M]=h.useState([]),[k,w]=h.useState(null),[C,_]=h.useState([]),[z,D]=h.useState("INBOX"),[S,P]=h.useState(null),[I,F]=h.useState(null),[G,V]=h.useState(""),[B,Z]=h.useState(""),[Q,ue]=h.useState(""),[ie,X]=h.useState(""),[J,Ce]=h.useState(""),[Se,ze]=h.useState(()=>{const O=localStorage.getItem("emailTemplates");if(O)try{return JSON.parse(O)}catch(H){console.error("Error parsing saved templates",H)}return[{id:"1",name:"Welcome Email",subject:"Welcome to Crokodial!",description:"Sends a welcome message to new leads",body:`<p>Hello <name>,</p>
        
        <p>I wanted to personally thank you for your interest in our services. We at Crokodial are excited to work with you and help you find the perfect insurance solution tailored to your needs.</p>
        
        <p>In the coming days, I'll reach out to discuss your specific requirements and answer any questions you may have. Feel free to contact me directly if you need immediate assistance.</p>
        
        <p>Best regards,<br>
        ${e?.name||"Your Agent"}<br>
        Crokodial Insurance Services</p>`},{id:"2",name:"Follow-up Email",subject:"Following up on our conversation",description:"Send after initial contact with lead",body:`<p>Hello <name>,</p>
        
        <p>I hope this email finds you well. I'm following up on our recent conversation about your insurance needs. I've put together some options that I believe would be a great fit for your situation.</p>
        
        <p>Would you have some time this week to discuss these options in more detail? I'm available for a call or meeting at your convenience.</p>
        
        <p>Looking forward to hearing from you!</p>
        
        <p>Best regards,<br>
        ${e?.name||"Your Agent"}<br>
        Crokodial Insurance Services</p>`},{id:"3",name:"Quote Details",subject:"Your Insurance Quote Information",description:"Send when providing a quote to a lead",body:`<p>Hello <name>,</p>
        
        <p>As discussed, I'm pleased to provide you with the insurance quote we talked about. Based on the information you've shared, here are the details:</p>
        
        <p><strong>Plan Type:</strong> [Plan Type]<br>
        <strong>Coverage:</strong> [Coverage Details]<br>
        <strong>Monthly Premium:</strong> [Premium Amount]<br>
        <strong>Deductible:</strong> [Deductible Amount]</p>
        
        <p>This quote is valid for the next 30 days. If you'd like to proceed or have any questions, please don't hesitate to reach out.</p>
        
        <p>Best regards,<br>
        ${e?.name||"Your Agent"}<br>
        Crokodial Insurance Services</p>`}]}),[nt,ot]=h.useState(null),[Pe,Fe]=h.useState(""),[Re,xe]=h.useState(""),[tt,Ie]=h.useState(""),[_e,rt]=h.useState(!1),[ce,Be]=h.useState([]),[Qe,bt]=h.useState(!1),[Je,Ue]=h.useState(""),[We,_t]=h.useState(!1),[dt,Xt]=h.useState(null);h.useRef(null);const[st,it]=h.useState(!1),[yt,T]=h.useState(0),[W,R]=h.useState(0),[q,re]=h.useState(0),{isOpen:ye,onOpen:$e,onClose:ut}=zi(),[vt,Ct]=h.useState(null),[yr,vr]=h.useState(()=>{const O=localStorage.getItem("emailCampaigns");if(O)try{return JSON.parse(O)}catch(H){console.error("Error parsing saved campaigns",H)}return[]}),[pr,Do]=h.useState(""),[ba,dp]=h.useState(""),[up,Io]=h.useState(""),[Gt,Lr]=h.useState([]),[on,An]=h.useState(null),[No,Lo]=h.useState(!1),[Tt,sn]=h.useState("all"),[St,an]=h.useState([]),[Fo,j]=h.useState(""),[K,Y]=h.useState(0),[ge,Ye]=h.useState(""),[Ne,At]=h.useState([]),[Nt,Zt]=h.useState(!1),ln=async()=>{try{bt(!0);const O=await se.get("/api/leads",{params:{getAllResults:!0}});Be(O.data.leads),console.log(`Loaded ${O.data.leads.length} leads for email selection`)}catch(O){console.error("Error fetching leads:",O),n({title:"Error",description:"Failed to fetch leads for email selection",status:"error",duration:3e3,isClosable:!0})}finally{bt(!1)}};h.useEffect(()=>{const O=new URLSearchParams(r.search),H=O.get("connected")==="true",N=O.get("error");H?(n({title:"Gmail Connected",description:"Your Gmail account has been successfully connected",status:"success",duration:5e3,isClosable:!0}),t("/gmail",{replace:!0}),Rn()):N?(n({title:"Connection Failed",description:"Failed to connect your Gmail account",status:"error",duration:5e3,isClosable:!0}),t("/gmail",{replace:!0})):Rn()},[r.search,t,n]),h.useEffect(()=>{(I==="new"||I==="reply")&&ln()},[I]),h.useEffect(()=>{d===3&&(console.log("Campaigns tab selected, fetching leads"),ln())},[d]);const Rn=async()=>{try{x(!0);const O=await se.get("/api/gmail/status");f(O.data.connected),g(O.data.email),O.data.connected&&(On(),zo())}catch(O){console.error("Error checking Gmail connection status:",O),n({title:"Error",description:"Failed to check Gmail connection status",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}},ya=async()=>{try{const O=await se.get("/api/gmail/auth-url");window.location.href=O.data.url}catch(O){console.error("Error generating auth URL:",O),n({title:"Error",description:"Failed to start Gmail connection process",status:"error",duration:5e3,isClosable:!0})}},va=async()=>{try{await se.post("/api/gmail/disconnect"),f(!1),g(null),M([]),w(null),_([]),n({title:"Gmail Disconnected",description:"Your Gmail account has been disconnected",status:"info",duration:5e3,isClosable:!0})}catch(O){console.error("Error disconnecting Gmail:",O),n({title:"Error",description:"Failed to disconnect Gmail account",status:"error",duration:5e3,isClosable:!0})}},On=async()=>{try{const O=await se.get("/api/gmail/labels");_(O.data.labels||[])}catch(O){console.error("Error fetching labels:",O)}},zo=async O=>{try{E(!0);const H=await se.get("/api/gmail/messages",{params:{labelIds:z,maxResults:20,pageToken:O}});M(O?N=>[...N,...H.data.messages]:H.data.messages),P(H.data.nextPageToken)}catch(H){console.error("Error fetching emails:",H),n({title:"Error",description:"Failed to fetch emails",status:"error",duration:5e3,isClosable:!0})}finally{E(!1)}},c2=()=>{S&&zo(S)},hp=async O=>{try{w({loading:!0});const H=await se.get(`/api/gmail/messages/${O}`);w(H.data)}catch(H){console.error("Error fetching email details:",H),n({title:"Error",description:"Failed to fetch email details",status:"error",duration:5e3,isClosable:!0}),w(null)}},pp=O=>{if(!O||!O.payload)return"";const H=wa(O.payload,"text/html");if(H)return fp(H.body.data||"");const N=wa(O.payload,"text/plain");return N?fp(N.body.data||"").replace(/\n/g,"<br>"):""},wa=(O,H)=>{if(O.mimeType===H)return O;if(O.parts)for(const N of O.parts){const me=wa(N,H);if(me)return me}return null},fp=O=>{try{const H=O.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(H).split("").map(N=>"%"+("00"+N.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(H){return console.error("Error decoding base64:",H),""}},d2=()=>{F("new"),V(""),Z(""),ue(""),X(""),Ce(""),w(null),u(1)},u2=()=>{if(!k)return;const H=(k.payload.headers.find(N=>N.name==="From")?.value.match(/<(.+)>/)||[])[1]||k.payload.headers.find(N=>N.name==="From")?.value||"";F("reply"),V(H),Z(`Re: ${k.payload.headers.find(N=>N.name==="Subject")?.value||""}`),ue(`

-------- Original Message --------
${pp(k)}`),X(""),Ce("")},h2=h.useCallback(O=>{Xt(O),n({title:"Lead Selected",description:`Added ${O.firstName||O.name} (${O.email})`,status:"success",duration:2e3,isClosable:!0})},[n]),gp=O=>{if(!O)return null;const H=O.trim().toLowerCase();return ce.find(N=>N.email.toLowerCase()===H)||null},Ns=(O,H)=>{if(!H)return O;const N={"<firstname>":H.firstName||"","<lastname>":H.lastName||"","<name>":H.name||`${H.firstName||""} ${H.lastName||""}`.trim(),"<email>":H.email||"","<phone>":H.phone||"","<state>":H.state||"","<city>":H.city||"","<zip>":H.zipcode||"","<zipcode>":H.zipcode||"","<dob>":H.dob||"","<height>":H.height||"","<weight>":H.weight||"","<gender>":H.gender||""};let me=O;return Object.entries(N).forEach(([we,ht])=>{me=me.replace(new RegExp(we,"gi"),ht)}),me},mp=(O,H=null)=>{const N=H||dt||gp(G);let me=O.subject,we=O.body;N&&(me=Ns(O.subject,N),we=Ns(O.body,N)),Z(me),ue(we),u(1),n({title:"Template Applied",description:`"${O.name}" template has been applied${N?" with lead data":""}`,status:"success",duration:3e3,isClosable:!0})},p2=async(O,H,N)=>{try{const me=Ns(H,O),we=Ns(N,O);return await se.post("/api/gmail/send",{to:O.email,subject:me,body:we,cc:ie,bcc:J}),!0}catch(me){return console.error(`Error sending email to ${O.email}:`,me),!1}},f2=async()=>{if(!G||!B||!Q){n({title:"Missing Fields",description:"Please fill in all required fields",status:"warning",duration:5e3,isClosable:!0});return}const O=G.split(",").map(we=>we.trim()).filter(we=>we);if(O.length===0){n({title:"No Valid Recipients",description:"Please add at least one valid email address",status:"warning",duration:5e3,isClosable:!0});return}const H=O.map(we=>gp(we));H.filter(we=>we!==null),it(!0),R(O.length),re(0),T(0),$e();let N=0,me=0;for(let we=0;we<O.length;we++){const ht=O[we],Pn=H[we];try{Pn?await p2(Pn,B,Q)?N++:me++:(await se.post("/api/gmail/send",{to:ht,subject:B,body:Q,cc:ie,bcc:J}),N++)}catch(Ca){console.error(`Error sending email to ${ht}:`,Ca),me++}re(we+1),T(Math.round((we+1)/O.length*100))}it(!1),ut(),N>0&&me===0?(n({title:"Emails Sent",description:`Successfully sent ${N} individual email${N!==1?"s":""}`,status:"success",duration:5e3,isClosable:!0}),F(null),zo()):N>0&&me>0?n({title:"Partial Success",description:`Sent ${N} email${N!==1?"s":""}, but ${me} failed`,status:"warning",duration:5e3,isClosable:!0}):n({title:"Failed to Send Emails",description:"All emails failed to send. Please try again.",status:"error",duration:5e3,isClosable:!0})},g2=()=>{F(null)},m2=O=>{D(O),w(null),zo()},x2=O=>{const H=new Date(O),N=new Date;return H.toDateString()===N.toDateString()?H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):H.getFullYear()===N.getFullYear()?H.toLocaleDateString([],{month:"short",day:"numeric"}):H.toLocaleDateString()},b2=O=>{switch(O){case"INBOX":return s.jsx(rf,{});case"SENT":return s.jsx(oi,{});case"DRAFT":return s.jsx(kr,{});case"TRASH":return s.jsx(mr,{});case"IMPORTANT":return s.jsx(CC,{});default:return s.jsx(kr,{})}},xp=(O="")=>O.toUpperCase()===O&&O?O.charAt(0)+O.slice(1).toLowerCase():O,y2=()=>{if(!Pe||!Re||!tt){n({title:"Missing Information",description:"Please fill in all template fields",status:"warning",duration:3e3,isClosable:!0});return}if(vt)ze(O=>O.map(H=>H.id===vt?{...H,name:Pe,subject:Re,body:tt}:H)),n({title:"Template Updated",description:`"${Pe}" template has been updated`,status:"success",duration:3e3,isClosable:!0});else{const H={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:Pe,subject:Re,body:tt,description:"Custom template"};ze(N=>[...N,H]),n({title:"Template Saved",description:`"${Pe}" template has been saved and will persist between sessions`,status:"success",duration:3e3,isClosable:!0})}Fe(""),xe(""),Ie(""),Ct(null),rt(!1)},v2=O=>{Fe(O.name),xe(O.subject),Ie(O.body),Ct(O.id),rt(!0),window.scrollTo({top:0,behavior:"smooth"})},bp=()=>{Fe(""),xe(""),Ie(""),Ct(null),rt(!1)},w2=O=>{ze(H=>H.filter(N=>N.id!==O)),n({title:"Template Deleted",description:"The template has been removed",status:"info",duration:3e3,isClosable:!0})},C2=()=>{if(!B||!Q){n({title:"Missing Content",description:"Please add a subject and body to your email first",status:"warning",duration:3e3,isClosable:!0});return}Fe(""),xe(B),Ie(Q),rt(!0),u(2)};h.useEffect(()=>{localStorage.setItem("emailTemplates",JSON.stringify(Se))},[Se]),h.useEffect(()=>{localStorage.setItem("emailCampaigns",JSON.stringify(yr))},[yr]);const yp=()=>{Do(""),an([]),j(""),Y(0),Ye(""),Lr([]),An(null),Lo(!1)},S2=()=>{if(!Fo){n({title:"Template Required",description:"Please select a template for this step",status:"warning",duration:3e3,isClosable:!0});return}const O={id:Date.now().toString()+Math.random().toString(36).substring(2,5),templateId:Fo,delayDays:K,status:"pending"};an(N=>[...N,O]),j("");const H=St.length>0?Math.max(...St.map(N=>N.delayDays)):0;Y(H+1),n({title:"Step Added",description:"Email step added to campaign sequence",status:"success",duration:2e3,isClosable:!0})},j2=O=>{an(H=>H.filter(N=>N.id!==O))},vp=(O,H)=>{an(N=>{const me=N.findIndex(we=>we.id===O);if(me===-1)return N;if(H==="up"&&me>0){const we=[...N];return[we[me],we[me-1]]=[we[me-1],we[me]],we}if(H==="down"&&me<N.length-1){const we=[...N];return[we[me],we[me+1]]=[we[me+1],we[me]],we}return N})},k2=()=>{if(!pr||!ge){n({title:"Missing Information",description:"Please provide a campaign name and start date",status:"warning",duration:3e3,isClosable:!0});return}if(St.length===0){n({title:"No Email Steps",description:"Please add at least one email step to your campaign",status:"warning",duration:3e3,isClosable:!0});return}if(Gt.length===0){n({title:"No Recipients",description:"Please select at least one recipient for your campaign",status:"warning",duration:3e3,isClosable:!0});return}const O=new Date().toISOString();if(on)vr(H=>H.map(N=>N.id===on?{...N,name:pr,steps:St,startDate:ge,recipientIds:Gt,recipientCount:Gt.length,updatedAt:O}:N)),n({title:"Campaign Updated",description:`"${pr}" campaign has been updated`,status:"success",duration:3e3,isClosable:!0});else{const N={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:pr,steps:St,startDate:ge,status:"scheduled",recipientIds:Gt,recipientCount:Gt.length,createdAt:O,updatedAt:O};vr(me=>[...me,N]),n({title:"Campaign Created",description:`"${pr}" campaign has been scheduled`,status:"success",duration:3e3,isClosable:!0})}yp()},E2=O=>{Do(O.name),an(O.steps),Ye(O.startDate),Lr(O.recipientIds),An(O.id),Lo(!0),window.scrollTo({top:0,behavior:"smooth"})},wp=(O,H)=>{if(!O)return"Date not set";try{const N=new Date(O);return N.setDate(N.getDate()+H),N.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}},_2=O=>{vr(H=>H.map(N=>N.id===O?{...N,status:N.status==="paused"?"scheduled":"paused",updatedAt:new Date().toISOString()}:N))},T2=O=>new Date(O).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A2=O=>{Lr(H=>H.includes(O)?H.filter(N=>N!==O):[...H,O])},R2=()=>{const O=Cp();if(O.length===0){n({title:"No Leads Available",description:"There are no leads that match your current filter",status:"warning",duration:2e3,isClosable:!0});return}const H=O.map(N=>N._id);Lr(H),n({title:"All Leads Selected",description:`Added ${H.length} leads to the campaign`,status:"success",duration:2e3,isClosable:!0})},O2=()=>{Lr([])},P2=()=>Tt==="all"?yr:yr.filter(O=>O.status===Tt),Cp=()=>{if(console.log(`Filtering ${ce.length} leads with search text: "${Je}"`),!ce.length)return console.log("No leads available to filter"),[];if(!Je||!Je.trim())return console.log("No search text, returning all leads"),ce;const O=Je.toLowerCase().trim(),H=ce.filter(N=>{const me=(N.firstName||"").toLowerCase(),we=(N.lastName||"").toLowerCase(),ht=`${me} ${we}`.trim(),Pn=(N.name||"").toLowerCase();return(N.email||"").toLowerCase().includes(O)||ht.includes(O)||Pn.includes(O)||me.includes(O)||we.includes(O)});return console.log(`Found ${H.length} matching leads`),H},M2=()=>m?s.jsx(le,{justify:"center",align:"center",p:8,children:s.jsx(mt,{size:"xl",color:l,thickness:"4px",speed:"0.65s"})}):p?s.jsxs(U,{p:0,children:[s.jsxs(le,{justify:"space-between",align:"center",bg:Xe("orange.50","orange.900"),p:4,borderTopRadius:"md",borderBottom:"1px solid",borderColor:i,children:[s.jsxs(de,{spacing:4,children:[s.jsx(Er,{src:"https://www.gstatic.com/images/branding/product/2x/gmail_2020q4_48dp.png",alt:"Gmail Logo",boxSize:"30px"}),s.jsx(L,{fontWeight:"bold",children:"Connected to:"}),s.jsx(He,{colorScheme:"green",p:2,borderRadius:"md",fontSize:"sm",children:b}),s.jsx(ne,{colorScheme:"orange",size:"sm",onClick:q2,isLoading:Nt,loadingText:"Processing",title:"Process one marketplace lead email",children:"Process Lead Email"})]}),s.jsx(ne,{leftIcon:s.jsx(iC,{}),colorScheme:"gray",variant:"ghost",size:"sm",onClick:va,children:"Switch Users"})]}),s.jsxs(W2,{variant:"enclosed",colorScheme:"orange",index:d,onChange:O=>u(O),children:[s.jsxs(Y2,{bg:Xe("gray.50","gray.700"),display:"flex",width:"100%",children:[s.jsx(Ls,{py:3,px:6,fontWeight:"medium",flex:"1",_selected:{color:"orange.600",borderColor:"orange.200",borderBottom:"3px solid",borderBottomColor:"orange.500",bg:"white"},children:s.jsxs(de,{children:[s.jsx(rf,{}),s.jsx(L,{children:"Inbox"})]})}),s.jsx(Ls,{py:3,px:6,fontWeight:"medium",flex:"1.5",_selected:{color:"orange.600",borderColor:"orange.200",borderBottom:"3px solid",borderBottomColor:"orange.500",bg:"white"},children:s.jsxs(de,{justifyContent:"center",children:[s.jsx(oi,{}),s.jsx(L,{children:"Compose"})]})}),s.jsx(Ls,{py:3,px:6,fontWeight:"medium",flex:"1.5",_selected:{color:"orange.600",borderColor:"orange.200",borderBottom:"3px solid",borderBottomColor:"orange.500",bg:"white"},children:s.jsxs(de,{justifyContent:"center",children:[s.jsx(kr,{}),s.jsx(L,{children:"Templates"})]})}),s.jsx(Ls,{py:3,px:6,fontWeight:"medium",flex:"1.5",_selected:{color:"orange.600",borderColor:"orange.200",borderBottom:"3px solid",borderBottomColor:"orange.500",bg:"white"},children:s.jsxs(de,{justifyContent:"center",children:[s.jsx(mo,{}),s.jsx(L,{children:"Campaigns"})]})})]}),s.jsxs(V2,{children:[s.jsx(Fs,{p:0,children:D2()}),s.jsx(Fs,{bg:o,children:F2()}),s.jsx(Fs,{bg:o,children:N2()}),s.jsx(Fs,{bg:o,children:L2()})]})]})]}):s.jsx(U,{p:8,textAlign:"center",bg:o,borderRadius:"md",boxShadow:"md",children:s.jsxs(he,{spacing:8,children:[s.jsx(Er,{src:"https://www.gstatic.com/images/branding/product/2x/gmail_2020q4_48dp.png",alt:"Gmail Logo",boxSize:"80px",mb:2}),s.jsx(Me,{size:"lg",children:"Connect your Gmail account"}),s.jsx(L,{fontSize:"lg",maxW:"600px",children:"Connect your Gmail account to send and receive emails directly from Crokodial. All your messages will be available in one place without switching between applications."}),s.jsx(ne,{leftIcon:s.jsx(pC,{}),colorScheme:"red",size:"lg",onClick:ya,py:6,px:10,borderRadius:"full",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:"Connect Gmail"})]})}),D2=()=>s.jsx(U,{children:s.jsxs(le,{children:[s.jsxs(U,{w:"20%",borderRight:"1px solid",borderColor:i,bg:Xe("gray.50","gray.700"),p:4,children:[s.jsxs(le,{justify:"space-between",align:"center",mb:4,children:[s.jsx(Me,{size:"sm",children:"Labels"}),s.jsx(je,{"aria-label":"Refresh labels",icon:s.jsx(of,{}),size:"sm",variant:"ghost",colorScheme:"orange",onClick:On})]}),s.jsx(K2,{spacing:1,maxH:"calc(100vh - 300px)",overflowY:"auto",pr:2,children:C.map(O=>s.jsx(ne,{variant:z===O.id?"solid":"ghost",justifyContent:"flex-start",size:"sm",colorScheme:z===O.id?"orange":"gray",leftIcon:b2(O.id),onClick:()=>m2(O.id),mb:1,borderRadius:"md",children:xp(O.name)},O.id))})]}),s.jsxs(U,{w:"80%",pl:0,bg:o,children:[s.jsxs(le,{justify:"space-between",align:"center",p:4,borderBottom:"1px solid",borderColor:i,bg:Xe("white","gray.800"),children:[s.jsxs(le,{align:"center",children:[s.jsx(Sa,{mr:3,isChecked:A.length>0&&Ne.length===A.length,isIndeterminate:Ne.length>0&&Ne.length<A.length,onChange:$2,colorScheme:"orange",size:"lg"}),s.jsx(Me,{size:"md",children:xp(C.find(O=>O.id===z)?.name||"Emails")})]}),s.jsxs(de,{children:[Ne.length>0&&s.jsx(je,{"aria-label":"Delete selected",icon:s.jsx(mr,{}),size:"sm",colorScheme:"red",onClick:B2,mr:2}),s.jsx(je,{"aria-label":"Refresh emails",icon:s.jsx(of,{}),size:"sm",variant:"ghost",colorScheme:"orange",onClick:()=>zo(),isLoading:y}),s.jsx(ne,{leftIcon:s.jsx(kr,{}),colorScheme:"orange",size:"sm",onClick:d2,variant:"solid",minW:"100px",px:4,children:"Compose"})]})]}),k?I2():s.jsxs(U,{children:[A.length===0&&!y?s.jsxs($t,{status:"info",m:4,borderRadius:"md",children:[s.jsx(Yt,{}),"No emails found in this label."]}):s.jsxs(he,{spacing:0,align:"stretch",maxH:"calc(100vh - 300px)",overflowY:"auto",children:[A.map(O=>s.jsxs(U,{p:4,borderBottom:"1px solid",borderColor:i,bg:O.unread?Xe("orange.50","gray.700"):o,cursor:"pointer",_hover:{bg:a},onClick:()=>hp(O.id),position:"relative",role:"group",children:[s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsxs(le,{align:"center",children:[s.jsx(U,{onClick:H=>(H.preventDefault(),H.stopPropagation(),At(N=>N.includes(O.id)?N.filter(me=>me!==O.id):[...N,O.id]),!1),p:2,mr:2,cursor:"pointer",borderRadius:"md",_hover:{bg:Xe("gray.100","gray.600")},zIndex:2,children:s.jsx(Sa,{isChecked:Ne.includes(O.id),colorScheme:"orange",size:"md",pointerEvents:"none"})}),s.jsx(U,{onClick:()=>hp(O.id),flex:"1",cursor:"pointer",children:s.jsx(L,{fontWeight:O.unread?"bold":"normal",noOfLines:1,fontSize:"sm",color:O.unread?"orange.600":"gray.600",children:O.from})})]}),s.jsxs(de,{children:[O.unread&&s.jsx(He,{colorScheme:"orange",borderRadius:"full",px:2,children:"New"}),s.jsx(L,{fontSize:"xs",color:"gray.500",children:x2(O.date)}),s.jsx(je,{"aria-label":"Delete email",icon:s.jsx(mr,{}),size:"sm",variant:"ghost",colorScheme:"red",display:"none",_groupHover:{display:"flex"},onClick:H=>{H.stopPropagation(),Sp(O.id)}})]})]}),s.jsx(L,{fontWeight:O.unread?"bold":"medium",noOfLines:1,mt:1,fontSize:"md",children:O.subject||"(No subject)"}),s.jsx(L,{fontSize:"sm",color:"gray.600",noOfLines:1,mt:1,children:O.snippet})]},O.id)),S&&s.jsx(ne,{onClick:c2,variant:"ghost",isLoading:y,w:"100%",mt:2,colorScheme:"orange",children:"Load More"})]}),y&&s.jsx(le,{justify:"center",my:8,children:s.jsx(mt,{color:l,size:"lg"})})]})]})]})}),I2=()=>{if(!k)return null;if(k.loading)return s.jsx(le,{justify:"center",align:"center",p:8,h:"500px",children:s.jsx(mt,{size:"lg",color:l})});const O=k.payload.headers,H=O.find(ht=>ht.name==="From")?.value||"",N=O.find(ht=>ht.name==="To")?.value||"",me=O.find(ht=>ht.name==="Subject")?.value||"",we=O.find(ht=>ht.name==="Date")?.value||"";return s.jsxs(U,{p:4,children:[s.jsxs(de,{spacing:3,mb:4,children:[s.jsx(je,{"aria-label":"Back to emails",icon:s.jsx(Qx,{}),onClick:()=>w(null),colorScheme:"orange",variant:"ghost"}),s.jsx(je,{"aria-label":"Reply",icon:s.jsx(vC,{}),onClick:u2,colorScheme:"orange"}),s.jsx(je,{"aria-label":"Delete",icon:s.jsx(mr,{}),variant:"ghost",colorScheme:"red",onClick:()=>{window.confirm("Move this email to trash?")&&(Sp(k.id),w(null))}})]}),s.jsxs(as,{mb:4,variant:"outline",boxShadow:"sm",children:[s.jsx(tu,{pb:2,bg:Xe("orange.50","gray.700"),borderTopRadius:"md",children:s.jsx(Me,{size:"md",children:me||"(No subject)"})}),s.jsxs(ls,{pt:3,children:[s.jsxs(he,{align:"stretch",spacing:2,children:[s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsxs(de,{children:[s.jsx(L,{fontWeight:"bold",children:"From:"}),s.jsx(L,{children:H})]}),s.jsx(ov,{colorScheme:"orange",borderRadius:"full",size:"sm",children:s.jsx(sv,{children:new Date(we).toLocaleString()})})]}),s.jsxs(de,{children:[s.jsx(L,{fontWeight:"bold",children:"To:"}),s.jsx(L,{children:N})]}),s.jsx(zt,{my:3})]}),s.jsx(U,{mt:4,className:"email-body",p:2,borderRadius:"md",bg:Xe("white","gray.800"),dangerouslySetInnerHTML:{__html:pp(k)},overflowX:"auto",maxH:"calc(100vh - 400px)",overflowY:"auto",css:{img:{maxWidth:"100%",height:"auto"},a:{color:"#DD6B20",textDecoration:"underline"},"p, div":{maxWidth:"100%",overflow:"hidden"}}})]})]})]})},N2=()=>s.jsxs(U,{p:6,bg:o,children:[s.jsxs(le,{justify:"space-between",align:"center",mb:6,children:[s.jsx(Me,{size:"md",color:"orange.600",children:"Email Templates"}),s.jsx(ne,{size:"sm",colorScheme:"orange",onClick:_e?bp:()=>rt(!0),children:_e?"Cancel":"Create New Template"})]}),_e?s.jsx(U,{mb:8,p:4,borderWidth:1,borderRadius:"md",borderColor:i,children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsx(le,{justify:"space-between",align:"center",children:s.jsx(Me,{size:"sm",color:"orange.600",children:vt?"Edit Template":"Create New Template"})}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Template Name"}),s.jsx(ke,{placeholder:"e.g., Welcome Email",value:Pe,onChange:O=>Fe(O.target.value),borderColor:i})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Subject Line"}),s.jsx(ke,{placeholder:"Email subject",value:Re,onChange:O=>xe(O.target.value),borderColor:i})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Email Body"}),s.jsxs(U,{bg:Xe("gray.50","gray.700"),p:3,borderRadius:"md",mb:3,children:[s.jsx(L,{fontSize:"sm",fontWeight:"medium",children:"Available Template Variables:"}),s.jsxs(L,{fontSize:"sm",children:[s.jsx(He,{mr:1,children:"<firstname>"}),s.jsx(He,{mr:1,children:"<lastname>"}),s.jsx(He,{mr:1,children:"<name>"}),s.jsx(He,{mr:1,children:"<email>"}),s.jsx(He,{mr:1,children:"<phone>"})]}),s.jsxs(L,{fontSize:"sm",mt:1,children:[s.jsx(He,{mr:1,children:"<state>"}),s.jsx(He,{mr:1,children:"<city>"}),s.jsx(He,{mr:1,children:"<zip>"}),s.jsx(He,{mr:1,children:"<dob>"}),s.jsx(He,{mr:1,children:"<height>"}),s.jsx(He,{mr:1,children:"<weight>"}),s.jsx(He,{mr:1,children:"<gender>"})]})]}),s.jsx(mn,{placeholder:"Write your template here...",value:tt,onChange:O=>Ie(O.target.value),minH:"150px",borderColor:i})]}),s.jsxs(de,{spacing:4,justify:"flex-end",children:[s.jsx(ne,{variant:"outline",onClick:bp,children:"Cancel"}),s.jsx(ne,{colorScheme:"orange",onClick:y2,children:vt?"Update Template":"Save Template"})]})]})}):null,s.jsx(he,{spacing:4,align:"stretch",maxH:"calc(100vh - 350px)",overflowY:"auto",children:Se.length===0?s.jsxs($t,{status:"info",borderRadius:"md",children:[s.jsx(Yt,{}),"No templates available. Create your first template to get started."]}):Se.map(O=>s.jsx(as,{variant:"outline",mb:2,children:s.jsx(ls,{children:s.jsxs(le,{justify:"space-between",align:"start",wrap:"wrap",gap:2,children:[s.jsxs(U,{flex:"1",minW:"200px",children:[s.jsx(Me,{size:"sm",mb:2,children:O.name}),O.description&&s.jsx(L,{fontSize:"sm",color:"gray.600",mb:2,children:O.description}),s.jsx(He,{children:O.subject})]}),s.jsxs(de,{spacing:3,children:[s.jsx(ne,{size:"sm",colorScheme:"orange",onClick:()=>mp(O),minW:"110px",px:4,children:"Use Template"}),s.jsx(je,{"aria-label":"Edit template",icon:s.jsx(Si,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>v2(O)}),s.jsx(je,{"aria-label":"Delete template",icon:s.jsx(mr,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>w2(O.id)})]})]})})},O.id))})]}),L2=()=>{const O=P2(),H=Cp();return console.log(`Rendering campaigns interface with ${H.length} filtered leads`),s.jsxs(U,{p:6,bg:o,children:[s.jsxs(le,{justify:"space-between",align:"center",mb:6,children:[s.jsx(Me,{size:"md",color:"orange.600",children:"Email Campaigns"}),s.jsx(ne,{size:"sm",colorScheme:"orange",leftIcon:s.jsx(mo,{}),onClick:()=>Lo(!No),children:No?"Cancel":"Create Campaign"})]}),No?s.jsx(U,{mb:8,p:4,borderWidth:1,borderRadius:"md",borderColor:i,children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsx(le,{justify:"space-between",align:"center",children:s.jsx(Me,{size:"sm",color:"orange.600",children:on?"Edit Campaign":"Create New Campaign"})}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Campaign Name"}),s.jsx(ke,{placeholder:"e.g., May Health Insurance Follow-up",value:pr,onChange:N=>Do(N.target.value),borderColor:i})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Campaign Start Date"}),s.jsx(ke,{type:"datetime-local",value:ge,onChange:N=>Ye(N.target.value),min:new Date().toISOString().slice(0,16),borderColor:i}),s.jsx(L,{fontSize:"sm",color:"gray.500",mt:1,children:"This is when your first email will be sent. Subsequent emails will follow based on the delay days."})]}),s.jsxs(U,{children:[s.jsxs(le,{justify:"space-between",align:"center",mb:2,children:[s.jsxs(fe,{fontWeight:"medium",mb:0,children:["Email Sequence (",St.length," ",St.length===1?"step":"steps",")"]}),St.length>0&&s.jsxs(He,{colorScheme:"orange",borderRadius:"full",px:2,children:[St.length," day sequence"]})]}),St.length>0?s.jsx(he,{spacing:3,align:"stretch",mb:4,px:1,children:St.map((N,me)=>{const we=Se.find(ht=>ht.id===N.templateId);return s.jsx(as,{variant:"outline",size:"sm",children:s.jsx(ls,{p:3,children:s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsxs(de,{children:[s.jsxs(He,{colorScheme:"blue",borderRadius:"full",children:["Day ",N.delayDays]}),s.jsx(L,{fontWeight:"medium",children:we?.name||"Unknown Template"}),s.jsx(L,{fontSize:"sm",color:"gray.500",children:wp(ge,N.delayDays)})]}),s.jsxs(de,{spacing:1,children:[s.jsx(je,{"aria-label":"Move step up",icon:s.jsx(Q4,{}),size:"xs",variant:"ghost",isDisabled:me===0,onClick:()=>vp(N.id,"up")}),s.jsx(je,{"aria-label":"Move step down",icon:s.jsx(Kx,{}),size:"xs",variant:"ghost",isDisabled:me===St.length-1,onClick:()=>vp(N.id,"down")}),s.jsx(je,{"aria-label":"Remove step",icon:s.jsx(mr,{}),size:"xs",colorScheme:"red",variant:"ghost",onClick:()=>j2(N.id)})]})]})})},N.id)})}):s.jsxs($t,{status:"info",borderRadius:"md",mb:4,children:[s.jsx(Yt,{}),"No email steps added yet. Add your first email below."]}),s.jsx(U,{p:3,borderWidth:1,borderRadius:"md",borderColor:i,bg:Xe("gray.50","gray.700"),children:s.jsxs(he,{spacing:3,align:"stretch",children:[s.jsx(Me,{size:"xs",color:"gray.600",children:"Add Email Step"}),s.jsxs(de,{children:[s.jsxs(pe,{flex:"1",children:[s.jsx(fe,{fontSize:"sm",children:"Template"}),s.jsx(gn,{placeholder:"Select a template",value:Fo,onChange:N=>j(N.target.value),size:"sm",children:Se.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))})]}),s.jsxs(pe,{flex:"0.5",children:[s.jsx(fe,{fontSize:"sm",children:"Send on Day"}),s.jsxs(Q2,{min:0,max:365,value:K,onChange:(N,me)=>Y(me),size:"sm",children:[s.jsx(J2,{}),s.jsxs(X2,{children:[s.jsx(Z2,{}),s.jsx(ev,{})]})]})]})]}),s.jsx(ne,{size:"sm",colorScheme:"orange",variant:"solid",leftIcon:s.jsx(ms,{}),onClick:S2,alignSelf:"flex-end",children:"Add Email Step"})]})}),St.length>0&&s.jsxs(U,{mt:3,p:3,borderRadius:"md",bg:Xe("orange.50","orange.900"),children:[s.jsx(Me,{size:"xs",mb:2,children:"Campaign Timeline"}),s.jsx(he,{spacing:2,align:"stretch",children:St.map((N,me)=>{const we=Se.find(Pn=>Pn.id===N.templateId),ht=wp(ge,N.delayDays);return s.jsxs(le,{justify:"space-between",children:[s.jsxs(L,{fontSize:"sm",children:[s.jsxs("strong",{children:["Day ",N.delayDays,":"]})," ",we?.name||"Unknown Template"]}),s.jsx(L,{fontSize:"sm",children:ht})]},N.id)})})]})]}),s.jsxs(pe,{children:[s.jsxs(fe,{fontWeight:"medium",children:["Recipients (",Gt.length," selected)"]}),s.jsxs(de,{mb:2,children:[s.jsxs(ne,{size:"sm",colorScheme:"orange",variant:"outline",leftIcon:s.jsx(rb,{}),onClick:R2,isDisabled:ce.length===0||Qe,children:["Select All ",H.length>0?`(${H.length})`:""]}),s.jsx(ne,{size:"sm",variant:"outline",onClick:O2,isDisabled:Gt.length===0,children:"Clear Selection"})]}),s.jsxs(hs,{children:[s.jsx(Ku,{pointerEvents:"none",children:s.jsx(xu,{color:"gray.300"})}),s.jsx(ke,{placeholder:"Search leads by name or email...",value:Je,onChange:N=>{Ue(N.target.value),console.log(`Search updated to: ${N.target.value}`)},mb:4,borderColor:i}),Je&&s.jsx(gi,{children:s.jsx(je,{"aria-label":"Clear search",icon:s.jsx(uo,{}),size:"sm",variant:"ghost",onClick:()=>Ue("")})})]}),s.jsx(U,{maxH:"200px",overflowY:"auto",borderWidth:1,borderRadius:"md",borderColor:i,p:2,children:Qe?s.jsx(le,{justify:"center",p:4,children:s.jsx(mt,{size:"sm"})}):ce.length===0?s.jsx(L,{textAlign:"center",p:4,color:"gray.500",children:"No leads loaded. Please wait while we load your leads."}):H.length>0?s.jsx(he,{align:"stretch",spacing:1,children:H.map(N=>s.jsx(Sa,{isChecked:Gt.includes(N._id),onChange:()=>A2(N._id),size:"md",colorScheme:"orange",children:s.jsxs(L,{fontSize:"sm",children:[N.firstName?`${N.firstName} ${N.lastName}`:N.name," (",N.email,")"]})},N._id))}):s.jsx(L,{textAlign:"center",p:4,color:"gray.500",children:"No leads match your search. Try with different keywords."})})]}),s.jsxs(de,{spacing:4,justify:"flex-end",pt:4,children:[s.jsx(ne,{variant:"outline",onClick:yp,children:"Cancel"}),s.jsx(ne,{colorScheme:"orange",leftIcon:s.jsx(mo,{}),onClick:k2,children:on?"Update Campaign":"Schedule Campaign"})]})]})}):null,s.jsxs(le,{mb:4,borderBottom:"1px solid",borderColor:i,children:[s.jsx(ne,{variant:Tt==="all"?"solid":"ghost",colorScheme:Tt==="all"?"orange":"gray",borderRadius:"0",onClick:()=>sn("all"),px:4,py:2,fontWeight:"medium",children:"All"}),s.jsx(ne,{variant:Tt==="scheduled"?"solid":"ghost",colorScheme:Tt==="scheduled"?"orange":"gray",borderRadius:"0",onClick:()=>sn("scheduled"),px:4,py:2,fontWeight:"medium",children:"Scheduled"}),s.jsx(ne,{variant:Tt==="active"?"solid":"ghost",colorScheme:Tt==="active"?"orange":"gray",borderRadius:"0",onClick:()=>sn("active"),px:4,py:2,fontWeight:"medium",children:"Active"}),s.jsx(ne,{variant:Tt==="completed"?"solid":"ghost",colorScheme:Tt==="completed"?"orange":"gray",borderRadius:"0",onClick:()=>sn("completed"),px:4,py:2,fontWeight:"medium",children:"Completed"}),s.jsx(ne,{variant:Tt==="paused"?"solid":"ghost",colorScheme:Tt==="paused"?"orange":"gray",borderRadius:"0",onClick:()=>sn("paused"),px:4,py:2,fontWeight:"medium",children:"Paused"})]}),s.jsx(he,{spacing:4,align:"stretch",maxH:"calc(100vh - 350px)",overflowY:"auto",children:O.length===0?s.jsxs($t,{status:"info",borderRadius:"md",children:[s.jsx(Yt,{}),"No campaigns found. ",Tt!=="all"?"Try changing the filter or ":"","Create your first campaign to get started."]}):s.jsxs(tv,{variant:"simple",borderWidth:"1px",borderRadius:"md",children:[s.jsx(rv,{children:s.jsxs(jp,{bg:Xe("gray.50","gray.700"),children:[s.jsx(Mn,{children:"Campaign Name"}),s.jsx(Mn,{children:"Sequence"}),s.jsx(Mn,{children:"Start Date"}),s.jsx(Mn,{children:"Recipients"}),s.jsx(Mn,{children:"Status"}),s.jsx(Mn,{children:"Actions"})]})}),s.jsx(nv,{children:O.map(N=>s.jsxs(jp,{children:[s.jsx(Dn,{fontWeight:"medium",children:N.name}),s.jsx(Dn,{children:s.jsxs(He,{colorScheme:"blue",children:[N.steps?.length||0," ",N.steps?.length===1?"step":"steps"]})}),s.jsx(Dn,{children:T2(N.startDate)}),s.jsx(Dn,{children:s.jsxs(He,{colorScheme:"green",children:[N.recipientCount," leads"]})}),s.jsx(Dn,{children:s.jsx(He,{colorScheme:N.status==="completed"?"green":N.status==="active"?"blue":N.status==="scheduled"?"purple":N.status==="paused"?"orange":"gray",px:2,py:1,borderRadius:"full",children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})}),s.jsx(Dn,{children:s.jsxs(de,{spacing:1,children:[N.status!=="completed"&&s.jsxs(s.Fragment,{children:[s.jsx(je,{"aria-label":N.status==="paused"?"Resume campaign":"Pause campaign",icon:N.status==="paused"?s.jsx(xC,{}):s.jsx(gC,{}),size:"sm",colorScheme:N.status==="paused"?"green":"orange",variant:"ghost",onClick:()=>_2(N.id)}),s.jsx(je,{"aria-label":"Edit campaign",icon:s.jsx(Si,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>E2(N)})]}),s.jsx(je,{"aria-label":"Delete campaign",icon:s.jsx(mr,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>z2(N.id)})]})})]},N.id))})]})})]})},F2=()=>s.jsxs(U,{p:6,bg:o,children:[s.jsxs(le,{justify:"space-between",align:"center",mb:6,children:[s.jsx(Me,{size:"md",color:"orange.600",children:I==="reply"?"Reply to Email":"New Email"}),s.jsxs(de,{children:[s.jsx(pe,{w:"200px",children:s.jsx(gn,{placeholder:"Select Template",size:"sm",onChange:O=>{if(O.target.value){const H=Se.find(N=>N.id===O.target.value);H&&mp(H)}},colorScheme:"orange",borderColor:i,value:"",children:Se.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))})}),s.jsx(ne,{size:"sm",variant:"outline",colorScheme:"orange",leftIcon:s.jsx(wC,{}),onClick:C2,children:"Save as Template"})]})]}),s.jsxs(he,{spacing:5,align:"stretch",children:[s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"To"}),s.jsx(FR,{value:G,onChange:O=>V(O),leads:ce,isLoading:Qe,colorMode:c,onSelectLead:h2,toast:n})]}),s.jsxs(pe,{children:[s.jsx(fe,{fontWeight:"medium",children:"Cc"}),s.jsx(ke,{placeholder:"cc@example.com",value:ie,onChange:O=>X(O.target.value),borderColor:i,_focus:{borderColor:"orange.300",boxShadow:"0 0 0 1px orange.300"}})]}),s.jsxs(pe,{children:[s.jsx(fe,{fontWeight:"medium",children:"Bcc"}),s.jsx(ke,{placeholder:"bcc@example.com",value:J,onChange:O=>Ce(O.target.value),borderColor:i,_focus:{borderColor:"orange.300",boxShadow:"0 0 0 1px orange.300"}})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Subject"}),s.jsx(ke,{placeholder:"Subject",value:B,onChange:O=>Z(O.target.value),borderColor:i,_focus:{borderColor:"orange.300",boxShadow:"0 0 0 1px orange.300"}})]}),s.jsxs(pe,{isRequired:!0,children:[s.jsx(fe,{fontWeight:"medium",children:"Message"}),s.jsx(mn,{placeholder:"Write your message here...",value:Q,onChange:O=>ue(O.target.value),minH:"250px",borderColor:i,_focus:{borderColor:"orange.300",boxShadow:"0 0 0 1px orange.300"}})]}),s.jsxs(de,{spacing:4,justifyContent:"flex-end",pt:4,children:[s.jsx(ne,{onClick:g2,variant:"outline",colorScheme:"gray",children:"Cancel"}),s.jsx(ne,{leftIcon:s.jsx(oi,{}),colorScheme:"orange",onClick:f2,px:6,isLoading:st,loadingText:"Sending...",children:"Send"})]})]}),s.jsxs(Ar,{isOpen:ye,onClose:ut,closeOnOverlayClick:!1,isCentered:!0,children:[s.jsx(Rr,{}),s.jsxs(Or,{children:[s.jsx(Zr,{children:"Sending Emails"}),s.jsx(en,{children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsxs(L,{children:["Sending ",q," of ",W," emails..."]}),s.jsx(ex,{value:yt,size:"lg",colorScheme:"orange",borderRadius:"md"})]})})]})]})]}),z2=O=>{vr(H=>H.filter(N=>N.id!==O)),n({title:"Campaign Deleted",description:"The campaign has been removed",status:"info",duration:3e3,isClosable:!0})},Sp=async O=>{try{E(!0),(await se.post(`/api/gmail/messages/${O}/trash`)).data.success&&(M(N=>N.filter(me=>me.id!==O)),n({title:"Email Deleted",description:"Email has been moved to trash",status:"success",duration:3e3,isClosable:!0}))}catch(H){console.error("Error trashing email:",H),n({title:"Error",description:"Failed to move email to trash",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},$2=()=>{Ne.length===A.length?At([]):At(A.map(O=>O.id))},B2=async()=>{if(Ne.length!==0)try{if(E(!0),!window.confirm(`Move ${Ne.length} email(s) to trash?`)){E(!1);return}const O=[];for(const H of Ne)try{(await se.post(`/api/gmail/messages/${H}/trash`)).data.success&&O.push(H)}catch(N){console.error(`Error trashing email ${H}:`,N)}M(H=>H.filter(N=>!O.includes(N.id))),At([]),n({title:"Emails Deleted",description:`${O.length} email(s) moved to trash`,status:"success",duration:3e3,isClosable:!0})}catch(O){console.error("Error deleting emails:",O),n({title:"Error",description:"Some emails could not be deleted",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},q2=async()=>{try{Zt(!0);const O=await se.post("/api/gmail/process-single-marketplace-lead");O.data.success?n({title:"Marketplace Lead Processed",description:O.data.message,status:"success",duration:5e3,isClosable:!0}):n({title:"No Lead Processed",description:O.data.message,status:"info",duration:5e3,isClosable:!0})}catch(O){console.error("Error processing marketplace lead:",O),n({title:"Error",description:"Failed to process marketplace lead",status:"error",duration:5e3,isClosable:!0})}finally{Zt(!1)}};return s.jsxs(js,{maxW:"75%",px:4,py:6,ml:0,marginInlineStart:0,children:[s.jsxs(le,{align:"center",mb:6,children:[s.jsx(Er,{src:"https://www.gstatic.com/images/branding/product/2x/gmail_2020q4_48dp.png",alt:"Gmail Logo",boxSize:"40px",mr:3}),s.jsx(Me,{color:"orange.600",children:"Gmail Integration"})]}),s.jsx(U,{borderRadius:"md",overflow:"hidden",boxShadow:"lg",bg:o,width:"100%",children:M2()})]})},$R=()=>{const{config:e,saveConfig:t,loading:r,error:n}=ap(),{user:o}=Jt(),[i,a]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(!1),[p,f]=h.useState([{id:"",name:""}]),[b,g]=h.useState(""),[m,x]=h.useState(!1),y=Et();Qt();const[E,A]=h.useState(!1);h.useEffect(()=>{M();const D=new URLSearchParams(window.location.hash.substring(1)),P=new URLSearchParams(window.location.search).get("access_token")||D.get("access_token");P&&k(P)},[]);const M=async()=>{try{const D=await ir.checkConnectionStatus();a(D.connected),D.connectedAt&&c(D.connectedAt)}catch(D){console.error("Error checking connection status:",D)}},k=async D=>{u(!0);try{if(await ir.saveAccessToken(D),window.history.replaceState){const S=window.location.origin+window.location.pathname;window.history.replaceState(null,"",S)}else window.location.hash="";y({title:"Connected Successfully",description:"Your GroupMe account has been connected",status:"success",duration:5e3,isClosable:!0}),a(!0),c(new Date),_()}catch(S){console.error("OAuth callback error:",S),y({title:"Connection Failed",description:"Failed to connect your GroupMe account",status:"error",duration:5e3,isClosable:!0})}finally{u(!1)}},w=async()=>{if(console.log("=== GROUPME CONNECT CLICKED ==="),console.log("Current user:",o),console.log("User ID:",o?.id),!o?.id){console.error("No user ID found, user object:",o),y({title:"Error",description:"You must be logged in to connect GroupMe",status:"error",duration:5e3,isClosable:!0});return}u(!0);try{console.log("Initiating GroupMe OAuth..."),console.log("Calling initiateOAuth with userId:",o.id);const D=await ir.initiateOAuth(o.id);console.log("OAuth response received:",D),console.log("Response type:",typeof D),console.log("Response keys:",Object.keys(D));let{authUrl:S}=D;if(console.log("Auth URL extracted:",S),!S||!S.includes("oauth.groupme.com"))throw new Error("Invalid authorization URL received from server");if(!new URL(S).searchParams.get("client_id"))throw new Error("Authorization URL is missing the client_id parameter");S.includes("login_dialog")&&(console.warn("Detected outdated login_dialog endpoint, replacing with authorize endpoint"),S=S.replace("login_dialog","authorize")),S=S+(S.includes("?")?"&":"?")+"_cb="+Date.now(),console.log("Final auth URL with cache busting:",S),console.log("About to redirect to:",S),window.location.href=S}catch(D){console.error("=== OAUTH ERROR ==="),console.error("Error object:",D),console.error("Error message:",D?.message),console.error("Error response:",D?.response),console.error("Error response data:",D?.response?.data),console.error("Error response status:",D?.response?.status),console.error("Error stack:",D?.stack),y({title:"Error",description:D.response?.data?.message||D.response?.data?.error||"Failed to initiate GroupMe connection",status:"error",duration:5e3,isClosable:!0}),u(!1)}},C=async()=>{A(!0);try{await ir.disconnect(),y({title:"Success",description:"GroupMe disconnected successfully",status:"success",duration:5e3,isClosable:!0}),a(!1),c(null)}catch(D){console.error("Error disconnecting GroupMe:",D),y({title:"Error",description:D.response?.data?.message||D.message||"Failed to disconnect GroupMe",status:"error",duration:5e3,isClosable:!0})}finally{A(!1)}},_=async()=>{try{const D=await Oe.get("/api/groupme/groups");let S=[];D.data&&D.data.success&&D.data.data?S=D.data.data.map(P=>({id:P.groupId||P.id,name:P.groupName||P.name})):Array.isArray(D.data)&&(S=D.data.map(P=>({id:P.groupId||P.id,name:P.groupName||P.name}))),f(S.length>0?S:[{id:"",name:""}]),y({title:"Groups Loaded",description:`Found ${S.length} groups in your account`,status:"success",duration:3e3,isClosable:!0})}catch(D){console.error("Error fetching groups:",D),y({title:"Error",description:"Failed to fetch your GroupMe groups",status:"error",duration:5e3,isClosable:!0})}},z=async()=>{if(!b){y({title:"Error",description:"Please enter a valid GroupMe access token",status:"error",duration:5e3,isClosable:!0});return}x(!0);try{await ir.handleManualToken(b),y({title:"Success",description:"GroupMe token saved successfully",status:"success",duration:5e3,isClosable:!0}),a(!0),c(new Date),g("")}catch(D){console.error("Error saving manual token:",D),y({title:"Error",description:D.response?.data?.message||D.message||"Failed to save GroupMe token",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}};return d?s.jsxs(U,{p:4,textAlign:"center",children:[s.jsx(mt,{size:"xl"}),s.jsx(L,{mt:4,children:"Connecting to GroupMe..."})]}):s.jsxs(U,{p:4,children:[s.jsx(Me,{size:"md",mb:4,children:"GroupMe Integration"}),r?s.jsx(mt,{}):n?s.jsxs($t,{status:"error",mb:4,children:[s.jsx(Yt,{}),n]}):s.jsx(s.Fragment,{children:i?s.jsxs(he,{align:"start",spacing:4,mb:6,children:[s.jsxs($t,{status:"success",mb:4,children:[s.jsx(Yt,{}),s.jsxs(U,{children:[s.jsx(L,{fontWeight:"bold",children:"GroupMe Connected"}),l&&s.jsxs(L,{fontSize:"sm",children:["Connected since ",new Date(l).toLocaleString()]})]})]}),s.jsx(ne,{leftIcon:s.jsx(Uu,{}),colorScheme:"red",variant:"outline",onClick:C,isLoading:E,children:"Disconnect GroupMe"})]}):s.jsxs(he,{align:"start",spacing:4,mb:6,children:[s.jsxs($t,{status:"info",mb:4,children:[s.jsx(Yt,{}),s.jsxs(U,{children:[s.jsx(L,{fontWeight:"bold",children:"Connect your GroupMe account"}),s.jsx(L,{fontSize:"sm",children:"Connect your GroupMe account to send and receive messages directly from the CRM."})]})]}),s.jsx(ne,{leftIcon:s.jsx(S7,{}),colorScheme:"blue",onClick:w,isLoading:d,children:"Connect GroupMe"}),s.jsx(zt,{my:4}),s.jsxs(U,{width:"100%",children:[s.jsx(L,{fontWeight:"bold",mb:2,children:"Alternative: Enter Access Token Manually"}),s.jsxs(L,{fontSize:"sm",mb:4,children:["If OAuth connection fails, you can manually enter your GroupMe access token.",s.jsxs(eu,{href:"https://dev.groupme.com/session/new",isExternal:!0,color:"blue.500",ml:1,children:["Get token from dev.groupme.com ",s.jsx(C7,{mx:"2px"})]})]}),s.jsxs(de,{width:"100%",children:[s.jsx(ke,{placeholder:"Paste your GroupMe access token here",value:b,onChange:D=>g(D.target.value),flex:"1"}),s.jsx(ne,{onClick:z,isLoading:m,isDisabled:!b,colorScheme:"blue",children:"Save Token"})]})]})]})})]})},BR=async()=>{try{const e=await se.get("/integrations/nextgen/credentials");return e.data.connected===!1?null:e.data}catch(e){if(e.response?.status===404)return null;throw e}},qR=async()=>(await se.post("/integrations/nextgen/credentials/rotate")).data,HR=()=>{const[e,t]=h.useState(null),[r,n]=h.useState(!0),o=Et(),{onCopy:i}=Ep(e?.sid||""),{onCopy:a}=Ep(e?.apiKey||"");h.useEffect(()=>{(async()=>{try{const d=await BR();t(d)}catch(d){console.error("Failed to load NextGen cred",d),o({title:"Failed to load NextGen credentials",status:"error",duration:5e3})}finally{n(!1)}})()},[o]);const l=async()=>{try{n(!0);const c=await qR();t(c),o({title:"Keys rotated",status:"success",duration:4e3})}catch(c){console.error("Rotate failed",c),o({title:"Failed to rotate keys",status:"error",duration:5e3})}finally{n(!1)}};return r?s.jsxs(U,{borderWidth:1,borderRadius:"lg",p:4,mb:6,children:[s.jsx(Me,{as:"h3",size:"md",mb:2,children:"NextGen Lead Webhook"}),s.jsx(mt,{})]}):e?s.jsxs(U,{borderWidth:1,borderRadius:"lg",p:4,mb:6,children:[s.jsxs(le,{justify:"space-between",align:"center",mb:2,children:[s.jsx(Me,{as:"h3",size:"md",children:"NextGen Lead Webhook"}),s.jsx(ne,{leftIcon:s.jsx(b7,{}),size:"sm",onClick:l,isLoading:r,children:"Rotate Key"})]}),s.jsx(L,{fontSize:"sm",color:"gray.400",mb:3,children:"Provide these to NextGen as SID & API Key headers."}),s.jsxs(hs,{mb:3,size:"sm",children:[s.jsx(ke,{isReadOnly:!0,value:e.sid,fontFamily:"mono"}),s.jsx(gi,{children:s.jsx(ne,{size:"xs",onClick:i,children:s.jsx(N1,{})})})]}),s.jsxs(hs,{mb:3,size:"sm",children:[s.jsx(ke,{isReadOnly:!0,value:e.apiKey,fontFamily:"mono"}),s.jsx(gi,{children:s.jsx(ne,{size:"xs",onClick:a,children:s.jsx(N1,{})})})]}),s.jsxs(L,{fontSize:"xs",color:"gray.500",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]}):s.jsxs(U,{borderWidth:1,borderRadius:"lg",p:4,mb:6,children:[s.jsx(Me,{as:"h3",size:"md",mb:2,children:"NextGen Lead Webhook"}),s.jsx(L,{children:"No credential found. Please contact support."})]})},GR=()=>{const[e,t]=h.useState(""),[r,n]=h.useState(""),[o,i]=h.useState(!1),[a,l]=h.useState(!1),[c,d]=h.useState(!0),[u,p]=h.useState([]),[f,b]=h.useState(""),[g,m]=h.useState("30"),{isOpen:x,onOpen:y,onClose:E}=zi(),A=Et();h.useEffect(()=>{const _=async()=>{try{l(!0),console.log("Checking Calendly integration status...");const D=await se.get("/api/integrations/calendly");console.log("Calendly integration response:",D.data),d(!0),D.data&&D.data.token&&(n(D.data.token),t(D.data.user||""),i(!0),D.data.events&&Array.isArray(D.data.events)&&p(D.data.events))}catch(D){D.response&&D.response.status===401?(console.log("Authentication required for Calendly integration - user needs to log in"),d(!0)):D.response&&D.response.status===404?(console.error("Calendly integration endpoint not found. Endpoint: /api/integrations/calendly"),d(!1),console.error("Error details:",{url:D.config?.url,baseURL:D.config?.baseURL,fullURL:D.config?.baseURL+D.config?.url}),p([{id:"sample-1",name:"Demo Call (15min)",url:"demo-call",duration:15},{id:"sample-2",name:"Consultation (30min)",url:"consultation",duration:30}])):(console.error("Failed to fetch Calendly integration:",D),d(!1))}finally{l(!1)}};_();const z=setInterval(()=>{!o&&c&&_()},3e4);return()=>clearInterval(z)},[o,c,A]);const M=async()=>{if(!c){A({title:"API Unavailable",description:"The Calendly integration API is currently unavailable. Please try again later.",status:"warning",duration:5e3,isClosable:!0}),i(!0),p([{id:"sample-1",name:"Demo Call (15min)",url:"demo-call",duration:15},{id:"sample-2",name:"Consultation (30min)",url:"consultation",duration:30}]);return}l(!0);try{(await se.post("/api/integrations/calendly",{token:r,user:e})).data.success&&(i(!0),A({title:"Connected to Calendly",description:"Your Calendly account has been successfully connected.",status:"success",duration:5e3,isClosable:!0}),p([{id:"1",name:"Discovery Call",url:"discovery-call",duration:30},{id:"2",name:"Follow-up Meeting",url:"follow-up-meeting",duration:45}]))}catch(_){_.response&&_.response.status===401?(console.log("Authentication required for Calendly integration"),A({title:"Authentication Required",description:"Please log in to connect your Calendly account.",status:"warning",duration:5e3,isClosable:!0})):_.response&&_.response.status===404?(d(!1),A({title:"API Unavailable",description:"The Calendly integration API is currently unavailable. Sample data will be used for demonstration.",status:"warning",duration:5e3,isClosable:!0}),i(!0),p([{id:"sample-1",name:"Demo Call (15min)",url:"demo-call",duration:15},{id:"sample-2",name:"Consultation (30min)",url:"consultation",duration:30}])):(console.error("Failed to connect Calendly:",_),A({title:"Connection Failed",description:_.response?.data?.message||"Unable to connect to Calendly. Please check your credentials.",status:"error",duration:5e3,isClosable:!0}))}finally{l(!1)}},k=async()=>{l(!0);try{await se.delete("/api/integrations/calendly"),n(""),t(""),i(!1),p([]),A({title:"Disconnected from Calendly",description:"Your Calendly account has been disconnected.",status:"info",duration:5e3,isClosable:!0})}catch(_){_.response&&_.response.status===401?(console.log("Authentication required for Calendly integration"),n(""),t(""),i(!1),p([]),A({title:"Disconnected from Calendly",description:"Your Calendly account has been disconnected from this device.",status:"info",duration:5e3,isClosable:!0})):(console.error("Failed to disconnect Calendly:",_),A({title:"Disconnect Failed",description:_.response?.data?.message||"Unable to disconnect from Calendly.",status:"error",duration:5e3,isClosable:!0}))}finally{l(!1)}},w=async()=>{if(!f.trim()){A({title:"Event name required",description:"Please enter a name for your event.",status:"warning",duration:3e3,isClosable:!0});return}try{const _={id:`event-${Date.now()}`,name:f,url:f.toLowerCase().replace(/\s+/g,"-"),duration:parseInt(g,10)},z=[...u,_];p(z),b(""),m("30"),E();try{await se.put("/api/integrations/calendly/events",{events:z}),A({title:"Event Added",description:`${f} has been added to your Calendly events.`,status:"success",duration:3e3,isClosable:!0})}catch(D){D.response&&D.response.status===401?console.log("Authentication required for Calendly integration"):(p(u),console.error("Failed to save event to backend:",D),A({title:"Failed to Save Event",description:D.response?.data?.message||"An error occurred while saving the event to the server.",status:"error",duration:3e3,isClosable:!0}))}}catch(_){console.error("Failed to add event:",_),A({title:"Failed to Add Event",description:"An error occurred while adding the event.",status:"error",duration:3e3,isClosable:!0})}},C=async _=>{try{const z=[...u],D=u.filter(S=>S.id!==_);p(D);try{await se.put("/api/integrations/calendly/events",{events:D}),A({title:"Event Removed",description:"The event has been removed from your Calendly events.",status:"info",duration:3e3,isClosable:!0})}catch(S){S.response&&S.response.status===401?console.log("Authentication required for Calendly integration"):(p(z),console.error("Failed to save event deletion to backend:",S),A({title:"Failed to Remove Event",description:S.response?.data?.message||"An error occurred while removing the event from the server.",status:"error",duration:3e3,isClosable:!0}))}}catch(z){console.error("Failed to delete event:",z),A({title:"Failed to Remove Event",description:"An error occurred while removing the event.",status:"error",duration:3e3,isClosable:!0})}};return s.jsxs(U,{borderWidth:1,borderRadius:"lg",overflow:"hidden",p:6,children:[s.jsxs(he,{align:"start",spacing:6,width:"100%",children:[s.jsxs(U,{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between",children:[s.jsxs(Me,{as:"h3",size:"md",display:"flex",alignItems:"center",children:[s.jsx(lt,{as:mo,mr:2,color:"blue.500"})," Calendly Integration",!c&&s.jsx(L,{fontSize:"xs",color:"orange.500",ml:2,children:"(Demo Mode)"})]}),o?s.jsx(ne,{colorScheme:"red",size:"sm",onClick:k,isLoading:a,children:"Disconnect"}):null]}),o?s.jsxs(U,{width:"100%",children:[s.jsxs(L,{mb:4,children:["Connected as ",s.jsx("strong",{children:e})]}),s.jsx(Me,{as:"h4",size:"sm",mb:4,mt:6,children:"Your Calendly Events"}),u.length===0?s.jsx(L,{color:"gray.500",children:"No events configured. Add your first event to get started."}):s.jsx(he,{align:"stretch",spacing:3,mb:4,children:u.map(_=>s.jsxs(le,{borderWidth:1,borderRadius:"md",p:3,alignItems:"center",justifyContent:"space-between",children:[s.jsxs(U,{children:[s.jsx(L,{fontWeight:"bold",children:_.name}),s.jsxs(L,{fontSize:"sm",color:"gray.600",children:[_.duration," minutes • ",window.location.origin,"/calendly/",_.url]})]}),s.jsx(ne,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>C(_.id),children:s.jsx(mr,{})})]},_.id))}),s.jsx(ne,{leftIcon:s.jsx(yC,{}),colorScheme:"blue",onClick:y,children:"Add Event"})]}):s.jsxs(U,{width:"100%",children:[s.jsx(L,{mb:4,children:"Connect your Calendly account to book appointments with leads."}),!c&&s.jsx(L,{color:"orange.500",mb:3,fontSize:"sm",children:"Note: The Calendly API is currently unavailable. Enter any credentials to use demo mode."}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Calendly Username or Email"}),s.jsx(ke,{value:e,onChange:_=>t(_.target.value),placeholder:"username@example.com"})]}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Calendly API Token"}),s.jsx(ke,{type:"password",value:r,onChange:_=>n(_.target.value),placeholder:"Enter your Calendly API token"})]}),s.jsx(ne,{colorScheme:"blue",onClick:M,isLoading:a,children:"Connect to Calendly"})]})]}),s.jsxs(Ar,{isOpen:x,onClose:E,children:[s.jsx(Rr,{}),s.jsxs(Or,{children:[s.jsx(Zr,{children:"Add Calendly Event"}),s.jsx(wn,{}),s.jsxs(en,{children:[s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Event Name"}),s.jsx(ke,{value:f,onChange:_=>b(_.target.value),placeholder:"e.g., Discovery Call"})]}),s.jsxs(pe,{children:[s.jsx(fe,{children:"Duration (minutes)"}),s.jsx(ke,{type:"number",value:g,onChange:_=>m(_.target.value),min:"15",step:"15"})]})]}),s.jsxs(ko,{children:[s.jsx(ne,{variant:"ghost",mr:3,onClick:E,children:"Cancel"}),s.jsx(ne,{colorScheme:"blue",onClick:w,children:"Add Event"})]})]})]})]})},UR=()=>{const[e,t]=h.useState("https://api.textdrip.com/api"),[r,n]=h.useState(""),[o,i]=h.useState(""),[a,l]=h.useState(""),[c,d]=h.useState(!1),[u,p]=h.useState(!1),f=Et(),b=async()=>{if(!a&&(!r||!o)){f({title:"Provide API key or username & password",status:"warning",duration:3e3,isClosable:!0});return}try{p(!0),await se.post("/api/textdrip/connect",{baseUrl:e,email:r,password:o,apiKey:a}),f({title:"Connected to TextDrip",status:"success",duration:3e3,isClosable:!0}),d(!0)}catch(g){f({title:"Login failed",description:g?.response?.data?.message||"Unable to connect",status:"error",duration:4e3,isClosable:!0})}finally{p(!1)}};return s.jsx(U,{borderWidth:1,borderRadius:"lg",overflow:"hidden",p:6,children:s.jsxs(he,{align:"start",spacing:6,width:"100%",children:[s.jsx(U,{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between",children:s.jsxs(Me,{as:"h3",size:"md",display:"flex",alignItems:"center",children:[s.jsx(lt,{as:tb,mr:2,color:"orange.400"})," TextDrip Integration"]})}),c?s.jsxs(U,{children:[s.jsxs(L,{children:["Connected as ",s.jsx("strong",{children:r})]}),s.jsx(L,{fontSize:"sm",color:"gray.500",mt:2,children:"You can now use Quick-Drip and Add-to-Campaign with your own TextDrip account."})]}):s.jsxs(U,{width:"100%",children:[s.jsx(L,{mb:4,children:"Login to your TextDrip account to enable SMS campaigns & quick-drip."}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Email"}),s.jsx(ke,{placeholder:"user@example.com",value:r,onChange:g=>n(g.target.value)})]}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Password"}),s.jsx(ke,{type:"password",value:o,onChange:g=>i(g.target.value)})]}),s.jsx(L,{fontSize:"sm",color:"gray.500",mb:2,children:"— or use API Key —"}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"API Key"}),s.jsx(ke,{value:a,onChange:g=>l(g.target.value),placeholder:"TD_xxx"})]}),s.jsxs(pe,{mb:4,children:[s.jsx(fe,{children:"Base URL"}),s.jsx(ke,{value:e,onChange:g=>t(g.target.value)})]}),s.jsx(ne,{colorScheme:"orange",leftIcon:s.jsx(oi,{}),onClick:b,isLoading:u,children:"Connect to TextDrip"})]})]})})},WR=()=>{Jt();const e=[{name:"Calendly",description:"Connect your Calendly account to manage appointment scheduling",isActive:!1,icon:mo,component:s.jsx(GR,{})},{name:"GroupMe",description:"Connect your GroupMe account for group messaging and collaboration",isActive:!1,icon:rb,component:s.jsx($R,{})},{name:"TextDrip",description:"Send SMS and manage campaigns directly via TextDrip",isActive:!1,icon:tb,component:s.jsx(UR,{})}];return s.jsxs(js,{maxW:"6xl",py:8,children:[s.jsx(HR,{}),s.jsxs(U,{textAlign:"center",mb:10,children:[s.jsx(Me,{as:"h1",size:"xl",fontWeight:"bold",mb:4,children:"Integrations"}),s.jsx(L,{fontSize:"lg",color:"gray.600",children:"Connect and manage your external services"})]}),s.jsx(av,{columns:{base:1,lg:1},spacing:8,children:e.map((t,r)=>s.jsxs(U,{borderWidth:1,borderRadius:"lg",overflow:"hidden",children:[s.jsxs(U,{p:6,bg:"gray.50",borderBottomWidth:1,children:[s.jsxs(Me,{as:"h3",size:"md",display:"flex",alignItems:"center",children:[s.jsx(lt,{as:t.icon,mr:2,color:"blue.500"})," ",t.name]}),s.jsx(L,{mt:2,color:"gray.600",children:t.description})]}),s.jsx(U,{bg:"white",children:t.component})]},r))})]})},X1="client_notes_",Z1="deleted_policy_documents";function YR(e){if(!e)return{metadata:"",visible:""};const t=e.trim().startsWith("{")&&e.includes("purchase_id"),r=/New .*? Lead/.test(e)&&e.includes("Imported on:");try{const n=JSON.parse(e);if(n&&typeof n=="object")return{metadata:e,visible:""}}catch{}return t||r?{metadata:e,visible:""}:{metadata:"",visible:e}}const VR=()=>{const e=Qt(),t=Et(),{getNotes:r,updateNotes:n}=mh(),o=h.useRef(null),[i,a]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(""),[p,f]=h.useState(!0),[b,g]=h.useState(null),[m,x]=h.useState(null),[y,E]=h.useState(!1),[A,M]=h.useState({}),[k,w]=h.useState({}),[C,_]=h.useState([]),[z,D]=h.useState(!1),[S,P]=h.useState(0),[I,F]=h.useState(!1),[G,V]=h.useState(""),[B,Z]=h.useState(()=>{const T=localStorage.getItem(Z1);return T?JSON.parse(T):[]}),{isOpen:Q,onOpen:ue,onClose:ie}=zi(),[X,J]=h.useState(!1),[Ce,Se]=h.useState(!1),[ze,nt]=h.useState(new Set),{increment:ot}=bh(),Pe=Xe("rgba(248, 250, 252, 0.9)","rgba(26, 32, 44, 0.9)"),Fe=Xe("rgba(255, 255, 255, 0.5)","rgba(45, 55, 72, 0.5)"),Re=Xe("gray.200","gray.600"),xe=Xe("gray.800","white"),tt=Xe("gray.600","gray.400"),Ie=Xe("orange.500","orange.400");h.useCallback(async(T,W)=>{M(R=>({...R,[T]:"saving"}));try{await n(T,W),M(R=>({...R,[T]:"saved"})),w(R=>({...R,[T]:new Date})),setTimeout(()=>{M(R=>({...R,[T]:"idle"}))},3e3)}catch(R){console.error("Error saving notes:",R),M(q=>({...q,[T]:"error"})),t({title:"Failed to save notes",description:"Your changes could not be saved.",status:"error",duration:3e3,isClosable:!0})}},[n,t]);const _e=T=>{const W=r(T);if(W!==void 0)return W;const R=localStorage.getItem(`${X1}${T}`);if(R!==null)return R;const re=i.find(ye=>ye._id===T)?.notes??"";return YR(re).visible},rt=T=>k[T],ce=h.useCallback(async()=>{f(!0),g(null);try{const T=await se.get("/api/leads",{params:{dispositions:"SOLD",getAllResults:"true"}});if(T.data&&T.data.leads){const W=T.data.leads.map(R=>{const q=r(R._id);if(q)return{...R,notes:q};const re=localStorage.getItem(`${X1}${R._id}`);return re?{...R,notes:re}:R});a(W),c(W)}else a([]),c([])}catch(T){console.error("Error fetching clients:",T),g("Failed to load clients. Please try again.")}finally{f(!1)}},[r]);h.useEffect(()=>{const T=W=>{const{leadId:R,notes:q}=W.detail;if(R&&q!==void 0){if(y&&m&&m._id===R)return;a(re=>re.map(ye=>ye._id===R&&ye.notes!==q?{...ye,notes:q}:ye)),c(re=>re.map(ye=>ye._id===R&&ye.notes!==q?{...ye,notes:q}:ye))}};return window.addEventListener("notesUpdated",T),()=>{window.removeEventListener("notesUpdated",T)}},[y,m]),h.useEffect(()=>{m&&E(!1)},[m]),h.useEffect(()=>{y&&o.current&&o.current.focus()},[y]),h.useEffect(()=>{if(!d.trim()){c(i);return}const T=d.toLowerCase().trim(),W=i.filter(R=>R.name?.toLowerCase().includes(T)||R.email?.toLowerCase().includes(T)||R.phone?.includes(T)||R.state?.toLowerCase().includes(T)||R.city?.toLowerCase().includes(T));c(W)},[d,i]),h.useEffect(()=>{ce()},[ce]);const Be=T=>{x(T)},Qe=(T,W)=>{navigator.clipboard.writeText(T).then(()=>{t({title:"Copied!",description:`${W} copied to clipboard.`,status:"success",duration:2e3,isClosable:!0})},R=>{console.error("Could not copy text: ",R),t({title:"Copy failed",description:"Could not copy to clipboard.",status:"error",duration:2e3,isClosable:!0})})},bt=T=>{if(!T)return"";const R=T.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return R?"("+R[1]+") "+R[2]+"-"+R[3]:T},Je=T=>{if(!T)return"";try{if(T.includes("/")&&!T.includes("T"))return T;const W=new Date(T);if(!isNaN(W.getTime()))return`${(W.getMonth()+1).toString().padStart(2,"0")}/${W.getDate().toString().padStart(2,"0")}/${W.getFullYear()}`}catch(W){console.log("Error formatting date:",W)}return T},Ue=T=>{if(!T)return"";try{const W=new Date(T);return isNaN(W.getTime())?`Client since ${Je(T)}`:`Client since ${Je(T)} (${U1(W,{addSuffix:!0})})`}catch(W){return console.error("Error in formatClientSince:",W),`Client since ${Je(T)}`}},We=()=>{if(!m)return null;const T=A[m._id]||"idle",W=rt(m._id);return T==="saving"?s.jsxs(le,{align:"center",mr:2,children:[s.jsx(mt,{size:"xs",mr:1,color:"blue.500"}),s.jsx(L,{fontSize:"xs",color:"blue.500",children:"Saving..."})]}):T==="saved"?s.jsxs(le,{align:"center",mr:2,children:[s.jsx(lh,{color:"green",style:{marginRight:"4px"}}),s.jsxs(L,{fontSize:"xs",color:"green.500",children:["Saved ",W?U1(W,{addSuffix:!0}):""]})]}):T==="error"?s.jsxs(le,{align:"center",mr:2,children:[s.jsx(aC,{color:"red",style:{marginRight:"4px"}}),s.jsx(L,{fontSize:"xs",color:"red.500",children:"Failed to save"})]}):null},_t=async T=>{const W=T.target.files?.[0];if(!(!W||!m)){if(W.type!=="application/pdf"){t({title:"Invalid file type",description:"Only PDF files are allowed",status:"error",duration:3e3,isClosable:!0});return}if(W.size>10*1024*1024){t({title:"File too large",description:"File size must be less than 10MB",status:"error",duration:3e3,isClosable:!0});return}try{Se(!0);const R=new FormData;R.append("file",W),R.append("clientId",m._id),(await se.post("/api/documents/upload",R,{headers:{"Content-Type":"multipart/form-data"}})).data&&(await dt(m._id),t({title:"Document uploaded successfully",status:"success",duration:2e3,isClosable:!0}))}catch(R){t({title:"Error uploading document",description:R instanceof Error?R.message:"Failed to upload document",status:"error",duration:3e3,isClosable:!0})}finally{Se(!1),T.target.value=""}}},dt=h.useCallback(async T=>{if(T)try{J(!0);const W=await se.get(`/api/documents/client/${T}`);if(W.data&&W.data.documents){const R=W.data.documents.filter(q=>!B.includes(q._id));_(R)}}catch(W){console.error("Error fetching policy documents:",W),_([])}finally{J(!1)}},[B]),Xt=T=>{x(T),dt(T._id),ue()},st=async T=>{if(!(!T||!window.confirm("Are you sure you want to delete this document?")))try{nt(R=>new Set(R).add(T)),await se.delete(`/api/documents/${T}`),_(R=>R.filter(q=>q._id!==T));const W=[...B,T];Z(W),localStorage.setItem(Z1,JSON.stringify(W)),t({title:"Document deleted",description:"Policy document has been deleted successfully",status:"success",duration:3e3,isClosable:!0})}catch(W){console.error("Error deleting document:",W),t({title:"Deletion failed",description:"Could not delete the document.",status:"error",duration:3e3,isClosable:!0})}finally{nt(W=>{const R=new Set(W);return R.delete(T),R})}},it=T=>T<1024?T+" bytes":T<1024*1024?(T/1024).toFixed(1)+" KB":(T/(1024*1024)).toFixed(1)+" MB",yt=async T=>{try{a(W=>W.filter(R=>R._id!==T)),c(W=>W.filter(R=>R._id!==T)),await se.patch(`/api/leads/${T}`,{disposition:""})}catch(W){console.error("Failed to remove client",W),t({title:"Error",description:"Could not update disposition",status:"error",duration:3e3}),ce()}};return h.useEffect(()=>{const T=setInterval(ce,3e4);return()=>clearInterval(T)},[ce]),s.jsxs(U,{bg:Pe,minHeight:"100vh",children:[s.jsxs(js,{maxW:"container.xl",py:6,children:[s.jsxs(le,{mb:6,justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[s.jsxs(le,{align:"center",children:[s.jsx(yu,{size:"28px",color:"#FF8C00",style:{marginRight:"12px"}}),s.jsx(Me,{size:"lg",color:xe,children:"Client Management"}),s.jsxs(He,{ml:3,colorScheme:"orange",fontSize:"md",children:[l.length," client",l.length!==1?"s":""]})]}),s.jsxs(de,{spacing:4,children:[s.jsx(ke,{placeholder:"Search clients...",value:d,onChange:T=>u(T.target.value),width:"300px",bg:"white",borderColor:Re,_focus:{borderColor:Ie}}),s.jsx(ne,{colorScheme:"orange",onClick:ce,children:"Refresh"})]})]}),p&&s.jsx(le,{justify:"center",align:"center",height:"50vh",children:s.jsx(mt,{size:"xl",color:Ie,thickness:"4px"})}),b&&!p&&s.jsxs($t,{status:"error",borderRadius:"md",children:[s.jsx(Yt,{}),b]}),m&&!p&&s.jsxs(as,{mb:6,boxShadow:"xl",borderWidth:"1px",borderColor:Re,bg:Fe,children:[s.jsx(tu,{children:s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsx(Me,{size:"md",color:xe,children:"Client Details"}),s.jsx(je,{"aria-label":"Close details",size:"sm",variant:"ghost",colorScheme:"gray",borderRadius:"full",width:"18px",height:"18px",minWidth:"18px",_hover:{bg:"red.600"},onClick:()=>x(null),icon:s.jsx(L,{fontSize:"xs",children:"✕"})})]})}),s.jsx(ls,{children:s.jsxs(co,{templateColumns:["1fr","1fr","1fr 1fr","1fr 2fr"],gap:6,children:[s.jsx(pt,{children:s.jsxs(he,{align:"start",spacing:4,bg:"gray.50",p:4,borderRadius:"md",borderWidth:"1px",borderColor:Re,children:[s.jsxs(le,{justify:"center",align:"center",width:"100%",direction:"column",children:[s.jsx(Qr,{size:"xl",name:m.name,bg:Ie,mb:2}),s.jsx(Me,{size:"md",textAlign:"center",children:m.name}),s.jsx(L,{color:"gray.500",fontSize:"sm",children:Ue(m.createdAt)})]}),s.jsx(zt,{}),s.jsxs(U,{width:"100%",children:[s.jsx(L,{fontWeight:"bold",mb:2,children:"Contact Information"}),s.jsxs(de,{mb:2,children:[s.jsx(si,{color:"gray"}),s.jsx(L,{cursor:"pointer",onClick:()=>Qe(m.phone??"","Phone number"),_hover:{color:Ie},children:bt(m.phone??"")}),s.jsx(tf,{size:"14px",color:"gray",cursor:"pointer",onClick:()=>Qe(m.phone??"","Phone number")})]}),s.jsxs(de,{mb:2,children:[s.jsx(kr,{color:"gray"}),s.jsx(L,{cursor:"pointer",onClick:()=>Qe(m.email??"","Email"),_hover:{color:Ie},isTruncated:!0,maxWidth:"200px",children:m.email??""}),s.jsx(tf,{size:"14px",color:"gray",cursor:"pointer",onClick:()=>Qe(m.email??"","Email")})]}),s.jsxs(de,{mb:2,children:[s.jsx(mu,{color:"gray"}),s.jsxs(L,{children:[m.city,", ",m.state," ",m.zipcode]})]})]}),s.jsxs(U,{width:"100%",children:[s.jsx(L,{fontWeight:"bold",mb:2,children:"Personal Information"}),s.jsxs(de,{mb:2,children:[s.jsx(mo,{color:"gray"}),s.jsxs(L,{children:["DOB: ",Je(m.dob??"")]})]}),s.jsxs(de,{width:"100%",justify:"space-between",children:[s.jsxs(L,{children:["Height: ",m.height||"N/A"]}),s.jsxs(L,{children:["Weight: ",m.weight||"N/A"]}),s.jsxs(L,{children:["Gender: ",m.gender||"N/A"]})]})]})]})}),s.jsx(pt,{children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsxs(U,{p:4,borderWidth:"1px",borderColor:Re,borderRadius:"md",bg:"white",position:"relative",children:[s.jsxs(le,{justify:"space-between",align:"center",mb:3,children:[s.jsxs(Me,{size:"sm",display:"flex",alignItems:"center",children:[s.jsx(Zx,{style:{marginRight:"8px"}}),"Client Notes"]}),s.jsxs(le,{align:"center",children:[We(),!y&&s.jsx(po,{label:"Edit notes",children:s.jsx(je,{"aria-label":"Edit notes",icon:s.jsx(Si,{}),size:"sm",variant:"ghost",colorScheme:"gray",ml:2,onClick:()=>E(!0)})})]})]}),s.jsx(zt,{mb:3}),y?s.jsx(Mb,{leadId:m._id,initialNotes:_e(m._id)||"",style:{minHeight:"200px"}}):s.jsx(U,{minHeight:"200px",p:3,bg:"gray.50",borderRadius:"md",whiteSpace:"pre-wrap",overflowY:"auto",maxHeight:"400px",onClick:()=>E(!0),cursor:"pointer",_hover:{bg:"gray.100"},children:_e(m._id)||"No notes available. Click to add notes."})]}),s.jsxs(le,{gap:4,wrap:"wrap",justify:"flex-start",children:[s.jsx(ne,{leftIcon:s.jsx(si,{}),colorScheme:"green",color:"white",onClick:()=>{const T=(m.phone??"").replace(/\D/g,"");m._id&&ot(m._id),Nu(T)},maxWidth:"160px",width:"auto",children:"Call Client"}),s.jsx(ne,{leftIcon:s.jsx(kr,{}),colorScheme:"orange",variant:"outline",color:xe,onClick:()=>{window.location.href=`mailto:${m.email??""}`},maxWidth:"160px",width:"auto",children:"Email Client"}),s.jsx(ne,{leftIcon:s.jsx(dC,{}),colorScheme:"orange",variant:"ghost",color:xe,onClick:()=>Xt(m),maxWidth:"160px",width:"auto",children:"Documents"}),s.jsx(ne,{leftIcon:s.jsx(tC,{}),colorScheme:"orange",variant:"ghost",color:xe,onClick:()=>{e(`/leads?disposition=SOLD&search=${m.name}`)},maxWidth:"160px",width:"auto",children:"View in Leads"})]})]})})]})})]}),!p&&!b&&s.jsx(s.Fragment,{children:l.length===0?s.jsxs(le,{direction:"column",align:"center",justify:"center",height:"40vh",bg:Fe,p:10,borderRadius:"lg",boxShadow:"md",children:[s.jsx(yu,{size:"48px",color:"#FF8C00"}),s.jsx(L,{mt:4,fontSize:"xl",color:"gray.500",children:"No clients found"}),s.jsx(L,{color:"gray.400",mt:2,children:d?"Try adjusting your search":"Convert leads to clients by setting their disposition to 'SOLD'"})]}):s.jsx(co,{templateColumns:["1fr","1fr","repeat(2, 1fr)","repeat(3, 1fr)"],gap:6,children:l.map(T=>s.jsxs(as,{borderWidth:"1px",borderColor:Re,borderRadius:"lg",overflow:"hidden",boxShadow:"md",transition:"all 0.3s",_hover:{transform:"translateY(-5px)",boxShadow:"xl"},bg:Fe,children:[s.jsx(tu,{pb:0,children:s.jsxs(le,{justify:"space-between",align:"flex-start",children:[s.jsxs(le,{direction:"column",children:[s.jsx(Me,{size:"md",color:xe,children:T.name}),s.jsx(L,{color:tt,fontSize:"sm",children:Ue(T.createdAt)})]}),s.jsx(Qr,{name:T.name,bg:Ie,size:"md"})]})}),s.jsxs(ls,{children:[s.jsxs(he,{align:"start",spacing:2,children:[s.jsxs(de,{children:[s.jsx(si,{color:"gray",size:"14px"}),s.jsx(L,{children:bt(T.phone??"")})]}),s.jsxs(de,{children:[s.jsx(kr,{color:"gray",size:"14px"}),s.jsx(L,{isTruncated:!0,maxW:"200px",children:T.email??""})]}),s.jsxs(de,{children:[s.jsx(mu,{color:"gray",size:"14px"}),s.jsx(L,{children:T.state})]})]}),_e(T._id)&&s.jsxs(U,{mt:4,children:[s.jsx(L,{fontSize:"sm",fontWeight:"medium",mb:1,children:"Notes:"}),s.jsx(L,{fontSize:"sm",color:tt,noOfLines:2,children:_e(T._id)})]})]}),s.jsxs(lv,{pt:0,children:[s.jsx(ne,{onClick:()=>Be(T),colorScheme:"orange",color:"white",size:"sm",width:"full",children:"View Details"}),s.jsx(je,{"aria-label":"Remove client",icon:s.jsx(mr,{}),size:"sm",variant:"ghost",position:"absolute",bottom:"2",right:"2",onClick:W=>{W.stopPropagation(),yt(T._id)}})]})]},T._id))})})]}),s.jsxs(Ar,{isOpen:Q,onClose:ie,size:"xl",closeOnOverlayClick:!1,children:[s.jsx(Rr,{}),s.jsxs(Or,{maxW:"800px",children:[s.jsx(Zr,{children:s.jsxs(de,{justify:"space-between",children:[s.jsxs(L,{children:["Documents for ",m?.name]}),s.jsxs(He,{colorScheme:"blue",fontSize:"lg",children:[C.length," ",C.length===1?"Document":"Documents"]})]})}),s.jsx(wn,{}),s.jsx(en,{children:s.jsxs(he,{spacing:4,align:"stretch",children:[s.jsx(U,{p:4,borderWidth:"2px",borderStyle:"dashed",borderColor:Re,rounded:"md",bg:Xe("gray.50","gray.900"),children:s.jsxs(he,{spacing:3,children:[s.jsx(EC,{size:24,color:"#FF8C00"}),s.jsx(L,{fontWeight:"medium",children:Ce?"Uploading...":"Click to upload PDF document"}),s.jsx(ke,{type:"file",accept:".pdf",onChange:_t,disabled:Ce,display:"none",id:"doc-upload"}),s.jsx(ne,{as:"label",htmlFor:"doc-upload",colorScheme:"orange",size:"sm",isLoading:Ce,cursor:"pointer",children:"Select File"})]})}),X?s.jsx(le,{justify:"center",py:8,children:s.jsx(mt,{size:"lg",color:"blue.500"})}):C.length===0?s.jsx(U,{p:8,textAlign:"center",borderWidth:"1px",borderColor:Re,rounded:"md",children:s.jsx(L,{color:xe,children:"No documents uploaded yet"})}):s.jsx(he,{spacing:2,align:"stretch",children:C.map(T=>s.jsx(U,{p:4,borderWidth:"1px",borderColor:Re,rounded:"md",bg:Pe,_hover:{shadow:"md"},children:s.jsxs(le,{justify:"space-between",align:"center",children:[s.jsxs(he,{align:"start",spacing:1,children:[s.jsx(L,{fontWeight:"medium",children:T.fileName}),s.jsxs(de,{spacing:4,children:[s.jsx(L,{fontSize:"sm",color:xe,children:it(T.fileSize)}),s.jsx(L,{fontSize:"sm",color:xe,children:Je(T.uploadDate)})]})]}),s.jsxs(de,{spacing:2,children:[s.jsx(po,{label:"Download",placement:"top",children:s.jsx(je,{"aria-label":"Download document",icon:s.jsx(sC,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>window.open(`http://localhost:3001${T.fileUrl}`,"_blank")})}),s.jsx(po,{label:"Delete",placement:"top",children:s.jsx(je,{"aria-label":"Delete document",icon:s.jsx(mr,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>st(T._id),isLoading:ze.has(T._id)})})]})]})},T._id))})]})}),s.jsx(ko,{children:s.jsx(ne,{onClick:ie,children:"Close"})})]})]})]})},cp=e=>{if(!e)return"";let t;if(typeof e=="number"?t=new Date(e*(e>1e10?1:1e3)):typeof e=="string"?t=new Date(e):t=e,isNaN(t.getTime()))return"";const r=new Date,n=r.getTime()-t.getTime(),o=Math.floor(n/6e4);if(o<1)return"Just now";if(o<60)return`${o}m ago`;if(t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())return t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0});const i=new Date(r);return i.setDate(i.getDate()-1),t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()?"Yesterday":t.toLocaleDateString([],{month:"short",day:"numeric"})},KR=e=>/[\u{1F300}-\u{1F6FF}\u{1F900}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu.test(e),QR=e=>{const t=/[\u{1F300}-\u{1F6FF}\u{1F900}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,r=e.match(t);return r?r.join(""):""},JR=e=>{const t=["#FF5252","#FF9800","#FFEB3B","#4CAF50","#2196F3","#673AB7","#E91E63","#00BCD4","#009688","#795548"];let r=0;for(let o=0;o<e.length;o++)r=e.charCodeAt(o)+((r<<5)-r);const n=Math.abs(r)%t.length;return t[n]},XR=v.memo(({message:e,isFirstInBlock:t=!0,isLastInBlock:r=!0})=>{const n=e.sender_type==="user",o=e.name||e.senderName||"Unknown",i=n?"blue.500":JR(o),a=cp(e.created_at||e.createdAt),l=new Date(e.created_at||e.createdAt||Date.now()).toLocaleString(),[c,d]=h.useState(e.reactions||{}),u=()=>{navigator.clipboard&&e.text&&navigator.clipboard.writeText(e.text)},p=f=>{d(b=>{const g={...b};return g[f]||(g[f]=[]),g[f].includes("You")||g[f].push("You"),g})};return s.jsxs(de,{py:1,px:1,alignItems:"flex-start",w:"100%",justifyContent:n?"flex-end":"flex-start",spacing:2,children:[!n&&t&&s.jsx(Qr,{size:"sm",name:o,src:e.avatar_url||e.avatarUrl,mr:1,borderRadius:"50%"}),!n&&!t&&s.jsx(U,{w:"32px",mr:1}),s.jsxs(le,{direction:"column",maxWidth:"75%",position:"relative",children:[!n&&t&&s.jsx(L,{fontWeight:"bold",color:"gray.200",fontSize:"xs",mb:.5,ml:1,children:o}),s.jsxs(tx,{children:[s.jsx(po,{label:l,placement:n?"left":"right",hasArrow:!0,bg:"gray.700",color:"white",fontSize:"xs",openDelay:500,children:s.jsx(rx,{as:U,children:s.jsx(U,{bg:n?"blue.500":"#262626",color:"white",px:3,py:2,borderRadius:"18px",borderTopLeftRadius:!n&&t?"4px":void 0,borderTopRightRadius:n&&t?"4px":void 0,borderBottomLeftRadius:!n&&r?"4px":void 0,borderBottomRightRadius:n&&r?"4px":void 0,boxShadow:"0 1px 2px rgba(0,0,0,0.3)",position:"relative",borderLeftColor:n?void 0:i,borderLeftWidth:n?void 0:"3px",_after:r?{content:'""',position:"absolute",width:"10px",height:"10px",transform:"rotate(45deg)",bg:n?"blue.500":"#262626",borderBottomColor:n?void 0:i,borderBottomWidth:n?void 0:"3px",borderRightColor:n?void 0:i,borderRightWidth:n?void 0:"3px",bottom:"8px",left:n?void 0:"-5px",right:n?"-5px":void 0}:void 0,children:s.jsx(L,{fontSize:"15px",lineHeight:"1.4",wordBreak:"break-word",children:e.text||""})})})}),s.jsxs(nx,{bg:"#262626",borderColor:"#333",boxShadow:"lg",zIndex:10,children:[s.jsx(cs,{onClick:u,bg:"#262626",_hover:{bg:"#333"},color:"white",children:"Copy Text"}),n&&s.jsx(cs,{bg:"#262626",_hover:{bg:"#333"},color:"white",children:"Delete Message"}),s.jsx(cs,{bg:"#262626",_hover:{bg:"#333"},color:"white",onClick:()=>p("👍"),children:"Add Reaction"})]})]}),Object.keys(c).length>0||s.jsx(U,{ml:n?"auto":0,mr:n?0:"auto",children:s.jsx(dO,{reactions:c,onAddReaction:p})}),r&&s.jsx(L,{fontSize:"11px",color:"gray.500",alignSelf:n?"flex-end":"flex-start",mt:.5,mx:1,children:a})]}),n&&r&&s.jsx(Qr,{size:"sm",name:o,src:e.avatar_url||e.avatarUrl,ml:1,borderRadius:"50%"}),n&&!r&&s.jsx(U,{w:"32px",ml:1})]})}),ZR=v.memo(({group:e,hasNewMessages:t,lastMessageText:r,lastMessageSender:n,lastMessageTimestamp:o,unreadCount:i,displayUnread:a,isPinned:l,hasNotifications:c,renderGroupAvatar:d,onGroupClick:u,onTogglePinned:p,onToggleNotifications:f})=>s.jsxs(le,{p:3,alignItems:"center",cursor:"pointer",onClick:b=>{if(b.stopPropagation(),b.preventDefault(),console.log(`DIRECT GROUP SELECTION: ${e.groupId} - ${e.groupName}`),typeof u=="function")u(b,e.groupId);else{console.log("EMERGENCY: Using direct selection method");const g=e.groupId;if(window.emergencySelectGroupMe)window.emergencySelectGroupMe(g,"direct-from-group-item");else{console.log("CRITICAL: Attempting URL-based group selection");const m=new CustomEvent("groupme-select",{detail:{groupId:g},bubbles:!0,cancelable:!0});document.dispatchEvent(m)}}},"data-group-id":e.groupId,"data-testid":"group-item",role:"button","aria-label":`Open chat with ${e.groupName}`,_hover:{bg:"#222222"},borderBottomWidth:"1px",borderColor:"#262626",bg:t?"rgba(59, 130, 246, 0.2)":void 0,transition:"background-color 0.2s ease",position:"relative",children:[l&&s.jsx(lt,{as:bu,color:"blue.400",mr:2,transform:"rotate(45deg)",boxSize:3}),d(e),s.jsxs(U,{flex:1,minWidth:0,pr:0,children:[s.jsxs(de,{children:[s.jsx(L,{fontWeight:"bold",color:"white",noOfLines:1,fontSize:"md",children:e.groupName}),KR(e.groupName)?s.jsx(L,{fontSize:"md",children:QR(e.groupName)}):null,t&&s.jsx(L,{fontSize:"xs",color:"blue.400",fontWeight:"bold",children:"NEW"})]}),s.jsxs(L,{fontSize:"sm",color:"gray.400",noOfLines:1,maxWidth:"310px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:[n?`${n}: `:"",r]})]}),s.jsxs(le,{alignItems:"center",ml:0,minWidth:"auto",children:[s.jsxs(he,{alignItems:"flex-end",spacing:0,minWidth:"30px",mr:0,children:[s.jsx(L,{fontSize:"xs",color:"gray.500",whiteSpace:"nowrap",children:cp(o)}),a&&s.jsx(le,{mt:1,bg:"blue.500",color:"white",borderRadius:"full",px:i==="99+"?1.5:2,py:.5,fontSize:"xs",minWidth:"20px",justifyContent:"center",alignItems:"center",fontWeight:"bold",children:i})]}),s.jsx(U,{className:"group-menu",onClick:b=>b.stopPropagation(),ml:0,children:s.jsxs(tx,{placement:"bottom-end",children:[s.jsx(rx,{as:je,"aria-label":"Group options",icon:s.jsx(Xx,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"},padding:0,minWidth:"20px",height:"20px"}),s.jsxs(nx,{bg:"#262626",borderColor:"#333",boxShadow:"lg",children:[s.jsx(cs,{onClick:()=>p(e.groupId),bg:"#262626",_hover:{bg:"#333"},color:"white",icon:s.jsx(lt,{as:bu,color:l?"blue.400":"gray.400"}),children:l?"Unpin Chat":"Pin Chat"}),s.jsx(cs,{onClick:()=>f(e.groupId),bg:"#262626",_hover:{bg:"#333"},color:"white",icon:s.jsx(lt,{as:c?Jx:J4,color:c?"green.400":"gray.400"}),children:s.jsxs(de,{justify:"space-between",width:"100%",children:[s.jsx(L,{children:c?"Notifications On":"Notifications Off"}),s.jsx(cv,{size:"sm",isChecked:c,colorScheme:"green",ml:2})]})})]})]})})]})]})),eO=v.memo(({message:e,index:t,onMessageClick:r})=>s.jsx(dv,{in:!0,offsetY:"20px",style:{position:"relative",transitionDuration:"0.5s",opacity:t===0?1:.8-t*.2},children:s.jsxs(U,{bg:"#0084ff",color:"white",borderRadius:"18px",px:3,py:2,maxWidth:"300px",boxShadow:"md",_hover:{opacity:1},cursor:"pointer",onClick:()=>r(e.groupId),children:[s.jsxs(de,{children:[s.jsxs(L,{fontWeight:"bold",fontSize:"sm",children:[e.groupName,":"]}),s.jsx(L,{fontSize:"xs",color:"whiteAlpha.800",children:cp(e.timestamp)})]}),s.jsxs(L,{fontSize:"sm",fontWeight:"medium",children:[e.senderName&&`${e.senderName}: `,e.text]})]})})),tO=v.memo(({groupName:e,groupAvatar:t,memberCount:r,onBackClick:n})=>s.jsxs(de,{px:3,py:2,bg:"gray.800",borderBottomWidth:"1px",borderColor:"#262626",spacing:2,children:[s.jsx(lt,{as:Qx,color:"gray.400",cursor:"pointer",_hover:{color:"white"},onClick:n,boxSize:5}),s.jsx(Qr,{size:"sm",name:e,src:t,bg:t?void 0:"gray.600"}),s.jsxs(U,{flex:1,children:[s.jsx(L,{fontSize:"md",fontWeight:"bold",color:"white",noOfLines:1,children:e}),r&&s.jsxs(L,{fontSize:"xs",color:"gray.400",children:[r," members"]})]}),s.jsx(je,{"aria-label":"Group options",icon:s.jsx(Xx,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"}})]})),rO=({date:e})=>{const t=nO(e);return s.jsxs(mv,{my:2,children:[s.jsx(zt,{flex:"1",borderColor:"gray.700"}),s.jsx(L,{mx:2,fontSize:"xs",color:"gray.500",fontWeight:"medium",children:t}),s.jsx(zt,{flex:"1",borderColor:"gray.700"})]})},nO=e=>{const t=new Date(e),r=new Date,n=new Date;return n.setDate(n.getDate()-1),t.toDateString()===r.toDateString()?"Today":t.toDateString()===n.toDateString()?"Yesterday":t.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"})},oO=e=>{if(!e||e.length===0)return[];const t=[];let r=null;return e.forEach((n,o,i)=>{const a=new Date(n.created_at||n.createdAt||Date.now()),l=a.toDateString();l!==r&&(t.push({type:"separator",date:a}),r=l);const c=o>0?i[o-1]:null,d=o<i.length-1?i[o+1]:null,u=c?.sender_type==="user"?"user":c?.name||c?.senderName,p=n.sender_type==="user"?"user":n.name||n.senderName,f=d?.sender_type==="user"?"user":d?.name||d?.senderName,b=u!==p,g=f!==p;t.push({type:"message",message:n,isFirstInBlock:b,isLastInBlock:g})}),t},sO=({senderName:e})=>s.jsxs(de,{py:1,px:1,alignItems:"flex-start",spacing:2,children:[s.jsx(Qr,{size:"sm",name:e,mr:1}),s.jsx(U,{bg:"#262626",color:"white",px:3,py:2,borderRadius:"18px",borderTopLeftRadius:"4px",boxShadow:"0 1px 2px rgba(0,0,0,0.3)",position:"relative",children:s.jsxs(de,{spacing:1,children:[s.jsxs(L,{fontSize:"xs",color:"gray.300",mr:1,children:[e," is typing"]}),s.jsx(U,{className:"typing-dot",animation:"bounce 1s infinite"}),s.jsx(U,{className:"typing-dot",animation:"bounce 1s infinite 0.2s"}),s.jsx(U,{className:"typing-dot",animation:"bounce 1s infinite 0.4s"})]})}),s.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes bounce {
          0%, 60%, 100% {
            transform: translateY(0);
          }
          30% {
            transform: translateY(-4px);
          }
        }
        .typing-dot {
          width: 6px;
          height: 6px;
          background-color: #999;
          border-radius: 50%;
        }
      `})]}),iO=({onClick:e})=>s.jsx(je,{"aria-label":"Scroll to bottom",icon:s.jsx(Kx,{}),position:"absolute",bottom:"80px",right:"20px",colorScheme:"blue",borderRadius:"full",boxShadow:"lg",size:"md",onClick:e,zIndex:2}),aO=()=>s.jsxs(U,{position:"relative",my:2,width:"100%",children:[s.jsx(zt,{borderColor:"red.500",borderWidth:"1px"}),s.jsx(U,{position:"absolute",top:"-10px",left:"50%",transform:"translateX(-50%)",bg:"red.500",color:"white",fontSize:"xs",fontWeight:"bold",px:2,py:.5,borderRadius:"md",children:"NEW MESSAGES"})]}),lO=({align:e="left"})=>s.jsxs(de,{py:1,px:1,alignItems:"flex-start",w:"100%",justifyContent:e==="right"?"flex-end":"flex-start",spacing:2,children:[e==="left"&&s.jsx(_p,{size:"8",mr:1}),s.jsx(U,{bg:e==="right"?"blue.500":"#262626",px:3,py:2,borderRadius:"18px",borderTopLeftRadius:e==="left"?"4px":void 0,borderTopRightRadius:e==="right"?"4px":void 0,maxWidth:"75%",minWidth:"100px",children:s.jsx(xv,{noOfLines:2,spacing:"2",skeletonHeight:"3"})}),e==="right"&&s.jsx(_p,{size:"8",ml:1})]}),cO=(e=5)=>{const t=[];for(let r=0;r<e;r++){const n=Math.random()>.5?"right":"left";t.push(s.jsx(lO,{align:n},`skeleton-${r}`))}return t},dO=({reactions:e={},onAddReaction:t})=>{const r=["👍","❤️","😂","😮","😢","👏"];return s.jsxs(de,{mt:1,spacing:1,flexWrap:"wrap",children:[Object.entries(e).map(([n,o])=>s.jsxs(U,{bg:"whiteAlpha.200",borderRadius:"full",px:2,py:.5,fontSize:"xs",cursor:"pointer",_hover:{bg:"whiteAlpha.300"},onClick:()=>t(n),children:[s.jsx(L,{as:"span",mr:1,children:n}),s.jsx(L,{as:"span",fontWeight:"bold",children:o.length})]},n)),s.jsxs(uv,{trigger:"hover",placement:"top",closeOnBlur:!0,children:[s.jsx(hv,{children:s.jsx(U,{bg:"whiteAlpha.200",borderRadius:"full",px:2,py:.5,fontSize:"xs",cursor:"pointer",_hover:{bg:"whiteAlpha.300"},children:"+"})}),s.jsxs(pv,{bg:"#262626",borderColor:"#333",width:"auto",children:[s.jsx(fv,{bg:"#262626"}),s.jsx(gv,{p:2,children:s.jsx(de,{spacing:2,children:r.map(n=>s.jsx(U,{cursor:"pointer",fontSize:"lg",p:1,_hover:{bg:"whiteAlpha.200",borderRadius:"md"},onClick:()=>t(n),children:n},n))})})]})]})]})},uO=({setActiveTab:e,inSidebar:t=!1})=>{const{config:r,groups:n,messages:o,sendMessage:i,fetchMessages:a,togglePinned:l,toggleNotifications:c,isPinned:d,hasNotifications:u,setActiveGroupId:p,isWebSocketConnected:f}=ap(),{user:b}=Jt(),g=Et(),[m,x]=h.useState(!1),[y,E]=h.useState(null),[A,M]=h.useState([]),[k,w]=h.useState(""),[C,_]=h.useState(!1),[z,D]=h.useState(""),[S,P]=h.useState([]),[I,F]=h.useState([]),[G,V]=h.useState(!1),[B,Z]=h.useState(!1),Q=h.useRef(null),ue=h.useRef(null),ie=h.useRef(null),X=h.useRef(),J=n||[],Ce=J.filter(R=>R.groupName?.toLowerCase().includes(z.toLowerCase())),Se=[...Ce].sort((R,q)=>{const re=tt(R.groupId),ye=tt(q.groupId);return re&&!ye?-1:!re&&ye?1:R.groupName.localeCompare(q.groupName)}),ze=J.find(R=>R.groupId===y)?.groupName,nt=J.find(R=>R.groupId===y),ot=h.useCallback(R=>Math.floor(Math.random()*19)+2,[]),Pe=async()=>{if(!b?.id){g({title:"Not logged in",description:"Please log in again.",status:"error",duration:4e3});return}try{x(!0);let{authUrl:R}=await ir.initiateOAuth(b.id);R.includes("login_dialog")&&(console.warn("Detected outdated login_dialog endpoint, replacing with authorize endpoint"),R=R.replace("login_dialog","authorize")),R=R+(R.includes("?")?"&":"?")+"_cb="+Date.now(),console.log("Final auth URL with cache busting:",R),window.location.href=R}catch(R){console.error("Failed to initiate GroupMe OAuth",R),g({title:"Error",description:R?.response?.data?.message||"Could not start GroupMe connection",status:"error",duration:5e3})}finally{x(!1)}},Fe=h.useCallback(R=>{t&&(R.stopPropagation(),Z(!0),setTimeout(()=>{Z(!1)},100))},[t]);h.useEffect(()=>{if(!t||!ie.current)return;const R=ie.current,q=re=>{re.stopPropagation(),Z(!0),setTimeout(()=>{Z(!1)},100)};return R.addEventListener("click",q),R.addEventListener("mousedown",q),()=>{R.removeEventListener("click",q),R.removeEventListener("mousedown",q)}},[t]);const Re=h.useCallback(R=>!R||!R.length?"":R.slice(0,10).map(q=>q.id||q.messageId).join("|"),[]),xe=h.useCallback(R=>{console.log(`GroupMeChat: handleGroupSelect called with groupId: ${R}`),E(R),R?(p?.(R),a&&(console.log(`GroupMeChat: Fetching initial messages for selected group ${R}`),_(!0),M([]),a(R).then(()=>{console.log(`GroupMeChat: Finished initial fetch for group ${R}`),_(!1)}).catch(q=>{console.error(`GroupMeChat: Error during initial fetch for group ${R}:`,q),_(!1),g({title:"Error",description:"Failed to load messages.",status:"error"})})),P(q=>q.filter(re=>re!==R))):(p?.(null),M([]))},[a,p,g]);h.useEffect(()=>{X.current=xe},[xe]);const tt=h.useCallback(R=>d&&typeof d=="function"?d(R):!1,[d]),Ie=h.useCallback(R=>u&&typeof u=="function"?u(R):!0,[u]),_e=h.useCallback(R=>{l&&typeof l=="function"&&l(R)},[l]),rt=h.useCallback(R=>{c&&typeof c=="function"&&c(R)},[c]),ce=h.useCallback(R=>{if(!R)return;const q={"CLOSERS REGION":"/images/groups/IMG_8191.JPG","The Money Team":"/images/groups/IMG_8192.JPG","Cant Stop. Won't Stop.":"/images/groups/IMG_8193.JPG","Cant Stop Won't Stop":"/images/groups/IMG_8193.JPG","CANT STOP":"/images/groups/IMG_8193.JPG","MAXED OUT":"/images/groups/IMG_8194.JPG",Squadzilla:"/images/groups/IMG_8195.PNG","HOT SHOTS":"/images/groups/IMG_8016.JPG","Elevate Your Faith":"/images/groups/IMG_8196.JPG"};if(q[R])return q[R];if(R.toLowerCase().includes("cant stop")&&(R.toLowerCase().includes("won't stop")||R.toLowerCase().includes("wont stop")))return"/images/groups/IMG_8193.JPG";const re=R.toLowerCase();for(const[ye,$e]of Object.entries(q))if(re.includes(ye.toLowerCase()))return $e},[]),Be=h.useCallback(R=>{if(!R)return null;const q=ce(R.groupName);return s.jsxs(U,{position:"relative",mr:2,children:[s.jsx(Qr,{size:"md",name:R.groupName,mr:1,src:q||R.image_url,bg:!q&&!R.image_url?"gray.600":void 0,loading:"eager",ignoreFallback:!!q}),Ie(R.groupId)&&s.jsx(U,{position:"absolute",bottom:"-1px",right:"-1px",bg:"green.400",borderRadius:"full",w:"12px",h:"12px",border:"2px solid black"})]})},[Ie,ce]),Qe=h.useCallback(()=>s.jsx(he,{position:"fixed",bottom:"80px",right:"20px",spacing:2,align:"flex-end",maxWidth:"80%",zIndex:1e3,children:I.map((R,q)=>s.jsx(eO,{message:R,index:q,onMessageClick:xe},R.id))}),[I,xe]),bt=h.useCallback((R,q)=>{if(console.log(`GroupMeChat: handleGroupClick called for group ${q}`),R.target.closest(".group-menu")){console.log("GroupMeChat: Click on menu detected, not navigating");return}console.log(`GroupMeChat: Calling handleGroupSelect with groupId: ${q}`),xe(q)},[xe]),Je=h.useCallback(async()=>{if(!y||!k.trim()){g({title:"Cannot Send Message",description:y?"Message cannot be empty.":"No group selected.",status:"warning",duration:3e3,isClosable:!0});return}if(!i){g({title:"Send Not Implemented",description:"Message sending is not available",status:"info",duration:2e3,isClosable:!0});return}const R=`temp-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,q={id:R,text:k,sender_type:"user",name:"You",created_at:new Date().toISOString(),is_optimistic:!0};M(ye=>[q,...ye]);const re=k;w("");try{console.log(`GroupMeChat: Sending message to group ${y}`),await i(y,re),a&&(console.log("GroupMeChat: Message sent, fetching updated message list"),await a(y))}catch(ye){console.error("GroupMeChat: Error sending message:",ye),g({title:"Failed to Send Message",description:"Your message was not delivered. Please try again.",status:"error",duration:3e3,isClosable:!0}),M($e=>$e.filter(ut=>ut.id!==R)),w(re)}},[y,k,i,a,g]),Ue=h.useCallback(()=>{if(!ue.current)return;const{scrollTop:R,scrollHeight:q,clientHeight:re}=ue.current,ye=Math.abs(q-R-re)<30;V(!ye)},[]);h.useEffect(()=>{if(y&&o&&o[y]){const R=o[y],q=Re(A);Re(R)!==q&&(console.log(`GroupMeChat: Updating displayedMessages for group ${y} from context.`),M(R))}else y||A.length>0&&M([])},[y,o,A,Re]),h.useEffect(()=>{!G&&A.length>0&&Q.current&&Q.current.scrollIntoView({behavior:"smooth"})},[A,G]),h.useEffect(()=>{if(!o||!n)return;const R=new Set(S),q=[];n.forEach(re=>{if(!re||!re.groupId)return;const ye=o[re.groupId];if(ye&&ye.length>0){const $e=ye[0];let ut;for(let Ct=A.length-1;Ct>=0;Ct--)if(A[Ct].group_id===re.groupId){ut=A[Ct].messageId||A[Ct].id;break}const vt=$e.messageId;vt&&vt!==ut&&re.groupId!==y&&(S.includes(re.groupId)||(R.add(re.groupId),Ie(re.groupId)&&q.push({id:vt,groupId:re.groupId,groupName:re.groupName||"Unknown Group",text:$e.text||"",senderName:$e.senderName||"",timestamp:new Date($e.createdAt||Date.now())})))}}),(R.size!==S.length||q.length>0)&&P(Array.from(R)),q.length>0&&F(re=>[...q,...re].slice(0,3))},[o,n,y,A,S,Ie]),h.useEffect(()=>{if(I.length>0){const R=setTimeout(()=>{F(q=>q.slice(0,q.length-1))},5e3);return()=>clearTimeout(R)}},[I]),h.useEffect(()=>{window.emergencySelectGroupMe=(q,re)=>{console.log(`EMERGENCY GROUP SELECT from ${re}: ${q}`),X.current?.(q)};const R=q=>{q.detail&&q.detail.groupId&&(console.log(`DOCUMENT EVENT GROUP SELECT: ${q.detail.groupId}`),X.current?.(q.detail.groupId))};return document.addEventListener("groupme-select",R),()=>{window.emergencySelectGroupMe=void 0,document.removeEventListener("groupme-select",R)}},[]),h.useEffect(()=>{!y&&Se.length>0&&(console.log("GroupMeChat: auto-selecting first group",Se[0].groupId),xe(Se[0].groupId))},[y,Se,xe]);const[We,_t]=h.useState({}),dt=h.useCallback(R=>{R&&R.user_id&&R.group_id&&R.name&&(_t(q=>{const ye=(q[R.group_id]||[]).filter($e=>$e.name!==R.name);return ye.push({name:R.name,timestamp:Date.now()}),{...q,[R.group_id]:ye}}),setTimeout(()=>{_t(q=>{const ye=(q[R.group_id]||[]).filter($e=>$e.name!==R.name);if(ye.length===0){const $e={...q};return delete $e[R.group_id],$e}return{...q,[R.group_id]:ye}})},5e3))},[]);h.useEffect(()=>{if(y){const R=setInterval(()=>{if(Math.random()<.1){const q={user_id:`demo-${Math.floor(Math.random()*1e3)}`,group_id:y,name:["Alex","Taylor","Jordan","Casey","Morgan"][Math.floor(Math.random()*5)]};dt(q)}},1e4);return()=>clearInterval(R)}},[y,dt]);const Xt=h.useCallback(()=>{Q.current&&(Q.current.scrollIntoView({behavior:"smooth"}),V(!1))},[]),[st,it]=h.useState({});h.useEffect(()=>{if(y&&A.length>0){const R=setTimeout(()=>{it(q=>({...q,[y]:Date.now()}))},2e3);return()=>clearTimeout(R)}},[y,A]);const yt=h.useCallback(R=>{if(!y||!st[y])return-1;const q=st[y];for(let re=0;re<R.length;re++)if(new Date(R[re].created_at||R[re].createdAt||0).getTime()<q)return re;return-1},[y,st]),T=h.useCallback(R=>{if(!R||R.length===0)return[];const q=oO(R);if(y&&st[y]){const re=yt(R);if(re>0){let ye=0,$e=0;for(let ut=0;ut<q.length;ut++)if(q[ut].type==="message"&&($e++,$e===re)){ye=ut;break}ye>0&&q.splice(ye,0,{type:"unread"})}}return q},[y,st,yt]);if(!r||!r.accessToken)return s.jsxs(U,{p:4,bg:"#121212",color:"gray.300",h:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[s.jsx(L,{mb:4,children:"Connect your GroupMe account to start chatting."}),s.jsx(ne,{colorScheme:"blue",size:"sm",onClick:Pe,isLoading:m,children:"Connect GroupMe"})]});const W=R=>{if(console.log("EMERGENCY: Trying direct group selection by index",R),J&&J.length>R){const q=J[R];console.log("EMERGENCY: Found target group",q),xe(q.groupId)}else console.error("EMERGENCY: No group found at index",R,"from",J?.length||0,"groups")};return s.jsxs(U,{h:"100%",w:"100%",display:"flex",flexDirection:"column",position:"relative",bg:"black",ref:ie,onClick:Fe,onMouseDown:Fe,...t&&{maxHeight:"calc(100vh - 320px)",overflow:"hidden"},children:[!t&&Qe(),y?s.jsx(tO,{groupName:ze||"Unknown Group",groupAvatar:nt?.image_url,memberCount:ot(y),onBackClick:()=>xe(null)}):s.jsxs(le,{p:3,alignItems:"center",borderBottomWidth:"1px",borderColor:"#262626",flexShrink:0,bg:"#000000",...t&&{p:2,minHeight:"48px"},children:[s.jsx(Er,{src:"/images/groups/GroupMe_gradient_logo.svg.png",alt:"GroupMe",h:"28px",mr:4}),s.jsxs(hs,{flex:1,size:"sm",mr:2,children:[s.jsx(Ku,{pointerEvents:"none",children:s.jsx(lt,{as:xu,color:"gray.500"})}),s.jsx(ke,{placeholder:"Search chats",bg:"#262626",borderColor:"#262626",color:"gray.300",borderRadius:"md",fontSize:"sm",_placeholder:{color:"gray.500"},value:z,onChange:R=>D(R.target.value)})]}),s.jsx(lt,{as:kC,color:"gray.400",cursor:"pointer",_hover:{color:"white"},mr:3}),s.jsx(lt,{as:ms,color:"gray.400",cursor:"pointer",_hover:{color:"white"}})]}),s.jsxs(U,{ref:ue,flex:1,overflowY:"auto",onScroll:Ue,bg:"#000000",position:"relative",...t&&{maxHeight:"calc(100vh - 428px)"},children:[y?s.jsxs(he,{spacing:2,align:"stretch",p:3,bg:"#000000",children:[C?s.jsx(he,{spacing:2,align:"stretch",children:cO(8)}):A.length>0?s.jsxs(s.Fragment,{children:[T(A).map((R,q)=>R.type==="separator"?s.jsx(rO,{date:R.date},`sep-${q}`):R.type==="unread"?s.jsx(aO,{},`unread-${q}`):s.jsx(XR,{message:R.message,isFirstInBlock:R.isFirstInBlock,isLastInBlock:R.isLastInBlock},R.message.id||R.message.messageId||`msg-${Date.now()}-${Math.random()}`)),y&&We[y]?.map(R=>s.jsx(sO,{senderName:R.name},`typing-${R.name}-${R.timestamp}`))]}):s.jsx(L,{color:"gray.400",textAlign:"center",mt:4,children:"No messages in this group yet."}),s.jsx("div",{ref:Q})]}):s.jsxs(he,{spacing:0,align:"stretch",children:[Se.map(R=>{const q=o&&o[R.groupId]?o[R.groupId]:[],re=q.length>0?q[0]:null,ye=R.last_message?.text||re?.text||"No messages yet",$e=R.last_message?.name||re?.senderName,ut=R.last_message?.created_at||re?.createdAt,vt=R.messages_count&&R.messages_count>100?"99+":R.messages_count||0,Ct=typeof vt=="number"?vt>0:vt==="99+",yr=S.includes(R.groupId);return s.jsx(ZR,{group:R,hasNewMessages:yr,lastMessageText:ye,lastMessageSender:$e,lastMessageTimestamp:ut,unreadCount:vt,displayUnread:Ct,isPinned:tt(R.groupId),hasNotifications:Ie(R.groupId),renderGroupAvatar:Be,onGroupClick:bt,onTogglePinned:_e,onToggleNotifications:rt},R.groupId)}),Ce.length===0&&s.jsx(L,{p:4,color:"gray.500",textAlign:"center",children:z?"No chats match your search.":"No chats found."})]}),y&&G&&s.jsx(iO,{onClick:Xt})]}),s.jsx(U,{...y?{p:t?2:3,borderTopWidth:"1px",borderColor:"#262626",bg:"#1a1a1a",flexShrink:0}:{as:"nav",p:t?1:2,borderTopWidth:"1px",borderColor:"#262626",justifyContent:"space-around",alignItems:"center",bg:"#000000",flexShrink:0,display:"flex"},children:y?s.jsxs(de,{as:"form",onSubmit:R=>{R.preventDefault(),Je()},p:t?2:3,borderTopWidth:"1px",borderColor:"#262626",bg:"#1a1a1a",spacing:2,alignItems:"center",children:[s.jsx(je,{"aria-label":"Add attachment",icon:s.jsx(fC,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"}}),s.jsx(je,{"aria-label":"Add image",icon:s.jsx(hC,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"}}),s.jsx(je,{"aria-label":"Add emoji",icon:s.jsx(eb,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"}}),s.jsx(je,{"aria-label":"Add location",icon:s.jsx(mu,{}),variant:"ghost",size:"sm",color:"gray.400",_hover:{color:"white",bg:"whiteAlpha.200"}}),s.jsx(ke,{placeholder:"Send a message...",value:k,onChange:R=>w(R.target.value),flex:"1",bg:"#262626",color:"white",borderColor:"#333333",_placeholder:{color:"gray.500"},borderRadius:"full",size:"sm"}),s.jsx(ne,{colorScheme:"blue",type:"submit",isDisabled:!k.trim(),size:"sm",borderRadius:"full",children:"Send"})]}):s.jsxs(le,{as:"nav",p:2,borderTopWidth:"1px",borderColor:"#262626",justifyContent:"space-around",alignItems:"center",bg:"#000000",flexShrink:0,children:[s.jsx(lt,{as:Jx,color:"gray.400",boxSize:6,cursor:"pointer",_hover:{color:"white"}}),s.jsx(lt,{as:xu,color:"gray.400",boxSize:6,cursor:"pointer",_hover:{color:"white"}}),s.jsx(U,{bg:"blue.500",borderRadius:"full",p:2,cursor:"pointer",_hover:{bg:"blue.600"},children:s.jsx(lt,{as:ms,color:"white",boxSize:5})}),s.jsx(lt,{as:lC,color:"gray.400",boxSize:6,cursor:"pointer",_hover:{color:"white"}}),s.jsx(lt,{as:TC,color:"gray.400",boxSize:7,cursor:"pointer",_hover:{color:"white"}})]})}),!t&&!y&&Ce.length>0&&s.jsx(U,{position:"absolute",top:"70px",right:"10px",zIndex:100,backgroundColor:"red.500",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",cursor:"pointer",onClick:()=>W(0),children:"DEBUG: Click First Group"})]})},i2=v.memo(uO),hO=Object.freeze(Object.defineProperty({__proto__:null,default:i2},Symbol.toStringTag,{value:"Module"})),pO=()=>s.jsx("div",{children:s.jsx(i2,{})}),fO=oe.div`
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  max-width: 600px;
  padding-top: 20px;
  pointer-events: none;
`,gO=oe.div`
  background: ${e=>e.notificationType==="marketplace"?"rgba(75, 225, 208, 0.95)":"rgba(146, 220, 126, 0.95)"};
  color: ${e=>e.notificationType==="marketplace"?"#2C4352":"#1a472a"};
  padding: 16px 24px;
  border-radius: 12px; // More rounded corners
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  gap: 12px;
  animation: ${e=>e.isClosing?"slideUp":"slideDown"} 0.5s
    cubic-bezier(0.34, 1.56, 0.64, 1);
  margin: 0 20px;
  font-size: 16px;
  pointer-events: auto;
  will-change: transform, opacity;
  z-index: 9999;
  cursor: pointer;
  transition:
    transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.3s ease;
  border: 1px solid
    ${e=>e.notificationType==="marketplace"?"rgba(75, 225, 208, 0.4)":"rgba(34, 197, 94, 0.4)"};

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
  }

  @keyframes slideDown {
    from {
      transform: translateY(-120%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(-120%);
      opacity: 0;
    }
  }
`,mO=oe.img`
  width: 28px;
  height: 28px;
  object-fit: contain;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
`,xO=oe.div`
  font-size: 16px;
  font-weight: 600;
  flex: 1;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
`;let Un=null;const bO=e=>{let t=!1;e.play().then(()=>{console.log("Audio played successfully via standard play()"),t=!0}).catch(async r=>{if(console.warn("Standard audio play failed:",r),!t)try{e.muted=!0,await e.play(),e.muted=!1,console.log("Audio played successfully via mute/unmute strategy"),t=!0}catch(n){console.warn("Muted play attempt failed:",n)}if(!t){const n=()=>{e.play().then(()=>console.log("Audio played after user interaction")).catch(o=>console.error("Even with interaction, playback failed:",o)),document.removeEventListener("click",n),document.removeEventListener("touchstart",n),document.removeEventListener("keydown",n)};document.addEventListener("click",n,{once:!0}),document.addEventListener("touchstart",n,{once:!0}),document.addEventListener("keydown",n,{once:!0}),console.log("Added user interaction listeners for audio playback")}})},yO=()=>{if(!Un){Un=new Audio("/sounds/Cash app sound.mp3"),Un.volume=.3,Un.preload="auto";const e=()=>{Un?.load(),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("click",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}return Un},vO=({message:e,onClose:t,duration:r=8e3,notificationType:n="nextgen"})=>{const[o,i]=h.useState(!1),a=h.useRef(null),l=navigator.userAgent.includes("Chrome");h.useEffect(()=>{l?a.current=yO():(a.current=new Audio("/sounds/Cash app sound.mp3"),a.current.volume=.3),a.current&&(a.current.currentTime=0,l?bO(a.current):a.current.play().catch(u=>{console.error("Error playing notification sound:",u)}));const d=setTimeout(()=>{i(!0),setTimeout(t,300)},r);return()=>{clearTimeout(d),!l&&a.current&&(a.current.pause(),a.current=null)}},[r,t,l]);const c=()=>{i(!0),setTimeout(t,300),l&&a.current&&a.current.paused&&a.current.play().catch(()=>{})};return s.jsx(fO,{children:s.jsxs(gO,{isClosing:o,onClick:c,notificationType:n,children:[s.jsx(mO,{src:n==="marketplace"?"/images/marketplace.png":"/images/nextgen.png",alt:n==="marketplace"?"Marketplace":"NextGen"}),s.jsx(xO,{children:e})]})})},a2=h.createContext(void 0),wO=()=>{const e=h.useContext(a2);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e},CO=({children:e})=>{const[t,r]=h.useState([]),n=h.useCallback((i,a)=>{const l=Math.random().toString(36).substr(2,9);r(c=>[...c,{id:l,message:i,notificationType:a}])},[]),o=h.useCallback(i=>{r(a=>a.filter(l=>l.id!==i))},[]);return s.jsxs(a2.Provider,{value:{showNotification:n},children:[e,t.map(i=>s.jsx(vO,{message:i.message,onClose:()=>o(i.id),notificationType:i.notificationType},i.id))]})},SO=()=>{const e=Qt(),[t,r]=h.useState(null),[n,o]=h.useState(!0),[i,a]=h.useState(null),[l,c]=h.useState(!1);h.useEffect(()=>{d()},[]);const d=async()=>{console.log("=== GroupMe OAuth Callback Page ==="),console.log("Full URL:",window.location.href),console.log("Hash:",window.location.hash);const u={url:window.location.href,hash:window.location.hash,hostname:window.location.hostname,pathname:window.location.pathname};a(JSON.stringify(u,null,2));try{const p=new URLSearchParams(window.location.hash.substring(1)),f=new URLSearchParams(window.location.search),b=f.get("access_token")||p.get("access_token"),g=f.get("state")||p.get("state")||"";if(b)await ir.saveAccessToken(b);else if(f.get("code")){const m=f.get("code");await ir.handleOAuthCode(m,g)}else throw new Error("GroupMe callback missing both access_token and code parameters.");c(!0),o(!1)}catch(p){r(p.message||"Failed to connect GroupMe"),o(!1)}};return s.jsx(U,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",bg:"gray.50",children:s.jsx(he,{spacing:4,p:8,bg:"white",borderRadius:"lg",boxShadow:"md",maxWidth:"600px",width:"100%",children:n?s.jsxs(s.Fragment,{children:[s.jsx(mt,{size:"xl",color:"blue.500",thickness:"4px"}),s.jsx(L,{fontSize:"lg",fontWeight:"medium",children:"Connecting your GroupMe account..."}),s.jsx(L,{fontSize:"sm",color:"gray.600",children:"Please wait while we complete the authorization"})]}):t?s.jsxs(s.Fragment,{children:[s.jsxs($t,{status:"error",borderRadius:"md",children:[s.jsx(Yt,{}),t]}),i&&s.jsxs(U,{mt:4,p:3,bg:"gray.50",borderRadius:"md",width:"100%",overflowX:"auto",children:[s.jsx(L,{fontSize:"sm",fontWeight:"bold",mb:2,children:"Debug Information:"}),s.jsx(bv,{display:"block",whiteSpace:"pre",p:2,borderRadius:"md",children:i})]}),s.jsx(ne,{mt:4,onClick:()=>e("/integrations"),children:"Back to Integrations"})]}):l?s.jsxs(s.Fragment,{children:[s.jsxs($t,{status:"success",borderRadius:"md",children:[s.jsx(Yt,{}),"GroupMe successfully connected! You can close this tab and open the chat from the CRM sidebar."]}),s.jsx(ne,{mt:4,colorScheme:"green",onClick:()=>e("/leads"),children:"Go to Leads"})]}):null})})};function jO(){const{updateNotes:e}=mh(),{updateNotes:t}=gh(),r=Mr(),n=v.useRef({});h.useEffect(()=>{const o=i=>{let a=i.data;try{typeof a=="string"&&(a=JSON.parse(a))}catch{}if(!a||a.type!=="LEAD_NOTES_UPDATED")return;const{leadId:l,notes:c,updatedAt:d}=a;if(!(typeof l!="string"||typeof c!="string")){if(d){const u=new Date(d).getTime(),p=n.current[l]||0;if(u<p)return;n.current[l]=u}e&&e(l,c),t&&t(l,c),r.getQueryCache().findAll({queryKey:["leads"]}).forEach(u=>{const p=u.state.data;if(p&&Array.isArray(p.leads)){const f=p.leads.map(b=>b._id===l?{...b,notes:c}:b);u.setData({...p,leads:f})}})}};return window.addEventListener("message",o),()=>window.removeEventListener("message",o)},[e,t,r])}function kO(){return jO(),null}const EO=({onPasscodeValid:e})=>{const[t,r]=h.useState(""),[n,o]=h.useState(!1),[i,a]=h.useState(""),l=async c=>{c.preventDefault(),o(!0),a("");try{const d=await Oe.post("/api/auth/validate-passcode",{code:t.trim()});d.data.success?(localStorage.setItem("prelogin_passcode_valid","true"),e()):a(d.data.message||"Invalid invite code")}catch(d){a(d.response?.data?.message||"Invalid invite code")}finally{o(!1)}};return s.jsx("div",{className:"prelogin-outer",children:s.jsxs("form",{className:"prelogin-card",onSubmit:l,children:[s.jsx("h2",{className:"prelogin-title",children:"Enter your invite code"}),s.jsx("p",{className:"prelogin-subtitle",children:"Please enter the invite code provided to you to access Crokodial"}),s.jsx("input",{type:"text",className:"prelogin-input",placeholder:"Enter invite code (e.g., ABC12345)",value:t,onChange:c=>r(c.target.value.toUpperCase()),disabled:n,autoFocus:!0,maxLength:20}),i&&s.jsx("div",{className:"prelogin-error",children:i}),s.jsx("button",{className:"prelogin-btn",type:"submit",disabled:n||!t.trim(),children:n?"Validating...":"Continue"})]})})},_O=()=>s.jsxs("div",{style:{padding:"2rem"},children:[s.jsx("h1",{children:"Page One (placeholder)"}),s.jsx("p",{children:"This page will be populated later."})]}),TO=()=>s.jsxs("div",{style:{padding:"2rem"},children:[s.jsx("h1",{children:"Page Two (placeholder)"}),s.jsx("p",{children:"This page will be populated later."})]}),AO=()=>{const[e,t]=h.useState("loading"),[r,n]=h.useState(""),[o,i]=h.useState(""),a=Qt();h.useEffect(()=>{(async()=>{console.log("=== GroupMeCallbackPage: Handling OAuth callback ==="),console.log("URL:",window.location.href),console.log("Hash:",window.location.hash),console.log("Search params:",window.location.search);try{const u=sessionStorage.getItem("groupme_auth_token_backup");u?(console.log("GroupMeCallbackPage: Restoring auth token from backup"),localStorage.setItem("token",u)):console.warn("No backup token found in sessionStorage")}catch(u){console.error("Error accessing sessionStorage:",u)}const d={url:window.location.href,hash:window.location.hash?"present (length: "+window.location.hash.length+")":"missing",search:window.location.search,sessionStorageKeys:Object.keys(sessionStorage),hasBackupToken:!!sessionStorage.getItem("groupme_auth_token_backup"),hasLocalToken:!!localStorage.getItem("token")};i(JSON.stringify(d,null,2));try{if(await ir.handleImplicitCallback()){console.log("GroupMeCallbackPage: Token saved successfully"),t("success");try{const p=sessionStorage.getItem("groupme_return_url")||"/chat";sessionStorage.removeItem("groupme_auth_token_backup"),sessionStorage.removeItem("groupme_auth_in_progress"),sessionStorage.removeItem("groupme_return_url"),console.log("Removed temporary OAuth data from sessionStorage"),setTimeout(()=>{try{console.log("Navigating to:",p),a(p)}catch(f){console.error("Navigation error:",f)}},1500)}catch(p){console.warn("Could not clean up sessionStorage:",p),setTimeout(()=>a("/chat"),1500)}}else console.error("GroupMeCallbackPage: Failed to save token"),t("error"),n("Failed to save GroupMe token. Please try again.")}catch(u){console.error("GroupMeCallbackPage: Error handling callback:",u),t("error"),n(u.message||"An unexpected error occurred. Please try again.")}})()},[a]);const l=()=>{try{sessionStorage.removeItem("groupme_auth_in_progress"),sessionStorage.removeItem("groupme_auth_user_id"),sessionStorage.removeItem("groupme_auth_timestamp")}catch(c){console.warn("Failed to clean up sessionStorage:",c)}a("/chat")};return s.jsxs(U,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",p:4,bg:"gray.50",children:[e==="loading"&&s.jsxs(s.Fragment,{children:[s.jsx(mt,{size:"xl",mb:4}),s.jsx(Me,{size:"md",mb:2,children:"Connecting to GroupMe..."}),s.jsx(L,{children:"Please wait while we complete the connection."})]}),e==="success"&&s.jsxs(s.Fragment,{children:[s.jsxs($t,{status:"success",borderRadius:"md",mb:4,children:[s.jsx(Yt,{}),"GroupMe connected successfully!"]}),s.jsx(L,{mb:4,children:"Redirecting you back to the chat..."}),s.jsx(mt,{size:"sm",mb:4}),s.jsx(ne,{colorScheme:"blue",onClick:()=>a("/chat"),children:"Go to Chat Now"})]}),e==="error"&&s.jsxs(he,{spacing:4,align:"center",children:[s.jsxs($t,{status:"error",borderRadius:"md",mb:2,children:[s.jsx(Yt,{}),"Connection failed"]}),s.jsx(L,{mb:2,children:r}),s.jsx(ne,{colorScheme:"blue",onClick:l,children:"Return to Chat"}),o&&s.jsxs(U,{mt:6,p:4,bg:"gray.100",borderRadius:"md",maxW:"600px",w:"100%",overflowX:"auto",children:[s.jsx(L,{fontWeight:"bold",mb:2,children:"Debug Information:"}),s.jsx(U,{as:"pre",fontSize:"xs",whiteSpace:"pre-wrap",children:o})]})]})]})};class RO{constructor(){this.socket=null,this.reconnectTimer=null,this.listeners=new Map,this.connectionStatusListeners=new Set,this.isConnected=!1,this.pendingMessages=[],this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.heartbeatInterval=null,this.lastHeartbeatResponse=0,this.recentNotifications=[],this.missedNotificationsChecked=!1,this.loadRecentNotifications(),localStorage.getItem("token")&&this.connect(),window.addEventListener("auth_token_changed",r=>{r.detail?.token?this.connect():this.disconnect()}),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),this.startHeartbeat()}connect(){if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)){console.log("[WebSocket] connect() called but socket already open/connecting");return}if(this.socket){try{this.socket.close()}catch{}this.socket=null}const t=window.location.protocol==="https:"?"wss:":"ws:",r=window.location.host;console.log(`[WebSocket] Connecting to ${t}//${r}`);try{this.socket=new WebSocket(`${t}//${r}`),this.socket.onopen=this.handleOpen.bind(this),this.socket.onmessage=this.handleMessage.bind(this),this.socket.onclose=this.handleClose.bind(this),this.socket.onerror=this.handleError.bind(this)}catch(n){console.error("[WebSocket] Connection error",n),this.scheduleReconnect()}}disconnect(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onclose=null,this.socket.onerror=null,(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)&&this.socket.close(),this.socket=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.setConnected(!1)}addMessageListener(t,r){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r),t==="new_lead_notification"&&!this.missedNotificationsChecked&&this.checkForMissedNotifications(),()=>{const n=this.listeners.get(t);n&&(n.delete(r),n.size===0&&this.listeners.delete(t))}}addConnectionStatusListener(t){return this.connectionStatusListeners.add(t),t(this.isConnected),()=>{this.connectionStatusListeners.delete(t)}}isWebSocketConnected(){return this.isConnected}checkForNewLeads(){console.log("[WebSocket] Manually checking for new leads"),this.checkForMissedNotifications(!0)}handleOpen(){console.log("[WebSocket] Connected"),this.setConnected(!0),this.reconnectAttempts=0,this.lastHeartbeatResponse=Date.now();const t=localStorage.getItem("token");t&&this.socket&&(this.socket.send(JSON.stringify({type:"authenticate",token:t})),console.log("[WebSocket] Sent authentication message")),this.sendPendingMessages(),setTimeout(()=>this.checkForMissedNotifications(),2e3)}handleMessage(t){try{const r=JSON.parse(t.data);if(console.log("[WebSocket] Received message:",r),this.lastHeartbeatResponse=Date.now(),r.type==="auth_success")console.log("[WebSocket] Authentication successful");else if(r.type==="auth_failure"){console.error("[WebSocket] Authentication failed:",r.message),this.disconnect();return}if(r.type==="new_lead_notification"&&this.storeNotification(r),r.type&&this.listeners.has(r.type)){const n=this.listeners.get(r.type);n&&n.forEach(o=>{try{o(r)}catch(i){console.error(`[WebSocket] Error in listener for ${r.type}:`,i)}})}window.dispatchEvent(new MessageEvent("message",{data:t.data}))}catch(r){console.error("[WebSocket] Error parsing message:",r,t.data)}}handleClose(t){console.log(`[WebSocket] Connection closed: ${t.code} ${t.reason}`),this.setConnected(!1),this.socket=null,this.scheduleReconnect()}handleError(t){console.error("[WebSocket] Error:",t)}scheduleReconnect(){if(this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectAttempts<this.maxReconnectAttempts){const t=Math.min(1e3*Math.pow(1.5,this.reconnectAttempts),3e4);console.log(`[WebSocket] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts+1}/${this.maxReconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectAttempts++,this.connect()},t)}else console.error(`[WebSocket] Max reconnection attempts (${this.maxReconnectAttempts}) reached`)}setConnected(t){this.isConnected!==t&&(this.isConnected=t,this.connectionStatusListeners.forEach(r=>{try{r(t)}catch(n){console.error("[WebSocket] Error in connection status listener:",n)}}),t&&this.checkForMissedNotifications())}sendPendingMessages(){if(this.socket?.readyState===WebSocket.OPEN)for(;this.pendingMessages.length>0;){const t=this.pendingMessages.shift();t&&(this.socket.send(JSON.stringify(t)),console.log("[WebSocket] Sent pending message:",t))}}handleVisibilityChange(){document.visibilityState==="visible"&&(console.log("[WebSocket] Page became visible, checking for missed notifications"),this.checkForMissedNotifications(),this.isConnected||(console.log("[WebSocket] Reconnecting due to page becoming visible"),this.connect()))}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{const t=Date.now();if(this.isConnected&&t-this.lastHeartbeatResponse>6e4&&(console.log("[WebSocket] No heartbeat response, reconnecting"),this.disconnect(),this.connect()),this.isConnected&&this.socket?.readyState===WebSocket.OPEN)try{this.socket.send(JSON.stringify({type:"ping"}))}catch(r){console.error("[WebSocket] Error sending ping:",r)}},3e4)}storeNotification(t){if(t.type!=="new_lead_notification")return;const r=`${t.data.leadId}-${t.timestamp}`;this.recentNotifications.some(n=>n.id===r)||(this.recentNotifications.push({id:r,type:t.type,data:t.data,timestamp:t.timestamp,displayed:!1}),this.recentNotifications.length>50&&this.recentNotifications.shift(),this.saveRecentNotifications())}loadRecentNotifications(){try{const t=localStorage.getItem("recentNotifications");t&&(this.recentNotifications=JSON.parse(t),console.log(`[WebSocket] Loaded ${this.recentNotifications.length} stored notifications`))}catch(t){console.error("[WebSocket] Error loading stored notifications:",t),this.recentNotifications=[]}}saveRecentNotifications(){try{localStorage.setItem("recentNotifications",JSON.stringify(this.recentNotifications))}catch(t){console.error("[WebSocket] Error saving notifications:",t)}}async checkForMissedNotifications(t=!1){if(!t&&this.missedNotificationsChecked)return;this.missedNotificationsChecked=!0,console.log("[WebSocket] Checking for missed notifications");let r=0;if(this.recentNotifications.forEach(n=>{if(!n.displayed&&n.type==="new_lead_notification"&&(n.displayed=!0,r++,this.listeners.has("new_lead_notification"))){const o=this.listeners.get("new_lead_notification");o&&o.forEach(i=>{try{i({type:n.type,data:n.data,timestamp:n.timestamp})}catch(a){console.error("[WebSocket] Error forwarding stored notification:",a)}})}}),r>0&&(console.log(`[WebSocket] Displayed ${r} unseen notifications from storage`),this.saveRecentNotifications()),t)try{const n=this.getLastCheckTimestamp(),o=await fetch(`/api/leads/recent?since=${n}&source=NextGen`);if(o.ok){const i=await o.json();console.log(`[WebSocket] API returned ${i.length} recent leads`),i.forEach(a=>{const l=a._id;if(!this.recentNotifications.find(d=>d.data.leadId===l)){console.log(`[WebSocket] Found new lead via API polling: ${a.name}`);const d={type:"new_lead_notification",data:{leadId:a._id,name:a.name,source:a.source,isNew:!0},timestamp:a.createdAt||new Date().toISOString()};if(this.storeNotification(d),this.listeners.has("new_lead_notification")){const u=this.listeners.get("new_lead_notification");u&&u.forEach(p=>{try{p(d)}catch(f){console.error("[WebSocket] Error forwarding API notification:",f)}})}}})}else console.error("[WebSocket] Error fetching recent leads:",o.statusText)}catch(n){console.error("[WebSocket] Error checking for missed leads:",n)}this.updateLastCheckTimestamp()}getLastCheckTimestamp(){const t=localStorage.getItem("lastNotificationCheck");return t?parseInt(t,10):Date.now()-5*60*1e3}updateLastCheckTimestamp(){localStorage.setItem("lastNotificationCheck",Date.now().toString())}}const ei=new RO,OO=()=>{const{showNotification:e}=wO(),{soundEnabled:t}=Jy(),r=Mr(),[n]=h.useState(new Set),[o,i]=h.useState(!1),[a,l]=h.useState(!1),[c,d]=h.useState(0),u=h.useRef(Date.now()),p=h.useRef(0),f=3e3,b=h.useRef(null);h.useEffect(()=>{if(!b.current){const x=new Audio("/sounds/Cash app sound.mp3");x.preload="auto",x.volume=.3,b.current=x}},[]);const g=(x,y,E)=>({_id:x,name:ve(y),firstName:y.split(" ")[0]||"",lastName:y.split(" ").slice(1).join(" "),email:"",phone:"",status:"New Lead",source:ve(E),createdAt:new Date().toISOString()});h.useEffect(()=>{console.log("[LeadNotification] Component mounted");const x=k=>{try{console.log("[WS] new_lead_notification payload:",JSON.stringify(k,null,2));const{leadId:w,name:C,source:_,isNew:z}=k.data,D=`${w}-${k.timestamp}`;if(n.has(D)){console.log("[LeadNotification] Skipping duplicate notification:",C);return}if(z&&_.toLowerCase()==="nextgen"){if(console.log("[LeadNotification] Showing notification for new NextGen lead:",C),t&&b.current)try{b.current.currentTime=0,b.current.play()}catch(P){console.warn("[Sound] play blocked",P)}e(`New NextGen Lead! ${C}`,"nextgen"),r.getQueriesData({queryKey:["leads"]}).forEach(([P,I])=>{const F=I;if(!F||!F.leads)return;const G=F.leads;if(!Array.isArray(G))return;if(!G.find(B=>B._id===w)){const B=[g(w,C,_),...G];F.pagination?.limit&&B.length>F.pagination.limit&&B.pop(),r.setQueryData(P,{...F,leads:B,pagination:F.pagination?{...F.pagination,total:F.pagination.total+1}:F.pagination})}}),setTimeout(()=>{r.invalidateQueries({queryKey:["leads"]})},1e4),p.current++,d(p.current),n.add(D),setTimeout(()=>{n.delete(D)},6e4);try{if("Notification"in window&&Notification.permission==="granted"){const P=new Notification("New NextGen Lead!",{body:C,icon:"/images/nextgen.png",silent:!0});setTimeout(()=>P.close(),8e3)}else"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission()}catch(P){console.error("[Notification API] Error:",P)}}}catch(w){console.error("[LeadNotification] FATAL: Error processing notification:",w)}},y=ei.addConnectionStatusListener(k=>{console.log("[LeadNotification] WebSocket connection status:",k),i(k)}),E=ei.addMessageListener("new_lead_notification",x),A=k=>{try{const w=typeof k.data=="string"?JSON.parse(k.data):k.data;w?.type==="new_lead_notification"&&(console.log("[LeadNotification] Received notification via window event"),x(w))}catch{}};window.addEventListener("message",A);const M=k=>{if(k.shiftKey&&k.key==="D"){const w=C=>{C.key==="N"&&(l(_=>!_),console.log("[LeadNotification] Debug mode:",!a)),window.removeEventListener("keydown",w)};window.addEventListener("keydown",w,{once:!0})}};return window.addEventListener("keydown",M),()=>{console.log("[LeadNotification] Component unmounting"),y(),E(),window.removeEventListener("message",A),window.removeEventListener("keydown",M)}},[e,n,a,r,t]),h.useEffect(()=>{if(o)return;console.log(`[LeadNotification] Starting fallback polling every ${f}ms for disconnected WebSocket`);const x=setInterval(async()=>{try{const y=Date.now(),E=u.current;u.current=y;const A=await fetch(`/api/leads/recent?since=${E}&source=NextGen`);if(!A.ok)throw new Error(`HTTP error ${A.status}`);const M=await A.json();console.log(`[LeadNotification] Poll found ${M.length} leads since last check`),M.forEach(k=>{const w=`${k._id}-${k.createdAt}`;n.has(w)||(console.log("[LeadNotification] Showing notification from polling:",k.name),e(`New NextGen Lead! ${k.name}`,"nextgen"),n.add(w),p.current++,d(p.current),setTimeout(()=>{n.delete(w)},6e4))})}catch(y){console.error("[LeadNotification] Error polling for notifications:",y)}},f);return()=>{clearInterval(x)}},[o,e,n,f]);const m=()=>{console.log("[LeadNotification] Manual refresh requested"),ei.checkForNewLeads()};return a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{position:"fixed",bottom:50,right:10,padding:"8px 12px",borderRadius:"4px",fontSize:"12px",background:"#f5f5f5",border:"1px solid #ddd",zIndex:9999,width:"220px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Notification Status:"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:o?"#4CAF50":"#f44336"}}),s.jsx("div",{children:o?"Connected":"Disconnected"})]}),s.jsxs("div",{style:{marginTop:"4px",fontSize:"11px"},children:["Notifications: ",c]}),s.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"8px",flexWrap:"wrap"},children:[s.jsx("button",{onClick:m,style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Check for Leads"}),s.jsx("button",{onClick:()=>{ei.connect()},style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Reconnect"}),s.jsx("button",{onClick:()=>{const x={type:"new_lead_notification",data:{leadId:`test-${Date.now()}`,name:"Test Lead",source:"NextGen",isNew:!0},timestamp:new Date().toISOString()};window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify(x)}))},style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Test Notification"})]}),s.jsx("div",{style:{fontSize:"10px",marginTop:"8px",opacity:.7},children:"Press Shift+D+N to hide this panel"})]}),s.jsx("div",{style:{position:"fixed",bottom:10,right:10,padding:"2px 6px",borderRadius:"4px",fontSize:"10px",background:o?"#4CAF50":"#f44336",color:"white",opacity:.7,display:a?"none":"block"},children:o?"WS Connected":"WS Disconnected"})]}):s.jsx("div",{onClick:m,style:{position:"fixed",bottom:10,right:10,width:"20px",height:"20px",borderRadius:"50%",background:"transparent",cursor:"pointer",zIndex:9999,opacity:0}})};f7();const PO=new gx({defaultOptions:{queries:{retry:1,staleTime:1e4,gcTime:3e5}}});function MO(){return h.useEffect(()=>{},[]),null}let Xd=class extends v.Component{constructor(t){super(t),this.state={hasError:!1,errorInfo:""}}static getDerivedStateFromError(t){return t&&typeof t=="object"&&"message"in t&&typeof t.message=="string"&&(t.message.includes("auth")||t.message.includes("token"))?{hasError:!1,errorInfo:""}:{hasError:!0,errorInfo:t&&typeof t=="object"&&"message"in t&&typeof t.message=="string"?t.message:"Unknown error"}}componentDidCatch(t,r){console.error("App Error:",t,r)}componentDidUpdate(t,r){this.state.hasError&&window.location.pathname!=="/login"&&r.hasError!==this.state.hasError&&this.setState({hasError:!1,errorInfo:""})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-yellow-50",children:s.jsxs("div",{className:"p-8 bg-white rounded-lg shadow-lg text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),s.jsx("p",{className:"mb-4",children:"Please try refreshing the page or logging in again."}),s.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("token_checked"),localStorage.removeItem("user_data"),this.setState({hasError:!1,errorInfo:""}),window.location.href="/login"},className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Go to Login"})]})}):this.props.children}};function DO({children:e}){const{user:t,isLoading:r}=Jt(),n=ks(),[o,i]=h.useState("pending"),a=localStorage.getItem("token"),l=new URLSearchParams(n.search),c=l.get("detached")==="true",d=l.get("direct")==="true",u=l.get("bypass")==="auth";return h.useEffect(()=>{if(!r){const p=setTimeout(()=>{i("done")},500);return()=>clearTimeout(p)}},[r]),h.useEffect(()=>{const p=setTimeout(()=>{i("done")},3e3);return()=>clearTimeout(p)},[]),a?s.jsx(s.Fragment,{children:e}):c||d&&u?s.jsx(s.Fragment,{children:e}):r&&o==="pending"?s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-yellow-50",children:s.jsxs("div",{className:"p-8 bg-white rounded-lg shadow-lg text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto"}),s.jsx("p",{className:"mt-4 text-lg font-semibold text-gray-800",children:"Loading Crokodial..."}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please wait while we verify your session"})]})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(ox,{to:"/login",replace:!0})}const Ut=({children:e})=>s.jsx(DO,{children:e});function IO(){const[e,t]=h.useState(!1);h.useEffect(()=>{localStorage.getItem("prelogin_passcode_valid")==="true"&&t(!0)},[]);const r=()=>{t(!0)};return h.useEffect(()=>{const n=document.getElementById("croc-preloader");n&&(n.classList.add("fade-out"),setTimeout(()=>n.remove(),400))},[]),s.jsx(Xd,{children:s.jsx(bS,{children:s.jsx(Sv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(xx,{client:PO,children:s.jsx(z4,{children:s.jsx(A3,{children:s.jsx(z5,{children:s.jsx(P7,{children:s.jsx(T7,{children:s.jsx(CO,{children:s.jsx($3,{children:s.jsxs(B3,{children:[s.jsx(kO,{}),s.jsx(MO,{}),s.jsx(Xd,{children:s.jsx(OO,{})}),s.jsx(jv,{children:e?s.jsxs(s.Fragment,{children:[s.jsx(wt,{path:"/login",element:s.jsx(B4,{})}),s.jsx(wt,{path:"/",element:s.jsx(ox,{to:"/login"})}),s.jsx(wt,{path:"/groupme/callback",element:s.jsx(SO,{})}),s.jsx(wt,{path:"/groupme/handle-callback",element:s.jsx(AO,{})}),s.jsx(wt,{path:"/leads",element:s.jsx(Ut,{children:s.jsx(rr,{children:s.jsx(Xd,{children:s.jsx(xS,{})})})})}),s.jsx(wt,{path:"/clients",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(VR,{})]})})}),s.jsx(wt,{path:"/dialer",element:s.jsx(Ut,{children:s.jsx(rr,{children:s.jsx(sr,{})})})}),s.jsx(wt,{path:"/gmail",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(zR,{})]})})}),s.jsx(wt,{path:"/groupme",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(pO,{})]})})}),s.jsx(wt,{path:"/mass-text",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(tR,{})]})})}),s.jsx(wt,{path:"/spreadsheet",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(NR,{})]})})}),s.jsx(wt,{path:"/csv-upload",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(LR,{})]})})}),s.jsx(wt,{path:"/integrations",element:s.jsx(Ut,{children:s.jsxs(rr,{children:[s.jsx(sr,{}),s.jsx(WR,{})]})})}),s.jsx(wt,{path:"/settings",element:s.jsxs(Ut,{children:[s.jsx(sr,{}),s.jsx(h7,{})]})}),s.jsx(wt,{path:"/page-one",element:s.jsx(Ut,{children:s.jsx(rr,{children:s.jsx(_O,{})})})}),s.jsx(wt,{path:"/page-two",element:s.jsx(Ut,{children:s.jsx(rr,{children:s.jsx(TO,{})})})})]}):s.jsx(wt,{path:"*",element:s.jsx(EO,{onPasscodeValid:r})})})]})})})})})})})})})})})})}class NO extends v.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("[ErrorBoundary] Uncaught error:",t,r),this.setState({errorInfo:r})}render(){return this.state.hasError?s.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#1a1a1a",color:"white",fontFamily:"sans-serif",zIndex:99999},children:[s.jsx("h1",{style:{color:"#ff4d4d",fontSize:"2em"},children:"Something went wrong."}),s.jsx("p",{style:{marginTop:"1em",fontSize:"1.2em"},children:"An unexpected error occurred. Please try reloading the page."}),s.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"2em",padding:"10px 20px",fontSize:"1em",color:"white",backgroundColor:"#ff4d4d",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Reload Page"}),!1]}):this.props.children}}const Zd="#EFBF04",LO=yv({components:{Menu:{baseStyle:{item:{_hover:{bg:Zd},_focus:{bg:Zd},_active:{bg:Zd}}}}}}),l2=h.createContext(void 0),FO=({children:e})=>{const[t,r]=h.useState(()=>{const a=localStorage.getItem("appZoom");return a&&Number(a)||1});h.useEffect(()=>{localStorage.setItem("appZoom",String(t)),document.documentElement.style.setProperty("--zoom",String(t)),document.documentElement.style.zoom=String(t)},[t]);const n=()=>r(a=>Math.min(a+.1,3)),o=()=>r(a=>Math.max(a-.1,.5)),i=()=>r(1);return s.jsx(l2.Provider,{value:{zoom:t,zoomIn:n,zoomOut:o,resetZoom:i},children:e})},zO=()=>{const e=h.useContext(l2);if(!e)throw new Error("useZoom must be used within ZoomProvider");return e};window.addEventListener("touchmove",e=>{p3()&&e.preventDefault()},{passive:!1});window.addEventListener("keydown",e=>{if(e.ctrlKey&&!e.shiftKey){const{zoomIn:t,zoomOut:r,resetZoom:n}=require("./context/ZoomContext")}});const $O=new gx,BO=()=>{const{zoomIn:e,zoomOut:t,resetZoom:r}=zO();return s.jsxs("div",{style:{position:"fixed",top:10,right:10,zIndex:1e4,display:"flex",gap:"6px"},children:[s.jsx("button",{onClick:t,style:{padding:"4px 8px"},children:"-"}),s.jsx("button",{onClick:e,style:{padding:"4px 8px"},children:"+"})]})};_v.createRoot(document.getElementById("root")).render(s.jsx(v.StrictMode,{children:s.jsx(vv,{theme:LO,children:s.jsx(xx,{client:$O,children:s.jsx(g7,{children:s.jsx(k7,{children:s.jsx(P3,{children:s.jsx(F3,{children:s.jsxs(FO,{children:[s.jsx(NO,{children:s.jsx(IO,{})}),s.jsx(BO,{})]})})})})})})})}));(()=>{const e=document.getElementById("croc-preloader");if(!e)return;const t=1e3,r=4e3,n=e.querySelector("img");let o=!1;const i=()=>{o||(o=!0,e.classList.add("fade-out"),setTimeout(()=>e.remove(),400))};setTimeout(i,t),n&&!n.complete&&(n.onload=i,n.onerror=i),setTimeout(i,r)})();console.log("Initializing WebSocket service...");window.addEventListener("error",e=>{console.error("GLOBAL UNCAUGHT ERROR:",e.error)});window.addEventListener("unhandledrejection",e=>{console.error("GLOBAL UNHANDLED REJECTION:",e.reason)});{const e=String.prototype.replace;String.prototype.replace=function(...t){return this==null?(console.error("[NULL-REPLACE] String.replace called on",this,`
Stack:`,new Error().stack?.split(`
`).slice(2,8).join(`
`)),""):e.apply(this,t)}}});export default qO();
//# sourceMappingURL=index-BXPzBi5K.js.map
